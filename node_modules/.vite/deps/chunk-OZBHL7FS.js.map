{
  "version": 3,
  "sources": ["../../merge/lib/src/index.js", "../../simple-peer/simplepeer.min.js", "../../ansi-colors/symbols.js", "../../ansi-colors/index.js", "../../base64-js/index.js", "../../ieee754/index.js", "../../buffer/index.js", "../../flexsearch/dist/flexsearch.bundle.js", "../../balanced-match/index.js", "../../brace-expansion/index.js", "../../@blocksuite/global/src/config/consts/platform.ts", "../../@lit/reactive-element/src/css-tag.ts", "../../@lit/reactive-element/src/reactive-element.ts", "../../lit-html/src/lit-html.ts", "../../lit-element/src/lit-element.ts", "../../@blocksuite/global/src/config/icons/database.ts", "../../@blocksuite/global/src/config/icons/edgeless.ts", "../../@blocksuite/global/src/config/icons/import-export.ts", "../../@blocksuite/global/src/config/icons/utils.ts", "../../@blocksuite/global/src/config/icons/text.ts", "../../@blocksuite/global/src/config/consts/block-hub.ts", "../../@blocksuite/global/src/config/consts.ts", "../../@blocksuite/global/src/utils/disposable.ts", "../../@blocksuite/global/src/utils/slot.ts", "../../@blocksuite/global/src/utils/web.ts", "../../@blocksuite/global/src/utils.ts", "../../@blocksuite/store/src/awareness.ts", "../../lib0/math.js", "../../lib0/binary.js", "../../lib0/webcrypto.js", "../../lib0/random.js", "../../nanoid/index.browser.js", "../../@blocksuite/store/src/utils/id-generator.ts", "../../zod/lib/index.mjs", "../../lib0/map.js", "../../lib0/set.js", "../../lib0/array.js", "../../lib0/observable.js", "../../lib0/string.js", "../../lib0/conditions.js", "../../lib0/storage.js", "../../lib0/object.js", "../../lib0/function.js", "../../lib0/environment.js", "../../lib0/number.js", "../../lib0/error.js", "../../lib0/decoding.js", "../../lib0/buffer.js", "../../lib0/encoding.js", "../../lib0/time.js", "../../lib0/promise.js", "../../lib0/pair.js", "../../lib0/dom.js", "../../lib0/eventloop.js", "../../lib0/symbol.js", "../../lib0/logging.common.js", "../../lib0/logging.js", "../../lib0/iterator.js", "../../yjs/src/utils/AbstractConnector.js", "../../yjs/src/utils/DeleteSet.js", "../../yjs/src/utils/Doc.js", "../../yjs/src/utils/UpdateDecoder.js", "../../yjs/src/utils/UpdateEncoder.js", "../../yjs/src/utils/encoding.js", "../../yjs/src/utils/EventHandler.js", "../../yjs/src/utils/ID.js", "../../yjs/src/utils/isParentOf.js", "../../yjs/src/utils/logging.js", "../../yjs/src/utils/PermanentUserData.js", "../../yjs/src/utils/RelativePosition.js", "../../yjs/src/utils/Snapshot.js", "../../yjs/src/utils/StructStore.js", "../../yjs/src/utils/Transaction.js", "../../yjs/src/utils/UndoManager.js", "../../yjs/src/utils/updates.js", "../../yjs/src/utils/YEvent.js", "../../yjs/src/types/AbstractType.js", "../../yjs/src/types/YArray.js", "../../yjs/src/types/YMap.js", "../../yjs/src/types/YText.js", "../../yjs/src/types/YXmlFragment.js", "../../yjs/src/types/YXmlElement.js", "../../yjs/src/types/YXmlEvent.js", "../../yjs/src/types/YXmlHook.js", "../../yjs/src/types/YXmlText.js", "../../yjs/src/structs/AbstractStruct.js", "../../yjs/src/structs/GC.js", "../../yjs/src/structs/ContentBinary.js", "../../yjs/src/structs/ContentDeleted.js", "../../yjs/src/structs/ContentDoc.js", "../../yjs/src/structs/ContentEmbed.js", "../../yjs/src/structs/ContentFormat.js", "../../yjs/src/structs/ContentJSON.js", "../../yjs/src/structs/ContentAny.js", "../../yjs/src/structs/ContentString.js", "../../yjs/src/structs/ContentType.js", "../../yjs/src/structs/Item.js", "../../yjs/src/structs/Skip.js", "../../yjs/src/index.js", "../../@blocksuite/store/src/text-adapter.ts", "../../@blocksuite/store/src/base.ts", "../../@blocksuite/store/src/persistence/blob/memory-storage.ts", "../../y-webrtc/src/y-webrtc.js", "../../y-protocols/awareness.js", "../../@blocksuite/store/src/persistence/doc/debug-provider.ts", "../../@blocksuite/store/src/space.ts", "../../@blocksuite/store/src/store.ts", "../../@blocksuite/store/src/utils/jsx.ts", "../../@blocksuite/store/src/yjs/utils.ts", "../../@blocksuite/store/src/yjs/array.ts", "../../@blocksuite/global/src/debug.ts", "../../@blocksuite/store/src/yjs/map.ts", "../../@blocksuite/store/src/yjs/proxy.ts", "../../@blocksuite/store/src/yjs/doc.ts", "../../@blocksuite/store/src/utils/utils.ts", "../../@blocksuite/global/src/error/code.ts", "../../@blocksuite/global/src/error/error.ts", "../../@blocksuite/store/src/workspace/migrations.ts", "../../@blocksuite/store/src/workspace/page.ts", "../../@blocksuite/store/src/persistence/blob/utils.ts", "../../@blocksuite/store/src/workspace/indexer/backlink.ts", "../../@blocksuite/store/src/workspace/indexer/base.ts", "../../@blocksuite/store/src/workspace/indexer/search.ts", "../../@blocksuite/store/src/workspace/meta.ts", "../../minimatch/src/index.ts", "../../minimatch/src/assert-valid-pattern.ts", "../../minimatch/src/brace-expressions.ts", "../../minimatch/src/unescape.ts", "../../minimatch/src/ast.ts", "../../minimatch/src/escape.ts", "../../@blocksuite/store/src/workspace/schema.ts", "../../@blocksuite/store/src/workspace/workspace.ts", "../../@blocksuite/store/src/utils/formatter.ts", "../../@blocksuite/store/src/index.ts", "../../@blocksuite/blocks/src/__internal__/utils/check-line.ts", "../../@blocksuite/blocks/src/__internal__/utils/active-editor-manager.ts", "../../@blocksuite/blocks/src/__internal__/utils/types.ts", "../../@blocksuite/blocks/src/__internal__/utils/std.ts", "../../@blocksuite/blocks/src/__internal__/utils/rect.ts", "../../@blocksuite/blocks/src/__internal__/utils/selection.ts", "../../@lit/reactive-element/src/decorators/custom-element.ts", "../../@lit/reactive-element/src/decorators/property.ts", "../../@lit/reactive-element/src/decorators/state.ts", "../../@lit/reactive-element/src/decorators/base.ts", "../../@lit/reactive-element/src/decorators/query.ts", "../../@lit/reactive-element/src/decorators/query-all.ts", "../../@lit/reactive-element/src/decorators/query-assigned-elements.ts", "../../@blocksuite/virgo/src/consts.ts", "../../lit-html/src/directive.ts", "../../lit-html/src/directives/style-map.ts", "../../@blocksuite/virgo/src/utils/attribute-renderer.ts", "../../@blocksuite/virgo/src/components/virgo-element.ts", "../../@blocksuite/virgo/src/components/virgo-line.ts", "../../@blocksuite/virgo/src/components/virgo-text.ts", "../../@blocksuite/virgo/src/utils/base-attributes.ts", "../../@blocksuite/virgo/src/utils/delta-convert.ts", "../../@blocksuite/virgo/src/utils/guard.ts", "../../@blocksuite/virgo/src/utils/text.ts", "../../@blocksuite/virgo/src/utils/point-conversion.ts", "../../@blocksuite/virgo/src/utils/query.ts", "../../@blocksuite/virgo/src/utils/selection.ts", "../../@blocksuite/virgo/src/utils/range-conversion.ts", "../../@blocksuite/virgo/src/utils/renderer.ts", "../../@blocksuite/virgo/src/utils/transform-input.ts", "../../@blocksuite/virgo/src/services/attribute.ts", "../../lit-html/src/directive-helpers.ts", "../../lit-html/src/directives/repeat.ts", "../../@blocksuite/virgo/src/services/delta.ts", "../../@blocksuite/virgo/src/services/event.ts", "../../@blocksuite/virgo/src/services/range.ts", "../../@blocksuite/virgo/src/virgo.ts", "../../@blocksuite/blocks/src/__internal__/utils/query.ts", "../../@blocksuite/blocks/src/__internal__/utils/common-operations.ts", "../../@blocksuite/blocks/src/__internal__/rich-text/rich-text-operations.ts"],
  "sourcesContent": ["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isPlainObject = exports.clone = exports.recursive = exports.merge = exports.main = void 0;\r\nmodule.exports = exports = main;\r\nexports.default = main;\r\nfunction main() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return merge.apply(void 0, items);\r\n}\r\nexports.main = main;\r\nmain.clone = clone;\r\nmain.isPlainObject = isPlainObject;\r\nmain.recursive = recursive;\r\nfunction merge() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, false, items);\r\n}\r\nexports.merge = merge;\r\nfunction recursive() {\r\n    var items = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        items[_i] = arguments[_i];\r\n    }\r\n    return _merge(items[0] === true, true, items);\r\n}\r\nexports.recursive = recursive;\r\nfunction clone(input) {\r\n    if (Array.isArray(input)) {\r\n        var output = [];\r\n        for (var index = 0; index < input.length; ++index)\r\n            output.push(clone(input[index]));\r\n        return output;\r\n    }\r\n    else if (isPlainObject(input)) {\r\n        var output = {};\r\n        for (var index in input)\r\n            output[index] = clone(input[index]);\r\n        return output;\r\n    }\r\n    else {\r\n        return input;\r\n    }\r\n}\r\nexports.clone = clone;\r\nfunction isPlainObject(input) {\r\n    return input && typeof input === 'object' && !Array.isArray(input);\r\n}\r\nexports.isPlainObject = isPlainObject;\r\nfunction _recursiveMerge(base, extend) {\r\n    if (!isPlainObject(base))\r\n        return extend;\r\n    for (var key in extend) {\r\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n            continue;\r\n        base[key] = (isPlainObject(base[key]) && isPlainObject(extend[key])) ?\r\n            _recursiveMerge(base[key], extend[key]) :\r\n            extend[key];\r\n    }\r\n    return base;\r\n}\r\nfunction _merge(isClone, isRecursive, items) {\r\n    var result;\r\n    if (isClone || !isPlainObject(result = items.shift()))\r\n        result = {};\r\n    for (var index = 0; index < items.length; ++index) {\r\n        var item = items[index];\r\n        if (!isPlainObject(item))\r\n            continue;\r\n        for (var key in item) {\r\n            if (key === '__proto__' || key === 'constructor' || key === 'prototype')\r\n                continue;\r\n            var value = isClone ? clone(item[key]) : item[key];\r\n            result[key] = isRecursive ? _recursiveMerge(result[key], value) : value;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n", "(function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var t;t=\"undefined\"==typeof window?\"undefined\"==typeof global?\"undefined\"==typeof self?this:self:global:window,t.SimplePeer=e()}})(function(){var t=Math.floor,n=Math.abs,r=Math.pow;return function(){function d(s,e,n){function t(o,i){if(!e[o]){if(!s[o]){var l=\"function\"==typeof require&&require;if(!i&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error(\"Cannot find module '\"+o+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var a=e[o]={exports:{}};s[o][0].call(a.exports,function(e){var r=s[o][1][e];return t(r||e)},a,a.exports,d,s,e,n)}return e[o].exports}for(var r=\"function\"==typeof require&&require,a=0;a<n.length;a++)t(n[a]);return t}return d}()({1:[function(e,t,n){'use strict';function r(e){var t=e.length;if(0<t%4)throw new Error(\"Invalid string. Length must be a multiple of 4\");var n=e.indexOf(\"=\");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function a(e,t,n){return 3*(t+n)/4-n}function o(e){var t,n,o=r(e),d=o[0],s=o[1],l=new p(a(e,d,s)),c=0,f=0<s?d-4:d;for(n=0;n<f;n+=4)t=u[e.charCodeAt(n)]<<18|u[e.charCodeAt(n+1)]<<12|u[e.charCodeAt(n+2)]<<6|u[e.charCodeAt(n+3)],l[c++]=255&t>>16,l[c++]=255&t>>8,l[c++]=255&t;return 2===s&&(t=u[e.charCodeAt(n)]<<2|u[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===s&&(t=u[e.charCodeAt(n)]<<10|u[e.charCodeAt(n+1)]<<4|u[e.charCodeAt(n+2)]>>2,l[c++]=255&t>>8,l[c++]=255&t),l}function d(e){return c[63&e>>18]+c[63&e>>12]+c[63&e>>6]+c[63&e]}function s(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),a.push(d(r));return a.join(\"\")}function l(e){for(var t,n=e.length,r=n%3,a=[],o=16383,d=0,l=n-r;d<l;d+=o)a.push(s(e,d,d+o>l?l:d+o));return 1===r?(t=e[n-1],a.push(c[t>>2]+c[63&t<<4]+\"==\")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(c[t>>10]+c[63&t>>4]+c[63&t<<2]+\"=\")),a.join(\"\")}n.byteLength=function(e){var t=r(e),n=t[0],a=t[1];return 3*(n+a)/4-a},n.toByteArray=o,n.fromByteArray=l;for(var c=[],u=[],p=\"undefined\"==typeof Uint8Array?Array:Uint8Array,f=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",g=0,_=f.length;g<_;++g)c[g]=f[g],u[f.charCodeAt(g)]=g;u[45]=62,u[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */'use strict';var t=String.fromCharCode,o=Math.min;function d(e){if(2147483647<e)throw new RangeError(\"The value \\\"\"+e+\"\\\" is invalid for option \\\"size\\\"\");var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if(\"number\"==typeof e){if(\"string\"==typeof t)throw new TypeError(\"The \\\"string\\\" argument must be of type string. Received type number\");return p(e)}return l(e,t,n)}function l(e,t,n){if(\"string\"==typeof e)return f(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return _(e,t,n);if(\"number\"==typeof e)throw new TypeError(\"The \\\"value\\\" argument must not be of type number. Received type number\");var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var a=h(e);if(a)return a;if(\"undefined\"!=typeof Symbol&&null!=Symbol.toPrimitive&&\"function\"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive](\"string\"),t,n);throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof e)}function c(e){if(\"number\"!=typeof e)throw new TypeError(\"\\\"size\\\" argument must be of type number\");else if(0>e)throw new RangeError(\"The value \\\"\"+e+\"\\\" is invalid for option \\\"size\\\"\")}function u(e,t,n){return c(e),0>=e?d(e):void 0===t?d(e):\"string\"==typeof n?d(e).fill(t,n):d(e).fill(t)}function p(e){return c(e),d(0>e?0:0|m(e))}function f(e,t){if((\"string\"!=typeof t||\"\"===t)&&(t=\"utf8\"),!s.isEncoding(t))throw new TypeError(\"Unknown encoding: \"+t);var n=0|b(e,t),r=d(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}function g(e){for(var t=0>e.length?0:0|m(e.length),n=d(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function _(e,t,n){if(0>t||e.byteLength<t)throw new RangeError(\"\\\"offset\\\" is outside of buffer bounds\");if(e.byteLength<t+(n||0))throw new RangeError(\"\\\"length\\\" is outside of buffer bounds\");var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=s.prototype,r}function h(e){if(s.isBuffer(e)){var t=0|m(e.length),n=d(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}return void 0===e.length?\"Buffer\"===e.type&&Array.isArray(e.data)?g(e.data):void 0:\"number\"!=typeof e.length||X(e.length)?d(0):g(e)}function m(e){if(e>=2147483647)throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+2147483647 .toString(16)+\" bytes\");return 0|e}function b(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if(\"string\"!=typeof e)throw new TypeError(\"The \\\"string\\\" argument must be one of type string, Buffer, or ArrayBuffer. Received type \"+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":return H(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return z(e).length;default:if(a)return r?-1:H(e).length;t=(\"\"+t).toLowerCase(),a=!0;}}function y(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return\"\";if(n>>>=0,t>>>=0,n<=t)return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return P(this,t,n);case\"utf8\":case\"utf-8\":return x(this,t,n);case\"ascii\":return D(this,t,n);case\"latin1\":case\"binary\":return I(this,t,n);case\"base64\":return A(this,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return M(this,t,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),r=!0;}}function C(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r,a){if(0===e.length)return-1;if(\"string\"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,X(n)&&(n=a?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(0>n)if(a)n=0;else return-1;if(\"string\"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,a);if(\"number\"==typeof t)return t&=255,\"function\"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,a);throw new TypeError(\"val must be string, number or Buffer\")}function E(e,t,n,r,a){function o(e,t){return 1===d?e[t]:e.readUInt16BE(t*d)}var d=1,s=e.length,l=t.length;if(void 0!==r&&(r=(r+\"\").toLowerCase(),\"ucs2\"===r||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(2>e.length||2>t.length)return-1;d=2,s/=2,l/=2,n/=2}var c;if(a){var u=-1;for(c=n;c<s;c++)if(o(e,c)!==o(t,-1===u?0:c-u))-1!==u&&(c-=c-u),u=-1;else if(-1===u&&(u=c),c-u+1===l)return u*d}else for(n+l>s&&(n=s-l),c=n;0<=c;c--){for(var p=!0,f=0;f<l;f++)if(o(e,c+f)!==o(t,f)){p=!1;break}if(p)return c}return-1}function w(e,t,n,r){n=+n||0;var a=e.length-n;r?(r=+r,r>a&&(r=a)):r=a;var o=t.length;r>o/2&&(r=o/2);for(var d,s=0;s<r;++s){if(d=parseInt(t.substr(2*s,2),16),X(d))return s;e[n+s]=d}return s}function S(e,t,n,r){return G(H(t,e.length-n),e,n,r)}function T(e,t,n,r){return G(Y(t),e,n,r)}function v(e,t,n,r){return T(e,t,n,r)}function k(e,t,n,r){return G(z(t),e,n,r)}function L(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function x(e,t,n){n=o(e.length,n);for(var r=[],a=t;a<n;){var d=e[a],s=null,l=239<d?4:223<d?3:191<d?2:1;if(a+l<=n){var c,u,p,f;1===l?128>d&&(s=d):2===l?(c=e[a+1],128==(192&c)&&(f=(31&d)<<6|63&c,127<f&&(s=f))):3===l?(c=e[a+1],u=e[a+2],128==(192&c)&&128==(192&u)&&(f=(15&d)<<12|(63&c)<<6|63&u,2047<f&&(55296>f||57343<f)&&(s=f))):4===l?(c=e[a+1],u=e[a+2],p=e[a+3],128==(192&c)&&128==(192&u)&&128==(192&p)&&(f=(15&d)<<18|(63&c)<<12|(63&u)<<6|63&p,65535<f&&1114112>f&&(s=f))):void 0}null===s?(s=65533,l=1):65535<s&&(s-=65536,r.push(55296|1023&s>>>10),s=56320|1023&s),r.push(s),a+=l}return N(r)}function N(e){var n=e.length;if(n<=4096)return t.apply(String,e);for(var r=\"\",a=0;a<n;)r+=t.apply(String,e.slice(a,a+=4096));return r}function D(e,n,r){var a=\"\";r=o(e.length,r);for(var d=n;d<r;++d)a+=t(127&e[d]);return a}function I(e,n,r){var a=\"\";r=o(e.length,r);for(var d=n;d<r;++d)a+=t(e[d]);return a}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var a=\"\",o=t;o<n;++o)a+=W(e[o]);return a}function M(e,n,r){for(var a=e.slice(n,r),o=\"\",d=0;d<a.length;d+=2)o+=t(a[d]+256*a[d+1]);return o}function O(e,t,n){if(0!=e%1||0>e)throw new RangeError(\"offset is not uint\");if(e+t>n)throw new RangeError(\"Trying to access beyond buffer length\")}function F(e,t,n,r,a,o){if(!s.isBuffer(e))throw new TypeError(\"\\\"buffer\\\" argument must be a Buffer instance\");if(t>a||t<o)throw new RangeError(\"\\\"value\\\" argument is out of bounds\");if(n+r>e.length)throw new RangeError(\"Index out of range\")}function B(e,t,n,r){if(n+r>e.length)throw new RangeError(\"Index out of range\");if(0>n)throw new RangeError(\"Index out of range\")}function U(e,t,n,r,a){return t=+t,n>>>=0,a||B(e,t,n,4,34028234663852886e22,-34028234663852886e22),J.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return t=+t,n>>>=0,a||B(e,t,n,8,17976931348623157e292,-17976931348623157e292),J.write(e,t,n,r,52,8),n+8}function q(e){if(e=e.split(\"=\")[0],e=e.trim().replace(Q,\"\"),2>e.length)return\"\";for(;0!=e.length%4;)e+=\"=\";return e}function W(e){return 16>e?\"0\"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],d=0;d<r;++d){if(n=e.charCodeAt(d),55295<n&&57344>n){if(!a){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}else if(d+1===r){-1<(t-=3)&&o.push(239,191,189);continue}a=n;continue}if(56320>n){-1<(t-=3)&&o.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&-1<(t-=3)&&o.push(239,191,189);if(a=null,128>n){if(0>(t-=1))break;o.push(n)}else if(2048>n){if(0>(t-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error(\"Invalid code point\")}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,a,o=[],d=0;d<e.length&&!(0>(t-=2));++d)n=e.charCodeAt(d),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function z(e){return $.toByteArray(q(e))}function G(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!==e}var $=e(\"base64-js\"),J=e(\"ieee754\");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50;n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||\"undefined\"==typeof console||\"function\"!=typeof console.error||console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\"),Object.defineProperty(s.prototype,\"parent\",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,\"offset\",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),\"undefined\"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return u(e,t,n)},s.allocUnsafe=function(e){return p(e)},s.allocUnsafeSlow=function(e){return p(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(K(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError(\"The \\\"buf1\\\", \\\"buf2\\\" arguments must be one of type Buffer or Uint8Array\");if(e===t)return 0;for(var n=e.length,r=t.length,d=0,l=o(n,r);d<l;++d)if(e[d]!==t[d]){n=e[d],r=t[d];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch((e+\"\").toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1;}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError(\"\\\"list\\\" argument must be an Array of Buffers\");if(0===e.length)return s.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(K(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError(\"\\\"list\\\" argument must be an Array of Buffers\");o.copy(r,a),a+=o.length}return r},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?\"\":0===arguments.length?x(this,0,e):y.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e=\"\",t=n.INSPECT_MAX_BYTES;return e=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim(),this.length>t&&(e+=\" ... \"),\"<Buffer \"+e+\">\"},s.prototype.compare=function(e,t,n,r,a){if(K(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError(\"The \\\"target\\\" argument must be one of type Buffer or Uint8Array. Received type \"+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),0>t||n>e.length||0>r||a>this.length)throw new RangeError(\"out of range index\");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var d=a-r,l=n-t,c=o(d,l),u=this.slice(r,a),p=e.slice(t,n),f=0;f<c;++f)if(u[f]!==p[f]){d=u[f],l=p[f];break}return d<l?-1:l<d?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return R(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return R(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r=\"utf8\",n=this.length,t=0;else if(void 0===n&&\"string\"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0);else throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");var a=this.length-t;if((void 0===n||n>a)&&(n=a),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var o=!1;;)switch(r){case\"hex\":return w(this,e,t,n);case\"utf8\":case\"utf-8\":return S(this,e,t,n);case\"ascii\":return T(this,e,t,n);case\"latin1\":case\"binary\":return v(this,e,t,n);case\"base64\":return k(this,e,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return L(this,e,t,n);default:if(o)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),o=!0;}},s.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var a=this[e],o=1,d=0;++d<t&&(o*=256);)a+=this[e+d]*o;return o*=128,a>=o&&(a-=r(2,8*t)),a},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var a=t,o=1,d=this[e+--a];0<a&&(o*=256);)d+=this[e+--a]*o;return o*=128,d>=o&&(d-=r(2,8*t)),d},s.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),J.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),J.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),J.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),J.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=r(2,8*n)-1;F(this,e,t,n,o,0)}var d=1,s=0;for(this[t]=255&e;++s<n&&(d*=256);)this[t+s]=255&e/d;return t+n},s.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t>>>=0,n>>>=0,!a){var o=r(2,8*n)-1;F(this,e,t,n,o,0)}var d=n-1,s=1;for(this[t+d]=255&e;0<=--d&&(s*=256);)this[t+d]=255&e/s;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=r(2,8*n-1);F(this,e,t,n,o-1,-o)}var d=0,s=1,l=0;for(this[t]=255&e;++d<n&&(s*=256);)0>e&&0===l&&0!==this[t+d-1]&&(l=1),this[t+d]=255&(e/s>>0)-l;return t+n},s.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t>>>=0,!a){var o=r(2,8*n-1);F(this,e,t,n,o-1,-o)}var d=n-1,s=1,l=0;for(this[t+d]=255&e;0<=--d&&(s*=256);)0>e&&0===l&&0!==this[t+d+1]&&(l=1),this[t+d]=255&(e/s>>0)-l;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError(\"argument should be a Buffer\");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError(\"targetStart out of bounds\");if(0>n||n>=this.length)throw new RangeError(\"Index out of range\");if(0>r)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;if(this===e&&\"function\"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=a-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},s.prototype.fill=function(e,t,n,r){if(\"string\"==typeof e){if(\"string\"==typeof t?(r=t,t=0,n=this.length):\"string\"==typeof n&&(r=n,n=this.length),void 0!==r&&\"string\"!=typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof r&&!s.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r);if(1===e.length){var a=e.charCodeAt(0);(\"utf8\"===r&&128>a||\"latin1\"===r)&&(e=a)}}else\"number\"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError(\"Out of range index\");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(\"number\"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var d=s.isBuffer(e)?e:s.from(e,r),l=d.length;if(0===l)throw new TypeError(\"The value \\\"\"+e+\"\\\" is invalid for argument \\\"value\\\"\");for(o=0;o<n-t;++o)this[o+t]=d[o%l]}return this};var Q=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e(\"buffer\").Buffer)},{\"base64-js\":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(a){(function(){function r(){let e;try{e=n.storage.getItem(\"debug\")}catch(e){}return!e&&\"undefined\"!=typeof a&&\"env\"in a&&(e=a.env.DEBUG),e}n.formatArgs=function(e){if(e[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+e[0]+(this.useColors?\"%c \":\" \")+\"+\"+t.exports.humanize(this.diff),!this.useColors)return;const n=\"color: \"+this.color;e.splice(1,0,n,\"color: inherit\");let r=0,a=0;e[0].replace(/%[a-zA-Z%]/g,e=>{\"%%\"===e||(r++,\"%c\"===e&&(a=r))}),e.splice(a,0,n)},n.save=function(e){try{e?n.storage.setItem(\"debug\",e):n.storage.removeItem(\"debug\")}catch(e){}},n.load=r,n.useColors=function(){return!!(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))||!(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))&&(\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&31<=parseInt(RegExp.$1,10)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\"))}})(),n.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],n.log=console.debug||console.log||(()=>{}),t.exports=e(\"./common\")(n);const{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}}}).call(this)}).call(this,e(\"_process\"))},{\"./common\":5,_process:12}],5:[function(e,t){t.exports=function(t){function r(e){function t(...e){if(!t.enabled)return;const a=t,o=+new Date,i=o-(n||o);a.diff=i,a.prev=n,a.curr=o,n=o,e[0]=r.coerce(e[0]),\"string\"!=typeof e[0]&&e.unshift(\"%O\");let d=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if(\"%%\"===t)return\"%\";d++;const o=r.formatters[n];if(\"function\"==typeof o){const n=e[d];t=o.call(a,n),e.splice(d,1),d--}return t}),r.formatArgs.call(a,e);const s=a.log||r.log;s.apply(a,e)}let n,o=null;return t.namespace=e,t.useColors=r.useColors(),t.color=r.selectColor(e),t.extend=a,t.destroy=r.destroy,Object.defineProperty(t,\"enabled\",{enumerable:!0,configurable:!1,get:()=>null===o?r.enabled(e):o,set:e=>{o=e}}),\"function\"==typeof r.init&&r.init(t),t}function a(e,t){const n=r(this.namespace+(\"undefined\"==typeof t?\":\":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map(e=>\"-\"+e)].join(\",\");return r.enable(\"\"),e},r.enable=function(e){r.save(e),r.names=[],r.skips=[];let t;const n=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),a=n.length;for(t=0;t<a;t++)n[t]&&(e=n[t].replace(/\\*/g,\".*?\"),\"-\"===e[0]?r.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):r.names.push(new RegExp(\"^\"+e+\"$\")))},r.enabled=function(e){if(\"*\"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e(\"ms\"),r.destroy=function(){console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[n(t)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(e,t){'use strict';function n(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,r){if(!e||\"string\"==typeof e)throw new TypeError(\"Please pass an Error to err-code\");r||(r={}),\"object\"==typeof t&&(r=t,t=\"\"),t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const a=function(){};a.prototype=Object.create(Object.getPrototypeOf(e));const o=n(new a,r);return o}}},{}],7:[function(e,t){'use strict';function n(e){console&&console.warn&&console.warn(e)}function r(){r.init.call(this)}function a(e){if(\"function\"!=typeof e)throw new TypeError(\"The \\\"listener\\\" argument must be of type Function. Received type \"+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function i(e,t,r,i){var d,s,l;if(a(r),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit(\"newListener\",t,r.listener?r.listener:r),s=e._events),l=s[t]),void 0===l)l=s[t]=r,++e._eventsCount;else if(\"function\"==typeof l?l=s[t]=i?[r,l]:[l,r]:i?l.unshift(r):l.push(r),d=o(e),0<d&&l.length>d&&!l.warned){l.warned=!0;var c=new Error(\"Possible EventEmitter memory leak detected. \"+l.length+\" \"+(t+\" listeners added. Use emitter.setMaxListeners() to increase limit\"));c.name=\"MaxListenersExceededWarning\",c.emitter=e,c.type=t,c.count=l.length,n(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function l(e,t,n){var r=e._events;if(r===void 0)return[];var a=r[t];return void 0===a?[]:\"function\"==typeof a?n?[a.listener||a]:[a]:n?f(a):u(a,a.length)}function c(e){var t=this._events;if(t!==void 0){var n=t[e];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function p(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function f(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function g(e,t,n){\"function\"==typeof e.on&&_(e,\"error\",t,n)}function _(e,t,n,r){if(\"function\"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if(\"function\"==typeof e.addEventListener)e.addEventListener(t,function a(o){r.once&&e.removeEventListener(t,a),n(o)});else throw new TypeError(\"The \\\"emitter\\\" argument must be of type EventEmitter. Received type \"+typeof e)}var h,m=\"object\"==typeof Reflect?Reflect:null,b=m&&\"function\"==typeof m.apply?m.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};h=m&&\"function\"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var y=Number.isNaN||function(e){return e!==e};t.exports=r,t.exports.once=function(e,t){return new Promise(function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){\"function\"==typeof e.removeListener&&e.removeListener(\"error\",a),n([].slice.call(arguments))}_(e,t,o,{once:!0}),\"error\"!==t&&g(e,a,{once:!0})})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var C=10;Object.defineProperty(r,\"defaultMaxListeners\",{enumerable:!0,get:function(){return C},set:function(e){if(\"number\"!=typeof e||0>e||y(e))throw new RangeError(\"The value of \\\"defaultMaxListeners\\\" is out of range. It must be a non-negative number. Received \"+e+\".\");C=e}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||0>e||y(e))throw new RangeError(\"The value of \\\"n\\\" is out of range. It must be a non-negative number. Received \"+e+\".\");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=\"error\"===e,a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var d=new Error(\"Unhandled error.\"+(o?\" (\"+o.message+\")\":\"\"));throw d.context=o,d}var s=a[e];if(s===void 0)return!1;if(\"function\"==typeof s)b(s,this,t);else for(var l=s.length,c=u(s,l),n=0;n<l;++n)b(c[n],this,t);return!0},r.prototype.addListener=function(e,t){return i(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return i(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,s(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,s(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,d,s;if(a(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\"removeListener\",e,n.listener||t));else if(\"function\"!=typeof n){for(o=-1,d=n.length-1;0<=d;d--)if(n[d]===t||n[d].listener===t){s=n[d].listener,o=d;break}if(0>o)return this;0===o?n.shift():p(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)a=o[r],\"removeListener\"!==a&&this.removeAllListeners(a);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],\"function\"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return l(this,e,!0)},r.prototype.rawListeners=function(e){return l(this,e,!1)},r.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},r.prototype.listenerCount=c,r.prototype.eventNames=function(){return 0<this._eventsCount?h(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if(\"undefined\"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,a,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(t,n,a,o,l){var c,u,p=8*l-o-1,f=(1<<p)-1,g=f>>1,_=-7,h=a?l-1:0,b=a?-1:1,d=t[n+h];for(h+=b,c=d&(1<<-_)-1,d>>=-_,_+=p;0<_;c=256*c+t[n+h],h+=b,_-=8);for(u=c&(1<<-_)-1,c>>=-_,_+=o;0<_;u=256*u+t[n+h],h+=b,_-=8);if(0===c)c=1-g;else{if(c===f)return u?NaN:(d?-1:1)*(1/0);u+=r(2,o),c-=g}return(d?-1:1)*u*r(2,c-o)},o.write=function(a,o,l,u,p,f){var h,b,y,g=Math.LN2,_=Math.log,C=8*f-p-1,R=(1<<C)-1,E=R>>1,w=23===p?r(2,-24)-r(2,-77):0,S=u?0:f-1,T=u?1:-1,d=0>o||0===o&&0>1/o?1:0;for(o=n(o),isNaN(o)||o===1/0?(b=isNaN(o)?1:0,h=R):(h=t(_(o)/g),1>o*(y=r(2,-h))&&(h--,y*=2),o+=1<=h+E?w/y:w*r(2,1-E),2<=o*y&&(h++,y/=2),h+E>=R?(b=0,h=R):1<=h+E?(b=(o*y-1)*r(2,p),h+=E):(b=o*r(2,E-1)*r(2,p),h=0));8<=p;a[l+S]=255&b,S+=T,b/=256,p-=8);for(h=h<<p|b,C+=p;0<C;a[l+S]=255&h,S+=T,h/=256,C-=8);a[l+S-T]|=128*d}},{}],10:[function(e,t){t.exports=\"function\"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t){var r=Math.round;function a(e){if(e+=\"\",!(100<e.length)){var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||\"ms\").toLowerCase();return\"years\"===n||\"year\"===n||\"yrs\"===n||\"yr\"===n||\"y\"===n?31557600000*r:\"weeks\"===n||\"week\"===n||\"w\"===n?604800000*r:\"days\"===n||\"day\"===n||\"d\"===n?86400000*r:\"hours\"===n||\"hour\"===n||\"hrs\"===n||\"hr\"===n||\"h\"===n?3600000*r:\"minutes\"===n||\"minute\"===n||\"mins\"===n||\"min\"===n||\"m\"===n?60000*r:\"seconds\"===n||\"second\"===n||\"secs\"===n||\"sec\"===n||\"s\"===n?1000*r:\"milliseconds\"===n||\"millisecond\"===n||\"msecs\"===n||\"msec\"===n||\"ms\"===n?r:void 0}}}function o(e){var t=n(e);return 86400000<=t?r(e/86400000)+\"d\":3600000<=t?r(e/3600000)+\"h\":60000<=t?r(e/60000)+\"m\":1000<=t?r(e/1000)+\"s\":e+\"ms\"}function i(e){var t=n(e);return 86400000<=t?s(e,t,86400000,\"day\"):3600000<=t?s(e,t,3600000,\"hour\"):60000<=t?s(e,t,60000,\"minute\"):1000<=t?s(e,t,1000,\"second\"):e+\" ms\"}function s(e,t,a,n){return r(e/a)+\" \"+n+(t>=1.5*a?\"s\":\"\")}var l=24*(60*60000);t.exports=function(e,t){t=t||{};var n=typeof e;if(\"string\"==n&&0<e.length)return a(e);if(\"number\"===n&&isFinite(e))return t.long?i(e):o(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function a(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(n){try{return c.call(null,t,0)}catch(n){return c.call(this,t,0)}}}function o(t){if(u===clearTimeout)return clearTimeout(t);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(n){try{return u.call(null,t)}catch(n){return u.call(this,t)}}}function i(){_&&f&&(_=!1,f.length?g=f.concat(g):h=-1,g.length&&d())}function d(){if(!_){var e=a(i);_=!0;for(var t=g.length;t;){for(f=g,g=[];++h<t;)f&&f[h].run();h=-1,t=g.length}f=null,_=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,u,p=t.exports={};(function(){try{c=\"function\"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{u=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){u=r}})();var f,g=[],_=!1,h=-1;p.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new s(e,t)),1!==g.length||_||a(d)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title=\"browser\",p.browser=!0,p.env={},p.argv=[],p.version=\"\",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(){return[]},p.binding=function(){throw new Error(\"process.binding is not supported\")},p.cwd=function(){return\"/\"},p.chdir=function(){throw new Error(\"process.chdir is not supported\")},p.umask=function(){return 0}},{}],13:[function(e,t){(function(e){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;t.exports=\"function\"==typeof queueMicrotask?queueMicrotask.bind(\"undefined\"==typeof window?e:window):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))}).call(this)}).call(this,\"undefined\"==typeof global?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:global)},{}],14:[function(e,t){(function(n,r){(function(){'use strict';var a=e(\"safe-buffer\").Buffer,o=r.crypto||r.msCrypto;t.exports=o&&o.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError(\"requested too many random bytes\");var r=a.allocUnsafe(e);if(0<e)if(65536<e)for(var i=0;i<e;i+=65536)o.getRandomValues(r.slice(i,i+65536));else o.getRandomValues(r);return\"function\"==typeof t?n.nextTick(function(){t(null,r)}):r}:function(){throw new Error(\"Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11\")}}).call(this)}).call(this,e(\"_process\"),\"undefined\"==typeof global?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:global)},{_process:12,\"safe-buffer\":30}],15:[function(e,t){'use strict';function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e,t,r){function a(e,n,r){return\"string\"==typeof t?t:t(e,n,r)}r||(r=Error);var o=function(e){function t(t,n,r){return e.call(this,a(t,n,r))||this}return n(t,e),t}(r);o.prototype.name=r.name,o.prototype.code=e,s[e]=o}function a(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return e+\"\"}),2<n?\"one of \".concat(t,\" \").concat(e.slice(0,n-1).join(\", \"),\", or \")+e[n-1]:2===n?\"one of \".concat(t,\" \").concat(e[0],\" or \").concat(e[1]):\"of \".concat(t,\" \").concat(e[0])}return\"of \".concat(t,\" \").concat(e+\"\")}function o(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}function i(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function d(e,t,n){return\"number\"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}var s={};r(\"ERR_INVALID_OPT_VALUE\",function(e,t){return\"The value \\\"\"+t+\"\\\" is invalid for option \\\"\"+e+\"\\\"\"},TypeError),r(\"ERR_INVALID_ARG_TYPE\",function(e,t,n){var r;\"string\"==typeof t&&o(t,\"not \")?(r=\"must not be\",t=t.replace(/^not /,\"\")):r=\"must be\";var s;if(i(e,\" argument\"))s=\"The \".concat(e,\" \").concat(r,\" \").concat(a(t,\"type\"));else{var l=d(e,\".\")?\"property\":\"argument\";s=\"The \\\"\".concat(e,\"\\\" \").concat(l,\" \").concat(r,\" \").concat(a(t,\"type\"))}return s+=\". Received type \".concat(typeof n),s},TypeError),r(\"ERR_STREAM_PUSH_AFTER_EOF\",\"stream.push() after EOF\"),r(\"ERR_METHOD_NOT_IMPLEMENTED\",function(e){return\"The \"+e+\" method is not implemented\"}),r(\"ERR_STREAM_PREMATURE_CLOSE\",\"Premature close\"),r(\"ERR_STREAM_DESTROYED\",function(e){return\"Cannot call \"+e+\" after a stream was destroyed\"}),r(\"ERR_MULTIPLE_CALLBACK\",\"Callback called multiple times\"),r(\"ERR_STREAM_CANNOT_PIPE\",\"Cannot pipe, not readable\"),r(\"ERR_STREAM_WRITE_AFTER_END\",\"write after end\"),r(\"ERR_STREAM_NULL_VALUES\",\"May not write null values to stream\",TypeError),r(\"ERR_UNKNOWN_ENCODING\",function(e){return\"Unknown encoding: \"+e},TypeError),r(\"ERR_STREAM_UNSHIFT_AFTER_END_EVENT\",\"stream.unshift() after end event\"),t.exports.codes=s},{}],16:[function(e,t){(function(n){(function(){'use strict';function r(e){return this instanceof r?void(d.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once(\"end\",a)))):new r(e)}function a(){this._writableState.ended||n.nextTick(o,this)}function o(e){e.end()}var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var d=e(\"./_stream_readable\"),s=e(\"./_stream_writable\");e(\"inherits\")(r,d);for(var l,c=i(s.prototype),u=0;u<c.length;u++)l=c[u],r.prototype[l]||(r.prototype[l]=s.prototype[l]);Object.defineProperty(r.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,\"writableBuffer\",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,\"writableLength\",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,\"destroyed\",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e(\"_process\"))},{\"./_stream_readable\":18,\"./_stream_writable\":20,_process:12,inherits:10}],17:[function(e,t){'use strict';function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e(\"./_stream_transform\");e(\"inherits\")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{\"./_stream_transform\":19,inherits:10}],18:[function(e,t){(function(n,r){(function(){'use strict';function a(e){return P.from(e)}function o(e){return P.isBuffer(e)||e instanceof M}function i(e,t,n){return\"function\"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function d(t,n,r){A=A||e(\"./_stream_duplex\"),t=t||{},\"boolean\"!=typeof r&&(r=n instanceof A),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=H(this,t,\"readableHighWaterMark\",r),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||\"utf8\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!F&&(F=e(\"string_decoder/\").StringDecoder),this.decoder=new F(t.encoding),this.encoding=t.encoding)}function s(t){if(A=A||e(\"./_stream_duplex\"),!(this instanceof s))return new s(t);var n=this instanceof A;this._readableState=new d(t,this,n),this.readable=!0,t&&(\"function\"==typeof t.read&&(this._read=t.read),\"function\"==typeof t.destroy&&(this._destroy=t.destroy)),I.call(this)}function l(e,t,n,r,o){x(\"readableAddChunk\",t);var i=e._readableState;if(null===t)i.reading=!1,g(e,i);else{var d;if(o||(d=u(i,t)),d)X(e,d);else if(!(i.objectMode||t&&0<t.length))r||(i.reading=!1,m(e,i));else if(\"string\"==typeof t||i.objectMode||Object.getPrototypeOf(t)===P.prototype||(t=a(t)),r)i.endEmitted?X(e,new K):c(e,i,t,!0);else if(i.ended)X(e,new z);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?c(e,i,t,!1):m(e,i)):c(e,i,t,!1)}}return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit(\"data\",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),m(e,t)}function u(e,t){var n;return o(t)||\"string\"==typeof t||void 0===t||e.objectMode||(n=new V(\"chunk\",[\"string\",\"Buffer\",\"Uint8Array\"],t)),n}function p(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function g(e,t){if(x(\"onEofChunk\"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?_(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,h(e)))}}function _(e){var t=e._readableState;x(\"emitReadable\",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x(\"emitReadable\",t.flowing),t.emittedReadable=!0,n.nextTick(h,e))}function h(e){var t=e._readableState;x(\"emitReadable_\",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit(\"readable\"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,S(e)}function m(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(b,e,t))}function b(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(x(\"maybeReadMore read 0\"),e.read(0),n===t.length)break}t.readingMore=!1}function y(e){return function(){var t=e._readableState;x(\"pipeOnDrain\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,\"data\")&&(t.flowing=!0,S(e))}}function C(e){var t=e._readableState;t.readableListening=0<e.listenerCount(\"readable\"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount(\"data\")&&e.resume()}function R(e){x(\"readable nexttick read 0\"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(w,e,t))}function w(e,t){x(\"resume\",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit(\"resume\"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(x(\"flow\",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function v(e){var t=e._readableState;x(\"endReadable\",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(k,t,e))}function k(e,t){if(x(\"endReadableNT\",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit(\"end\"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}t.exports=s;var A;s.ReadableState=d;var x,N=e(\"events\").EventEmitter,D=function(e,t){return e.listeners(t).length},I=e(\"./internal/streams/stream\"),P=e(\"buffer\").Buffer,M=r.Uint8Array||function(){},O=e(\"util\");x=O&&O.debuglog?O.debuglog(\"stream\"):function(){};var F,B,U,j=e(\"./internal/streams/buffer_list\"),q=e(\"./internal/streams/destroy\"),W=e(\"./internal/streams/state\"),H=W.getHighWaterMark,Y=e(\"../errors\").codes,V=Y.ERR_INVALID_ARG_TYPE,z=Y.ERR_STREAM_PUSH_AFTER_EOF,G=Y.ERR_METHOD_NOT_IMPLEMENTED,K=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(\"inherits\")(s,I);var X=q.errorOrDestroy,$=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];Object.defineProperty(s.prototype,\"destroyed\",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=q.destroy,s.prototype._undestroy=q.undestroy,s.prototype._destroy=function(e,t){t(e)},s.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:\"string\"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=P.from(e,t),t=\"\"),n=!0),l(this,e,t,!1,n)},s.prototype.unshift=function(e){return l(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(t){F||(F=e(\"string_decoder/\").StringDecoder);var n=new F(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,a=\"\";null!==r;)a+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),\"\"!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};s.prototype.read=function(e){x(\"read\",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return x(\"read: emitReadable\",t.length,t.ended),0===t.length&&t.ended?v(this):_(this),null;if(e=f(e,t),0===e&&t.ended)return 0===t.length&&v(this),null;var a=t.needReadable;x(\"need readable\",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,x(\"length less than watermark\",a)),t.ended||t.reading?(a=!1,x(\"reading or ended\",a)):a&&(x(\"do read\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=f(r,t)));var o;return o=0<e?T(e,t):null,null===o?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),r!==e&&t.ended&&v(this)),null!==o&&this.emit(\"data\",o),o},s.prototype._read=function(){X(this,new G(\"_read()\"))},s.prototype.pipe=function(e,t){function r(e,t){x(\"onunpipe\"),e===p&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function a(){x(\"onend\"),e.end()}function o(){x(\"cleanup\"),e.removeListener(\"close\",l),e.removeListener(\"finish\",c),e.removeListener(\"drain\",h),e.removeListener(\"error\",s),e.removeListener(\"unpipe\",r),p.removeListener(\"end\",a),p.removeListener(\"end\",u),p.removeListener(\"data\",d),m=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}function d(t){x(\"ondata\");var n=e.write(t);x(\"dest.write\",n),!1===n&&((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==L(f.pipes,e))&&!m&&(x(\"false write response, pause\",f.awaitDrain),f.awaitDrain++),p.pause())}function s(t){x(\"onerror\",t),u(),e.removeListener(\"error\",s),0===D(e,\"error\")&&X(e,t)}function l(){e.removeListener(\"finish\",c),u()}function c(){x(\"onfinish\"),e.removeListener(\"close\",l),u()}function u(){x(\"unpipe\"),p.unpipe(e)}var p=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e);}f.pipesCount+=1,x(\"pipe count=%d opts=%j\",f.pipesCount,t);var g=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,_=g?a:u;f.endEmitted?n.nextTick(_):p.once(\"end\",_),e.on(\"unpipe\",r);var h=y(p);e.on(\"drain\",h);var m=!1;return p.on(\"data\",d),i(e,\"error\",s),e.once(\"close\",l),e.once(\"finish\",c),e.emit(\"pipe\",p),f.flowing||(x(\"pipe resume\"),p.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\"unpipe\",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit(\"unpipe\",this,{hasUnpiped:!1});return this}var d=L(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\"unpipe\",this,n),this)},s.prototype.on=function(e,t){var r=I.prototype.on.call(this,e,t),a=this._readableState;return\"data\"===e?(a.readableListening=0<this.listenerCount(\"readable\"),!1!==a.flowing&&this.resume()):\"readable\"==e&&!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,x(\"on readable\",a.length,a.reading),a.length?_(this):!a.reading&&n.nextTick(R,this)),r},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(e,t){var r=I.prototype.removeListener.call(this,e,t);return\"readable\"===e&&n.nextTick(C,this),r},s.prototype.removeAllListeners=function(e){var t=I.prototype.removeAllListeners.apply(this,arguments);return(\"readable\"===e||void 0===e)&&n.nextTick(C,this),t},s.prototype.resume=function(){var e=this._readableState;return e.flowing||(x(\"resume\"),e.flowing=!e.readableListening,E(this,e)),e.paused=!1,this},s.prototype.pause=function(){return x(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(x(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this._readableState.paused=!0,this},s.prototype.wrap=function(e){var t=this,r=this._readableState,a=!1;for(var o in e.on(\"end\",function(){if(x(\"wrapped end\"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on(\"data\",function(n){if((x(\"wrapped data\"),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var o=t.push(n);o||(a=!0,e.pause())}}),e)void 0===this[o]&&\"function\"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<$.length;i++)e.on($[i],this.emit.bind(this,$[i]));return this._read=function(t){x(\"wrapped _read\",t),a&&(a=!1,e.resume())},this},\"function\"==typeof Symbol&&(s.prototype[Symbol.asyncIterator]=function(){return void 0===B&&(B=e(\"./internal/streams/async_iterator\")),B(this)}),Object.defineProperty(s.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,\"readableBuffer\",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,\"readableFlowing\",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),s._fromList=T,Object.defineProperty(s.prototype,\"readableLength\",{enumerable:!1,get:function(){return this._readableState.length}}),\"function\"==typeof Symbol&&(s.from=function(t,n){return void 0===U&&(U=e(\"./internal/streams/from\")),U(s,t,n)})}).call(this)}).call(this,e(\"_process\"),\"undefined\"==typeof global?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:global)},{\"../errors\":15,\"./_stream_duplex\":16,\"./internal/streams/async_iterator\":21,\"./internal/streams/buffer_list\":22,\"./internal/streams/destroy\":23,\"./internal/streams/from\":25,\"./internal/streams/state\":27,\"./internal/streams/stream\":28,_process:12,buffer:3,events:7,inherits:10,\"string_decoder/\":31,util:2}],19:[function(e,t){'use strict';function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit(\"error\",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function r(e){return this instanceof r?void(u.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(\"function\"==typeof e.transform&&(this._transform=e.transform),\"function\"==typeof e.flush&&(this._flush=e.flush)),this.on(\"prefinish\",a)):new r(e)}function a(){var e=this;\"function\"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush(function(t,n){o(e,t,n)})}function o(e,t,n){if(t)return e.emit(\"error\",t);if(null!=n&&e.push(n),e._writableState.length)throw new c;if(e._transformState.transforming)throw new l;return e.push(null)}t.exports=r;var i=e(\"../errors\").codes,d=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,l=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=i.ERR_TRANSFORM_WITH_LENGTH_0,u=e(\"./_stream_duplex\");e(\"inherits\")(r,u),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new d(\"_transform()\"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},{\"../errors\":15,\"./_stream_duplex\":16,inherits:10}],20:[function(e,t){(function(n,r){(function(){'use strict';function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){v(t,e)}}function o(e){return x.from(e)}function i(e){return x.isBuffer(e)||e instanceof N}function d(){}function s(t,n,r){k=k||e(\"./_stream_duplex\"),t=t||{},\"boolean\"!=typeof r&&(r=n instanceof k),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=P(this,t,\"writableHighWaterMark\",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function l(t){k=k||e(\"./_stream_duplex\");var n=this instanceof k;return n||V.call(l,this)?void(this._writableState=new s(t,this,n),this.writable=!0,t&&(\"function\"==typeof t.write&&(this._write=t.write),\"function\"==typeof t.writev&&(this._writev=t.writev),\"function\"==typeof t.destroy&&(this._destroy=t.destroy),\"function\"==typeof t.final&&(this._final=t.final)),A.call(this)):new l(t)}function c(e,t){var r=new W;Y(e,r),n.nextTick(t,r)}function u(e,t,r,a){var o;return null===r?o=new q:\"string\"!=typeof r&&!t.objectMode&&(o=new O(\"chunk\",[\"string\",\"Buffer\"],r)),!o||(Y(e,o),n.nextTick(a,o),!1)}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=x.from(t,n)),t}function f(e,t,n,r,a,o){if(!n){var i=p(t,r,a);r!==i&&(n=!0,a=\"buffer\",r=i)}var d=t.objectMode?1:r.length;t.length+=d;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,d,r,a,o);return s}function g(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new j(\"write\")):n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function _(e,t,r,a,o){--t.pendingcb,r?(n.nextTick(o,a),n.nextTick(S,e,t),e._writableState.errorEmitted=!0,Y(e,a)):(o(a),e._writableState.errorEmitted=!0,Y(e,a),S(e,t))}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var r=e._writableState,a=r.sync,o=r.writecb;if(\"function\"!=typeof o)throw new B;if(h(r),t)_(e,r,a,t,o);else{var i=R(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),a?n.nextTick(b,e,r,i,o):b(e,r,i,o)}}function b(e,t,n,r){n||y(e,t),t.pendingcb--,r(),S(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\"drain\"))}function C(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=Array(r),i=t.corkedRequestsFree;i.entry=n;for(var d=0,s=!0;n;)o[d]=n,n.isBuf||(s=!1),n=n.next,d+=1;o.allBuffers=s,g(e,t,!0,t.length,o,\"\",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,p=t.objectMode?1:l.length;if(g(e,t,!1,p,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&Y(e,n),t.prefinished=!0,e.emit(\"prefinish\"),S(e,t)})}function w(e,t){t.prefinished||t.finalCalled||(\"function\"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit(\"prefinish\")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(E,e,t)))}function S(e,t){var n=R(t);if(n&&(w(e,t),0===t.pendingcb&&(t.finished=!0,e.emit(\"finish\"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function T(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?n.nextTick(r):e.once(\"finish\",r)),t.ended=!0,e.writable=!1}function v(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree.next=e}t.exports=l;var k;l.WritableState=s;var L={deprecate:e(\"util-deprecate\")},A=e(\"./internal/streams/stream\"),x=e(\"buffer\").Buffer,N=r.Uint8Array||function(){},D=e(\"./internal/streams/destroy\"),I=e(\"./internal/streams/state\"),P=I.getHighWaterMark,M=e(\"../errors\").codes,O=M.ERR_INVALID_ARG_TYPE,F=M.ERR_METHOD_NOT_IMPLEMENTED,B=M.ERR_MULTIPLE_CALLBACK,U=M.ERR_STREAM_CANNOT_PIPE,j=M.ERR_STREAM_DESTROYED,q=M.ERR_STREAM_NULL_VALUES,W=M.ERR_STREAM_WRITE_AFTER_END,H=M.ERR_UNKNOWN_ENCODING,Y=D.errorOrDestroy;e(\"inherits\")(l,A),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,\"buffer\",{get:L.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(e){}}();var V;\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!V.call(this,e)||!(this!==l)&&e&&e._writableState instanceof s}})):V=function(e){return e instanceof this},l.prototype.pipe=function(){Y(this,new U)},l.prototype.write=function(e,t,n){var r=this._writableState,a=!1,s=!r.objectMode&&i(e);return s&&!x.isBuffer(e)&&(e=o(e)),\"function\"==typeof t&&(n=t,t=null),s?t=\"buffer\":!t&&(t=r.defaultEncoding),\"function\"!=typeof n&&(n=d),r.ending?c(this,n):(s||u(this,r,e,n))&&(r.pendingcb++,a=f(this,r,s,e,t,n)),a},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&C(this,e))},l.prototype.setDefaultEncoding=function(e){if(\"string\"==typeof e&&(e=e.toLowerCase()),!(-1<[\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())))throw new H(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,\"writableBuffer\",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,n){n(new F(\"_write()\"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;return\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||T(this,r,n),this},Object.defineProperty(l.prototype,\"writableLength\",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,\"destroyed\",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=D.destroy,l.prototype._undestroy=D.undestroy,l.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e(\"_process\"),\"undefined\"==typeof global?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:global)},{\"../errors\":15,\"./_stream_duplex\":16,\"./internal/streams/destroy\":23,\"./internal/streams/state\":27,\"./internal/streams/stream\":28,_process:12,buffer:3,inherits:10,\"util-deprecate\":32}],21:[function(e,t){(function(n){(function(){'use strict';function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return{value:e,done:t}}function o(e){var t=e[c];if(null!==t){var n=e[h].read();null!==n&&(e[g]=null,e[c]=null,e[u]=null,t(a(n,!1)))}}function i(e){n.nextTick(o,e)}function d(e,t){return function(n,r){e.then(function(){return t[f]?void n(a(void 0,!0)):void t[_](n,r)},r)}}var s,l=e(\"./end-of-stream\"),c=Symbol(\"lastResolve\"),u=Symbol(\"lastReject\"),p=Symbol(\"error\"),f=Symbol(\"ended\"),g=Symbol(\"lastPromise\"),_=Symbol(\"handlePromise\"),h=Symbol(\"stream\"),m=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((s={get stream(){return this[h]},next:function(){var e=this,t=this[p];if(null!==t)return Promise.reject(t);if(this[f])return Promise.resolve(a(void 0,!0));if(this[h].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[p]?r(e[p]):t(a(void 0,!0))})});var r,o=this[g];if(o)r=new Promise(d(o,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(a(i,!1));r=new Promise(this[_])}return this[g]=r,r}},r(s,Symbol.asyncIterator,function(){return this}),r(s,\"return\",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){return e?void n(e):void t(a(void 0,!0))})})}),s),m);t.exports=function(e){var t,n=Object.create(b,(t={},r(t,h,{value:e,writable:!0}),r(t,c,{value:null,writable:!0}),r(t,u,{value:null,writable:!0}),r(t,p,{value:null,writable:!0}),r(t,f,{value:e._readableState.endEmitted,writable:!0}),r(t,_,{value:function(e,t){var r=n[h].read();r?(n[g]=null,n[c]=null,n[u]=null,e(a(r,!1))):(n[c]=e,n[u]=t)},writable:!0}),t));return n[g]=null,l(e,function(e){if(e&&\"ERR_STREAM_PREMATURE_CLOSE\"!==e.code){var t=n[u];return null!==t&&(n[g]=null,n[c]=null,n[u]=null,t(e)),void(n[p]=e)}var r=n[c];null!==r&&(n[g]=null,n[c]=null,n[u]=null,r(a(void 0,!0))),n[f]=!0}),e.on(\"readable\",i.bind(null,n)),n}}).call(this)}).call(this,e(\"_process\"))},{\"./end-of-stream\":24,_process:12}],22:[function(e,t){'use strict';function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function d(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){u.prototype.copy.call(e,t,n)}var l=e(\"buffer\"),u=l.Buffer,p=e(\"util\"),f=p.inspect,g=f&&f.custom||\"inspect\";t.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return d(e,[{key:\"push\",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:\"unshift\",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:\"shift\",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:\"clear\",value:function(){this.head=this.tail=null,this.length=0}},{key:\"join\",value:function(e){if(0===this.length)return\"\";for(var t=this.head,n=\"\"+t.data;t=t.next;)n+=e+t.data;return n}},{key:\"concat\",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),n=this.head,r=0;n;)s(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:\"consume\",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):e===this.head.data.length?n=this.shift():n=t?this._getString(e):this._getBuffer(e),n}},{key:\"first\",value:function(){return this.head.data}},{key:\"_getString\",value:function(e){var t=this.head,r=1,a=t.data;for(e-=a.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(a+=i===o.length?o:o.slice(0,e),e-=i,0===e){i===o.length?(++r,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,a}},{key:\"_getBuffer\",value:function(e){var t=u.allocUnsafe(e),r=this.head,a=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),e-=i,0===e){i===o.length?(++a,this.head=r.next?r.next:this.tail=null):(this.head=r,r.data=o.slice(i));break}++a}return this.length-=a,t}},{key:g,value:function(e,t){return f(this,r({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){'use strict';function n(e,t){a(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit(\"close\")}function a(e,t){e.emit(\"error\",t)}t.exports={destroy:function(t,o){var i=this,d=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return d||s?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(a,this,t)):e.nextTick(a,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!o&&t?i._writableState?i._writableState.errorEmitted?e.nextTick(r,i):(i._writableState.errorEmitted=!0,e.nextTick(n,i,t)):e.nextTick(n,i,t):o?(e.nextTick(r,i),o(t)):e.nextTick(r,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit(\"error\",t)}}}).call(this)}).call(this,e(\"_process\"))},{_process:12}],24:[function(e,t){'use strict';function n(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r)}}}function r(){}function a(e){return e.setHeader&&\"function\"==typeof e.abort}function o(e,t,d){if(\"function\"==typeof t)return o(e,null,t);t||(t={}),d=n(d||r);var s=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||p()},u=e._writableState&&e._writableState.finished,p=function(){l=!1,u=!0,s||d.call(e)},f=e._readableState&&e._readableState.endEmitted,g=function(){s=!1,f=!0,l||d.call(e)},_=function(t){d.call(e,t)},h=function(){var t;return s&&!f?(e._readableState&&e._readableState.ended||(t=new i),d.call(e,t)):l&&!u?(e._writableState&&e._writableState.ended||(t=new i),d.call(e,t)):void 0},m=function(){e.req.on(\"finish\",p)};return a(e)?(e.on(\"complete\",p),e.on(\"abort\",h),e.req?m():e.on(\"request\",m)):l&&!e._writableState&&(e.on(\"end\",c),e.on(\"close\",c)),e.on(\"end\",g),e.on(\"finish\",p),!1!==t.error&&e.on(\"error\",_),e.on(\"close\",h),function(){e.removeListener(\"complete\",p),e.removeListener(\"abort\",h),e.removeListener(\"request\",m),e.req&&e.req.removeListener(\"finish\",p),e.removeListener(\"end\",c),e.removeListener(\"close\",c),e.removeListener(\"finish\",p),e.removeListener(\"end\",g),e.removeListener(\"error\",_),e.removeListener(\"close\",h)}}var i=e(\"../../../errors\").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=o},{\"../../../errors\":15}],25:[function(e,t){t.exports=function(){throw new Error(\"Readable.from is not available in the browser\")}},{}],26:[function(e,t){'use strict';function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function r(e){if(e)throw e}function a(e){return e.setHeader&&\"function\"==typeof e.abort}function o(t,r,o,i){i=n(i);var d=!1;t.on(\"close\",function(){d=!0}),l===void 0&&(l=e(\"./end-of-stream\")),l(t,{readable:r,writable:o},function(e){return e?i(e):void(d=!0,i())});var s=!1;return function(e){if(!d)return s?void 0:(s=!0,a(t)?t.abort():\"function\"==typeof t.destroy?t.destroy():void i(e||new p(\"pipe\")))}}function i(e){e()}function d(e,t){return e.pipe(t)}function s(e){return e.length?\"function\"==typeof e[e.length-1]?e.pop():r:r}var l,c=e(\"../../../errors\").codes,u=c.ERR_MISSING_ARGS,p=c.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new u(\"streams\");var a,l=t.map(function(e,n){var d=n<t.length-1;return o(e,d,0<n,function(e){a||(a=e),e&&l.forEach(i),d||(l.forEach(i),r(a))})});return t.reduce(d)}},{\"../../../errors\":15,\"./end-of-stream\":24}],27:[function(e,n){'use strict';function r(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}var a=e(\"../../../errors\").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(e,n,o,i){var d=r(n,i,o);if(null!=d){if(!(isFinite(d)&&t(d)===d)||0>d){var s=i?o:\"highWaterMark\";throw new a(s,d)}return t(d)}return e.objectMode?16:16384}}},{\"../../../errors\":15}],28:[function(e,t){t.exports=e(\"events\").EventEmitter},{events:7}],29:[function(e,t,n){n=t.exports=e(\"./lib/_stream_readable.js\"),n.Stream=n,n.Readable=n,n.Writable=e(\"./lib/_stream_writable.js\"),n.Duplex=e(\"./lib/_stream_duplex.js\"),n.Transform=e(\"./lib/_stream_transform.js\"),n.PassThrough=e(\"./lib/_stream_passthrough.js\"),n.finished=e(\"./lib/internal/streams/end-of-stream.js\"),n.pipeline=e(\"./lib/internal/streams/pipeline.js\")},{\"./lib/_stream_duplex.js\":16,\"./lib/_stream_passthrough.js\":17,\"./lib/_stream_readable.js\":18,\"./lib/_stream_transform.js\":19,\"./lib/_stream_writable.js\":20,\"./lib/internal/streams/end-of-stream.js\":24,\"./lib/internal/streams/pipeline.js\":26}],30:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=e(\"buffer\"),i=o.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=a),a.prototype=Object.create(i.prototype),r(i,a),a.from=function(e,t,n){if(\"number\"==typeof e)throw new TypeError(\"Argument must not be a number\");return i(e,t,n)},a.alloc=function(e,t,n){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");var r=i(e);return void 0===t?r.fill(0):\"string\"==typeof n?r.fill(t,n):r.fill(t),r},a.allocUnsafe=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return i(e)},a.allocUnsafeSlow=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){'use strict';function r(e){if(!e)return\"utf8\";for(var t;;)switch(e){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return e;default:if(t)return;e=(\"\"+e).toLowerCase(),t=!0;}}function a(e){var t=r(e);if(\"string\"!=typeof t&&(m.isEncoding===b||!b(e)))throw new Error(\"Unknown encoding: \"+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case\"utf16le\":this.text=u,this.end=p,t=4;break;case\"utf8\":this.fillLast=c,t=4;break;case\"base64\":this.text=f,this.end=g,t=3;break;default:return this.write=_,void(this.end=h);}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function d(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var a=d(t[r]);return 0<=a?(0<a&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=d(t[r]),0<=a)?(0<a&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=d(t[r]),0<=a?(0<a&&(2===a?a=0:e.lastNeed=a-3),a):0)}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,\"\\uFFFD\";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,\"\\uFFFD\";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,\"\\uFFFD\"}}function c(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function u(e,t){if(0==(e.length-t)%2){var n=e.toString(\"utf16le\",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(\"utf16le\",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):\"\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\"utf16le\",0,n)}return t}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString(\"base64\",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(\"base64\",t,e.length-r))}function g(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+this.lastChar.toString(\"base64\",0,3-this.lastNeed):t}function _(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):\"\"}var m=e(\"safe-buffer\").Buffer,b=m.isEncoding||function(e){switch(e=\"\"+e,e&&e.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1;}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return\"\";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return\"\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||\"\"},o.prototype.end=function(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+\"\\uFFFD\":t},o.prototype.text=function(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString(\"utf8\",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(\"utf8\",t,r)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{\"safe-buffer\":30}],32:[function(e,t){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&\"true\"===(n+\"\").toLowerCase()}t.exports=function(e,t){function r(){if(!a){if(n(\"throwDeprecation\"))throw new Error(t);else n(\"traceDeprecation\")?console.trace(t):console.warn(t);a=!0}return e.apply(this,arguments)}if(n(\"noDeprecation\"))return e;var a=!1;return r}}).call(this)}).call(this,\"undefined\"==typeof global?\"undefined\"==typeof self?\"undefined\"==typeof window?{}:window:self:global)},{}],\"/\":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\\s\\n/g,\"\")}function r(e){console.warn(e)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const a=e(\"debug\")(\"simple-peer\"),o=e(\"get-browser-rtc\"),i=e(\"randombytes\"),d=e(\"readable-stream\"),s=e(\"queue-microtask\"),l=e(\"err-code\"),{Buffer:c}=e(\"buffer\"),u=65536;class p extends d.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=i(4).toString(\"hex\").slice(0,7),this._debug(\"new peer %o\",e),this.channelName=e.initiator?e.channelName||i(20).toString(\"hex\"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||p.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},p.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5000,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&\"object\"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)if(\"undefined\"==typeof window)throw l(new Error(\"No WebRTC support: Specify `opts.wrtc` option in this environment\"),\"ERR_WEBRTC_SUPPORT\");else throw l(new Error(\"No WebRTC support: Not a supported browser\"),\"ERR_WEBRTC_SUPPORT\");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(l(e,\"ERR_PC_CONSTRUCTOR\"))}this._isReactNativeWebrtc=\"number\"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},\"object\"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(l(e,\"ERR_PC_PEER_IDENTITY\"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug(\"initial negotiation\"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once(\"finish\",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&\"open\"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot signal after peer is destroyed\"),\"ERR_DESTROYED\");if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug(\"signal()\"),e.renegotiate&&this.initiator&&(this._debug(\"got request to renegotiate\"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug(\"got request for transceiver\"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],\"offer\"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(l(e,\"ERR_SET_REMOTE_DESCRIPTION\"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(l(new Error(\"signal() called with invalid signal data\"),\"ERR_SIGNALING\"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(\".local\")?r(\"Ignoring unsupported ICE candidate.\"):this.destroy(l(e,\"ERR_ADD_ICE_CANDIDATE\"))})}send(e){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot send after peer is destroyed\"),\"ERR_DESTROYED\");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot addTransceiver after peer is destroyed\"),\"ERR_DESTROYED\");if(this._debug(\"addTransceiver()\"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(l(e,\"ERR_ADD_TRANSCEIVER\"))}else this.emit(\"signal\",{type:\"transceiverRequest\",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot addStream after peer is destroyed\"),\"ERR_DESTROYED\");this._debug(\"addStream()\"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error(\"cannot addTrack after peer is destroyed\"),\"ERR_DESTROYED\");this._debug(\"addTrack()\");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(!r)r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation();else if(r.removed)throw l(new Error(\"Track has been removed. You should enable/disable tracks that you want to re-add.\"),\"ERR_SENDER_REMOVED\");else throw l(new Error(\"Track has already been added to that stream.\"),\"ERR_SENDER_ALREADY_ADDED\")}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw l(new Error(\"cannot replaceTrack after peer is destroyed\"),\"ERR_DESTROYED\");this._debug(\"replaceTrack()\");const r=this._senderMap.get(e),a=r?r.get(n):null;if(!a)throw l(new Error(\"Cannot replace track that was never added.\"),\"ERR_TRACK_NOT_ADDED\");t&&this._senderMap.set(t,r),null==a.replaceTrack?this.destroy(l(new Error(\"replaceTrack is not supported in this browser\"),\"ERR_UNSUPPORTED_REPLACETRACK\")):a.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error(\"cannot removeTrack after peer is destroyed\"),\"ERR_DESTROYED\");this._debug(\"removeSender()\");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw l(new Error(\"Cannot remove track that was never added.\"),\"ERR_TRACK_NOT_ADDED\");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){\"NS_ERROR_UNEXPECTED\"===e.name?this._sendersAwaitingStable.push(r):this.destroy(l(e,\"ERR_REMOVE_TRACK\"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot removeStream after peer is destroyed\"),\"ERR_DESTROYED\");this._debug(\"removeSenders()\"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug(\"_needsNegotiation\"),this._batchedNegotiation||(this._batchedNegotiation=!0,s(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug(\"starting batched negotiation\"),this.negotiate()):this._debug(\"non-initiator initial negotiation request discarded\"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error(\"cannot negotiate after peer is destroyed\"),\"ERR_DESTROYED\");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug(\"already negotiating, queueing\")):(this._debug(\"start negotiation\"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug(\"already negotiating, queueing\")):(this._debug(\"requesting negotiation from initiator\"),this.emit(\"signal\",{type:\"renegotiate\",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug(\"destroying (error: %s)\",e&&(e.message||e)),s(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug(\"destroy (error: %s)\",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener(\"finish\",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit(\"error\",e),this.emit(\"close\"),t()}))}_setupData(e){if(!e.channel)return this.destroy(l(new Error(\"Data channel event is missing `channel` property\"),\"ERR_DATA_CHANNEL\"));this._channel=e.channel,this._channel.binaryType=\"arraybuffer\",\"number\"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(l(t,\"ERR_DATA_CHANNEL\"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&\"closing\"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5000)}_read(){}_write(e,t,n){if(this.destroyed)return n(l(new Error(\"cannot write after peer is destroyed\"),\"ERR_DATA_CHANNEL\"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(l(e,\"ERR_DATA_CHANNEL\"))}this._channel.bufferedAmount>u?(this._debug(\"start backpressure: bufferedAmount %d\",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug(\"write before connect\"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once(\"connect\",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug(\"started iceComplete timeout\"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug(\"iceComplete timeout completed\"),this.emit(\"iceTimeout\"),this.emit(\"_iceComplete\"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug(\"signal\"),this.emit(\"signal\",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug(\"createOffer success\"),this.destroyed||(this.trickle||this._iceComplete?t():this.once(\"_iceComplete\",t))}).catch(e=>{this.destroy(l(e,\"ERR_SET_LOCAL_DESCRIPTION\"))})}).catch(e=>{this.destroy(l(e,\"ERR_CREATE_OFFER\"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug(\"signal\"),this.emit(\"signal\",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once(\"_iceComplete\",t))}).catch(e=>{this.destroy(l(e,\"ERR_SET_LOCAL_DESCRIPTION\"))})}).catch(e=>{this.destroy(l(e,\"ERR_CREATE_ANSWER\"))})}_onConnectionStateChange(){this.destroyed||\"failed\"===this._pc.connectionState&&this.destroy(l(new Error(\"Connection failed.\"),\"ERR_CONNECTION_FAILURE\"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug(\"iceStateChange (connection: %s) (gathering: %s)\",e,t),this.emit(\"iceStateChange\",e,t),(\"connected\"===e||\"completed\"===e)&&(this._pcReady=!0,this._maybeReady()),\"failed\"===e&&this.destroy(l(new Error(\"Ice connection failed.\"),\"ERR_ICE_CONNECTION_FAILURE\")),\"closed\"===e&&this.destroy(l(new Error(\"Ice connection closed.\"),\"ERR_ICE_CONNECTION_CLOSED\"))}getStats(e){const t=e=>(\"[object Array]\"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(e=>{r.push(t(e))}),e(null,r)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(e=>{const n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))}),e(null,r)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug(\"maybeReady pc %s channel %s\",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},a={},o={};let i=!1;n.forEach(e=>{(\"remotecandidate\"===e.type||\"remote-candidate\"===e.type)&&(r[e.id]=e),(\"localcandidate\"===e.type||\"local-candidate\"===e.type)&&(a[e.id]=e),(\"candidatepair\"===e.type||\"candidate-pair\"===e.type)&&(o[e.id]=e)});const d=e=>{i=!0;let t=a[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):\"string\"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(\":\"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(\":\")?\"IPv6\":\"IPv4\");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):\"string\"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(\":\"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(\":\")?\"IPv6\":\"IPv4\"),this._debug(\"connect local: %s:%s remote: %s:%s\",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{\"transport\"===e.type&&e.selectedCandidatePairId&&d(o[e.selectedCandidatePairId]),(\"googCandidatePair\"===e.type&&\"true\"===e.googActiveConnection||(\"candidatepair\"===e.type||\"candidate-pair\"===e.type)&&e.selected)&&d(e)}),!i&&(!Object.keys(o).length||Object.keys(a).length))return void setTimeout(e,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(l(e,\"ERR_DATA_CHANNEL\"))}this._chunk=null,this._debug(\"sent chunk from \\\"write before connect\\\"\");const e=this._cb;this._cb=null,e(null)}\"number\"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug(\"connect\"),this.emit(\"connect\")})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(\"stable\"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug(\"flushing sender queue\",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug(\"flushing negotiation queue\"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug(\"negotiated\"),this.emit(\"negotiated\"))),this._debug(\"signalingStateChange %s\",this._pc.signalingState),this.emit(\"signalingStateChange\",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit(\"signal\",{type:\"candidate\",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit(\"_iceComplete\")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=c.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug(\"ending backpressure: bufferedAmount %d\",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug(\"on channel open\"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug(\"on channel close\"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug(\"on track\"),this.emit(\"track\",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),s(()=>{this._debug(\"on stream\"),this.emit(\"stream\",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]=\"[\"+this._id+\"] \"+e[0],a.apply(null,e)}}p.WEBRTC_SUPPORT=!!o(),p.config={iceServers:[{urls:[\"stun:stun.l.google.com:19302\",\"stun:global.stun.twilio.com:3478\"]}],sdpSemantics:\"unified-plan\"},p.channelConfig={},t.exports=p},{buffer:3,debug:4,\"err-code\":6,\"get-browser-rtc\":8,\"queue-microtask\":13,randombytes:14,\"readable-stream\":29}]},{},[])(\"/\")});", "'use strict';\n\nconst isHyper = typeof process !== 'undefined' && process.env.TERM_PROGRAM === 'Hyper';\nconst isWindows = typeof process !== 'undefined' && process.platform === 'win32';\nconst isLinux = typeof process !== 'undefined' && process.platform === 'linux';\n\nconst common = {\n  ballotDisabled: '☒',\n  ballotOff: '☐',\n  ballotOn: '☑',\n  bullet: '•',\n  bulletWhite: '◦',\n  fullBlock: '█',\n  heart: '❤',\n  identicalTo: '≡',\n  line: '─',\n  mark: '※',\n  middot: '·',\n  minus: '－',\n  multiplication: '×',\n  obelus: '÷',\n  pencilDownRight: '✎',\n  pencilRight: '✏',\n  pencilUpRight: '✐',\n  percent: '%',\n  pilcrow2: '❡',\n  pilcrow: '¶',\n  plusMinus: '±',\n  question: '?',\n  section: '§',\n  starsOff: '☆',\n  starsOn: '★',\n  upDownArrow: '↕'\n};\n\nconst windows = Object.assign({}, common, {\n  check: '√',\n  cross: '×',\n  ellipsisLarge: '...',\n  ellipsis: '...',\n  info: 'i',\n  questionSmall: '?',\n  pointer: '>',\n  pointerSmall: '»',\n  radioOff: '( )',\n  radioOn: '(*)',\n  warning: '‼'\n});\n\nconst other = Object.assign({}, common, {\n  ballotCross: '✘',\n  check: '✔',\n  cross: '✖',\n  ellipsisLarge: '⋯',\n  ellipsis: '…',\n  info: 'ℹ',\n  questionFull: '？',\n  questionSmall: '﹖',\n  pointer: isLinux ? '▸' : '❯',\n  pointerSmall: isLinux ? '‣' : '›',\n  radioOff: '◯',\n  radioOn: '◉',\n  warning: '⚠'\n});\n\nmodule.exports = (isWindows && !isHyper) ? windows : other;\nReflect.defineProperty(module.exports, 'common', { enumerable: false, value: common });\nReflect.defineProperty(module.exports, 'windows', { enumerable: false, value: windows });\nReflect.defineProperty(module.exports, 'other', { enumerable: false, value: other });\n", "'use strict';\n\nconst isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\n\n/* eslint-disable no-control-regex */\n// this is a modified version of https://github.com/chalk/ansi-regex (MIT License)\nconst ANSI_REGEX = /[\\u001b\\u009b][[\\]#;?()]*(?:(?:(?:[^\\W_]*;?[^\\W_]*)\\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g;\n\nconst hasColor = () => {\n  if (typeof process !== 'undefined') {\n    return process.env.FORCE_COLOR !== '0';\n  }\n  return false;\n};\n\nconst create = () => {\n  const colors = {\n    enabled: hasColor(),\n    visible: true,\n    styles: {},\n    keys: {}\n  };\n\n  const ansi = style => {\n    let open = style.open = `\\u001b[${style.codes[0]}m`;\n    let close = style.close = `\\u001b[${style.codes[1]}m`;\n    let regex = style.regex = new RegExp(`\\\\u001b\\\\[${style.codes[1]}m`, 'g');\n    style.wrap = (input, newline) => {\n      if (input.includes(close)) input = input.replace(regex, close + open);\n      let output = open + input + close;\n      // see https://github.com/chalk/chalk/pull/92, thanks to the\n      // chalk contributors for this fix. However, we've confirmed that\n      // this issue is also present in Windows terminals\n      return newline ? output.replace(/\\r*\\n/g, `${close}$&${open}`) : output;\n    };\n    return style;\n  };\n\n  const wrap = (style, input, newline) => {\n    return typeof style === 'function' ? style(input) : style.wrap(input, newline);\n  };\n\n  const style = (input, stack) => {\n    if (input === '' || input == null) return '';\n    if (colors.enabled === false) return input;\n    if (colors.visible === false) return '';\n    let str = '' + input;\n    let nl = str.includes('\\n');\n    let n = stack.length;\n    if (n > 0 && stack.includes('unstyle')) {\n      stack = [...new Set(['unstyle', ...stack])].reverse();\n    }\n    while (n-- > 0) str = wrap(colors.styles[stack[n]], str, nl);\n    return str;\n  };\n\n  const define = (name, codes, type) => {\n    colors.styles[name] = ansi({ name, codes });\n    let keys = colors.keys[type] || (colors.keys[type] = []);\n    keys.push(name);\n\n    Reflect.defineProperty(colors, name, {\n      configurable: true,\n      enumerable: true,\n      set(value) {\n        colors.alias(name, value);\n      },\n      get() {\n        let color = input => style(input, color.stack);\n        Reflect.setPrototypeOf(color, colors);\n        color.stack = this.stack ? this.stack.concat(name) : [name];\n        return color;\n      }\n    });\n  };\n\n  define('reset', [0, 0], 'modifier');\n  define('bold', [1, 22], 'modifier');\n  define('dim', [2, 22], 'modifier');\n  define('italic', [3, 23], 'modifier');\n  define('underline', [4, 24], 'modifier');\n  define('inverse', [7, 27], 'modifier');\n  define('hidden', [8, 28], 'modifier');\n  define('strikethrough', [9, 29], 'modifier');\n\n  define('black', [30, 39], 'color');\n  define('red', [31, 39], 'color');\n  define('green', [32, 39], 'color');\n  define('yellow', [33, 39], 'color');\n  define('blue', [34, 39], 'color');\n  define('magenta', [35, 39], 'color');\n  define('cyan', [36, 39], 'color');\n  define('white', [37, 39], 'color');\n  define('gray', [90, 39], 'color');\n  define('grey', [90, 39], 'color');\n\n  define('bgBlack', [40, 49], 'bg');\n  define('bgRed', [41, 49], 'bg');\n  define('bgGreen', [42, 49], 'bg');\n  define('bgYellow', [43, 49], 'bg');\n  define('bgBlue', [44, 49], 'bg');\n  define('bgMagenta', [45, 49], 'bg');\n  define('bgCyan', [46, 49], 'bg');\n  define('bgWhite', [47, 49], 'bg');\n\n  define('blackBright', [90, 39], 'bright');\n  define('redBright', [91, 39], 'bright');\n  define('greenBright', [92, 39], 'bright');\n  define('yellowBright', [93, 39], 'bright');\n  define('blueBright', [94, 39], 'bright');\n  define('magentaBright', [95, 39], 'bright');\n  define('cyanBright', [96, 39], 'bright');\n  define('whiteBright', [97, 39], 'bright');\n\n  define('bgBlackBright', [100, 49], 'bgBright');\n  define('bgRedBright', [101, 49], 'bgBright');\n  define('bgGreenBright', [102, 49], 'bgBright');\n  define('bgYellowBright', [103, 49], 'bgBright');\n  define('bgBlueBright', [104, 49], 'bgBright');\n  define('bgMagentaBright', [105, 49], 'bgBright');\n  define('bgCyanBright', [106, 49], 'bgBright');\n  define('bgWhiteBright', [107, 49], 'bgBright');\n\n  colors.ansiRegex = ANSI_REGEX;\n  colors.hasColor = colors.hasAnsi = str => {\n    colors.ansiRegex.lastIndex = 0;\n    return typeof str === 'string' && str !== '' && colors.ansiRegex.test(str);\n  };\n\n  colors.alias = (name, color) => {\n    let fn = typeof color === 'string' ? colors[color] : color;\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('Expected alias to be the name of an existing color (string) or a function');\n    }\n\n    if (!fn.stack) {\n      Reflect.defineProperty(fn, 'name', { value: name });\n      colors.styles[name] = fn;\n      fn.stack = [name];\n    }\n\n    Reflect.defineProperty(colors, name, {\n      configurable: true,\n      enumerable: true,\n      set(value) {\n        colors.alias(name, value);\n      },\n      get() {\n        let color = input => style(input, color.stack);\n        Reflect.setPrototypeOf(color, colors);\n        color.stack = this.stack ? this.stack.concat(fn.stack) : fn.stack;\n        return color;\n      }\n    });\n  };\n\n  colors.theme = custom => {\n    if (!isObject(custom)) throw new TypeError('Expected theme to be an object');\n    for (let name of Object.keys(custom)) {\n      colors.alias(name, custom[name]);\n    }\n    return colors;\n  };\n\n  colors.alias('unstyle', str => {\n    if (typeof str === 'string' && str !== '') {\n      colors.ansiRegex.lastIndex = 0;\n      return str.replace(colors.ansiRegex, '');\n    }\n    return '';\n  });\n\n  colors.alias('noop', str => str);\n  colors.none = colors.clear = colors.noop;\n\n  colors.stripColor = colors.unstyle;\n  colors.symbols = require('./symbols');\n  colors.define = define;\n  return colors;\n};\n\nmodule.exports = create();\nmodule.exports.create = create;\n", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n", "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n", "/**!\r\n * FlexSearch.js v0.7.21 (Bundle)\r\n * Copyright 2018-2021 Nextapps GmbH\r\n * Author: Thomas Wilkerling\r\n * Licence: Apache-2.0\r\n * https://github.com/nextapps-de/flexsearch\r\n */\n(function _f(self){'use strict';try{if(module)self=module}catch(e){}self._factory=_f;var t;function u(a){return\"undefined\"!==typeof a?a:!0}function aa(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=v();return b}function v(){return Object.create(null)}function ba(a,b){return b.length-a.length}function x(a){return\"string\"===typeof a}function C(a){return\"object\"===typeof a}function D(a){return\"function\"===typeof a};function ca(a,b){var c=da;if(a&&(b&&(a=E(a,b)),this.H&&(a=E(a,this.H)),this.J&&1<a.length&&(a=E(a,this.J)),c||\"\"===c)){a=a.split(c);if(this.filter){b=this.filter;c=a.length;const d=[];for(let e=0,f=0;e<c;e++){const g=a[e];g&&!b[g]&&(d[f++]=g)}a=d}return a}return a}const da=/[\\p{Z}\\p{S}\\p{P}\\p{C}]+/u,ea=/[\\u0300-\\u036f]/g;\nfunction fa(a,b){const c=Object.keys(a),d=c.length,e=[];let f=\"\",g=0;for(let h=0,k,m;h<d;h++)k=c[h],(m=a[k])?(e[g++]=F(b?\"(?!\\\\b)\"+k+\"(\\\\b|_)\":k),e[g++]=m):f+=(f?\"|\":\"\")+k;f&&(e[g++]=F(b?\"(?!\\\\b)(\"+f+\")(\\\\b|_)\":\"(\"+f+\")\"),e[g]=\"\");return e}function E(a,b){for(let c=0,d=b.length;c<d&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a}function F(a){return new RegExp(a,\"g\")}function ha(a){let b=\"\",c=\"\";for(let d=0,e=a.length,f;d<e;d++)(f=a[d])!==c&&(b+=c=f);return b};var ja={encode:ia,F:!1,G:\"\"};function ia(a){return ca.call(this,(\"\"+a).toLowerCase(),!1)};const ka={},G={};function la(a){I(a,\"add\");I(a,\"append\");I(a,\"search\");I(a,\"update\");I(a,\"remove\")}function I(a,b){a[b+\"Async\"]=function(){const c=this,d=arguments;var e=d[d.length-1];let f;D(e)&&(f=e,delete d[d.length-1]);e=new Promise(function(g){setTimeout(function(){c.async=!0;const h=c[b].apply(c,d);c.async=!1;g(h)})});return f?(e.then(f),this):e}};function ma(a,b,c,d){const e=a.length;let f=[],g,h,k=0;d&&(d=[]);for(let m=e-1;0<=m;m--){const n=a[m],w=n.length,q=v();let r=!g;for(let l=0;l<w;l++){const p=n[l],z=p.length;if(z)for(let B=0,A,y;B<z;B++)if(y=p[B],g){if(g[y]){if(!m)if(c)c--;else if(f[k++]=y,k===b)return f;if(m||d)q[y]=1;r=!0}if(d&&(h[y]=(A=h[y])?++A:A=1,A<e)){const H=d[A-2]||(d[A-2]=[]);H[H.length]=y}}else q[y]=1}if(d)g||(h=q);else if(!r)return[];g=q}if(d)for(let m=d.length-1,n,w;0<=m;m--){n=d[m];w=n.length;for(let q=0,r;q<w;q++)if(r=\nn[q],!g[r]){if(c)c--;else if(f[k++]=r,k===b)return f;g[r]=1}}return f}function na(a,b){const c=v(),d=v(),e=[];for(let f=0;f<a.length;f++)c[a[f]]=1;for(let f=0,g;f<b.length;f++){g=b[f];for(let h=0,k;h<g.length;h++)k=g[h],c[k]&&!d[k]&&(d[k]=1,e[e.length]=k)}return e};function J(a){this.l=!0!==a&&a;this.cache=v();this.h=[]}function oa(a,b,c){C(a)&&(a=a.query);let d=this.cache.get(a);d||(d=this.search(a,b,c),this.cache.set(a,d));return d}J.prototype.set=function(a,b){if(!this.cache[a]){var c=this.h.length;c===this.l?delete this.cache[this.h[c-1]]:c++;for(--c;0<c;c--)this.h[c]=this.h[c-1];this.h[0]=a}this.cache[a]=b};J.prototype.get=function(a){const b=this.cache[a];if(this.l&&b&&(a=this.h.indexOf(a))){const c=this.h[a-1];this.h[a-1]=this.h[a];this.h[a]=c}return b};const qa={memory:{charset:\"latin:extra\",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:\"latin:extra\",G:\"reverse\"},score:{charset:\"latin:advanced\",D:20,B:3,context:{depth:3,D:9}},\"default\":{}};function ra(a,b,c,d,e,f){setTimeout(function(){const g=a(c,JSON.stringify(f));g&&g.then?g.then(function(){b.export(a,b,c,d,e+1)}):b.export(a,b,c,d,e+1)})};function K(a,b){if(!(this instanceof K))return new K(a);var c;if(a){x(a)?a=qa[a]:(c=a.preset)&&(a=Object.assign({},c[c],a));c=a.charset;var d=a.lang;x(c)&&(-1===c.indexOf(\":\")&&(c+=\":default\"),c=G[c]);x(d)&&(d=ka[d])}else a={};let e,f,g=a.context||{};this.encode=a.encode||c&&c.encode||ia;this.register=b||v();this.D=e=a.resolution||9;this.G=b=c&&c.G||a.tokenize||\"strict\";this.depth=\"strict\"===b&&g.depth;this.l=u(g.bidirectional);this.s=f=u(a.optimize);this.m=u(a.fastupdate);this.B=a.minlength||1;this.C=\na.boost;this.map=f?aa(e):v();this.A=e=g.resolution||1;this.h=f?aa(e):v();this.F=c&&c.F||a.rtl;this.H=(b=a.matcher||d&&d.H)&&fa(b,!1);this.J=(b=a.stemmer||d&&d.J)&&fa(b,!0);if(c=b=a.filter||d&&d.filter){c=b;d=v();for(let h=0,k=c.length;h<k;h++)d[c[h]]=1;c=d}this.filter=c;this.cache=(b=a.cache)&&new J(b)}t=K.prototype;t.append=function(a,b){return this.add(a,b,!0)};\nt.add=function(a,b,c,d){if(b&&(a||0===a)){if(!d&&!c&&this.register[a])return this.update(a,b);b=this.encode(b);if(d=b.length){const m=v(),n=v(),w=this.depth,q=this.D;for(let r=0;r<d;r++){let l=b[this.F?d-1-r:r];var e=l.length;if(l&&e>=this.B&&(w||!n[l])){var f=L(q,d,r),g=\"\";switch(this.G){case \"full\":if(3<e){for(f=0;f<e;f++)for(var h=e;h>f;h--)if(h-f>=this.B){var k=L(q,d,r,e,f);g=l.substring(f,h);M(this,n,g,k,a,c)}break}case \"reverse\":if(2<e){for(h=e-1;0<h;h--)g=l[h]+g,g.length>=this.B&&M(this,n,\ng,L(q,d,r,e,h),a,c);g=\"\"}case \"forward\":if(1<e){for(h=0;h<e;h++)g+=l[h],g.length>=this.B&&M(this,n,g,f,a,c);break}default:if(this.C&&(f=Math.min(f/this.C(b,l,r)|0,q-1)),M(this,n,l,f,a,c),w&&1<d&&r<d-1)for(e=v(),g=this.A,f=l,h=Math.min(w+1,d-r),e[f]=1,k=1;k<h;k++)if((l=b[this.F?d-1-r-k:r+k])&&l.length>=this.B&&!e[l]){e[l]=1;const p=this.l&&l>f;M(this,m,p?f:l,L(g+(d/2>g?0:1),d,r,h-1,k-1),a,c,p?l:f)}}}}this.m||(this.register[a]=1)}}return this};\nfunction L(a,b,c,d,e){return c&&1<a?b+(d||0)<=a?c+(e||0):(a-1)/(b+(d||0))*(c+(e||0))+1|0:0}function M(a,b,c,d,e,f,g){let h=g?a.h:a.map;if(!b[c]||g&&!b[c][g])a.s&&(h=h[d]),g?(b=b[c]||(b[c]=v()),b[g]=1,h=h[g]||(h[g]=v())):b[c]=1,h=h[c]||(h[c]=[]),a.s||(h=h[d]||(h[d]=[])),f&&-1!==h.indexOf(e)||(h[h.length]=e,a.m&&(a=a.register[e]||(a.register[e]=[]),a[a.length]=h))}\nt.search=function(a,b,c){c||(!b&&C(a)?(c=a,a=c.query):C(b)&&(c=b));let d=[],e;let f,g=0;if(c){b=c.limit;g=c.offset||0;var h=c.context;f=c.suggest}if(a&&(a=this.encode(a),e=a.length,1<e)){c=v();var k=[];for(let n=0,w=0,q;n<e;n++)if((q=a[n])&&q.length>=this.B&&!c[q])if(this.s||f||this.map[q])k[w++]=q,c[q]=1;else return d;a=k;e=a.length}if(!e)return d;b||(b=100);h=this.depth&&1<e&&!1!==h;c=0;let m;h?(m=a[0],c=1):1<e&&a.sort(ba);for(let n,w;c<e;c++){w=a[c];h?(n=sa(this,d,f,b,g,2===e,w,m),f&&!1===n&&d.length||\n(m=w)):n=sa(this,d,f,b,g,1===e,w);if(n)return n;if(f&&c===e-1){k=d.length;if(!k){if(h){h=0;c=-1;continue}return d}if(1===k)return ta(d[0],b,g)}}return ma(d,b,g,f)};\nfunction sa(a,b,c,d,e,f,g,h){let k=[],m=h?a.h:a.map;a.s||(m=ua(m,g,h,a.l));if(m){let n=0;const w=Math.min(m.length,h?a.A:a.D);for(let q=0,r=0,l,p;q<w;q++)if(l=m[q])if(a.s&&(l=ua(l,g,h,a.l)),e&&l&&f&&(p=l.length,p<=e?(e-=p,l=null):(l=l.slice(e),e=0)),l&&(k[n++]=l,f&&(r+=l.length,r>=d)))break;if(n){if(f)return ta(k,d,0);b[b.length]=k;return}}return!c&&k}function ta(a,b,c){a=1===a.length?a[0]:[].concat.apply([],a);return c||a.length>b?a.slice(c,c+b):a}\nfunction ua(a,b,c,d){c?(d=d&&b>c,a=(a=a[d?b:c])&&a[d?c:b]):a=a[b];return a}t.contain=function(a){return!!this.register[a]};t.update=function(a,b){return this.remove(a).add(a,b)};\nt.remove=function(a,b){const c=this.register[a];if(c){if(this.m)for(let d=0,e;d<c.length;d++)e=c[d],e.splice(e.indexOf(a),1);else N(this.map,a,this.D,this.s),this.depth&&N(this.h,a,this.A,this.s);b||delete this.register[a];if(this.cache){b=this.cache;for(let d=0,e,f;d<b.h.length;d++)f=b.h[d],e=b.cache[f],-1!==e.indexOf(a)&&(b.h.splice(d--,1),delete b.cache[f])}}return this};\nfunction N(a,b,c,d,e){let f=0;if(a.constructor===Array)if(e)b=a.indexOf(b),-1!==b?1<a.length&&(a.splice(b,1),f++):f++;else{e=Math.min(a.length,c);for(let g=0,h;g<e;g++)if(h=a[g])f=N(h,b,c,d,e),d||f||delete a[g]}else for(let g in a)(f=N(a[g],b,c,d,e))||delete a[g];return f}t.searchCache=oa;\nt.export=function(a,b,c,d,e){let f,g;switch(e||(e=0)){case 0:f=\"reg\";if(this.m){g=v();for(let h in this.register)g[h]=1}else g=this.register;break;case 1:f=\"cfg\";g={doc:0,opt:this.s?1:0};break;case 2:f=\"map\";g=this.map;break;case 3:f=\"ctx\";g=this.h;break;default:return}ra(a,b||this,c?c+\".\"+f:f,d,e,g);return!0};t.import=function(a,b){if(b)switch(x(b)&&(b=JSON.parse(b)),a){case \"cfg\":this.s=!!b.opt;break;case \"reg\":this.m=!1;this.register=b;break;case \"map\":this.map=b;break;case \"ctx\":this.h=b}};la(K.prototype);function va(a){a=a.data;var b=self._index;const c=a.args;var d=a.task;switch(d){case \"init\":d=a.options||{};a=a.factory;b=d.encode;d.cache=!1;b&&0===b.indexOf(\"function\")&&(d.encode=Function(\"return \"+b)());a?(Function(\"return \"+a)()(self),self._index=new self.FlexSearch.Index(d),delete self.FlexSearch):self._index=new K(d);break;default:a=a.id,b=b[d].apply(b,c),postMessage(\"search\"===d?{id:a,msg:b}:{id:a})}};let wa=0;function O(a){if(!(this instanceof O))return new O(a);var b;a?D(b=a.encode)&&(a.encode=b.toString()):a={};(b=(self||window)._factory)&&(b=b.toString());const c=self.exports,d=this;this.o=xa(b,c,a.worker);this.h=v();if(this.o){if(c)this.o.on(\"message\",function(e){d.h[e.id](e.msg);delete d.h[e.id]});else this.o.onmessage=function(e){e=e.data;d.h[e.id](e.msg);delete d.h[e.id]};this.o.postMessage({task:\"init\",factory:b,options:a})}}P(\"add\");P(\"append\");P(\"search\");P(\"update\");P(\"remove\");\nfunction P(a){O.prototype[a]=O.prototype[a+\"Async\"]=function(){const b=this,c=[].slice.call(arguments);var d=c[c.length-1];let e;D(d)&&(e=d,c.splice(c.length-1,1));d=new Promise(function(f){setTimeout(function(){b.h[++wa]=f;b.o.postMessage({task:a,id:wa,args:c})})});return e?(d.then(e),this):d}}\nfunction xa(a,b,c){let d;try{d=b?eval('new (require(\"worker_threads\")[\"Worker\"])(\"../dist/node/node.js\")'):a?new Worker(URL.createObjectURL(new Blob([\"onmessage=\"+va.toString()],{type:\"text/javascript\"}))):new Worker(x(c)?c:\"worker/worker.js\",{type:\"module\"})}catch(e){}return d};function Q(a){if(!(this instanceof Q))return new Q(a);var b=a.document||a.doc||a,c;this.K=[];this.h=[];this.A=[];this.register=v();this.key=(c=b.key||b.id)&&S(c,this.A)||\"id\";this.m=u(a.fastupdate);this.C=(c=b.store)&&!0!==c&&[];this.store=c&&v();this.I=(c=b.tag)&&S(c,this.A);this.l=c&&v();this.cache=(c=a.cache)&&new J(c);a.cache=!1;this.o=a.worker;this.async=!1;c=v();let d=b.index||b.field||b;x(d)&&(d=[d]);for(let e=0,f,g;e<d.length;e++)f=d[e],x(f)||(g=f,f=f.field),g=C(g)?Object.assign({},a,g):a,\nthis.o&&(c[f]=new O(g),c[f].o||(this.o=!1)),this.o||(c[f]=new K(g,this.register)),this.K[e]=S(f,this.A),this.h[e]=f;if(this.C)for(a=b.store,x(a)&&(a=[a]),b=0;b<a.length;b++)this.C[b]=S(a[b],this.A);this.index=c}function S(a,b){const c=a.split(\":\");let d=0;for(let e=0;e<c.length;e++)a=c[e],0<=a.indexOf(\"[]\")&&(a=a.substring(0,a.length-2))&&(b[d]=!0),a&&(c[d++]=a);d<c.length&&(c.length=d);return 1<d?c:c[0]}function T(a,b){if(x(b))a=a[b];else for(let c=0;a&&c<b.length;c++)a=a[b[c]];return a}\nfunction U(a,b,c,d,e){a=a[e];if(d===c.length-1)b[e]=a;else if(a)if(a.constructor===Array)for(b=b[e]=Array(a.length),e=0;e<a.length;e++)U(a,b,c,d,e);else b=b[e]||(b[e]=v()),e=c[++d],U(a,b,c,d,e)}function V(a,b,c,d,e,f,g,h){if(a=a[g])if(d===b.length-1){if(a.constructor===Array){if(c[d]){for(b=0;b<a.length;b++)e.add(f,a[b],!0,!0);return}a=a.join(\" \")}e.add(f,a,h,!0)}else if(a.constructor===Array)for(g=0;g<a.length;g++)V(a,b,c,d,e,f,g,h);else g=b[++d],V(a,b,c,d,e,f,g,h)}t=Q.prototype;\nt.add=function(a,b,c){C(a)&&(b=a,a=T(b,this.key));if(b&&(a||0===a)){if(!c&&this.register[a])return this.update(a,b);for(let d=0,e,f;d<this.h.length;d++)f=this.h[d],e=this.K[d],x(e)&&(e=[e]),V(b,e,this.A,0,this.index[f],a,e[0],c);if(this.I){let d=T(b,this.I),e=v();x(d)&&(d=[d]);for(let f=0,g,h;f<d.length;f++)if(g=d[f],!e[g]&&(e[g]=1,h=this.l[g]||(this.l[g]=[]),!c||-1===h.indexOf(a)))if(h[h.length]=a,this.m){const k=this.register[a]||(this.register[a]=[]);k[k.length]=h}}if(this.store&&(!c||!this.store[a])){let d;\nif(this.C){d=v();for(let e=0,f;e<this.C.length;e++)f=this.C[e],x(f)?d[f]=b[f]:U(b,d,f,0,f[0])}this.store[a]=d||b}}return this};t.append=function(a,b){return this.add(a,b,!0)};t.update=function(a,b){return this.remove(a).add(a,b)};\nt.remove=function(a){C(a)&&(a=T(a,this.key));if(this.register[a]){for(var b=0;b<this.h.length&&(this.index[this.h[b]].remove(a,!this.o),!this.m);b++);if(this.I&&!this.m)for(let c in this.l){b=this.l[c];const d=b.indexOf(a);-1!==d&&(1<b.length?b.splice(d,1):delete this.l[c])}this.store&&delete this.store[a];delete this.register[a]}return this};\nt.search=function(a,b,c,d){c||(!b&&C(a)?(c=a,a=c.query):C(b)&&(c=b,b=0));let e=[],f=[],g,h,k,m,n,w,q=0;if(c)if(c.constructor===Array)k=c,c=null;else{k=(g=c.pluck)||c.index||c.field;m=c.tag;h=this.store&&c.enrich;n=\"and\"===c.bool;b=c.limit||100;w=c.offset||0;if(m&&(x(m)&&(m=[m]),!a)){for(let l=0,p;l<m.length;l++)if(p=ya.call(this,m[l],b,w,h))e[e.length]=p,q++;return q?e:[]}x(k)&&(k=[k])}k||(k=this.h);n=n&&(1<k.length||m&&1<m.length);const r=!d&&(this.o||this.async)&&[];for(let l=0,p,z,B;l<k.length;l++){let A;\nz=k[l];x(z)||(A=z,z=z.field);if(r)r[l]=this.index[z].searchAsync(a,b,A||c);else{d?p=d[l]:p=this.index[z].search(a,b,A||c);B=p&&p.length;if(m&&B){const y=[];let H=0;n&&(y[0]=[p]);for(let X=0,pa,R;X<m.length;X++)if(pa=m[X],B=(R=this.l[pa])&&R.length)H++,y[y.length]=n?[R]:R;H&&(p=n?ma(y,b||100,w||0):na(p,y),B=p.length)}if(B)f[q]=z,e[q++]=p;else if(n)return[]}}if(r){const l=this;return new Promise(function(p){Promise.all(r).then(function(z){p(l.search(a,b,c,z))})})}if(!q)return[];if(g&&(!h||!this.store))return e[0];\nfor(let l=0,p;l<f.length;l++){p=e[l];p.length&&h&&(p=za.call(this,p));if(g)return p;e[l]={field:f[l],result:p}}return e};function ya(a,b,c,d){let e=this.l[a],f=e&&e.length-c;if(f&&0<f){if(f>b||c)e=e.slice(c,c+b);d&&(e=za.call(this,e));return{tag:a,result:e}}}function za(a){const b=Array(a.length);for(let c=0,d;c<a.length;c++)d=a[c],b[c]={id:d,doc:this.store[d]};return b}t.contain=function(a){return!!this.register[a]};t.get=function(a){return this.store[a]};t.set=function(a,b){this.store[a]=b;return this};\nt.searchCache=oa;t.export=function(a,b,c,d,e){e||(e=0);d||(d=0);if(d<this.h.length){const f=this.h[d],g=this.index[f];b=this;setTimeout(function(){g.export(a,b,e?f.replace(\":\",\"-\"):\"\",d,e++)||(d++,e=1,b.export(a,b,f,d,e))})}else{let f;switch(e){case 1:c=\"tag\";f=this.l;break;case 2:c=\"store\";f=this.store;break;default:return}ra(a,this,c,d,e,f)}};\nt.import=function(a,b){if(b)switch(x(b)&&(b=JSON.parse(b)),a){case \"tag\":this.l=b;break;case \"reg\":this.m=!1;this.register=b;for(let d=0,e;d<this.h.length;d++)e=this.index[this.h[d]],e.register=b,e.m=!1;break;case \"store\":this.store=b;break;default:a=a.split(\".\");const c=a[0];a=a[1];c&&a&&this.index[c].import(a,b)}};la(Q.prototype);var Ba={encode:Aa,F:!1,G:\"\"};const Ca=[F(\"[\\u00e0\\u00e1\\u00e2\\u00e3\\u00e4\\u00e5]\"),\"a\",F(\"[\\u00e8\\u00e9\\u00ea\\u00eb]\"),\"e\",F(\"[\\u00ec\\u00ed\\u00ee\\u00ef]\"),\"i\",F(\"[\\u00f2\\u00f3\\u00f4\\u00f5\\u00f6\\u0151]\"),\"o\",F(\"[\\u00f9\\u00fa\\u00fb\\u00fc\\u0171]\"),\"u\",F(\"[\\u00fd\\u0177\\u00ff]\"),\"y\",F(\"\\u00f1\"),\"n\",F(\"[\\u00e7c]\"),\"k\",F(\"\\u00df\"),\"s\",F(\" & \"),\" and \"];function Aa(a){var b=a;b.normalize&&(b=b.normalize(\"NFD\").replace(ea,\"\"));return ca.call(this,b.toLowerCase(),!a.normalize&&Ca)};var Ea={encode:Da,F:!1,G:\"strict\"};const Fa=/[^a-z0-9]+/,Ga={b:\"p\",v:\"f\",w:\"f\",z:\"s\",x:\"s\",\"\\u00df\":\"s\",d:\"t\",n:\"m\",c:\"k\",g:\"k\",j:\"k\",q:\"k\",i:\"e\",y:\"e\",u:\"o\"};function Da(a){a=Aa.call(this,a).join(\" \");const b=[];if(a){const c=a.split(Fa),d=c.length;for(let e=0,f,g=0;e<d;e++)if((a=c[e])&&(!this.filter||!this.filter[a])){f=a[0];let h=Ga[f]||f,k=h;for(let m=1;m<a.length;m++){f=a[m];const n=Ga[f]||f;n&&n!==k&&(h+=n,k=n)}b[g++]=h}}return b};var Ia={encode:Ha,F:!1,G:\"\"};const Ja=[F(\"ae\"),\"a\",F(\"oe\"),\"o\",F(\"sh\"),\"s\",F(\"th\"),\"t\",F(\"ph\"),\"f\",F(\"pf\"),\"f\",F(\"(?![aeo])h(?![aeo])\"),\"\",F(\"(?!^[aeo])h(?!^[aeo])\"),\"\"];function Ha(a,b){a&&(a=Da.call(this,a).join(\" \"),2<a.length&&(a=E(a,Ja)),b||(1<a.length&&(a=ha(a)),a&&(a=a.split(\" \"))));return a};var La={encode:Ka,F:!1,G:\"\"};const Ma=F(\"(?!\\\\b)[aeo]\");function Ka(a){a&&(a=Ha.call(this,a,!0),1<a.length&&(a=a.replace(Ma,\"\")),1<a.length&&(a=ha(a)),a&&(a=a.split(\" \")));return a};G[\"latin:default\"]=ja;G[\"latin:simple\"]=Ba;G[\"latin:balance\"]=Ea;G[\"latin:advanced\"]=Ia;G[\"latin:extra\"]=La;const W=self;let Y;const Z={Index:K,Document:Q,Worker:O,registerCharset:function(a,b){G[a]=b},registerLanguage:function(a,b){ka[a]=b}};(Y=W.define)&&Y.amd?Y([],function(){return Z}):W.exports?W.exports=Z:W.FlexSearch=Z;}(this));\n", "'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n", "var balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m) return [str];\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  if (/\\$$/.test(m.pre)) {    \n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre+ '{' + m.body + '}' + post[k];\n      expansions.push(expansion);\n    }\n  } else {\n    var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isSequence = isNumericSequence || isAlphaSequence;\n    var isOptions = m.body.indexOf(',') >= 0;\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,.*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post;\n        return expand(str);\n      }\n      return [str];\n    }\n\n    var n;\n    if (isSequence) {\n      n = m.body.split(/\\.\\./);\n    } else {\n      n = parseCommaParts(m.body);\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace);\n        if (n.length === 1) {\n          return post.map(function(p) {\n            return m.pre + n[0] + p;\n          });\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    var N;\n\n    if (isSequence) {\n      var x = numeric(n[0]);\n      var y = numeric(n[1]);\n      var width = Math.max(n[0].length, n[1].length)\n      var incr = n.length == 3\n        ? Math.abs(numeric(n[2]))\n        : 1;\n      var test = lte;\n      var reverse = y < x;\n      if (reverse) {\n        incr *= -1;\n        test = gte;\n      }\n      var pad = n.some(isPadded);\n\n      N = [];\n\n      for (var i = x; test(i, y); i += incr) {\n        var c;\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i);\n          if (c === '\\\\')\n            c = '';\n        } else {\n          c = String(i);\n          if (pad) {\n            var need = width - c.length;\n            if (need > 0) {\n              var z = new Array(need + 1).join('0');\n              if (i < 0)\n                c = '-' + z + c.slice(1);\n              else\n                c = z + c;\n            }\n          }\n        }\n        N.push(c);\n      }\n    } else {\n      N = [];\n\n      for (var j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false));\n      }\n    }\n\n    for (var j = 0; j < N.length; j++) {\n      for (var k = 0; k < post.length; k++) {\n        var expansion = pre + N[j] + post[k];\n        if (!isTop || isSequence || expansion)\n          expansions.push(expansion);\n      }\n    }\n  }\n\n  return expansions;\n}\n\n", "const IS_SAFARI = /Apple Computer/.test(globalThis.navigator?.vendor);\nexport const IS_IOS =\n  IS_SAFARI &&\n  (/Mobile\\/\\w+/.test(globalThis.navigator?.userAgent) ||\n    globalThis.navigator?.maxTouchPoints > 2);\nexport const IS_MAC = /Mac/i.test(globalThis.navigator?.platform);\nexport const SHORT_KEY = IS_MAC ? 'command' : 'ctrl';\n", "/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nconst NODE_MODE = false;\nconst global = NODE_MODE ? globalThis : window;\n\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nexport const supportsAdoptingStyleSheets: boolean =\n  global.ShadowRoot &&\n  (global.ShadyCSS === undefined || global.ShadyCSS.nativeShadow) &&\n  'adoptedStyleSheets' in Document.prototype &&\n  'replace' in CSSStyleSheet.prototype;\n\n/**\n * A CSSResult or native CSSStyleSheet.\n *\n * In browsers that support constructible CSS style sheets, CSSStyleSheet\n * object can be used for styling along side CSSResult from the `css`\n * template tag.\n */\nexport type CSSResultOrNative = CSSResult | CSSStyleSheet;\n\nexport type CSSResultArray = Array<CSSResultOrNative | CSSResultArray>;\n\n/**\n * A single CSSResult, CSSStyleSheet, or an array or nested arrays of those.\n */\nexport type CSSResultGroup = CSSResultOrNative | CSSResultArray;\n\nconst constructionToken = Symbol();\n\nconst cssTagCache = new WeakMap<TemplateStringsArray, CSSStyleSheet>();\n\n/**\n * A container for a string of CSS text, that may be used to create a CSSStyleSheet.\n *\n * CSSResult is the return value of `css`-tagged template literals and\n * `unsafeCSS()`. In order to ensure that CSSResults are only created via the\n * `css` tag and `unsafeCSS()`, CSSResult cannot be constructed directly.\n */\nexport class CSSResult {\n  // This property needs to remain unminified.\n  ['_$cssResult$'] = true;\n  readonly cssText: string;\n  private _styleSheet?: CSSStyleSheet;\n  private _strings: TemplateStringsArray | undefined;\n\n  private constructor(\n    cssText: string,\n    strings: TemplateStringsArray | undefined,\n    safeToken: symbol\n  ) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n        'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.'\n      );\n    }\n    this.cssText = cssText;\n    this._strings = strings;\n  }\n\n  // This is a getter so that it's lazy. In practice, this means stylesheets\n  // are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet | undefined {\n    // If `supportsAdoptingStyleSheets` is true then we assume CSSStyleSheet is\n    // constructable.\n    let styleSheet = this._styleSheet;\n    const strings = this._strings;\n    if (supportsAdoptingStyleSheets && styleSheet === undefined) {\n      const cacheable = strings !== undefined && strings.length === 1;\n      if (cacheable) {\n        styleSheet = cssTagCache.get(strings);\n      }\n      if (styleSheet === undefined) {\n        (this._styleSheet = styleSheet = new CSSStyleSheet()).replaceSync(\n          this.cssText\n        );\n        if (cacheable) {\n          cssTagCache.set(strings, styleSheet);\n        }\n      }\n    }\n    return styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\ntype ConstructableCSSResult = CSSResult & {\n  new (\n    cssText: string,\n    strings: TemplateStringsArray | undefined,\n    safeToken: symbol\n  ): CSSResult;\n};\n\nconst textFromCSSResult = (value: CSSResultGroup | number) => {\n  // This property needs to remain unminified.\n  if ((value as CSSResult)['_$cssResult$'] === true) {\n    return (value as CSSResult).cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n      `Value passed to 'css' function must be a 'css' function result: ` +\n        `${value}. Use 'unsafeCSS' to pass non-literal values, but take care ` +\n        `to ensure page security.`\n    );\n  }\n};\n\n/**\n * Wrap a value for interpolation in a {@linkcode css} tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) =>\n  new (CSSResult as ConstructableCSSResult)(\n    typeof value === 'string' ? value : String(value),\n    undefined,\n    constructionToken\n  );\n\n/**\n * A template literal tag which can be used with LitElement's\n * {@linkcode LitElement.styles} property to set element styles.\n *\n * For security reasons, only literal string values and number may be used in\n * embedded expressions. To incorporate non-literal values {@linkcode unsafeCSS}\n * may be used inside an expression.\n */\nexport const css = (\n  strings: TemplateStringsArray,\n  ...values: (CSSResultGroup | number)[]\n): CSSResult => {\n  const cssText =\n    strings.length === 1\n      ? strings[0]\n      : values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]\n        );\n  return new (CSSResult as ConstructableCSSResult)(\n    cssText,\n    strings,\n    constructionToken\n  );\n};\n\n/**\n * Applies the given styles to a `shadowRoot`. When Shadow DOM is\n * available but `adoptedStyleSheets` is not, styles are appended to the\n * `shadowRoot` to [mimic spec behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n * Note, when shimming is used, any styles that are subsequently placed into\n * the shadowRoot should be placed *before* any shimmed adopted styles. This\n * will match spec behavior that gives adopted sheets precedence over styles in\n * shadowRoot.\n */\nexport const adoptStyles = (\n  renderRoot: ShadowRoot,\n  styles: Array<CSSResultOrNative>\n) => {\n  if (supportsAdoptingStyleSheets) {\n    (renderRoot as ShadowRoot).adoptedStyleSheets = styles.map((s) =>\n      s instanceof CSSStyleSheet ? s : s.styleSheet!\n    );\n  } else {\n    styles.forEach((s) => {\n      const style = document.createElement('style');\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const nonce = (global as any)['litNonce'];\n      if (nonce !== undefined) {\n        style.setAttribute('nonce', nonce);\n      }\n      style.textContent = (s as CSSResult).cssText;\n      renderRoot.appendChild(style);\n    });\n  }\n};\n\nconst cssResultFromStyleSheet = (sheet: CSSStyleSheet) => {\n  let cssText = '';\n  for (const rule of sheet.cssRules) {\n    cssText += rule.cssText;\n  }\n  return unsafeCSS(cssText);\n};\n\nexport const getCompatibleStyle =\n  supportsAdoptingStyleSheets ||\n  (NODE_MODE && global.CSSStyleSheet === undefined)\n    ? (s: CSSResultOrNative) => s\n    : (s: CSSResultOrNative) =>\n        s instanceof CSSStyleSheet ? cssResultFromStyleSheet(s) : s;\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * Use this module if you want to create your own base class extending\n * {@link ReactiveElement}.\n * @packageDocumentation\n */\n\nimport {\n  getCompatibleStyle,\n  adoptStyles,\n  CSSResultGroup,\n  CSSResultOrNative,\n} from './css-tag.js';\nimport type {\n  ReactiveController,\n  ReactiveControllerHost,\n} from './reactive-controller.js';\n\n// In the Node build, this import will be injected by Rollup:\n// import {HTMLElement, customElements} from '@lit-labs/ssr-dom-shim';\n\nexport * from './css-tag.js';\nexport type {\n  ReactiveController,\n  ReactiveControllerHost,\n} from './reactive-controller.js';\n\nconst NODE_MODE = false;\nconst global = NODE_MODE ? globalThis : window;\n\nif (NODE_MODE) {\n  global.customElements ??= customElements;\n}\n\nconst DEV_MODE = true;\n\nlet requestUpdateThenable: (name: string) => {\n  then: (\n    onfulfilled?: (value: boolean) => void,\n    _onrejected?: () => void\n  ) => void;\n};\n\nlet issueWarning: (code: string, warning: string) => void;\n\nconst trustedTypes = (global as unknown as {trustedTypes?: {emptyScript: ''}})\n  .trustedTypes;\n\n// Temporary workaround for https://crbug.com/993268\n// Currently, any attribute starting with \"on\" is considered to be a\n// TrustedScript source. Such boolean attributes must be set to the equivalent\n// trusted emptyScript value.\nconst emptyStringForBooleanAttribute = trustedTypes\n  ? (trustedTypes.emptyScript as unknown as '')\n  : '';\n\nconst polyfillSupport = DEV_MODE\n  ? global.reactiveElementPolyfillSupportDevMode\n  : global.reactiveElementPolyfillSupport;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> = (global.litIssuedWarnings ??=\n    new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += ` See https://lit.dev/msg/${code} for more information.`;\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n\n  issueWarning(\n    'dev-mode',\n    `Lit is in dev mode. Not recommended for production!`\n  );\n\n  // Issue polyfill support warning.\n  if (global.ShadyDOM?.inUse && polyfillSupport === undefined) {\n    issueWarning(\n      'polyfill-support-missing',\n      `Shadow DOM is being polyfilled via \\`ShadyDOM\\` but ` +\n        `the \\`polyfill-support\\` module has not been loaded.`\n    );\n  }\n\n  requestUpdateThenable = (name) => ({\n    then: (\n      onfulfilled?: (value: boolean) => void,\n      _onrejected?: () => void\n    ) => {\n      issueWarning(\n        'request-update-promise',\n        `The \\`requestUpdate\\` method should no longer return a Promise but ` +\n          `does so on \\`${name}\\`. Use \\`updateComplete\\` instead.`\n      );\n      if (onfulfilled !== undefined) {\n        onfulfilled(false);\n      }\n    },\n  });\n}\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace ReactiveUnstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry = Update;\n    export interface Update {\n      kind: 'update';\n    }\n  }\n}\n\ninterface DebugLoggingWindow {\n  // Even in dev mode, we generally don't want to emit these events, as that's\n  // another level of cost, so only emit them when DEV_MODE is true _and_ when\n  // window.emitLitDebugEvents is true.\n  emitLitDebugLogEvents?: boolean;\n}\n\n/**\n * Useful for visualizing and logging insights into what the Lit template system is doing.\n *\n * Compiled out of prod mode builds.\n */\nconst debugLogEvent = DEV_MODE\n  ? (event: ReactiveUnstable.DebugLog.Entry) => {\n      const shouldEmit = (global as unknown as DebugLoggingWindow)\n        .emitLitDebugLogEvents;\n      if (!shouldEmit) {\n        return;\n      }\n      global.dispatchEvent(\n        new CustomEvent<ReactiveUnstable.DebugLog.Entry>('lit-debug', {\n          detail: event,\n        })\n      );\n    }\n  : undefined;\n\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\n/*@__INLINE__*/\nconst JSCompiler_renameProperty = <P extends PropertyKey>(\n  prop: P,\n  _obj: unknown\n): P => prop;\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string | null, type?: TypeHint): Type;\n\n  /**\n   * Called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n  | ComplexAttributeConverter<Type>\n  | ((value: string | null, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * When set to `true`, indicates the property is internal private state. The\n   * property should not be set by users. When using TypeScript, this property\n   * should be marked as `private` or `protected`, and it is also a common\n   * practice to use a leading `_` in the name. The property is not added to\n   * `observedAttributes`.\n   */\n  readonly state?: boolean;\n\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean | string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\n/**\n * A Map of property keys to values.\n *\n * Takes an optional type parameter T, which when specified as a non-any,\n * non-unknown type, will make the Map more strongly-typed, associating the map\n * keys with their corresponding value type on T.\n *\n * Use `PropertyValues<this>` when overriding ReactiveElement.update() and\n * other lifecycle methods in order to get stronger type-checking on keys\n * and values.\n */\n// This type is conditional so that if the parameter T is not specified, or\n// is `any`, the type will include `Map<PropertyKey, unknown>`. Since T is not\n// given in the uses of PropertyValues in this file, all uses here fallback to\n// meaning `Map<PropertyKey, unknown>`, but if a developer uses\n// `PropertyValues<this>` (or any other value for T) they will get a\n// strongly-typed Map type.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type PropertyValues<T = any> = T extends object\n  ? PropertyValueMap<T>\n  : Map<PropertyKey, unknown>;\n\n/**\n * Do not use, instead prefer {@linkcode PropertyValues}.\n */\n// This type must be exported such that JavaScript generated by the Google\n// Closure Compiler can import a type reference.\nexport interface PropertyValueMap<T> extends Map<PropertyKey, unknown> {\n  get<K extends keyof T>(k: K): T[K];\n  set<K extends keyof T>(key: K, value: T[K]): this;\n  has<K extends keyof T>(k: K): boolean;\n  delete<K extends keyof T>(k: K): boolean;\n}\n\nexport const defaultConverter: ComplexAttributeConverter = {\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        value = value ? emptyStringForBooleanAttribute : null;\n        break;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        value = value == null ? value : JSON.stringify(value);\n        break;\n    }\n    return value;\n  },\n\n  fromAttribute(value: string | null, type?: unknown) {\n    let fromValue: unknown = value;\n    switch (type) {\n      case Boolean:\n        fromValue = value !== null;\n        break;\n      case Number:\n        fromValue = value === null ? null : Number(value);\n        break;\n      case Object:\n      case Array:\n        // Do *not* generate exception when invalid JSON is set as elements\n        // don't normally complain on being mis-configured.\n        // TODO(sorvell): Do generate exception in *dev mode*.\n        try {\n          // Assert to adhere to Bazel's \"must type assert JSON parse\" rule.\n          fromValue = JSON.parse(value!) as unknown;\n        } catch (e) {\n          fromValue = null;\n        }\n        break;\n    }\n    return fromValue;\n  },\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean => {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual,\n};\n\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n\n/**\n * A string representing one of the supported dev mode warning categories.\n */\nexport type WarningKind = 'change-in-update' | 'migration';\n\nexport type Initializer = (element: ReactiveElement) => void;\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nexport abstract class ReactiveElement\n  // In the Node build, this `extends` clause will be substituted with\n  // `(globalThis.HTMLElement ?? HTMLElement)`.\n  //\n  // This way, we will first prefer any global `HTMLElement` polyfill that the\n  // user has assigned, and then fall back to the `HTMLElement` shim which has\n  // been imported (see note at the top of this file about how this import is\n  // generated by Rollup). Note that the `HTMLElement` variable has been\n  // shadowed by this import, so it no longer refers to the global.\n  extends HTMLElement\n  implements ReactiveControllerHost\n{\n  // Note: these are patched in only in DEV_MODE.\n  /**\n   * Read or set all the enabled warning categories for this class.\n   *\n   * This property is only used in development builds.\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static enabledWarnings?: WarningKind[];\n\n  /**\n   * Enable the given warning category for this class.\n   *\n   * This method only exists in development builds, so it should be accessed\n   * with a guard like:\n   *\n   * ```ts\n   * // Enable for all ReactiveElement subclasses\n   * ReactiveElement.enableWarning?.('migration');\n   *\n   * // Enable for only MyElement and subclasses\n   * MyElement.enableWarning?.('migration');\n   * ```\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static enableWarning?: (warningKind: WarningKind) => void;\n\n  /**\n   * Disable the given warning category for this class.\n   *\n   * This method only exists in development builds, so it should be accessed\n   * with a guard like:\n   *\n   * ```ts\n   * // Disable for all ReactiveElement subclasses\n   * ReactiveElement.disableWarning?.('migration');\n   *\n   * // Disable for only MyElement and subclasses\n   * MyElement.disableWarning?.('migration');\n   * ```\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static disableWarning?: (warningKind: WarningKind) => void;\n\n  /**\n   * Adds an initializer function to the class that is called during instance\n   * construction.\n   *\n   * This is useful for code that runs against a `ReactiveElement`\n   * subclass, such as a decorator, that needs to do work for each\n   * instance, such as setting up a `ReactiveController`.\n   *\n   * ```ts\n   * const myDecorator = (target: typeof ReactiveElement, key: string) => {\n   *   target.addInitializer((instance: ReactiveElement) => {\n   *     // This is run during construction of the element\n   *     new MyController(instance);\n   *   });\n   * }\n   * ```\n   *\n   * Decorating a field will then cause each instance to run an initializer\n   * that adds a controller:\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   @myDecorator foo;\n   * }\n   * ```\n   *\n   * Initializers are stored per-constructor. Adding an initializer to a\n   * subclass does not add it to a superclass. Since initializers are run in\n   * constructors, initializers will run in order of the class hierarchy,\n   * starting with superclasses and progressing to the instance's class.\n   *\n   * @nocollapse\n   */\n  static addInitializer(initializer: Initializer) {\n    this.finalize();\n    (this._initializers ??= []).push(initializer);\n  }\n\n  static _initializers?: Initializer[];\n\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   * @nocollapse\n   */\n  private static __attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having finished creating properties.\n   */\n  protected static [finalized] = true;\n\n  /**\n   * Memoized list of all element properties, including any superclass properties.\n   * Created lazily on user subclasses when finalizing the class.\n   * @nocollapse\n   * @category properties\n   */\n  static elementProperties: PropertyDeclarationMap = new Map();\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring reactive properties. When\n   * a reactive property is set the element will update and render.\n   *\n   * By default properties are public fields, and as such, they should be\n   * considered as primarily settable by element users, either via attribute or\n   * the property itself.\n   *\n   * Generally, properties that are changed by the element should be private or\n   * protected fields and should use the `state: true` option. Properties\n   * marked as `state` do not reflect from the corresponding attribute\n   *\n   * However, sometimes element code does need to set a public property. This\n   * should typically only be done in response to user interaction, and an event\n   * should be fired informing the user; for example, a checkbox sets its\n   * `checked` property when clicked and fires a `changed` event. Mutating\n   * public properties should typically not be done for non-primitive (object or\n   * array) properties. In other cases when an element needs to manage state, a\n   * private property set with the `state: true` option should be used. When\n   * needed, state properties can be initialized via public properties to\n   * facilitate complex interactions.\n   * @nocollapse\n   * @category properties\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Memoized list of all element styles.\n   * Created lazily on user subclasses when finalizing the class.\n   * @nocollapse\n   * @category styles\n   */\n  static elementStyles: Array<CSSResultOrNative> = [];\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the {@linkcode css} tag function, via constructible stylesheets, or\n   * imported from native CSS module scripts.\n   *\n   * Note on Content Security Policy:\n   *\n   * Element styles are implemented with `<style>` tags when the browser doesn't\n   * support adopted StyleSheets. To use such `<style>` tags with the style-src\n   * CSP directive, the style-src value must either include 'unsafe-inline' or\n   * `nonce-<base64-value>` with `<base64-value>` replaced be a server-generated\n   * nonce.\n   *\n   * To provide a nonce to use on generated `<style>` elements, set\n   * `window.litNonce` to a server-generated nonce in your page's HTML, before\n   * loading application code:\n   *\n   * ```html\n   * <script>\n   *   // Generated and unique per request:\n   *   window.litNonce = 'a1b2c3d4';\n   * </script>\n   * ```\n   * @nocollapse\n   * @category styles\n   */\n  static styles?: CSSResultGroup;\n\n  /**\n   * The set of properties defined by this class that caused an accessor to be\n   * added during `createProperty`.\n   * @nocollapse\n   */\n  private static __reactivePropertyKeys?: Set<PropertyKey>;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   * @category attributes\n   */\n  static get observedAttributes() {\n    // note: piggy backing on this to ensure we're finalized.\n    this.finalize();\n    const attributes: string[] = [];\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    this.elementProperties.forEach((v, p) => {\n      const attr = this.__attributeNameForProperty(p, v);\n      if (attr !== undefined) {\n        this.__attributeToPropertyMap.set(attr, p);\n        attributes.push(attr);\n      }\n    });\n    return attributes;\n  }\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist\n   * and stores a {@linkcode PropertyDeclaration} for the property with the\n   * given options. The property setter calls the property's `hasChanged`\n   * property option or uses a strict identity check to determine whether or not\n   * to request an update.\n   *\n   * This method may be overridden to customize properties; however,\n   * when doing so, it's important to call `super.createProperty` to ensure\n   * the property is setup correctly. This method calls\n   * `getPropertyDescriptor` internally to get a descriptor to install.\n   * To customize what properties do when they are get or set, override\n   * `getPropertyDescriptor`. To customize the options for a property,\n   * implement `createProperty` like this:\n   *\n   * ```ts\n   * static createProperty(name, options) {\n   *   options = Object.assign(options, {myOption: true});\n   *   super.createProperty(name, options);\n   * }\n   * ```\n   *\n   * @nocollapse\n   * @category properties\n   */\n  static createProperty(\n    name: PropertyKey,\n    options: PropertyDeclaration = defaultPropertyDeclaration\n  ) {\n    // if this is a state property, force the attribute to false.\n    if (options.state) {\n      // Cast as any since this is readonly.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (options as any).attribute = false;\n    }\n    // Note, since this can be called by the `@property` decorator which\n    // is called before `finalize`, we ensure finalization has been kicked off.\n    this.finalize();\n    this.elementProperties.set(name, options);\n    // Do not generate an accessor if the prototype already has one, since\n    // it would be lost otherwise and that would never be the user's intention;\n    // Instead, we expect users to call `requestUpdate` themselves from\n    // user-defined accessors. Note that if the super has an accessor we will\n    // still overwrite it\n    if (!options.noAccessor && !this.prototype.hasOwnProperty(name)) {\n      const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n      const descriptor = this.getPropertyDescriptor(name, key, options);\n      if (descriptor !== undefined) {\n        Object.defineProperty(this.prototype, name, descriptor);\n        if (DEV_MODE) {\n          // If this class doesn't have its own set, create one and initialize\n          // with the values in the set from the nearest ancestor class, if any.\n          if (!this.hasOwnProperty('__reactivePropertyKeys')) {\n            this.__reactivePropertyKeys = new Set(\n              this.__reactivePropertyKeys ?? []\n            );\n          }\n          this.__reactivePropertyKeys!.add(name);\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns a property descriptor to be defined on the given named property.\n   * If no descriptor is returned, the property will not become an accessor.\n   * For example,\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   static getPropertyDescriptor(name, key, options) {\n   *     const defaultDescriptor =\n   *         super.getPropertyDescriptor(name, key, options);\n   *     const setter = defaultDescriptor.set;\n   *     return {\n   *       get: defaultDescriptor.get,\n   *       set(value) {\n   *         setter.call(this, value);\n   *         // custom action.\n   *       },\n   *       configurable: true,\n   *       enumerable: true\n   *     }\n   *   }\n   * }\n   * ```\n   *\n   * @nocollapse\n   * @category properties\n   */\n  protected static getPropertyDescriptor(\n    name: PropertyKey,\n    key: string | symbol,\n    options: PropertyDeclaration\n  ): PropertyDescriptor | undefined {\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      get(): any {\n        return (this as {[key: string]: unknown})[key as string];\n      },\n      set(this: ReactiveElement, value: unknown) {\n        const oldValue = (this as {} as {[key: string]: unknown})[\n          name as string\n        ];\n        (this as {} as {[key: string]: unknown})[key as string] = value;\n        (this as unknown as ReactiveElement).requestUpdate(\n          name,\n          oldValue,\n          options\n        );\n      },\n      configurable: true,\n      enumerable: true,\n    };\n  }\n\n  /**\n   * Returns the property options associated with the given property.\n   * These options are defined with a `PropertyDeclaration` via the `properties`\n   * object or the `@property` decorator and are registered in\n   * `createProperty(...)`.\n   *\n   * Note, this method should be considered \"final\" and not overridden. To\n   * customize the options for a given property, override\n   * {@linkcode createProperty}.\n   *\n   * @nocollapse\n   * @final\n   * @category properties\n   */\n  static getPropertyOptions(name: PropertyKey) {\n    return this.elementProperties.get(name) || defaultPropertyDeclaration;\n  }\n\n  /**\n   * Creates property accessors for registered properties, sets up element\n   * styling, and ensures any superclasses are also finalized. Returns true if\n   * the element was finalized.\n   * @nocollapse\n   */\n  protected static finalize() {\n    if (this.hasOwnProperty(finalized)) {\n      return false;\n    }\n    this[finalized] = true;\n    // finalize any superclasses\n    const superCtor = Object.getPrototypeOf(this) as typeof ReactiveElement;\n    superCtor.finalize();\n    // Create own set of initializers for this class if any exist on the\n    // superclass and copy them down. Note, for a small perf boost, avoid\n    // creating initializers unless needed.\n    if (superCtor._initializers !== undefined) {\n      this._initializers = [...superCtor._initializers];\n    }\n    this.elementProperties = new Map(superCtor.elementProperties);\n    // initialize Map populated in observedAttributes\n    this.__attributeToPropertyMap = new Map();\n    // make any properties\n    // Note, only process \"own\" properties since this element will inherit\n    // any properties defined on the superClass, and finalization ensures\n    // the entire prototype chain is finalized.\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      // support symbols in properties (IE11 does not support this)\n      const propKeys = [\n        ...Object.getOwnPropertyNames(props),\n        ...Object.getOwnPropertySymbols(props),\n      ];\n      // This for/of is ok because propKeys is an array\n      for (const p of propKeys) {\n        // note, use of `any` is due to TypeScript lack of support for symbol in\n        // index types\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.createProperty(p, (props as any)[p]);\n      }\n    }\n    this.elementStyles = this.finalizeStyles(this.styles);\n    // DEV mode warnings\n    if (DEV_MODE) {\n      const warnRemovedOrRenamed = (name: string, renamed = false) => {\n        if (this.prototype.hasOwnProperty(name)) {\n          issueWarning(\n            renamed ? 'renamed-api' : 'removed-api',\n            `\\`${name}\\` is implemented on class ${this.name}. It ` +\n              `has been ${renamed ? 'renamed' : 'removed'} ` +\n              `in this version of LitElement.`\n          );\n        }\n      };\n      warnRemovedOrRenamed('initialize');\n      warnRemovedOrRenamed('requestUpdateInternal');\n      warnRemovedOrRenamed('_getUpdateComplete', true);\n    }\n    return true;\n  }\n\n  /**\n   * Options used when calling `attachShadow`. Set this property to customize\n   * the options for the shadowRoot; for example, to create a closed\n   * shadowRoot: `{mode: 'closed'}`.\n   *\n   * Note, these options are used in `createRenderRoot`. If this method\n   * is customized, options should be respected if possible.\n   * @nocollapse\n   * @category rendering\n   */\n  static shadowRootOptions: ShadowRootInit = {mode: 'open'};\n\n  /**\n   * Takes the styles the user supplied via the `static styles` property and\n   * returns the array of styles to apply to the element.\n   * Override this method to integrate into a style management system.\n   *\n   * Styles are deduplicated preserving the _last_ instance in the list. This\n   * is a performance optimization to avoid duplicated styles that can occur\n   * especially when composing via subclassing. The last item is kept to try\n   * to preserve the cascade order with the assumption that it's most important\n   * that last added styles override previous styles.\n   *\n   * @nocollapse\n   * @category styles\n   */\n  protected static finalizeStyles(\n    styles?: CSSResultGroup\n  ): Array<CSSResultOrNative> {\n    const elementStyles = [];\n    if (Array.isArray(styles)) {\n      // Dedupe the flattened array in reverse order to preserve the last items.\n      // Casting to Array<unknown> works around TS error that\n      // appears to come from trying to flatten a type CSSResultArray.\n      const set = new Set((styles as Array<unknown>).flat(Infinity).reverse());\n      // Then preserve original order by adding the set items in reverse order.\n      for (const s of set) {\n        elementStyles.unshift(getCompatibleStyle(s as CSSResultOrNative));\n      }\n    } else if (styles !== undefined) {\n      elementStyles.push(getCompatibleStyle(styles));\n    }\n    return elementStyles;\n  }\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   * @category rendering\n   */\n  readonly renderRoot!: HTMLElement | ShadowRoot;\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static __attributeNameForProperty(\n    name: PropertyKey,\n    options: PropertyDeclaration\n  ) {\n    const attribute = options.attribute;\n    return attribute === false\n      ? undefined\n      : typeof attribute === 'string'\n      ? attribute\n      : typeof name === 'string'\n      ? name.toLowerCase()\n      : undefined;\n  }\n\n  private __instanceProperties?: PropertyValues = new Map();\n  // Initialize to an unresolved Promise so we can make sure the element has\n  // connected before first update.\n  private __updatePromise!: Promise<boolean>;\n\n  /**\n   * True if there is a pending update as a result of calling `requestUpdate()`.\n   * Should only be read.\n   * @category updates\n   */\n  isUpdatePending = false;\n\n  /**\n   * Is set to `true` after the first update. The element code cannot assume\n   * that `renderRoot` exists before the element `hasUpdated`.\n   * @category updates\n   */\n  hasUpdated = false;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   *\n   * @internal\n   */\n  _$changedProperties!: PropertyValues;\n\n  /**\n   * Map with keys of properties that should be reflected when updated.\n   */\n  private __reflectingProperties?: Map<PropertyKey, PropertyDeclaration>;\n\n  /**\n   * Name of currently reflecting property\n   */\n  private __reflectingProperty: PropertyKey | null = null;\n\n  /**\n   * Set of controllers.\n   */\n  private __controllers?: ReactiveController[];\n\n  constructor() {\n    super();\n    this._initialize();\n  }\n\n  /**\n   * Internal only override point for customizing work done when elements\n   * are constructed.\n   *\n   * @internal\n   */\n  _initialize() {\n    this.__updatePromise = new Promise<boolean>(\n      (res) => (this.enableUpdating = res)\n    );\n    this._$changedProperties = new Map();\n    this.__saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this.requestUpdate();\n    (this.constructor as typeof ReactiveElement)._initializers?.forEach((i) =>\n      i(this)\n    );\n  }\n\n  /**\n   * Registers a `ReactiveController` to participate in the element's reactive\n   * update cycle. The element automatically calls into any registered\n   * controllers during its lifecycle callbacks.\n   *\n   * If the element is connected when `addController()` is called, the\n   * controller's `hostConnected()` callback will be immediately called.\n   * @category controllers\n   */\n  addController(controller: ReactiveController) {\n    (this.__controllers ??= []).push(controller);\n    // If a controller is added after the element has been connected,\n    // call hostConnected. Note, re-using existence of `renderRoot` here\n    // (which is set in connectedCallback) to avoid the need to track a\n    // first connected state.\n    if (this.renderRoot !== undefined && this.isConnected) {\n      controller.hostConnected?.();\n    }\n  }\n\n  /**\n   * Removes a `ReactiveController` from the element.\n   * @category controllers\n   */\n  removeController(controller: ReactiveController) {\n    // Note, if the indexOf is -1, the >>> will flip the sign which makes the\n    // splice do nothing.\n    this.__controllers?.splice(this.__controllers.indexOf(controller) >>> 0, 1);\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private __saveInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    (this.constructor as typeof ReactiveElement).elementProperties.forEach(\n      (_v, p) => {\n        if (this.hasOwnProperty(p)) {\n          this.__instanceProperties!.set(p, this[p as keyof this]);\n          delete this[p as keyof this];\n        }\n      }\n    );\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   *\n   * @return Returns a node into which to render.\n   * @category rendering\n   */\n  protected createRenderRoot(): Element | ShadowRoot {\n    const renderRoot =\n      this.shadowRoot ??\n      this.attachShadow(\n        (this.constructor as typeof ReactiveElement).shadowRootOptions\n      );\n    adoptStyles(\n      renderRoot,\n      (this.constructor as typeof ReactiveElement).elementStyles\n    );\n    return renderRoot;\n  }\n\n  /**\n   * On first connection, creates the element's renderRoot, sets up\n   * element styling, and enables updating.\n   * @category lifecycle\n   */\n  connectedCallback() {\n    // create renderRoot before first update.\n    if (this.renderRoot === undefined) {\n      (\n        this as {\n          renderRoot: Element | DocumentFragment;\n        }\n      ).renderRoot = this.createRenderRoot();\n    }\n    this.enableUpdating(true);\n    this.__controllers?.forEach((c) => c.hostConnected?.());\n  }\n\n  /**\n   * Note, this method should be considered final and not overridden. It is\n   * overridden on the element instance with a function that triggers the first\n   * update.\n   * @category updates\n   */\n  protected enableUpdating(_requestedUpdate: boolean) {}\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   * @category lifecycle\n   */\n  disconnectedCallback() {\n    this.__controllers?.forEach((c) => c.hostDisconnected?.());\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   *\n   * Specifically, when an attribute is set, the corresponding property is set.\n   * You should rarely need to implement this callback. If this method is\n   * overridden, `super.attributeChangedCallback(name, _old, value)` must be\n   * called.\n   *\n   * See [using the lifecycle callbacks](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#using_the_lifecycle_callbacks)\n   * on MDN for more information about the `attributeChangedCallback`.\n   * @category attributes\n   */\n  attributeChangedCallback(\n    name: string,\n    _old: string | null,\n    value: string | null\n  ) {\n    this._$attributeToProperty(name, value);\n  }\n\n  private __propertyToAttribute(\n    name: PropertyKey,\n    value: unknown,\n    options: PropertyDeclaration = defaultPropertyDeclaration\n  ) {\n    const attr = (\n      this.constructor as typeof ReactiveElement\n    ).__attributeNameForProperty(name, options);\n    if (attr !== undefined && options.reflect === true) {\n      const converter =\n        (options.converter as ComplexAttributeConverter)?.toAttribute !==\n        undefined\n          ? (options.converter as ComplexAttributeConverter)\n          : defaultConverter;\n      const attrValue = converter.toAttribute!(value, options.type);\n      if (\n        DEV_MODE &&\n        (this.constructor as typeof ReactiveElement).enabledWarnings!.indexOf(\n          'migration'\n        ) >= 0 &&\n        attrValue === undefined\n      ) {\n        issueWarning(\n          'undefined-attribute-value',\n          `The attribute value for the ${name as string} property is ` +\n            `undefined on element ${this.localName}. The attribute will be ` +\n            `removed, but in the previous version of \\`ReactiveElement\\`, ` +\n            `the attribute would not have changed.`\n        );\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this.__reflectingProperty = name;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this.__reflectingProperty = null;\n    }\n  }\n\n  /** @internal */\n  _$attributeToProperty(name: string, value: string | null) {\n    const ctor = this.constructor as typeof ReactiveElement;\n    // Note, hint this as an `AttributeMap` so closure clearly understands\n    // the type; it has issues with tracking types through statics\n    const propName = (ctor.__attributeToPropertyMap as AttributeMap).get(name);\n    // Use tracking info to avoid reflecting a property value to an attribute\n    // if it was just set because the attribute changed.\n    if (propName !== undefined && this.__reflectingProperty !== propName) {\n      const options = ctor.getPropertyOptions(propName);\n      const converter =\n        typeof options.converter === 'function'\n          ? {fromAttribute: options.converter}\n          : options.converter?.fromAttribute !== undefined\n          ? options.converter\n          : defaultConverter;\n      // mark state reflecting\n      this.__reflectingProperty = propName;\n      this[propName as keyof this] = converter.fromAttribute!(\n        value,\n        options.type\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ) as any;\n      // mark state not reflecting\n      this.__reflectingProperty = null;\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should be called\n   * when an element should update based on some state not triggered by setting\n   * a reactive property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored.\n   *\n   * @param name name of requesting property\n   * @param oldValue old value of requesting property\n   * @param options property options to use instead of the previously\n   *     configured options\n   * @category updates\n   */\n  requestUpdate(\n    name?: PropertyKey,\n    oldValue?: unknown,\n    options?: PropertyDeclaration\n  ): void {\n    let shouldRequestUpdate = true;\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      options =\n        options ||\n        (this.constructor as typeof ReactiveElement).getPropertyOptions(name);\n      const hasChanged = options.hasChanged || notEqual;\n      if (hasChanged(this[name as keyof this], oldValue)) {\n        if (!this._$changedProperties.has(name)) {\n          this._$changedProperties.set(name, oldValue);\n        }\n        // Add to reflecting properties set.\n        // Note, it's important that every change has a chance to add the\n        // property to `_reflectingProperties`. This ensures setting\n        // attribute + property reflects correctly.\n        if (options.reflect === true && this.__reflectingProperty !== name) {\n          if (this.__reflectingProperties === undefined) {\n            this.__reflectingProperties = new Map();\n          }\n          this.__reflectingProperties.set(name, options);\n        }\n      } else {\n        // Abort the request if the property should not be considered changed.\n        shouldRequestUpdate = false;\n      }\n    }\n    if (!this.isUpdatePending && shouldRequestUpdate) {\n      this.__updatePromise = this.__enqueueUpdate();\n    }\n    // Note, since this no longer returns a promise, in dev mode we return a\n    // thenable which warns if it's called.\n    return DEV_MODE\n      ? (requestUpdateThenable(this.localName) as unknown as void)\n      : undefined;\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async __enqueueUpdate() {\n    this.isUpdatePending = true;\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await this.__updatePromise;\n    } catch (e) {\n      // Refire any previous errors async so they do not disrupt the update\n      // cycle. Errors are refired so developers have a chance to observe\n      // them, and this can be done by implementing\n      // `window.onunhandledrejection`.\n      Promise.reject(e);\n    }\n    const result = this.scheduleUpdate();\n    // If `scheduleUpdate` returns a Promise, we await it. This is done to\n    // enable coordinating updates with a scheduler. Note, the result is\n    // checked to avoid delaying an additional microtask unless we need to.\n    if (result != null) {\n      await result;\n    }\n    return !this.isUpdatePending;\n  }\n\n  /**\n   * Schedules an element update. You can override this method to change the\n   * timing of updates by returning a Promise. The update will await the\n   * returned Promise, and you should resolve the Promise to allow the update\n   * to proceed. If this method is overridden, `super.scheduleUpdate()`\n   * must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```ts\n   * override protected async scheduleUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.scheduleUpdate();\n   * }\n   * ```\n   * @category updates\n   */\n  protected scheduleUpdate(): void | Promise<unknown> {\n    return this.performUpdate();\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * Call `performUpdate()` to immediately process a pending update. This should\n   * generally not be needed, but it can be done in rare cases when you need to\n   * update synchronously.\n   *\n   * Note: To ensure `performUpdate()` synchronously completes a pending update,\n   * it should not be overridden. In LitElement 2.x it was suggested to override\n   * `performUpdate()` to also customizing update scheduling. Instead, you should now\n   * override `scheduleUpdate()`. For backwards compatibility with LitElement 2.x,\n   * scheduling updates via `performUpdate()` continues to work, but will make\n   * also calling `performUpdate()` to synchronously process updates difficult.\n   *\n   * @category updates\n   */\n  protected performUpdate(): void | Promise<unknown> {\n    // Abort any update if one is not pending when this is called.\n    // This can happen if `performUpdate` is called early to \"flush\"\n    // the update.\n    if (!this.isUpdatePending) {\n      return;\n    }\n    debugLogEvent?.({kind: 'update'});\n    // create renderRoot before first update.\n    if (!this.hasUpdated) {\n      // Produce warning if any class properties are shadowed by class fields\n      if (DEV_MODE) {\n        const shadowedProperties: string[] = [];\n        (\n          this.constructor as typeof ReactiveElement\n        ).__reactivePropertyKeys?.forEach((p) => {\n          if (this.hasOwnProperty(p) && !this.__instanceProperties?.has(p)) {\n            shadowedProperties.push(p as string);\n          }\n        });\n        if (shadowedProperties.length) {\n          throw new Error(\n            `The following properties on element ${this.localName} will not ` +\n              `trigger updates as expected because they are set using class ` +\n              `fields: ${shadowedProperties.join(', ')}. ` +\n              `Native class fields and some compiled output will overwrite ` +\n              `accessors used for detecting changes. See ` +\n              `https://lit.dev/msg/class-field-shadowing ` +\n              `for more information.`\n          );\n        }\n      }\n    }\n    // Mixin instance properties once, if they exist.\n    if (this.__instanceProperties) {\n      // Use forEach so this works even if for/of loops are compiled to for loops\n      // expecting arrays\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.__instanceProperties!.forEach((v, p) => ((this as any)[p] = v));\n      this.__instanceProperties = undefined;\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._$changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.willUpdate(changedProperties);\n        this.__controllers?.forEach((c) => c.hostUpdate?.());\n        this.update(changedProperties);\n      } else {\n        this.__markUpdated();\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      // Ensure element can accept additional updates after an exception.\n      this.__markUpdated();\n      throw e;\n    }\n    // The update is no longer considered pending and further updates are now allowed.\n    if (shouldUpdate) {\n      this._$didUpdate(changedProperties);\n    }\n  }\n\n  /**\n   * Invoked before `update()` to compute values needed during the update.\n   *\n   * Implement `willUpdate` to compute property values that depend on other\n   * properties and are used in the rest of the update process.\n   *\n   * ```ts\n   * willUpdate(changedProperties) {\n   *   // only need to check changed properties for an expensive computation.\n   *   if (changedProperties.has('firstName') || changedProperties.has('lastName')) {\n   *     this.sha = computeSHA(`${this.firstName} ${this.lastName}`);\n   *   }\n   * }\n   *\n   * render() {\n   *   return html`SHA: ${this.sha}`;\n   * }\n   * ```\n   *\n   * @category updates\n   */\n  protected willUpdate(_changedProperties: PropertyValues): void {}\n\n  // Note, this is an override point for polyfill-support.\n  // @internal\n  _$didUpdate(changedProperties: PropertyValues) {\n    this.__controllers?.forEach((c) => c.hostUpdated?.());\n    if (!this.hasUpdated) {\n      this.hasUpdated = true;\n      this.firstUpdated(changedProperties);\n    }\n    this.updated(changedProperties);\n    if (\n      DEV_MODE &&\n      this.isUpdatePending &&\n      (this.constructor as typeof ReactiveElement).enabledWarnings!.indexOf(\n        'change-in-update'\n      ) >= 0\n    ) {\n      issueWarning(\n        'change-in-update',\n        `Element ${this.localName} scheduled an update ` +\n          `(generally because a property was set) ` +\n          `after an update completed, causing a new update to be scheduled. ` +\n          `This is inefficient and should be avoided unless the next update ` +\n          `can only be scheduled as a side effect of the previous update.`\n      );\n    }\n  }\n\n  private __markUpdated() {\n    this._$changedProperties = new Map();\n    this.isUpdatePending = false;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super.getUpdateComplete()`, then any subsequent state.\n   *\n   * @return A promise of a boolean that resolves to true if the update completed\n   *     without triggering another update.\n   * @category updates\n   */\n  get updateComplete(): Promise<boolean> {\n    return this.getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   override async getUpdateComplete() {\n   *     const result = await super.getUpdateComplete();\n   *     await this._myChild.updateComplete;\n   *     return result;\n   *   }\n   * }\n   * ```\n   *\n   * @return A promise of a boolean that resolves to true if the update completed\n   *     without triggering another update.\n   * @category updates\n   */\n  protected getUpdateComplete(): Promise<boolean> {\n    return this.__updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update()` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected update(_changedProperties: PropertyValues) {\n    if (this.__reflectingProperties !== undefined) {\n      // Use forEach so this works even if for/of loops are compiled to for\n      // loops expecting arrays\n      this.__reflectingProperties.forEach((v, k) =>\n        this.__propertyToAttribute(k, this[k as keyof this], v)\n      );\n      this.__reflectingProperties = undefined;\n    }\n    this.__markUpdated();\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected updated(_changedProperties: PropertyValues) {}\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * ```ts\n   * firstUpdated() {\n   *   this.renderRoot.getElementById('my-text-area').focus();\n   * }\n   * ```\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {}\n}\n\n// Apply polyfills if available\npolyfillSupport?.({ReactiveElement});\n\n// Dev mode warnings...\nif (DEV_MODE) {\n  // Default warning set.\n  ReactiveElement.enabledWarnings = ['change-in-update'];\n  const ensureOwnWarnings = function (ctor: typeof ReactiveElement) {\n    if (\n      !ctor.hasOwnProperty(JSCompiler_renameProperty('enabledWarnings', ctor))\n    ) {\n      ctor.enabledWarnings = ctor.enabledWarnings!.slice();\n    }\n  };\n  ReactiveElement.enableWarning = function (\n    this: typeof ReactiveElement,\n    warning: WarningKind\n  ) {\n    ensureOwnWarnings(this);\n    if (this.enabledWarnings!.indexOf(warning) < 0) {\n      this.enabledWarnings!.push(warning);\n    }\n  };\n  ReactiveElement.disableWarning = function (\n    this: typeof ReactiveElement,\n    warning: WarningKind\n  ) {\n    ensureOwnWarnings(this);\n    const i = this.enabledWarnings!.indexOf(warning);\n    if (i >= 0) {\n      this.enabledWarnings!.splice(i, 1);\n    }\n  };\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for ReactiveElement usage.\n(global.reactiveElementVersions ??= []).push('1.6.2');\nif (DEV_MODE && global.reactiveElementVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. Loading multiple versions ` +\n      `is not recommended.`\n  );\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n// IMPORTANT: these imports must be type-only\nimport type {Directive, DirectiveResult, PartInfo} from './directive.js';\n\nconst DEV_MODE = true;\nconst ENABLE_EXTRA_SECURITY_HOOKS = true;\nconst ENABLE_SHADYDOM_NOPATCH = true;\nconst NODE_MODE = false;\n// Use window for browser builds because IE11 doesn't have globalThis.\nconst global = NODE_MODE ? globalThis : window;\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace LitUnstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry =\n      | TemplatePrep\n      | TemplateInstantiated\n      | TemplateInstantiatedAndUpdated\n      | TemplateUpdating\n      | BeginRender\n      | EndRender\n      | CommitPartEntry\n      | SetPartValue;\n    export interface TemplatePrep {\n      kind: 'template prep';\n      template: Template;\n      strings: TemplateStringsArray;\n      clonableTemplate: HTMLTemplateElement;\n      parts: TemplatePart[];\n    }\n    export interface BeginRender {\n      kind: 'begin render';\n      id: number;\n      value: unknown;\n      container: HTMLElement | DocumentFragment;\n      options: RenderOptions | undefined;\n      part: ChildPart | undefined;\n    }\n    export interface EndRender {\n      kind: 'end render';\n      id: number;\n      value: unknown;\n      container: HTMLElement | DocumentFragment;\n      options: RenderOptions | undefined;\n      part: ChildPart;\n    }\n    export interface TemplateInstantiated {\n      kind: 'template instantiated';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      fragment: Node;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface TemplateInstantiatedAndUpdated {\n      kind: 'template instantiated and updated';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      fragment: Node;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface TemplateUpdating {\n      kind: 'template updating';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface SetPartValue {\n      kind: 'set part';\n      part: Part;\n      value: unknown;\n      valueIndex: number;\n      values: unknown[];\n      templateInstance: TemplateInstance;\n    }\n\n    export type CommitPartEntry =\n      | CommitNothingToChildEntry\n      | CommitText\n      | CommitNode\n      | CommitAttribute\n      | CommitProperty\n      | CommitBooleanAttribute\n      | CommitEventListener\n      | CommitToElementBinding;\n\n    export interface CommitNothingToChildEntry {\n      kind: 'commit nothing to child';\n      start: ChildNode;\n      end: ChildNode | null;\n      parent: Disconnectable | undefined;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitText {\n      kind: 'commit text';\n      node: Text;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitNode {\n      kind: 'commit node';\n      start: Node;\n      parent: Disconnectable | undefined;\n      value: Node;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitAttribute {\n      kind: 'commit attribute';\n      element: Element;\n      name: string;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitProperty {\n      kind: 'commit property';\n      element: Element;\n      name: string;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitBooleanAttribute {\n      kind: 'commit boolean attribute';\n      element: Element;\n      name: string;\n      value: boolean;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitEventListener {\n      kind: 'commit event listener';\n      element: Element;\n      name: string;\n      value: unknown;\n      oldListener: unknown;\n      options: RenderOptions | undefined;\n      // True if we're removing the old event listener (e.g. because settings changed, or value is nothing)\n      removeListener: boolean;\n      // True if we're adding a new event listener (e.g. because first render, or settings changed)\n      addListener: boolean;\n    }\n\n    export interface CommitToElementBinding {\n      kind: 'commit to element binding';\n      element: Element;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n  }\n}\n\ninterface DebugLoggingWindow {\n  // Even in dev mode, we generally don't want to emit these events, as that's\n  // another level of cost, so only emit them when DEV_MODE is true _and_ when\n  // window.emitLitDebugEvents is true.\n  emitLitDebugLogEvents?: boolean;\n}\n\n/**\n * Useful for visualizing and logging insights into what the Lit template system is doing.\n *\n * Compiled out of prod mode builds.\n */\nconst debugLogEvent = DEV_MODE\n  ? (event: LitUnstable.DebugLog.Entry) => {\n      const shouldEmit = (global as unknown as DebugLoggingWindow)\n        .emitLitDebugLogEvents;\n      if (!shouldEmit) {\n        return;\n      }\n      global.dispatchEvent(\n        new CustomEvent<LitUnstable.DebugLog.Entry>('lit-debug', {\n          detail: event,\n        })\n      );\n    }\n  : undefined;\n// Used for connecting beginRender and endRender events when there are nested\n// renders when errors are thrown preventing an endRender event from being\n// called.\nlet debugLogRenderId = 0;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  global.litIssuedWarnings ??= new Set();\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += code\n      ? ` See https://lit.dev/msg/${code} for more information.`\n      : '';\n    if (!global.litIssuedWarnings!.has(warning)) {\n      console.warn(warning);\n      global.litIssuedWarnings!.add(warning);\n    }\n  };\n\n  issueWarning(\n    'dev-mode',\n    `Lit is in dev mode. Not recommended for production!`\n  );\n}\n\nconst wrap =\n  ENABLE_SHADYDOM_NOPATCH &&\n  global.ShadyDOM?.inUse &&\n  global.ShadyDOM?.noPatch === true\n    ? global.ShadyDOM!.wrap\n    : (node: Node) => node;\n\nconst trustedTypes = (global as unknown as Partial<Window>).trustedTypes;\n\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = trustedTypes\n  ? trustedTypes.createPolicy('lit-html', {\n      createHTML: (s) => s,\n    })\n  : undefined;\n\n/**\n * Used to sanitize any value before it is written into the DOM. This can be\n * used to implement a security policy of allowed and disallowed values in\n * order to prevent XSS attacks.\n *\n * One way of using this callback would be to check attributes and properties\n * against a list of high risk fields, and require that values written to such\n * fields be instances of a class which is safe by construction. Closure's Safe\n * HTML Types is one implementation of this technique (\n * https://github.com/google/safe-html-types/blob/master/doc/safehtml-types.md).\n * The TrustedTypes polyfill in API-only mode could also be used as a basis\n * for this technique (https://github.com/WICG/trusted-types).\n *\n * @param node The HTML node (usually either a #text node or an Element) that\n *     is being written to. Note that this is just an exemplar node, the write\n *     may take place against another instance of the same class of node.\n * @param name The name of an attribute or property (for example, 'href').\n * @param type Indicates whether the write that's about to be performed will\n *     be to a property or a node.\n * @return A function that will sanitize this class of writes.\n */\nexport type SanitizerFactory = (\n  node: Node,\n  name: string,\n  type: 'property' | 'attribute'\n) => ValueSanitizer;\n\n/**\n * A function which can sanitize values that will be written to a specific kind\n * of DOM sink.\n *\n * See SanitizerFactory.\n *\n * @param value The value to sanitize. Will be the actual value passed into\n *     the lit-html template literal, so this could be of any type.\n * @return The value to write to the DOM. Usually the same as the input value,\n *     unless sanitization is needed.\n */\nexport type ValueSanitizer = (value: unknown) => unknown;\n\nconst identityFunction: ValueSanitizer = (value: unknown) => value;\nconst noopSanitizer: SanitizerFactory = (\n  _node: Node,\n  _name: string,\n  _type: 'property' | 'attribute'\n) => identityFunction;\n\n/** Sets the global sanitizer factory. */\nconst setSanitizer = (newSanitizer: SanitizerFactory) => {\n  if (!ENABLE_EXTRA_SECURITY_HOOKS) {\n    return;\n  }\n  if (sanitizerFactoryInternal !== noopSanitizer) {\n    throw new Error(\n      `Attempted to overwrite existing lit-html security policy.` +\n        ` setSanitizeDOMValueFactory should be called at most once.`\n    );\n  }\n  sanitizerFactoryInternal = newSanitizer;\n};\n\n/**\n * Only used in internal tests, not a part of the public API.\n */\nconst _testOnlyClearSanitizerFactoryDoNotCallOrElse = () => {\n  sanitizerFactoryInternal = noopSanitizer;\n};\n\nconst createSanitizer: SanitizerFactory = (node, name, type) => {\n  return sanitizerFactoryInternal(node, name, type);\n};\n\n// Added to an attribute name to mark the attribute as bound so we can find\n// it easily.\nconst boundAttributeSuffix = '$lit$';\n\n// This marker is used in many syntactic positions in HTML, so it must be\n// a valid element name and attribute name. We don't support dynamic names (yet)\n// but this at least ensures that the parse tree is closer to the template\n// intention.\nconst marker = `lit$${String(Math.random()).slice(9)}$`;\n\n// String used to tell if a comment is a marker comment\nconst markerMatch = '?' + marker;\n\n// Text used to insert a comment marker node. We use processing instruction\n// syntax because it's slightly smaller, but parses as a comment node.\nconst nodeMarker = `<${markerMatch}>`;\n\nconst d =\n  NODE_MODE && global.document === undefined\n    ? ({\n        createTreeWalker() {\n          return {};\n        },\n      } as unknown as Document)\n    : document;\n\n// Creates a dynamic marker. We never have to search for these in the DOM.\nconst createMarker = () => d.createComment('');\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\ntype Primitive = null | undefined | boolean | number | string | symbol | bigint;\nconst isPrimitive = (value: unknown): value is Primitive =>\n  value === null || (typeof value != 'object' && typeof value != 'function');\nconst isArray = Array.isArray;\nconst isIterable = (value: unknown): value is Iterable<unknown> =>\n  isArray(value) ||\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  typeof (value as any)?.[Symbol.iterator] === 'function';\n\nconst SPACE_CHAR = `[ \\t\\n\\f\\r]`;\nconst ATTR_VALUE_CHAR = `[^ \\t\\n\\f\\r\"'\\`<>=]`;\nconst NAME_CHAR = `[^\\\\s\"'>=/]`;\n\n// These regexes represent the five parsing states that we care about in the\n// Template's HTML scanner. They match the *end* of the state they're named\n// after.\n// Depending on the match, we transition to a new state. If there's no match,\n// we stay in the same state.\n// Note that the regexes are stateful. We utilize lastIndex and sync it\n// across the multiple regexes used. In addition to the five regexes below\n// we also dynamically create a regex to find the matching end tags for raw\n// text elements.\n\n/**\n * End of text is: `<` followed by:\n *   (comment start) or (tag) or (dynamic tag binding)\n */\nconst textEndRegex = /<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g;\nconst COMMENT_START = 1;\nconst TAG_NAME = 2;\nconst DYNAMIC_TAG_NAME = 3;\n\nconst commentEndRegex = /-->/g;\n/**\n * Comments not started with <!--, like </{, can be ended by a single `>`\n */\nconst comment2EndRegex = />/g;\n\n/**\n * The tagEnd regex matches the end of the \"inside an opening\" tag syntax\n * position. It either matches a `>`, an attribute-like sequence, or the end\n * of the string after a space (attribute-name position ending).\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\t\\n\\f\\r\" are HTML space characters:\n * https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * So an attribute is:\n *  * The name: any character except a whitespace character, (\"), ('), \">\",\n *    \"=\", or \"/\". Note: this is different from the HTML spec which also excludes control characters.\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nconst tagEndRegex = new RegExp(\n  `>|${SPACE_CHAR}(?:(${NAME_CHAR}+)(${SPACE_CHAR}*=${SPACE_CHAR}*(?:${ATTR_VALUE_CHAR}|(\"|')|))|$)`,\n  'g'\n);\nconst ENTIRE_MATCH = 0;\nconst ATTRIBUTE_NAME = 1;\nconst SPACES_AND_EQUALS = 2;\nconst QUOTE_CHAR = 3;\n\nconst singleQuoteAttrEndRegex = /'/g;\nconst doubleQuoteAttrEndRegex = /\"/g;\n/**\n * Matches the raw text elements.\n *\n * Comments are not parsed within raw text elements, so we need to search their\n * text content for marker strings.\n */\nconst rawTextElement = /^(?:script|style|textarea|title)$/i;\n\n/** TemplateResult types */\nconst HTML_RESULT = 1;\nconst SVG_RESULT = 2;\n\ntype ResultType = typeof HTML_RESULT | typeof SVG_RESULT;\n\n// TemplatePart types\n// IMPORTANT: these must match the values in PartType\nconst ATTRIBUTE_PART = 1;\nconst CHILD_PART = 2;\nconst PROPERTY_PART = 3;\nconst BOOLEAN_ATTRIBUTE_PART = 4;\nconst EVENT_PART = 5;\nconst ELEMENT_PART = 6;\nconst COMMENT_PART = 7;\n\n/**\n * The return type of the template tag functions, {@linkcode html} and\n * {@linkcode svg}.\n *\n * A `TemplateResult` object holds all the information about a template\n * expression required to render it: the template strings, expression values,\n * and type of template (html or svg).\n *\n * `TemplateResult` objects do not create any DOM on their own. To create or\n * update DOM you need to render the `TemplateResult`. See\n * [Rendering](https://lit.dev/docs/components/rendering) for more information.\n *\n */\nexport type TemplateResult<T extends ResultType = ResultType> = {\n  // This property needs to remain unminified.\n  ['_$litType$']: T;\n  strings: TemplateStringsArray;\n  values: unknown[];\n};\n\nexport type HTMLTemplateResult = TemplateResult<typeof HTML_RESULT>;\n\nexport type SVGTemplateResult = TemplateResult<typeof SVG_RESULT>;\n\nexport interface CompiledTemplateResult {\n  // This is a factory in order to make template initialization lazy\n  // and allow ShadyRenderOptions scope to be passed in.\n  // This property needs to remain unminified.\n  ['_$litType$']: CompiledTemplate;\n  values: unknown[];\n}\n\nexport interface CompiledTemplate extends Omit<Template, 'el'> {\n  // el is overridden to be optional. We initialize it on first render\n  el?: HTMLTemplateElement;\n\n  // The prepared HTML string to create a template element from.\n  // The type is a TemplateStringsArray to guarantee that the value came from\n  // source code, preventing a JSON injection attack.\n  h: TemplateStringsArray;\n}\n\n/**\n * Generates a template literal tag function that returns a TemplateResult with\n * the given result type.\n */\nconst tag =\n  <T extends ResultType>(type: T) =>\n  (strings: TemplateStringsArray, ...values: unknown[]): TemplateResult<T> => {\n    // Warn against templates octal escape sequences\n    // We do this here rather than in render so that the warning is closer to the\n    // template definition.\n    if (DEV_MODE && strings.some((s) => s === undefined)) {\n      console.warn(\n        'Some template strings are undefined.\\n' +\n          'This is probably caused by illegal octal escape sequences.'\n      );\n    }\n    return {\n      // This property needs to remain unminified.\n      ['_$litType$']: type,\n      strings,\n      values,\n    };\n  };\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n *\n * ```ts\n * const header = (title: string) => html`<h1>${title}</h1>`;\n * ```\n *\n * The `html` tag returns a description of the DOM to render as a value. It is\n * lazy, meaning no work is done until the template is rendered. When rendering,\n * if a template comes from the same expression as a previously rendered result,\n * it's efficiently updated instead of replaced.\n */\nexport const html = tag(HTML_RESULT);\n\n/**\n * Interprets a template literal as an SVG fragment that can efficiently\n * render to and update a container.\n *\n * ```ts\n * const rect = svg`<rect width=\"10\" height=\"10\"></rect>`;\n *\n * const myImage = html`\n *   <svg viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\">\n *     ${rect}\n *   </svg>`;\n * ```\n *\n * The `svg` *tag function* should only be used for SVG fragments, or elements\n * that would be contained **inside** an `<svg>` HTML element. A common error is\n * placing an `<svg>` *element* in a template tagged with the `svg` tag\n * function. The `<svg>` element is an HTML element and should be used within a\n * template tagged with the {@linkcode html} tag function.\n *\n * In LitElement usage, it's invalid to return an SVG fragment from the\n * `render()` method, as the SVG fragment will be contained within the element's\n * shadow root and thus cannot be used within an `<svg>` HTML element.\n */\nexport const svg = tag(SVG_RESULT);\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = Symbol.for('lit-noChange');\n\n/**\n * A sentinel value that signals a ChildPart to fully clear its content.\n *\n * ```ts\n * const button = html`${\n *  user.isAdmin\n *    ? html`<button>DELETE</button>`\n *    : nothing\n * }`;\n * ```\n *\n * Prefer using `nothing` over other falsy values as it provides a consistent\n * behavior between various expression binding contexts.\n *\n * In child expressions, `undefined`, `null`, `''`, and `nothing` all behave the\n * same and render no nodes. In attribute expressions, `nothing` _removes_ the\n * attribute, while `undefined` and `null` will render an empty string. In\n * property expressions `nothing` becomes `undefined`.\n */\nexport const nothing = Symbol.for('lit-nothing');\n\n/**\n * The cache of prepared templates, keyed by the tagged TemplateStringsArray\n * and _not_ accounting for the specific template tag used. This means that\n * template tags cannot be dynamic - the must statically be one of html, svg,\n * or attr. This restriction simplifies the cache lookup, which is on the hot\n * path for rendering.\n */\nconst templateCache = new WeakMap<TemplateStringsArray, Template>();\n\n/**\n * Object specifying options for controlling lit-html rendering. Note that\n * while `render` may be called multiple times on the same `container` (and\n * `renderBefore` reference node) to efficiently update the rendered content,\n * only the options passed in during the first render are respected during\n * the lifetime of renders to that unique `container` + `renderBefore`\n * combination.\n */\nexport interface RenderOptions {\n  /**\n   * An object to use as the `this` value for event listeners. It's often\n   * useful to set this to the host component rendering a template.\n   */\n  host?: object;\n  /**\n   * A DOM node before which to render content in the container.\n   */\n  renderBefore?: ChildNode | null;\n  /**\n   * Node used for cloning the template (`importNode` will be called on this\n   * node). This controls the `ownerDocument` of the rendered DOM, along with\n   * any inherited context. Defaults to the global `document`.\n   */\n  creationScope?: {importNode(node: Node, deep?: boolean): Node};\n  /**\n   * The initial connected state for the top-level part being rendered. If no\n   * `isConnected` option is set, `AsyncDirective`s will be connected by\n   * default. Set to `false` if the initial render occurs in a disconnected tree\n   * and `AsyncDirective`s should see `isConnected === false` for their initial\n   * render. The `part.setConnected()` method must be used subsequent to initial\n   * render to change the connected state of the part.\n   */\n  isConnected?: boolean;\n}\n\nconst walker = d.createTreeWalker(\n  d,\n  129 /* NodeFilter.SHOW_{ELEMENT|COMMENT} */,\n  null,\n  false\n);\n\nlet sanitizerFactoryInternal: SanitizerFactory = noopSanitizer;\n\n//\n// Classes only below here, const variable declarations only above here...\n//\n// Keeping variable declarations and classes together improves minification.\n// Interfaces and type aliases can be interleaved freely.\n//\n\n// Type for classes that have a `_directive` or `_directives[]` field, used by\n// `resolveDirective`\nexport interface DirectiveParent {\n  _$parent?: DirectiveParent;\n  _$isConnected: boolean;\n  __directive?: Directive;\n  __directives?: Array<Directive | undefined>;\n}\n\nfunction trustFromTemplateString(\n  tsa: TemplateStringsArray,\n  stringFromTSA: string\n): TrustedHTML {\n  // A security check to prevent spoofing of Lit template results.\n  // In the future, we may be able to replace this with Array.isTemplateObject,\n  // though we might need to make that check inside of the html and svg\n  // functions, because precompiled templates don't come in as\n  // TemplateStringArray objects.\n  if (!Array.isArray(tsa) || !tsa.hasOwnProperty('raw')) {\n    let message = 'invalid template strings array';\n    if (DEV_MODE) {\n      message = `\n          Internal Error: expected template strings to be an array\n          with a 'raw' field. Faking a template strings array by\n          calling html or svg like an ordinary function is effectively\n          the same as calling unsafeHtml and can lead to major security\n          issues, e.g. opening your code up to XSS attacks.\n          If you're using the html or svg tagged template functions normally\n          and still seeing this error, please file a bug at\n          https://github.com/lit/lit/issues/new?template=bug_report.md\n          and include information about your build tooling, if any.\n        `\n        .trim()\n        .replace(/\\n */g, '\\n');\n    }\n    throw new Error(message);\n  }\n  return policy !== undefined\n    ? policy.createHTML(stringFromTSA)\n    : (stringFromTSA as unknown as TrustedHTML);\n}\n\n/**\n * Returns an HTML string for the given TemplateStringsArray and result type\n * (HTML or SVG), along with the case-sensitive bound attribute names in\n * template order. The HTML contains comment markers denoting the `ChildPart`s\n * and suffixes on bound attributes denoting the `AttributeParts`.\n *\n * @param strings template strings array\n * @param type HTML or SVG\n * @return Array containing `[html, attrNames]` (array returned for terseness,\n *     to avoid object fields since this code is shared with non-minified SSR\n *     code)\n */\nconst getTemplateHtml = (\n  strings: TemplateStringsArray,\n  type: ResultType\n): [TrustedHTML, Array<string | undefined>] => {\n  // Insert makers into the template HTML to represent the position of\n  // bindings. The following code scans the template strings to determine the\n  // syntactic position of the bindings. They can be in text position, where\n  // we insert an HTML comment, attribute value position, where we insert a\n  // sentinel string and re-write the attribute name, or inside a tag where\n  // we insert the sentinel string.\n  const l = strings.length - 1;\n  // Stores the case-sensitive bound attribute names in the order of their\n  // parts. ElementParts are also reflected in this array as undefined\n  // rather than a string, to disambiguate from attribute bindings.\n  const attrNames: Array<string | undefined> = [];\n  let html = type === SVG_RESULT ? '<svg>' : '';\n\n  // When we're inside a raw text tag (not it's text content), the regex\n  // will still be tagRegex so we can find attributes, but will switch to\n  // this regex when the tag ends.\n  let rawTextEndRegex: RegExp | undefined;\n\n  // The current parsing state, represented as a reference to one of the\n  // regexes\n  let regex = textEndRegex;\n\n  for (let i = 0; i < l; i++) {\n    const s = strings[i];\n    // The index of the end of the last attribute name. When this is\n    // positive at end of a string, it means we're in an attribute value\n    // position and need to rewrite the attribute name.\n    // We also use a special value of -2 to indicate that we encountered\n    // the end of a string in attribute name position.\n    let attrNameEndIndex = -1;\n    let attrName: string | undefined;\n    let lastIndex = 0;\n    let match!: RegExpExecArray | null;\n\n    // The conditions in this loop handle the current parse state, and the\n    // assignments to the `regex` variable are the state transitions.\n    while (lastIndex < s.length) {\n      // Make sure we start searching from where we previously left off\n      regex.lastIndex = lastIndex;\n      match = regex.exec(s);\n      if (match === null) {\n        break;\n      }\n      lastIndex = regex.lastIndex;\n      if (regex === textEndRegex) {\n        if (match[COMMENT_START] === '!--') {\n          regex = commentEndRegex;\n        } else if (match[COMMENT_START] !== undefined) {\n          // We started a weird comment, like </{\n          regex = comment2EndRegex;\n        } else if (match[TAG_NAME] !== undefined) {\n          if (rawTextElement.test(match[TAG_NAME])) {\n            // Record if we encounter a raw-text element. We'll switch to\n            // this regex at the end of the tag.\n            rawTextEndRegex = new RegExp(`</${match[TAG_NAME]}`, 'g');\n          }\n          regex = tagEndRegex;\n        } else if (match[DYNAMIC_TAG_NAME] !== undefined) {\n          if (DEV_MODE) {\n            throw new Error(\n              'Bindings in tag names are not supported. Please use static templates instead. ' +\n                'See https://lit.dev/docs/templates/expressions/#static-expressions'\n            );\n          }\n          regex = tagEndRegex;\n        }\n      } else if (regex === tagEndRegex) {\n        if (match[ENTIRE_MATCH] === '>') {\n          // End of a tag. If we had started a raw-text element, use that\n          // regex\n          regex = rawTextEndRegex ?? textEndRegex;\n          // We may be ending an unquoted attribute value, so make sure we\n          // clear any pending attrNameEndIndex\n          attrNameEndIndex = -1;\n        } else if (match[ATTRIBUTE_NAME] === undefined) {\n          // Attribute name position\n          attrNameEndIndex = -2;\n        } else {\n          attrNameEndIndex = regex.lastIndex - match[SPACES_AND_EQUALS].length;\n          attrName = match[ATTRIBUTE_NAME];\n          regex =\n            match[QUOTE_CHAR] === undefined\n              ? tagEndRegex\n              : match[QUOTE_CHAR] === '\"'\n              ? doubleQuoteAttrEndRegex\n              : singleQuoteAttrEndRegex;\n        }\n      } else if (\n        regex === doubleQuoteAttrEndRegex ||\n        regex === singleQuoteAttrEndRegex\n      ) {\n        regex = tagEndRegex;\n      } else if (regex === commentEndRegex || regex === comment2EndRegex) {\n        regex = textEndRegex;\n      } else {\n        // Not one of the five state regexes, so it must be the dynamically\n        // created raw text regex and we're at the close of that element.\n        regex = tagEndRegex;\n        rawTextEndRegex = undefined;\n      }\n    }\n\n    if (DEV_MODE) {\n      // If we have a attrNameEndIndex, which indicates that we should\n      // rewrite the attribute name, assert that we're in a valid attribute\n      // position - either in a tag, or a quoted attribute value.\n      console.assert(\n        attrNameEndIndex === -1 ||\n          regex === tagEndRegex ||\n          regex === singleQuoteAttrEndRegex ||\n          regex === doubleQuoteAttrEndRegex,\n        'unexpected parse state B'\n      );\n    }\n\n    // We have four cases:\n    //  1. We're in text position, and not in a raw text element\n    //     (regex === textEndRegex): insert a comment marker.\n    //  2. We have a non-negative attrNameEndIndex which means we need to\n    //     rewrite the attribute name to add a bound attribute suffix.\n    //  3. We're at the non-first binding in a multi-binding attribute, use a\n    //     plain marker.\n    //  4. We're somewhere else inside the tag. If we're in attribute name\n    //     position (attrNameEndIndex === -2), add a sequential suffix to\n    //     generate a unique attribute name.\n\n    // Detect a binding next to self-closing tag end and insert a space to\n    // separate the marker from the tag end:\n    const end =\n      regex === tagEndRegex && strings[i + 1].startsWith('/>') ? ' ' : '';\n    html +=\n      regex === textEndRegex\n        ? s + nodeMarker\n        : attrNameEndIndex >= 0\n        ? (attrNames.push(attrName!),\n          s.slice(0, attrNameEndIndex) +\n            boundAttributeSuffix +\n            s.slice(attrNameEndIndex)) +\n          marker +\n          end\n        : s +\n          marker +\n          (attrNameEndIndex === -2 ? (attrNames.push(undefined), i) : end);\n  }\n\n  const htmlResult: string | TrustedHTML =\n    html + (strings[l] || '<?>') + (type === SVG_RESULT ? '</svg>' : '');\n\n  // Returned as an array for terseness\n  return [trustFromTemplateString(strings, htmlResult), attrNames];\n};\n\n/** @internal */\nexport type {Template};\nclass Template {\n  /** @internal */\n  el!: HTMLTemplateElement;\n\n  parts: Array<TemplatePart> = [];\n\n  constructor(\n    // This property needs to remain unminified.\n    {strings, ['_$litType$']: type}: TemplateResult,\n    options?: RenderOptions\n  ) {\n    let node: Node | null;\n    let nodeIndex = 0;\n    let attrNameIndex = 0;\n    const partCount = strings.length - 1;\n    const parts = this.parts;\n\n    // Create template element\n    const [html, attrNames] = getTemplateHtml(strings, type);\n    this.el = Template.createElement(html, options);\n    walker.currentNode = this.el.content;\n\n    // Reparent SVG nodes into template root\n    if (type === SVG_RESULT) {\n      const content = this.el.content;\n      const svgElement = content.firstChild!;\n      svgElement.remove();\n      content.append(...svgElement.childNodes);\n    }\n\n    // Walk the template to find binding markers and create TemplateParts\n    while ((node = walker.nextNode()) !== null && parts.length < partCount) {\n      if (node.nodeType === 1) {\n        if (DEV_MODE) {\n          const tag = (node as Element).localName;\n          // Warn if `textarea` includes an expression and throw if `template`\n          // does since these are not supported. We do this by checking\n          // innerHTML for anything that looks like a marker. This catches\n          // cases like bindings in textarea there markers turn into text nodes.\n          if (\n            /^(?:textarea|template)$/i!.test(tag) &&\n            (node as Element).innerHTML.includes(marker)\n          ) {\n            const m =\n              `Expressions are not supported inside \\`${tag}\\` ` +\n              `elements. See https://lit.dev/msg/expression-in-${tag} for more ` +\n              `information.`;\n            if (tag === 'template') {\n              throw new Error(m);\n            } else issueWarning('', m);\n          }\n        }\n        // TODO (justinfagnani): for attempted dynamic tag names, we don't\n        // increment the bindingIndex, and it'll be off by 1 in the element\n        // and off by two after it.\n        if ((node as Element).hasAttributes()) {\n          // We defer removing bound attributes because on IE we might not be\n          // iterating attributes in their template order, and would sometimes\n          // remove an attribute that we still need to create a part for.\n          const attrsToRemove = [];\n          for (const name of (node as Element).getAttributeNames()) {\n            // `name` is the name of the attribute we're iterating over, but not\n            // _necessarily_ the name of the attribute we will create a part\n            // for. They can be different in browsers that don't iterate on\n            // attributes in source order. In that case the attrNames array\n            // contains the attribute name we'll process next. We only need the\n            // attribute name here to know if we should process a bound attribute\n            // on this element.\n            if (\n              name.endsWith(boundAttributeSuffix) ||\n              name.startsWith(marker)\n            ) {\n              const realName = attrNames[attrNameIndex++];\n              attrsToRemove.push(name);\n              if (realName !== undefined) {\n                // Lowercase for case-sensitive SVG attributes like viewBox\n                const value = (node as Element).getAttribute(\n                  realName.toLowerCase() + boundAttributeSuffix\n                )!;\n                const statics = value.split(marker);\n                const m = /([.?@])?(.*)/.exec(realName)!;\n                parts.push({\n                  type: ATTRIBUTE_PART,\n                  index: nodeIndex,\n                  name: m[2],\n                  strings: statics,\n                  ctor:\n                    m[1] === '.'\n                      ? PropertyPart\n                      : m[1] === '?'\n                      ? BooleanAttributePart\n                      : m[1] === '@'\n                      ? EventPart\n                      : AttributePart,\n                });\n              } else {\n                parts.push({\n                  type: ELEMENT_PART,\n                  index: nodeIndex,\n                });\n              }\n            }\n          }\n          for (const name of attrsToRemove) {\n            (node as Element).removeAttribute(name);\n          }\n        }\n        // TODO (justinfagnani): benchmark the regex against testing for each\n        // of the 3 raw text element names.\n        if (rawTextElement.test((node as Element).tagName)) {\n          // For raw text elements we need to split the text content on\n          // markers, create a Text node for each segment, and create\n          // a TemplatePart for each marker.\n          const strings = (node as Element).textContent!.split(marker);\n          const lastIndex = strings.length - 1;\n          if (lastIndex > 0) {\n            (node as Element).textContent = trustedTypes\n              ? (trustedTypes.emptyScript as unknown as '')\n              : '';\n            // Generate a new text node for each literal section\n            // These nodes are also used as the markers for node parts\n            // We can't use empty text nodes as markers because they're\n            // normalized when cloning in IE (could simplify when\n            // IE is no longer supported)\n            for (let i = 0; i < lastIndex; i++) {\n              (node as Element).append(strings[i], createMarker());\n              // Walk past the marker node we just added\n              walker.nextNode();\n              parts.push({type: CHILD_PART, index: ++nodeIndex});\n            }\n            // Note because this marker is added after the walker's current\n            // node, it will be walked to in the outer loop (and ignored), so\n            // we don't need to adjust nodeIndex here\n            (node as Element).append(strings[lastIndex], createMarker());\n          }\n        }\n      } else if (node.nodeType === 8) {\n        const data = (node as Comment).data;\n        if (data === markerMatch) {\n          parts.push({type: CHILD_PART, index: nodeIndex});\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            parts.push({type: COMMENT_PART, index: nodeIndex});\n            // Move to the end of the match\n            i += marker.length - 1;\n          }\n        }\n      }\n      nodeIndex++;\n    }\n    // We could set walker.currentNode to another node here to prevent a memory\n    // leak, but every time we prepare a template, we immediately render it\n    // and re-use the walker in new TemplateInstance._clone().\n    debugLogEvent?.({\n      kind: 'template prep',\n      template: this,\n      clonableTemplate: this.el,\n      parts: this.parts,\n      strings,\n    });\n  }\n\n  // Overridden via `litHtmlPolyfillSupport` to provide platform support.\n  /** @nocollapse */\n  static createElement(html: TrustedHTML, _options?: RenderOptions) {\n    const el = d.createElement('template');\n    el.innerHTML = html as unknown as string;\n    return el;\n  }\n}\n\nexport interface Disconnectable {\n  _$parent?: Disconnectable;\n  _$disconnectableChildren?: Set<Disconnectable>;\n  // Rather than hold connection state on instances, Disconnectables recursively\n  // fetch the connection state from the RootPart they are connected in via\n  // getters up the Disconnectable tree via _$parent references. This pushes the\n  // cost of tracking the isConnected state to `AsyncDirectives`, and avoids\n  // needing to pass all Disconnectables (parts, template instances, and\n  // directives) their connection state each time it changes, which would be\n  // costly for trees that have no AsyncDirectives.\n  _$isConnected: boolean;\n}\n\nfunction resolveDirective(\n  part: ChildPart | AttributePart | ElementPart,\n  value: unknown,\n  parent: DirectiveParent = part,\n  attributeIndex?: number\n): unknown {\n  // Bail early if the value is explicitly noChange. Note, this means any\n  // nested directive is still attached and is not run.\n  if (value === noChange) {\n    return value;\n  }\n  let currentDirective =\n    attributeIndex !== undefined\n      ? (parent as AttributePart).__directives?.[attributeIndex]\n      : (parent as ChildPart | ElementPart | Directive).__directive;\n  const nextDirectiveConstructor = isPrimitive(value)\n    ? undefined\n    : // This property needs to remain unminified.\n      (value as DirectiveResult)['_$litDirective$'];\n  if (currentDirective?.constructor !== nextDirectiveConstructor) {\n    // This property needs to remain unminified.\n    currentDirective?.['_$notifyDirectiveConnectionChanged']?.(false);\n    if (nextDirectiveConstructor === undefined) {\n      currentDirective = undefined;\n    } else {\n      currentDirective = new nextDirectiveConstructor(part as PartInfo);\n      currentDirective._$initialize(part, parent, attributeIndex);\n    }\n    if (attributeIndex !== undefined) {\n      ((parent as AttributePart).__directives ??= [])[attributeIndex] =\n        currentDirective;\n    } else {\n      (parent as ChildPart | Directive).__directive = currentDirective;\n    }\n  }\n  if (currentDirective !== undefined) {\n    value = resolveDirective(\n      part,\n      currentDirective._$resolve(part, (value as DirectiveResult).values),\n      currentDirective,\n      attributeIndex\n    );\n  }\n  return value;\n}\n\nexport type {TemplateInstance};\n/**\n * An updateable instance of a Template. Holds references to the Parts used to\n * update the template instance.\n */\nclass TemplateInstance implements Disconnectable {\n  _$template: Template;\n  _$parts: Array<Part | undefined> = [];\n\n  /** @internal */\n  _$parent: ChildPart;\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  constructor(template: Template, parent: ChildPart) {\n    this._$template = template;\n    this._$parent = parent;\n  }\n\n  // Called by ChildPart parentNode getter\n  get parentNode() {\n    return this._$parent.parentNode;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  // This method is separate from the constructor because we need to return a\n  // DocumentFragment and we don't want to hold onto it with an instance field.\n  _clone(options: RenderOptions | undefined) {\n    const {\n      el: {content},\n      parts: parts,\n    } = this._$template;\n    const fragment = (options?.creationScope ?? d).importNode(content, true);\n    walker.currentNode = fragment;\n\n    let node = walker.nextNode()!;\n    let nodeIndex = 0;\n    let partIndex = 0;\n    let templatePart = parts[0];\n\n    while (templatePart !== undefined) {\n      if (nodeIndex === templatePart.index) {\n        let part: Part | undefined;\n        if (templatePart.type === CHILD_PART) {\n          part = new ChildPart(\n            node as HTMLElement,\n            node.nextSibling,\n            this,\n            options\n          );\n        } else if (templatePart.type === ATTRIBUTE_PART) {\n          part = new templatePart.ctor(\n            node as HTMLElement,\n            templatePart.name,\n            templatePart.strings,\n            this,\n            options\n          );\n        } else if (templatePart.type === ELEMENT_PART) {\n          part = new ElementPart(node as HTMLElement, this, options);\n        }\n        this._$parts.push(part);\n        templatePart = parts[++partIndex];\n      }\n      if (nodeIndex !== templatePart?.index) {\n        node = walker.nextNode()!;\n        nodeIndex++;\n      }\n    }\n    // We need to set the currentNode away from the cloned tree so that we\n    // don't hold onto the tree even if the tree is detached and should be\n    // freed.\n    walker.currentNode = d;\n    return fragment;\n  }\n\n  _update(values: Array<unknown>) {\n    let i = 0;\n    for (const part of this._$parts) {\n      if (part !== undefined) {\n        debugLogEvent?.({\n          kind: 'set part',\n          part,\n          value: values[i],\n          valueIndex: i,\n          values,\n          templateInstance: this,\n        });\n        if ((part as AttributePart).strings !== undefined) {\n          (part as AttributePart)._$setValue(values, part as AttributePart, i);\n          // The number of values the part consumes is part.strings.length - 1\n          // since values are in between template spans. We increment i by 1\n          // later in the loop, so increment it by part.strings.length - 2 here\n          i += (part as AttributePart).strings!.length - 2;\n        } else {\n          part._$setValue(values[i]);\n        }\n      }\n      i++;\n    }\n  }\n}\n\n/*\n * Parts\n */\ntype AttributeTemplatePart = {\n  readonly type: typeof ATTRIBUTE_PART;\n  readonly index: number;\n  readonly name: string;\n  readonly ctor: typeof AttributePart;\n  readonly strings: ReadonlyArray<string>;\n};\ntype ChildTemplatePart = {\n  readonly type: typeof CHILD_PART;\n  readonly index: number;\n};\ntype ElementTemplatePart = {\n  readonly type: typeof ELEMENT_PART;\n  readonly index: number;\n};\ntype CommentTemplatePart = {\n  readonly type: typeof COMMENT_PART;\n  readonly index: number;\n};\n\n/**\n * A TemplatePart represents a dynamic part in a template, before the template\n * is instantiated. When a template is instantiated Parts are created from\n * TemplateParts.\n */\ntype TemplatePart =\n  | ChildTemplatePart\n  | AttributeTemplatePart\n  | ElementTemplatePart\n  | CommentTemplatePart;\n\nexport type Part =\n  | ChildPart\n  | AttributePart\n  | PropertyPart\n  | BooleanAttributePart\n  | ElementPart\n  | EventPart;\n\nexport type {ChildPart};\nclass ChildPart implements Disconnectable {\n  readonly type = CHILD_PART;\n  readonly options: RenderOptions | undefined;\n  _$committedValue: unknown = nothing;\n  /** @internal */\n  __directive?: Directive;\n  /** @internal */\n  _$startNode: ChildNode;\n  /** @internal */\n  _$endNode: ChildNode | null;\n  private _textSanitizer: ValueSanitizer | undefined;\n  /** @internal */\n  _$parent: Disconnectable | undefined;\n  /**\n   * Connection state for RootParts only (i.e. ChildPart without _$parent\n   * returned from top-level `render`). This field is unsed otherwise. The\n   * intention would clearer if we made `RootPart` a subclass of `ChildPart`\n   * with this field (and a different _$isConnected getter), but the subclass\n   * caused a perf regression, possibly due to making call sites polymorphic.\n   * @internal\n   */\n  __isConnected: boolean;\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    // ChildParts that are not at the root should always be created with a\n    // parent; only RootChildNode's won't, so they return the local isConnected\n    // state\n    return this._$parent?._$isConnected ?? this.__isConnected;\n  }\n\n  // The following fields will be patched onto ChildParts when required by\n  // AsyncDirective\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n  /** @internal */\n  _$notifyConnectionChanged?(\n    isConnected: boolean,\n    removeFromParent?: boolean,\n    from?: number\n  ): void;\n  /** @internal */\n  _$reparentDisconnectables?(parent: Disconnectable): void;\n\n  constructor(\n    startNode: ChildNode,\n    endNode: ChildNode | null,\n    parent: TemplateInstance | ChildPart | undefined,\n    options: RenderOptions | undefined\n  ) {\n    this._$startNode = startNode;\n    this._$endNode = endNode;\n    this._$parent = parent;\n    this.options = options;\n    // Note __isConnected is only ever accessed on RootParts (i.e. when there is\n    // no _$parent); the value on a non-root-part is \"don't care\", but checking\n    // for parent would be more code\n    this.__isConnected = options?.isConnected ?? true;\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      // Explicitly initialize for consistent class shape.\n      this._textSanitizer = undefined;\n    }\n  }\n\n  /**\n   * The parent node into which the part renders its content.\n   *\n   * A ChildPart's content consists of a range of adjacent child nodes of\n   * `.parentNode`, possibly bordered by 'marker nodes' (`.startNode` and\n   * `.endNode`).\n   *\n   * - If both `.startNode` and `.endNode` are non-null, then the part's content\n   * consists of all siblings between `.startNode` and `.endNode`, exclusively.\n   *\n   * - If `.startNode` is non-null but `.endNode` is null, then the part's\n   * content consists of all siblings following `.startNode`, up to and\n   * including the last child of `.parentNode`. If `.endNode` is non-null, then\n   * `.startNode` will always be non-null.\n   *\n   * - If both `.endNode` and `.startNode` are null, then the part's content\n   * consists of all child nodes of `.parentNode`.\n   */\n  get parentNode(): Node {\n    let parentNode: Node = wrap(this._$startNode).parentNode!;\n    const parent = this._$parent;\n    if (\n      parent !== undefined &&\n      parentNode?.nodeType === 11 /* Node.DOCUMENT_FRAGMENT */\n    ) {\n      // If the parentNode is a DocumentFragment, it may be because the DOM is\n      // still in the cloned fragment during initial render; if so, get the real\n      // parentNode the part will be committed into by asking the parent.\n      parentNode = (parent as ChildPart | TemplateInstance).parentNode;\n    }\n    return parentNode;\n  }\n\n  /**\n   * The part's leading marker node, if any. See `.parentNode` for more\n   * information.\n   */\n  get startNode(): Node | null {\n    return this._$startNode;\n  }\n\n  /**\n   * The part's trailing marker node, if any. See `.parentNode` for more\n   * information.\n   */\n  get endNode(): Node | null {\n    return this._$endNode;\n  }\n\n  _$setValue(value: unknown, directiveParent: DirectiveParent = this): void {\n    if (DEV_MODE && this.parentNode === null) {\n      throw new Error(\n        `This \\`ChildPart\\` has no \\`parentNode\\` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's \\`innerHTML\\` or \\`textContent\\` can do this.`\n      );\n    }\n    value = resolveDirective(this, value, directiveParent);\n    if (isPrimitive(value)) {\n      // Non-rendering child values. It's important that these do not render\n      // empty text nodes to avoid issues with preventing default <slot>\n      // fallback content.\n      if (value === nothing || value == null || value === '') {\n        if (this._$committedValue !== nothing) {\n          debugLogEvent?.({\n            kind: 'commit nothing to child',\n            start: this._$startNode,\n            end: this._$endNode,\n            parent: this._$parent,\n            options: this.options,\n          });\n          this._$clear();\n        }\n        this._$committedValue = nothing;\n      } else if (value !== this._$committedValue && value !== noChange) {\n        this._commitText(value);\n      }\n      // This property needs to remain unminified.\n    } else if ((value as TemplateResult)['_$litType$'] !== undefined) {\n      this._commitTemplateResult(value as TemplateResult);\n    } else if ((value as Node).nodeType !== undefined) {\n      if (DEV_MODE && this.options?.host === value) {\n        this._commitText(\n          `[probable mistake: rendered a template's host in itself ` +\n            `(commonly caused by writing \\${this} in a template]`\n        );\n        console.warn(\n          `Attempted to render the template host`,\n          value,\n          `inside itself. This is almost always a mistake, and in dev mode `,\n          `we render some warning text. In production however, we'll `,\n          `render it, which will usually result in an error, and sometimes `,\n          `in the element disappearing from the DOM.`\n        );\n        return;\n      }\n      this._commitNode(value as Node);\n    } else if (isIterable(value)) {\n      this._commitIterable(value);\n    } else {\n      // Fallback, will render the string representation\n      this._commitText(value);\n    }\n  }\n\n  private _insert<T extends Node>(node: T) {\n    return wrap(wrap(this._$startNode).parentNode!).insertBefore(\n      node,\n      this._$endNode\n    );\n  }\n\n  private _commitNode(value: Node): void {\n    if (this._$committedValue !== value) {\n      this._$clear();\n      if (\n        ENABLE_EXTRA_SECURITY_HOOKS &&\n        sanitizerFactoryInternal !== noopSanitizer\n      ) {\n        const parentNodeName = this._$startNode.parentNode?.nodeName;\n        if (parentNodeName === 'STYLE' || parentNodeName === 'SCRIPT') {\n          let message = 'Forbidden';\n          if (DEV_MODE) {\n            if (parentNodeName === 'STYLE') {\n              message =\n                `Lit does not support binding inside style nodes. ` +\n                `This is a security risk, as style injection attacks can ` +\n                `exfiltrate data and spoof UIs. ` +\n                `Consider instead using css\\`...\\` literals ` +\n                `to compose styles, and make do dynamic styling with ` +\n                `css custom properties, ::parts, <slot>s, ` +\n                `and by mutating the DOM rather than stylesheets.`;\n            } else {\n              message =\n                `Lit does not support binding inside script nodes. ` +\n                `This is a security risk, as it could allow arbitrary ` +\n                `code execution.`;\n            }\n          }\n          throw new Error(message);\n        }\n      }\n      debugLogEvent?.({\n        kind: 'commit node',\n        start: this._$startNode,\n        parent: this._$parent,\n        value: value,\n        options: this.options,\n      });\n      this._$committedValue = this._insert(value);\n    }\n  }\n\n  private _commitText(value: unknown): void {\n    // If the committed value is a primitive it means we called _commitText on\n    // the previous render, and we know that this._$startNode.nextSibling is a\n    // Text node. We can now just replace the text content (.data) of the node.\n    if (\n      this._$committedValue !== nothing &&\n      isPrimitive(this._$committedValue)\n    ) {\n      const node = wrap(this._$startNode).nextSibling as Text;\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        if (this._textSanitizer === undefined) {\n          this._textSanitizer = createSanitizer(node, 'data', 'property');\n        }\n        value = this._textSanitizer(value);\n      }\n      debugLogEvent?.({\n        kind: 'commit text',\n        node,\n        value,\n        options: this.options,\n      });\n      (node as Text).data = value as string;\n    } else {\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        const textNode = d.createTextNode('');\n        this._commitNode(textNode);\n        // When setting text content, for security purposes it matters a lot\n        // what the parent is. For example, <style> and <script> need to be\n        // handled with care, while <span> does not. So first we need to put a\n        // text node into the document, then we can sanitize its content.\n        if (this._textSanitizer === undefined) {\n          this._textSanitizer = createSanitizer(textNode, 'data', 'property');\n        }\n        value = this._textSanitizer(value);\n        debugLogEvent?.({\n          kind: 'commit text',\n          node: textNode,\n          value,\n          options: this.options,\n        });\n        textNode.data = value as string;\n      } else {\n        this._commitNode(d.createTextNode(value as string));\n        debugLogEvent?.({\n          kind: 'commit text',\n          node: wrap(this._$startNode).nextSibling as Text,\n          value,\n          options: this.options,\n        });\n      }\n    }\n    this._$committedValue = value;\n  }\n\n  private _commitTemplateResult(\n    result: TemplateResult | CompiledTemplateResult\n  ): void {\n    // This property needs to remain unminified.\n    const {values, ['_$litType$']: type} = result;\n    // If $litType$ is a number, result is a plain TemplateResult and we get\n    // the template from the template cache. If not, result is a\n    // CompiledTemplateResult and _$litType$ is a CompiledTemplate and we need\n    // to create the <template> element the first time we see it.\n    const template: Template | CompiledTemplate =\n      typeof type === 'number'\n        ? this._$getTemplate(result as TemplateResult)\n        : (type.el === undefined &&\n            (type.el = Template.createElement(\n              trustFromTemplateString(type.h, type.h[0]),\n              this.options\n            )),\n          type);\n\n    if ((this._$committedValue as TemplateInstance)?._$template === template) {\n      debugLogEvent?.({\n        kind: 'template updating',\n        template,\n        instance: this._$committedValue as TemplateInstance,\n        parts: (this._$committedValue as TemplateInstance)._$parts,\n        options: this.options,\n        values,\n      });\n      (this._$committedValue as TemplateInstance)._update(values);\n    } else {\n      const instance = new TemplateInstance(template as Template, this);\n      const fragment = instance._clone(this.options);\n      debugLogEvent?.({\n        kind: 'template instantiated',\n        template,\n        instance,\n        parts: instance._$parts,\n        options: this.options,\n        fragment,\n        values,\n      });\n      instance._update(values);\n      debugLogEvent?.({\n        kind: 'template instantiated and updated',\n        template,\n        instance,\n        parts: instance._$parts,\n        options: this.options,\n        fragment,\n        values,\n      });\n      this._commitNode(fragment);\n      this._$committedValue = instance;\n    }\n  }\n\n  // Overridden via `litHtmlPolyfillSupport` to provide platform support.\n  /** @internal */\n  _$getTemplate(result: TemplateResult) {\n    let template = templateCache.get(result.strings);\n    if (template === undefined) {\n      templateCache.set(result.strings, (template = new Template(result)));\n    }\n    return template;\n  }\n\n  private _commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If value is an array, then the previous render was of an\n    // iterable and value will contain the ChildParts from the previous\n    // render. If value is not an array, clear this part and make a new\n    // array for ChildParts.\n    if (!isArray(this._$committedValue)) {\n      this._$committedValue = [];\n      this._$clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this._$committedValue as ChildPart[];\n    let partIndex = 0;\n    let itemPart: ChildPart | undefined;\n\n    for (const item of value) {\n      if (partIndex === itemParts.length) {\n        // If no existing part, create a new one\n        // TODO (justinfagnani): test perf impact of always creating two parts\n        // instead of sharing parts between nodes\n        // https://github.com/lit/lit/issues/1266\n        itemParts.push(\n          (itemPart = new ChildPart(\n            this._insert(createMarker()),\n            this._insert(createMarker()),\n            this,\n            this.options\n          ))\n        );\n      } else {\n        // Reuse an existing part\n        itemPart = itemParts[partIndex];\n      }\n      itemPart._$setValue(item);\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // itemParts always have end nodes\n      this._$clear(\n        itemPart && wrap(itemPart._$endNode!).nextSibling,\n        partIndex\n      );\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n    }\n  }\n\n  /**\n   * Removes the nodes contained within this Part from the DOM.\n   *\n   * @param start Start node to clear from, for clearing a subset of the part's\n   *     DOM (used when truncating iterables)\n   * @param from  When `start` is specified, the index within the iterable from\n   *     which ChildParts are being removed, used for disconnecting directives in\n   *     those Parts.\n   *\n   * @internal\n   */\n  _$clear(\n    start: ChildNode | null = wrap(this._$startNode).nextSibling,\n    from?: number\n  ) {\n    this._$notifyConnectionChanged?.(false, true, from);\n    while (start && start !== this._$endNode) {\n      const n = wrap(start!).nextSibling;\n      (wrap(start!) as Element).remove();\n      start = n;\n    }\n  }\n  /**\n   * Implementation of RootPart's `isConnected`. Note that this metod\n   * should only be called on `RootPart`s (the `ChildPart` returned from a\n   * top-level `render()` call). It has no effect on non-root ChildParts.\n   * @param isConnected Whether to set\n   * @internal\n   */\n  setConnected(isConnected: boolean) {\n    if (this._$parent === undefined) {\n      this.__isConnected = isConnected;\n      this._$notifyConnectionChanged?.(isConnected);\n    } else if (DEV_MODE) {\n      throw new Error(\n        'part.setConnected() may only be called on a ' +\n          'RootPart returned from render().'\n      );\n    }\n  }\n}\n\n/**\n * A top-level `ChildPart` returned from `render` that manages the connected\n * state of `AsyncDirective`s created throughout the tree below it.\n */\nexport interface RootPart extends ChildPart {\n  /**\n   * Sets the connection state for `AsyncDirective`s contained within this root\n   * ChildPart.\n   *\n   * lit-html does not automatically monitor the connectedness of DOM rendered;\n   * as such, it is the responsibility of the caller to `render` to ensure that\n   * `part.setConnected(false)` is called before the part object is potentially\n   * discarded, to ensure that `AsyncDirective`s have a chance to dispose of\n   * any resources being held. If a `RootPart` that was previously\n   * disconnected is subsequently re-connected (and its `AsyncDirective`s should\n   * re-connect), `setConnected(true)` should be called.\n   *\n   * @param isConnected Whether directives within this tree should be connected\n   * or not\n   */\n  setConnected(isConnected: boolean): void;\n}\n\nexport type {AttributePart};\nclass AttributePart implements Disconnectable {\n  readonly type = ATTRIBUTE_PART as\n    | typeof ATTRIBUTE_PART\n    | typeof PROPERTY_PART\n    | typeof BOOLEAN_ATTRIBUTE_PART\n    | typeof EVENT_PART;\n  readonly element: HTMLElement;\n  readonly name: string;\n  readonly options: RenderOptions | undefined;\n\n  /**\n   * If this attribute part represents an interpolation, this contains the\n   * static strings of the interpolation. For single-value, complete bindings,\n   * this is undefined.\n   */\n  readonly strings?: ReadonlyArray<string>;\n  /** @internal */\n  _$committedValue: unknown | Array<unknown> = nothing;\n  /** @internal */\n  __directives?: Array<Directive | undefined>;\n  /** @internal */\n  _$parent: Disconnectable;\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  protected _sanitizer: ValueSanitizer | undefined;\n\n  get tagName() {\n    return this.element.tagName;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  constructor(\n    element: HTMLElement,\n    name: string,\n    strings: ReadonlyArray<string>,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    this.element = element;\n    this.name = name;\n    this._$parent = parent;\n    this.options = options;\n    if (strings.length > 2 || strings[0] !== '' || strings[1] !== '') {\n      this._$committedValue = new Array(strings.length - 1).fill(new String());\n      this.strings = strings;\n    } else {\n      this._$committedValue = nothing;\n    }\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      this._sanitizer = undefined;\n    }\n  }\n\n  /**\n   * Sets the value of this part by resolving the value from possibly multiple\n   * values and static strings and committing it to the DOM.\n   * If this part is single-valued, `this._strings` will be undefined, and the\n   * method will be called with a single value argument. If this part is\n   * multi-value, `this._strings` will be defined, and the method is called\n   * with the value array of the part's owning TemplateInstance, and an offset\n   * into the value array from which the values should be read.\n   * This method is overloaded this way to eliminate short-lived array slices\n   * of the template instance values, and allow a fast-path for single-valued\n   * parts.\n   *\n   * @param value The part value, or an array of values for multi-valued parts\n   * @param valueIndex the index to start reading values from. `undefined` for\n   *   single-valued parts\n   * @param noCommit causes the part to not commit its value to the DOM. Used\n   *   in hydration to prime attribute parts with their first-rendered value,\n   *   but not set the attribute, and in SSR to no-op the DOM operation and\n   *   capture the value for serialization.\n   *\n   * @internal\n   */\n  _$setValue(\n    value: unknown | Array<unknown>,\n    directiveParent: DirectiveParent = this,\n    valueIndex?: number,\n    noCommit?: boolean\n  ) {\n    const strings = this.strings;\n\n    // Whether any of the values has changed, for dirty-checking\n    let change = false;\n\n    if (strings === undefined) {\n      // Single-value binding case\n      value = resolveDirective(this, value, directiveParent, 0);\n      change =\n        !isPrimitive(value) ||\n        (value !== this._$committedValue && value !== noChange);\n      if (change) {\n        this._$committedValue = value;\n      }\n    } else {\n      // Interpolation case\n      const values = value as Array<unknown>;\n      value = strings[0];\n\n      let i, v;\n      for (i = 0; i < strings.length - 1; i++) {\n        v = resolveDirective(this, values[valueIndex! + i], directiveParent, i);\n\n        if (v === noChange) {\n          // If the user-provided value is `noChange`, use the previous value\n          v = (this._$committedValue as Array<unknown>)[i];\n        }\n        change ||=\n          !isPrimitive(v) || v !== (this._$committedValue as Array<unknown>)[i];\n        if (v === nothing) {\n          value = nothing;\n        } else if (value !== nothing) {\n          value += (v ?? '') + strings[i + 1];\n        }\n        // We always record each value, even if one is `nothing`, for future\n        // change detection.\n        (this._$committedValue as Array<unknown>)[i] = v;\n      }\n    }\n    if (change && !noCommit) {\n      this._commitValue(value);\n    }\n  }\n\n  /** @internal */\n  _commitValue(value: unknown) {\n    if (value === nothing) {\n      (wrap(this.element) as Element).removeAttribute(this.name);\n    } else {\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        if (this._sanitizer === undefined) {\n          this._sanitizer = sanitizerFactoryInternal(\n            this.element,\n            this.name,\n            'attribute'\n          );\n        }\n        value = this._sanitizer(value ?? '');\n      }\n      debugLogEvent?.({\n        kind: 'commit attribute',\n        element: this.element,\n        name: this.name,\n        value,\n        options: this.options,\n      });\n      (wrap(this.element) as Element).setAttribute(\n        this.name,\n        (value ?? '') as string\n      );\n    }\n  }\n}\n\nexport type {PropertyPart};\nclass PropertyPart extends AttributePart {\n  override readonly type = PROPERTY_PART;\n\n  /** @internal */\n  override _commitValue(value: unknown) {\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      if (this._sanitizer === undefined) {\n        this._sanitizer = sanitizerFactoryInternal(\n          this.element,\n          this.name,\n          'property'\n        );\n      }\n      value = this._sanitizer(value);\n    }\n    debugLogEvent?.({\n      kind: 'commit property',\n      element: this.element,\n      name: this.name,\n      value,\n      options: this.options,\n    });\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.element as any)[this.name] = value === nothing ? undefined : value;\n  }\n}\n\n// Temporary workaround for https://crbug.com/993268\n// Currently, any attribute starting with \"on\" is considered to be a\n// TrustedScript source. Such boolean attributes must be set to the equivalent\n// trusted emptyScript value.\nconst emptyStringForBooleanAttribute = trustedTypes\n  ? (trustedTypes.emptyScript as unknown as '')\n  : '';\n\nexport type {BooleanAttributePart};\nclass BooleanAttributePart extends AttributePart {\n  override readonly type = BOOLEAN_ATTRIBUTE_PART;\n\n  /** @internal */\n  override _commitValue(value: unknown) {\n    debugLogEvent?.({\n      kind: 'commit boolean attribute',\n      element: this.element,\n      name: this.name,\n      value: !!(value && value !== nothing),\n      options: this.options,\n    });\n    if (value && value !== nothing) {\n      (wrap(this.element) as Element).setAttribute(\n        this.name,\n        emptyStringForBooleanAttribute\n      );\n    } else {\n      (wrap(this.element) as Element).removeAttribute(this.name);\n    }\n  }\n}\n\ntype EventListenerWithOptions = EventListenerOrEventListenerObject &\n  Partial<AddEventListenerOptions>;\n\n/**\n * An AttributePart that manages an event listener via add/removeEventListener.\n *\n * This part works by adding itself as the event listener on an element, then\n * delegating to the value passed to it. This reduces the number of calls to\n * add/removeEventListener if the listener changes frequently, such as when an\n * inline function is used as a listener.\n *\n * Because event options are passed when adding listeners, we must take case\n * to add and remove the part as a listener when the event options change.\n */\nexport type {EventPart};\nclass EventPart extends AttributePart {\n  override readonly type = EVENT_PART;\n\n  constructor(\n    element: HTMLElement,\n    name: string,\n    strings: ReadonlyArray<string>,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    super(element, name, strings, parent, options);\n\n    if (DEV_MODE && this.strings !== undefined) {\n      throw new Error(\n        `A \\`<${element.localName}>\\` has a \\`@${name}=...\\` listener with ` +\n          'invalid content. Event listeners in templates must have exactly ' +\n          'one expression and no surrounding text.'\n      );\n    }\n  }\n\n  // EventPart does not use the base _$setValue/_resolveValue implementation\n  // since the dirty checking is more complex\n  /** @internal */\n  override _$setValue(\n    newListener: unknown,\n    directiveParent: DirectiveParent = this\n  ) {\n    newListener =\n      resolveDirective(this, newListener, directiveParent, 0) ?? nothing;\n    if (newListener === noChange) {\n      return;\n    }\n    const oldListener = this._$committedValue;\n\n    // If the new value is nothing or any options change we have to remove the\n    // part as a listener.\n    const shouldRemoveListener =\n      (newListener === nothing && oldListener !== nothing) ||\n      (newListener as EventListenerWithOptions).capture !==\n        (oldListener as EventListenerWithOptions).capture ||\n      (newListener as EventListenerWithOptions).once !==\n        (oldListener as EventListenerWithOptions).once ||\n      (newListener as EventListenerWithOptions).passive !==\n        (oldListener as EventListenerWithOptions).passive;\n\n    // If the new value is not nothing and we removed the listener, we have\n    // to add the part as a listener.\n    const shouldAddListener =\n      newListener !== nothing &&\n      (oldListener === nothing || shouldRemoveListener);\n\n    debugLogEvent?.({\n      kind: 'commit event listener',\n      element: this.element,\n      name: this.name,\n      value: newListener,\n      options: this.options,\n      removeListener: shouldRemoveListener,\n      addListener: shouldAddListener,\n      oldListener,\n    });\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n        this.name,\n        this,\n        oldListener as EventListenerWithOptions\n      );\n    }\n    if (shouldAddListener) {\n      // Beware: IE11 and Chrome 41 don't like using the listener as the\n      // options object. Figure out how to deal w/ this in IE11 - maybe\n      // patch addEventListener?\n      this.element.addEventListener(\n        this.name,\n        this,\n        newListener as EventListenerWithOptions\n      );\n    }\n    this._$committedValue = newListener;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this._$committedValue === 'function') {\n      this._$committedValue.call(this.options?.host ?? this.element, event);\n    } else {\n      (this._$committedValue as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\nexport type {ElementPart};\nclass ElementPart implements Disconnectable {\n  readonly type = ELEMENT_PART;\n\n  /** @internal */\n  __directive?: Directive;\n\n  // This is to ensure that every Part has a _$committedValue\n  _$committedValue: undefined;\n\n  /** @internal */\n  _$parent!: Disconnectable;\n\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  options: RenderOptions | undefined;\n\n  constructor(\n    public element: Element,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    this._$parent = parent;\n    this.options = options;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  _$setValue(value: unknown): void {\n    debugLogEvent?.({\n      kind: 'commit to element binding',\n      element: this.element,\n      value,\n      options: this.options,\n    });\n    resolveDirective(this, value);\n  }\n}\n\n/**\n * END USERS SHOULD NOT RELY ON THIS OBJECT.\n *\n * Private exports for use by other Lit packages, not intended for use by\n * external users.\n *\n * We currently do not make a mangled rollup build of the lit-ssr code. In order\n * to keep a number of (otherwise private) top-level exports  mangled in the\n * client side code, we export a _$LH object containing those members (or\n * helper methods for accessing private fields of those members), and then\n * re-export them for use in lit-ssr. This keeps lit-ssr agnostic to whether the\n * client-side code is being used in `dev` mode or `prod` mode.\n *\n * This has a unique name, to disambiguate it from private exports in\n * lit-element, which re-exports all of lit-html.\n *\n * @private\n */\nexport const _$LH = {\n  // Used in lit-ssr\n  _boundAttributeSuffix: boundAttributeSuffix,\n  _marker: marker,\n  _markerMatch: markerMatch,\n  _HTML_RESULT: HTML_RESULT,\n  _getTemplateHtml: getTemplateHtml,\n  // Used in tests and private-ssr-support\n  _TemplateInstance: TemplateInstance,\n  _isIterable: isIterable,\n  _resolveDirective: resolveDirective,\n  _ChildPart: ChildPart,\n  _AttributePart: AttributePart,\n  _BooleanAttributePart: BooleanAttributePart,\n  _EventPart: EventPart,\n  _PropertyPart: PropertyPart,\n  _ElementPart: ElementPart,\n};\n\n// Apply polyfills if available\nconst polyfillSupport = DEV_MODE\n  ? global.litHtmlPolyfillSupportDevMode\n  : global.litHtmlPolyfillSupport;\npolyfillSupport?.(Template, ChildPart);\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n(global.litHtmlVersions ??= []).push('2.7.5');\nif (DEV_MODE && global.litHtmlVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. ` +\n      `Loading multiple versions is not recommended.`\n  );\n}\n\n/**\n * Renders a value, usually a lit-html TemplateResult, to the container.\n *\n * This example renders the text \"Hello, Zoe!\" inside a paragraph tag, appending\n * it to the container `document.body`.\n *\n * ```js\n * import {html, render} from 'lit';\n *\n * const name = \"Zoe\";\n * render(html`<p>Hello, ${name}!</p>`, document.body);\n * ```\n *\n * @param value Any [renderable\n *   value](https://lit.dev/docs/templates/expressions/#child-expressions),\n *   typically a {@linkcode TemplateResult} created by evaluating a template tag\n *   like {@linkcode html} or {@linkcode svg}.\n * @param container A DOM container to render to. The first render will append\n *   the rendered value to the container, and subsequent renders will\n *   efficiently update the rendered value if the same result type was\n *   previously rendered there.\n * @param options See {@linkcode RenderOptions} for options documentation.\n * @see\n * {@link https://lit.dev/docs/libraries/standalone-templates/#rendering-lit-html-templates| Rendering Lit HTML Templates}\n */\nexport const render = (\n  value: unknown,\n  container: HTMLElement | DocumentFragment,\n  options?: RenderOptions\n): RootPart => {\n  if (DEV_MODE && container == null) {\n    // Give a clearer error message than\n    //     Uncaught TypeError: Cannot read properties of null (reading\n    //     '_$litPart$')\n    // which reads like an internal Lit error.\n    throw new TypeError(`The container to render into may not be ${container}`);\n  }\n  const renderId = DEV_MODE ? debugLogRenderId++ : 0;\n  const partOwnerNode = options?.renderBefore ?? container;\n  // This property needs to remain unminified.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let part: ChildPart = (partOwnerNode as any)['_$litPart$'];\n  debugLogEvent?.({\n    kind: 'begin render',\n    id: renderId,\n    value,\n    container,\n    options,\n    part,\n  });\n  if (part === undefined) {\n    const endNode = options?.renderBefore ?? null;\n    // This property needs to remain unminified.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (partOwnerNode as any)['_$litPart$'] = part = new ChildPart(\n      container.insertBefore(createMarker(), endNode),\n      endNode,\n      undefined,\n      options ?? {}\n    );\n  }\n  part._$setValue(value);\n  debugLogEvent?.({\n    kind: 'end render',\n    id: renderId,\n    value,\n    container,\n    options,\n    part,\n  });\n  return part as RootPart;\n};\n\nif (ENABLE_EXTRA_SECURITY_HOOKS) {\n  render.setSanitizer = setSanitizer;\n  render.createSanitizer = createSanitizer;\n  if (DEV_MODE) {\n    render._testOnlyClearSanitizerFactoryDoNotCallOrElse =\n      _testOnlyClearSanitizerFactoryDoNotCallOrElse;\n  }\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * The main LitElement module, which defines the {@linkcode LitElement} base\n * class and related APIs.\n *\n *  LitElement components can define a template and a set of observed\n * properties. Changing an observed property triggers a re-render of the\n * element.\n *\n *  Import {@linkcode LitElement} and {@linkcode html} from this module to\n * create a component:\n *\n *  ```js\n * import {LitElement, html} from 'lit-element';\n *\n * class MyElement extends LitElement {\n *\n *   // Declare observed properties\n *   static get properties() {\n *     return {\n *       adjective: {}\n *     }\n *   }\n *\n *   constructor() {\n *     this.adjective = 'awesome';\n *   }\n *\n *   // Define the element's template\n *   render() {\n *     return html`<p>your ${adjective} template here</p>`;\n *   }\n * }\n *\n * customElements.define('my-element', MyElement);\n * ```\n *\n * `LitElement` extends {@linkcode ReactiveElement} and adds lit-html\n * templating. The `ReactiveElement` class is provided for users that want to\n * build their own custom element base classes that don't use lit-html.\n *\n * @packageDocumentation\n */\nimport {PropertyValues, ReactiveElement} from '@lit/reactive-element';\nimport {render, RenderOptions, noChange, RootPart} from 'lit-html';\nexport * from '@lit/reactive-element';\nexport * from 'lit-html';\n\nimport {LitUnstable} from 'lit-html';\nimport {ReactiveUnstable} from '@lit/reactive-element';\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Unstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry =\n      | LitUnstable.DebugLog.Entry\n      | ReactiveUnstable.DebugLog.Entry;\n  }\n}\n\n// For backwards compatibility export ReactiveElement as UpdatingElement. Note,\n// IE transpilation requires exporting like this.\nexport const UpdatingElement = ReactiveElement;\n\nconst DEV_MODE = true;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> =\n    (globalThis.litIssuedWarnings ??= new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += ` See https://lit.dev/msg/${code} for more information.`;\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n}\n\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the {@linkcode LitElement.properties properties} property or the\n * {@linkcode property} decorator.\n */\nexport class LitElement extends ReactiveElement {\n  /**\n   * Ensure this class is marked as `finalized` as an optimization ensuring\n   * it will not needlessly try to `finalize`.\n   *\n   * Note this property name is a string to prevent breaking Closure JS Compiler\n   * optimizations. See @lit/reactive-element for more information.\n   */\n  protected static override ['finalized'] = true;\n\n  // This property needs to remain unminified.\n  static ['_$litElement$'] = true;\n\n  /**\n   * @category rendering\n   */\n  readonly renderOptions: RenderOptions = {host: this};\n\n  private __childPart: RootPart | undefined = undefined;\n\n  /**\n   * @category rendering\n   */\n  protected override createRenderRoot() {\n    const renderRoot = super.createRenderRoot();\n    // When adoptedStyleSheets are shimmed, they are inserted into the\n    // shadowRoot by createRenderRoot. Adjust the renderBefore node so that\n    // any styles in Lit content render before adoptedStyleSheets. This is\n    // important so that adoptedStyleSheets have precedence over styles in\n    // the shadowRoot.\n    this.renderOptions.renderBefore ??= renderRoot!.firstChild as ChildNode;\n    return renderRoot;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * @param changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected override update(changedProperties: PropertyValues) {\n    // Setting properties in `render` should not trigger an update. Since\n    // updates are allowed after super.update, it's important to call `render`\n    // before that.\n    const value = this.render();\n    if (!this.hasUpdated) {\n      this.renderOptions.isConnected = this.isConnected;\n    }\n    super.update(changedProperties);\n    this.__childPart = render(value, this.renderRoot, this.renderOptions);\n  }\n\n  /**\n   * Invoked when the component is added to the document's DOM.\n   *\n   * In `connectedCallback()` you should setup tasks that should only occur when\n   * the element is connected to the document. The most common of these is\n   * adding event listeners to nodes external to the element, like a keydown\n   * event handler added to the window.\n   *\n   * ```ts\n   * connectedCallback() {\n   *   super.connectedCallback();\n   *   addEventListener('keydown', this._handleKeydown);\n   * }\n   * ```\n   *\n   * Typically, anything done in `connectedCallback()` should be undone when the\n   * element is disconnected, in `disconnectedCallback()`.\n   *\n   * @category lifecycle\n   */\n  override connectedCallback() {\n    super.connectedCallback();\n    this.__childPart?.setConnected(true);\n  }\n\n  /**\n   * Invoked when the component is removed from the document's DOM.\n   *\n   * This callback is the main signal to the element that it may no longer be\n   * used. `disconnectedCallback()` should ensure that nothing is holding a\n   * reference to the element (such as event listeners added to nodes external\n   * to the element), so that it is free to be garbage collected.\n   *\n   * ```ts\n   * disconnectedCallback() {\n   *   super.disconnectedCallback();\n   *   window.removeEventListener('keydown', this._handleKeydown);\n   * }\n   * ```\n   *\n   * An element may be re-connected after being disconnected.\n   *\n   * @category lifecycle\n   */\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.__childPart?.setConnected(false);\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method may return\n   * any value renderable by lit-html's `ChildPart` - typically a\n   * `TemplateResult`. Setting properties inside this method will *not* trigger\n   * the element to update.\n   * @category rendering\n   */\n  protected render(): unknown {\n    return noChange;\n  }\n}\n\n// Install hydration if available\nglobalThis.litElementHydrateSupport?.({LitElement});\n\n// Apply polyfills if available\nconst polyfillSupport = DEV_MODE\n  ? globalThis.litElementPolyfillSupportDevMode\n  : globalThis.litElementPolyfillSupport;\npolyfillSupport?.({LitElement});\n\n// DEV mode warnings\nif (DEV_MODE) {\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  // Note, for compatibility with closure compilation, this access\n  // needs to be as a string property index.\n  (LitElement as any)['finalize'] = function (this: typeof LitElement) {\n    const finalized = (ReactiveElement as any).finalize.call(this);\n    if (!finalized) {\n      return false;\n    }\n    const warnRemovedOrRenamed = (obj: any, name: string, renamed = false) => {\n      if (obj.hasOwnProperty(name)) {\n        const ctorName = (typeof obj === 'function' ? obj : obj.constructor)\n          .name;\n        issueWarning(\n          renamed ? 'renamed-api' : 'removed-api',\n          `\\`${name}\\` is implemented on class ${ctorName}. It ` +\n            `has been ${renamed ? 'renamed' : 'removed'} ` +\n            `in this version of LitElement.`\n        );\n      }\n    };\n    warnRemovedOrRenamed(this, 'render');\n    warnRemovedOrRenamed(this, 'getStyles', true);\n    warnRemovedOrRenamed((this as typeof LitElement).prototype, 'adoptStyles');\n    return true;\n  };\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n}\n\n/**\n * END USERS SHOULD NOT RELY ON THIS OBJECT.\n *\n * Private exports for use by other Lit packages, not intended for use by\n * external users.\n *\n * We currently do not make a mangled rollup build of the lit-ssr code. In order\n * to keep a number of (otherwise private) top-level exports  mangled in the\n * client side code, we export a _$LE object containing those members (or\n * helper methods for accessing private fields of those members), and then\n * re-export them for use in lit-ssr. This keeps lit-ssr agnostic to whether the\n * client-side code is being used in `dev` mode or `prod` mode.\n *\n * This has a unique name, to disambiguate it from private exports in\n * lit-html, since this module re-exports all of lit-html.\n *\n * @private\n */\nexport const _$LE = {\n  _$attributeToProperty: (\n    el: LitElement,\n    name: string,\n    value: string | null\n  ) => {\n    // eslint-disable-next-line\n    (el as any)._$attributeToProperty(name, value);\n  },\n  // eslint-disable-next-line\n  _$changedProperties: (el: LitElement) => (el as any)._$changedProperties,\n};\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n(globalThis.litElementVersions ??= []).push('3.3.2');\nif (DEV_MODE && globalThis.litElementVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. Loading multiple versions ` +\n      `is not recommended.`\n  );\n}\n", "import { html } from 'lit';\n\n// database icon\n\nexport const DatabaseSearchIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11 3.75C6.99594 3.75 3.75 6.99594 3.75 11C3.75 15.0041 6.99594 18.25 11 18.25C13.0026 18.25 14.8156 17.4381 16.1276 16.1254L16.1287 16.1243C17.4393 14.8125 18.25 13.0008 18.25 11C18.25 6.99594 15.0041 3.75 11 3.75ZM17.6965 16.6324C18.9779 15.1104 19.75 13.1453 19.75 11C19.75 6.16751 15.8325 2.25 11 2.25C6.16751 2.25 2.25 6.16751 2.25 11C2.25 15.8325 6.16751 19.75 11 19.75C13.1471 19.75 15.1136 18.9767 16.6361 17.6933L20.4694 21.5301C20.7622 21.8231 21.2371 21.8233 21.5301 21.5306C21.8231 21.2378 21.8233 20.7629 21.5306 20.4699L17.6965 16.6324Z\"\n  />\n</svg>`;\n\nexport const DatabasePen = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M14 6.20314L5.5 15L4 20L9 18.5L17.7969 10M14 6.20314L15.3595 4.79619C16.4211 3.73461 18.1422 3.7346 19.2038 4.79619C20.2654 5.85777 20.2654 7.57894 19.2038 8.64052L17.7969 10M14 6.20314L17.7969 10\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseDelete = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseDuplicate = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M11.25 9C11.25 9.41421 11.5858 9.75 12 9.75H13.1893L7.46967 15.4697C7.17678 15.7626 7.17678 16.2374 7.46967 16.5303C7.76256 16.8232 8.23744 16.8232 8.53033 16.5303L14.25 10.8107V12C14.25 12.4142 14.5858 12.75 15 12.75C15.4142 12.75 15.75 12.4142 15.75 12V9.1C15.75 9.08264 15.7495 9.0654 15.7485 9.04829C15.7618 8.84059 15.6891 8.62841 15.5303 8.46967C15.3716 8.31093 15.1594 8.23823 14.9517 8.25155C14.9346 8.25052 14.9174 8.25 14.9 8.25H12C11.5858 8.25 11.25 8.58579 11.25 9Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.8304 3.25H11.1696C10.6354 3.24999 10.1896 3.24998 9.82533 3.27974C9.44545 3.31078 9.08879 3.37789 8.75153 3.54973C8.23408 3.81338 7.81339 4.23408 7.54973 4.75153C7.37789 5.08879 7.31078 5.44545 7.27974 5.82533C7.24998 6.18956 7.24999 6.63541 7.25 7.16956L7.25 7.25L7.16957 7.25C6.63542 7.24999 6.18956 7.24998 5.82533 7.27974C5.44545 7.31078 5.08879 7.37789 4.75153 7.54973C4.23408 7.81339 3.81338 8.23408 3.54973 8.75153C3.37789 9.08879 3.31078 9.44545 3.27974 9.82533C3.24998 10.1896 3.24999 10.6354 3.25 11.1696V16.8304C3.24999 17.3646 3.24998 17.8104 3.27974 18.1747C3.31078 18.5546 3.37789 18.9112 3.54973 19.2485C3.81338 19.7659 4.23408 20.1866 4.75153 20.4503C5.08879 20.6221 5.44545 20.6892 5.82533 20.7203C6.18956 20.75 6.6354 20.75 7.16955 20.75H12.8305C13.3646 20.75 13.8104 20.75 14.1747 20.7203C14.5546 20.6892 14.9112 20.6221 15.2485 20.4503C15.7659 20.1866 16.1866 19.7659 16.4503 19.2485C16.6221 18.9112 16.6892 18.5546 16.7203 18.1747C16.75 17.8105 16.75 17.3646 16.75 16.8305V16.75H16.8305C17.3646 16.75 17.8105 16.75 18.1747 16.7203C18.5546 16.6892 18.9112 16.6221 19.2485 16.4503C19.7659 16.1866 20.1866 15.7659 20.4503 15.2485C20.6221 14.9112 20.6892 14.5546 20.7203 14.1747C20.75 13.8104 20.75 13.3646 20.75 12.8305V7.16955C20.75 6.6354 20.75 6.18956 20.7203 5.82533C20.6892 5.44545 20.6221 5.08879 20.4503 4.75153C20.1866 4.23408 19.7659 3.81338 19.2485 3.54973C18.9112 3.37789 18.5546 3.31078 18.1747 3.27974C17.8104 3.24998 17.3646 3.24999 16.8304 3.25ZM7.25 11V8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H13C12.5858 16.75 12.25 16.4142 12.25 16C12.25 15.5858 12.5858 15.25 13 15.25H16.8C17.3724 15.25 17.7566 15.2494 18.0525 15.2252C18.3396 15.2018 18.4769 15.1599 18.5675 15.1138C18.8027 14.9939 18.9939 14.8027 19.1138 14.5675C19.1599 14.4769 19.2018 14.3396 19.2252 14.0525C19.2494 13.7566 19.25 13.3724 19.25 12.8V7.2C19.25 6.62757 19.2494 6.24336 19.2252 5.94748C19.2018 5.66036 19.1599 5.52307 19.1138 5.43251C18.9939 5.19731 18.8027 5.00608 18.5675 4.88624C18.4769 4.8401 18.3396 4.79822 18.0525 4.77476C17.7566 4.75058 17.3724 4.75 16.8 4.75H11.2C10.6276 4.75 10.2434 4.75058 9.94748 4.77476C9.66036 4.79822 9.52307 4.8401 9.43251 4.88624C9.19731 5.00608 9.00608 5.19731 8.88624 5.43251C8.8401 5.52307 8.79822 5.66036 8.77476 5.94748C8.75058 6.24336 8.75 6.62757 8.75 7.2V11C8.75 11.4142 8.41422 11.75 8 11.75C7.58579 11.75 7.25 11.4142 7.25 11Z\"\n  />\n</svg>`;\n\nexport const DatabaseInsertLeft = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12.25 6C12.25 4.48122 13.4812 3.25 15 3.25H18C19.5188 3.25 20.75 4.48122 20.75 6V18C20.75 19.5188 19.5188 20.75 18 20.75H15C13.4812 20.75 12.25 19.5188 12.25 18V6ZM15 4.75C14.3096 4.75 13.75 5.30964 13.75 6V18C13.75 18.6904 14.3096 19.25 15 19.25H18C18.6904 19.25 19.25 18.6904 19.25 18V6C19.25 5.30964 18.6904 4.75 18 4.75H15Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L10 11.25C10.4142 11.25 10.75 11.5858 10.75 12C10.75 12.4142 10.4142 12.75 10 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7 15.75C6.58579 15.75 6.25 15.4142 6.25 15L6.25 9C6.25 8.58579 6.58579 8.25 7 8.25C7.41421 8.25 7.75 8.58579 7.75 9L7.75 15C7.75 15.4142 7.41421 15.75 7 15.75Z\"\n  />\n</svg>`;\n\nexport const DatabaseInsertRight = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11.75 6C11.75 4.48122 10.5188 3.25 9 3.25H6C4.48122 3.25 3.25 4.48122 3.25 6V18C3.25 19.5188 4.48122 20.75 6 20.75H9C10.5188 20.75 11.75 19.5188 11.75 18V6ZM9 4.75C9.69036 4.75 10.25 5.30964 10.25 6V18C10.25 18.6904 9.69036 19.25 9 19.25H6C5.30964 19.25 4.75 18.6904 4.75 18V6C4.75 5.30964 5.30964 4.75 6 4.75H9Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.75 12C20.75 11.5858 20.4142 11.25 20 11.25L14 11.25C13.5858 11.25 13.25 11.5858 13.25 12C13.25 12.4142 13.5858 12.75 14 12.75L20 12.75C20.4142 12.75 20.75 12.4142 20.75 12Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M17 15.75C17.4142 15.75 17.75 15.4142 17.75 15V9C17.75 8.58579 17.4142 8.25 17 8.25C16.5858 8.25 16.25 8.58579 16.25 9V15C16.25 15.4142 16.5858 15.75 17 15.75Z\"\n  />\n</svg>`;\n\nexport const DatabaseMoveLeft = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M4 4V20M8 12H20M8 12L12 8M8 12L12 16\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseMoveRight = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M20 4V20M4 12H16M16 12L12 8M16 12L12 16\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseMultiSelect = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M4 5L6.42929 7.42929C6.46834 7.46834 6.53166 7.46834 6.57071 7.42929L9 5\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M4 11L6.42929 13.4293C6.46834 13.4683 6.53166 13.4683 6.57071 13.4293L9 11\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M4 17L6.42929 19.4293C6.46834 19.4683 6.53166 19.4683 6.57071 19.4293L9 17\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M12 6L20 6\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M12 12L20 12\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M12 18L20 18\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseNumber = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M18.5 4L12.5 20\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M12 4L6 20\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M20 8.5H5.5\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M19 15L4 15\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</svg>`;\n\nexport const DatabaseSelect = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75ZM2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.46967 10.4697C7.76256 10.1768 8.23744 10.1768 8.53033 10.4697L12 13.9393L15.4697 10.4697C15.7626 10.1768 16.2374 10.1768 16.5303 10.4697C16.8232 10.7626 16.8232 11.2374 16.5303 11.5303L12.601 15.4596C12.2691 15.7916 11.7309 15.7916 11.399 15.4596L7.46967 11.5303C7.17678 11.2374 7.17678 10.7626 7.46967 10.4697Z\"\n  />\n</svg>`;\n\nexport const DatabaseProgress = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M15 4.25C15.4142 4.25 15.75 4.58579 15.75 5V6.25H18C20.0711 6.25 21.75 7.92893 21.75 10V14C21.75 16.0711 20.0711 17.75 18 17.75H15.75V19C15.75 19.4142 15.4142 19.75 15 19.75C14.5858 19.75 14.25 19.4142 14.25 19V17.75H6C3.92893 17.75 2.25 16.0711 2.25 14V10C2.25 7.92893 3.92893 6.25 6 6.25H14.25V5C14.25 4.58579 14.5858 4.25 15 4.25ZM14.25 7.75H6C4.75736 7.75 3.75 8.75736 3.75 10V14C3.75 15.2426 4.75736 16.25 6 16.25H14.25V7.75ZM15.75 16.25H18C19.2426 16.25 20.25 15.2426 20.25 14V10C20.25 8.75736 19.2426 7.75 18 7.75H15.75V16.25ZM6 9.25C6.41421 9.25 6.75 9.58579 6.75 10V14C6.75 14.4142 6.41421 14.75 6 14.75C5.58579 14.75 5.25 14.4142 5.25 14L5.25 10C5.25 9.58579 5.58579 9.25 6 9.25ZM9 9.25C9.41421 9.25 9.75 9.58579 9.75 10L9.75 14C9.75 14.4142 9.41421 14.75 9 14.75C8.58579 14.75 8.25 14.4142 8.25 14L8.25 10C8.25 9.58579 8.58579 9.25 9 9.25ZM12 9.25C12.4142 9.25 12.75 9.58579 12.75 10V14C12.75 14.4142 12.4142 14.75 12 14.75C11.5858 14.75 11.25 14.4142 11.25 14V10C11.25 9.58579 11.5858 9.25 12 9.25Z\"\n  />\n</svg>`;\n\nexport const DatabaseSearchClose = html`<svg\n  width=\"16\"\n  height=\"16\"\n  viewBox=\"0 0 16 16\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"none\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M4.22872 4.22878C4.42398 4.03352 4.74057 4.03352 4.93583 4.22878L7.99996 7.29291L11.0641 4.22878C11.2593 4.03352 11.5759 4.03352 11.7712 4.22878C11.9665 4.42405 11.9665 4.74063 11.7712 4.93589L8.70707 8.00002L11.7712 11.0641C11.9665 11.2594 11.9665 11.576 11.7712 11.7713C11.5759 11.9665 11.2593 11.9665 11.0641 11.7713L7.99996 8.70713L4.93583 11.7713C4.74057 11.9665 4.42398 11.9665 4.22872 11.7713C4.03346 11.576 4.03346 11.2594 4.22872 11.0641L7.29285 8.00002L4.22872 4.93589C4.03346 4.74063 4.03346 4.42405 4.22872 4.22878Z\"\n  />\n</svg>`;\n\nexport const DatabaseDone = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.5322 5.97152C20.824 6.26543 20.8224 6.7403 20.5285 7.03217L9.45156 18.0322C9.15909 18.3226 8.68706 18.3226 8.3946 18.0322L3.47152 13.1433C3.17761 12.8514 3.17595 12.3765 3.46783 12.0826C3.7597 11.7887 4.23457 11.7871 4.52848 12.0789L8.92308 16.443L19.4715 5.96783C19.7654 5.67595 20.2403 5.67761 20.5322 5.97152Z\"\n  />\n</svg>`;\n\nconst addColumnStyle = `\n  width: 12px;\n  height: 12px;\n  fill: var(--affine-text-primary-color);\n`;\nexport const DatabaseAddColumn = html`<svg\n  viewBox=\"0 0 16 16\"\n  style=${addColumnStyle}\n>\n  <path\n    d=\"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z\"\n  ></path>\n</svg>`;\n\nexport const DatabaseDragIcon = html`<svg\n  width=\"10\"\n  height=\"14\"\n  viewBox=\"0 0 10 14\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <rect width=\"10\" height=\"14\" rx=\"2\" />\n  <rect width=\"10\" height=\"14\" rx=\"2\" fill-opacity=\"0.08\" />\n  <g clip-path=\"url(#clip0_179_9218)\">\n    <circle cx=\"3\" cy=\"3\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n    <circle cx=\"3\" cy=\"6.79163\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n    <circle cx=\"3\" cy=\"10.5833\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n    <circle cx=\"7\" cy=\"3\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n    <circle cx=\"7\" cy=\"6.79163\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n    <circle cx=\"7\" cy=\"10.5833\" r=\"1\" fill=\"var(--affine-icon-color)\" />\n  </g>\n  <defs>\n    <clipPath id=\"clip0_179_9218\">\n      <rect width=\"6\" height=\"10\" transform=\"translate(2 2)\" />\n    </clipPath>\n  </defs>\n</svg>`;\n", "import { html, svg } from 'lit';\n\n// Edgeless toolbar\n\nexport const SelectIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M10.3383 3.88231L18.071 8.69778C19.0571 9.31182 19.8404 9.79964 20.4017 10.2216C20.9493 10.6333 21.4318 11.0842 21.62 11.6695C21.8868 12.4988 21.7381 13.4034 21.2188 14.1027C20.852 14.5967 20.2493 14.8668 19.599 15.0782C18.9323 15.2949 18.0344 15.5017 16.9044 15.7619L14.4307 16.3314C14.0188 16.4263 13.91 16.4546 13.8157 16.4966C13.7187 16.5398 13.6281 16.5952 13.546 16.6612C13.4669 16.7248 13.3935 16.807 13.1235 17.1285L11.9305 18.5487C11.162 19.4637 10.552 20.1898 10.0419 20.6983C9.54488 21.1937 9.0177 21.6165 8.39807 21.7155C7.52714 21.8546 6.63964 21.5686 6.0146 20.9464C5.56965 20.5035 5.39026 19.852 5.27806 19.16C5.1629 18.4498 5.09457 17.5048 5.00849 16.3143L4.36527 7.41939C4.2957 6.4575 4.23967 5.68281 4.25165 5.08075C4.26359 4.48099 4.34126 3.90703 4.65756 3.44031C5.11363 2.76734 5.84836 2.33594 6.65832 2.25865C7.21739 2.2053 7.76104 2.406 8.30191 2.67862C8.84485 2.95229 9.51023 3.36666 10.3383 3.88231ZM7.62675 4.01809C7.14246 3.77397 6.9194 3.74055 6.80081 3.75187C6.43097 3.78716 6.10155 3.98334 5.89928 4.28182C5.83742 4.37309 5.762 4.57571 5.75136 5.11059C5.74092 5.635 5.79114 6.34017 5.8642 7.35039L6.50172 16.1665C6.59131 17.4054 6.65553 18.2835 6.75873 18.92C6.86617 19.5826 6.99326 19.8041 7.07279 19.8833C7.35743 20.1666 7.76348 20.2978 8.16142 20.2342C8.27334 20.2164 8.507 20.1103 8.98299 19.6359C9.44028 19.1801 10.0077 18.5057 10.8074 17.5536L11.975 16.1637C11.9876 16.1487 12 16.1338 12.0123 16.1192C12.2275 15.8628 12.3982 15.6594 12.606 15.4923C12.7891 15.345 12.9907 15.222 13.2055 15.1264C13.4489 15.018 13.7084 14.9583 14.0374 14.8828C14.0561 14.8785 14.075 14.8741 14.0941 14.8697L16.5295 14.3089C17.7063 14.038 18.5392 13.8455 19.1353 13.6517C19.7553 13.4501 19.9497 13.2958 20.0146 13.2084C20.2446 12.8987 20.3109 12.4982 20.1921 12.1288C20.1582 12.0234 20.0225 11.8131 19.5003 11.4206C18.9982 11.0431 18.2715 10.5897 17.2448 9.95034L9.57801 5.17595C8.70973 4.63525 8.10185 4.25756 7.62675 4.01809Z\"\n  />\n</svg>`;\n\nexport const ShapeIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 3.25C12.2691 3.25 12.5177 3.39421 12.6512 3.6279L16.2067 9.85012C16.3394 10.0822 16.3384 10.3674 16.2042 10.5987C16.07 10.8299 15.8229 10.9722 15.5556 10.9722H8.44444C8.17709 10.9722 7.92995 10.8299 7.79576 10.5987C7.66157 10.3674 7.66062 10.0822 7.79326 9.85012L11.3488 3.6279C11.4823 3.39421 11.7309 3.25 12 3.25ZM9.73683 9.47222H14.2632L12 5.51167L9.73683 9.47222ZM7.11111 14.5278C5.80711 14.5278 4.75 15.5849 4.75 16.8889C4.75 18.1929 5.80711 19.25 7.11111 19.25C8.41512 19.25 9.47222 18.1929 9.47222 16.8889C9.47222 15.5849 8.41512 14.5278 7.11111 14.5278ZM3.25 16.8889C3.25 14.7565 4.97868 13.0278 7.11111 13.0278C9.24354 13.0278 10.9722 14.7565 10.9722 16.8889C10.9722 19.0213 9.24354 20.75 7.11111 20.75C4.97868 20.75 3.25 19.0213 3.25 16.8889ZM13.0278 13.7778C13.0278 13.3636 13.3636 13.0278 13.7778 13.0278H20C20.4142 13.0278 20.75 13.3636 20.75 13.7778V20C20.75 20.4142 20.4142 20.75 20 20.75H13.7778C13.3636 20.75 13.0278 20.4142 13.0278 20V13.7778ZM14.5278 14.5278V19.25H19.25V14.5278H14.5278Z\"\n  />\n</svg>`;\n\nconst ImageSVG = svg`<path\nfill-rule=\"evenodd\"\nclip-rule=\"evenodd\"\nd=\"M15 6.25C13.4812 6.25 12.25 7.48122 12.25 9C12.25 10.5188 13.4812 11.75 15 11.75C16.5188 11.75 17.75 10.5188 17.75 9C17.75 7.48122 16.5188 6.25 15 6.25ZM13.75 9C13.75 8.30964 14.3096 7.75 15 7.75C15.6904 7.75 16.25 8.30964 16.25 9C16.25 9.69036 15.6904 10.25 15 10.25C14.3096 10.25 13.75 9.69036 13.75 9Z\"\n/>\n<path\nfill-rule=\"evenodd\"\nclip-rule=\"evenodd\"\nd=\"M5 4.25C3.48122 4.25 2.25 5.48122 2.25 7V17C2.25 18.5188 3.48122 19.75 5 19.75H16.9863C16.9956 19.7502 17.0049 19.7502 17.0142 19.75H19C20.5188 19.75 21.75 18.5188 21.75 17V7C21.75 5.48122 20.5188 4.25 19 4.25H5ZM17.3356 18.25H19C19.4585 18.25 19.8593 18.0031 20.0769 17.6351L18.6231 16.1718C18.2208 15.7541 17.9502 15.4738 17.7245 15.275C17.5054 15.0819 17.3784 15.0117 17.2815 14.9786C17.0293 14.8926 16.7562 14.8895 16.5021 14.9697C16.4045 15.0005 16.276 15.0678 16.0524 15.2558C15.8542 15.4224 15.6213 15.6486 15.2976 15.9689L17.3356 18.25ZM20.25 15.681V7C20.25 6.30964 19.6904 5.75 19 5.75H5C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.1543 3.77795 17.302 3.82907 17.4385L7.50733 13.8054L7.52247 13.7897C7.89807 13.4008 8.21139 13.0763 8.48886 12.8325C8.7781 12.5783 9.07737 12.3666 9.43913 12.2436C9.99371 12.0551 10.594 12.0486 11.1525 12.2251C11.5168 12.3402 11.8206 12.5454 12.1153 12.7932C12.398 13.031 12.7182 13.3486 13.1022 13.7293L14.2639 14.8814C14.5765 14.5722 14.8455 14.3108 15.087 14.1077C15.382 13.8597 15.6861 13.6542 16.0508 13.5392C16.6099 13.3628 17.2107 13.3697 17.7656 13.5589C18.1276 13.6823 18.4269 13.8947 18.7161 14.1495C18.9936 14.3939 19.3068 14.7192 19.6824 15.1091L19.6996 15.127L20.25 15.681ZM5.142 18.25H15.3241L13.7197 16.4542L12.0677 14.816C11.6564 14.4081 11.3797 14.1346 11.1498 13.9412C10.9266 13.7535 10.7982 13.6862 10.7006 13.6554C10.4468 13.5752 10.1739 13.5781 9.92184 13.6638C9.825 13.6967 9.6981 13.7667 9.47895 13.9593C9.25327 14.1576 8.98257 14.4371 8.58019 14.8537L8.56773 14.8663L5.142 18.25Z\"\n/>`;\n\nexport const ImageIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  ${ImageSVG}\n</svg>`;\n\nexport const ImageIcon20 = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  ${ImageSVG}\n</svg>`;\n\nexport const EmbedIcon = html`\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_3334_82005)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M5.144 3.54166H14.856C15.3035 3.54166 15.6722 3.54165 15.9726 3.56312C16.2832 3.58533 16.5712 3.63292 16.8445 3.75478C17.2675 3.94339 17.6272 4.25139 17.8584 4.64842C18.0131 4.91401 18.0726 5.19494 18.0996 5.48406C18.125 5.75652 18.125 6.08757 18.125 6.47237V13.5276C18.125 13.9124 18.125 14.2435 18.0996 14.5159C18.0726 14.8051 18.0131 15.086 17.8584 15.3516C17.6272 15.7486 17.2675 16.0566 16.8445 16.2452C16.5712 16.3671 16.2832 16.4147 15.9726 16.4369C15.6722 16.4583 15.3034 16.4583 14.856 16.4583H5.144C4.69656 16.4583 4.32777 16.4583 4.02744 16.4369C3.71685 16.4147 3.42883 16.3671 3.15552 16.2452C2.73246 16.0566 2.37275 15.7486 2.14156 15.3516C1.9869 15.086 1.92741 14.8051 1.90042 14.5159C1.87497 14.2435 1.87499 13.9124 1.875 13.5276V6.4724C1.87499 6.08759 1.87497 5.75652 1.90042 5.48406C1.92741 5.19494 1.9869 4.91401 2.14156 4.64842C2.37275 4.25139 2.73247 3.94339 3.15552 3.75478C3.42883 3.63292 3.71685 3.58533 4.02744 3.56312C4.32777 3.54165 4.69655 3.54166 5.144 3.54166ZM3.125 8.4375V13.5C3.125 13.9201 3.12563 14.1923 3.145 14.3997C3.16342 14.597 3.19476 14.6762 3.22176 14.7226C3.31014 14.8743 3.46036 15.0125 3.66452 15.1035C3.74772 15.1406 3.87132 15.1725 4.11657 15.1901C4.36702 15.208 4.69092 15.2083 5.16667 15.2083H14.8333C15.3091 15.2083 15.633 15.208 15.8834 15.1901C16.1287 15.1725 16.2523 15.1406 16.3355 15.1035C16.5396 15.0125 16.6899 14.8743 16.7782 14.7226C16.8052 14.6762 16.8366 14.597 16.855 14.3997C16.8744 14.1923 16.875 13.9201 16.875 13.5V8.4375H3.125ZM16.875 7.1875H3.125V6.5C3.125 6.07986 3.12563 5.80768 3.145 5.60027C3.16342 5.40303 3.19476 5.3238 3.22176 5.27744C3.31014 5.12566 3.46036 4.98747 3.66452 4.89645C3.74772 4.85935 3.87132 4.82748 4.11657 4.80994C4.36702 4.79204 4.69092 4.79166 5.16667 4.79166H14.8333C15.3091 4.79166 15.633 4.79204 15.8834 4.80994C16.1287 4.82748 16.2523 4.85935 16.3355 4.89645C16.5396 4.98747 16.6899 5.12566 16.7782 5.27744C16.8052 5.3238 16.8366 5.40303 16.855 5.60027C16.8744 5.80768 16.875 6.07986 16.875 6.5V7.1875Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M8.86926 9.56896C9.10731 9.81892 9.09766 10.2145 8.8477 10.4526L7.57292 11.6667L8.8477 12.8807C9.09766 13.1188 9.10731 13.5144 8.86926 13.7644C8.6312 14.0143 8.23559 14.024 7.98563 13.7859L6.23563 12.1193C6.11177 12.0013 6.04167 11.8377 6.04167 11.6667C6.04167 11.4956 6.11177 11.332 6.23563 11.2141L7.98563 9.54741C8.23559 9.30936 8.6312 9.31901 8.86926 9.56896ZM11.1307 9.56896C11.3688 9.31901 11.7644 9.30936 12.0144 9.54741L13.7644 11.2141C13.8882 11.332 13.9583 11.4956 13.9583 11.6667C13.9583 11.8377 13.8882 12.0013 13.7644 12.1193L12.0144 13.7859C11.7644 14.024 11.3688 14.0143 11.1307 13.7644C10.8927 13.5144 10.9023 13.1188 11.1523 12.8807L12.4271 11.6667L11.1523 10.4526C10.9023 10.2145 10.8927 9.81892 11.1307 9.56896Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M5.08333 6.04166C5.08333 6.38684 4.80351 6.66666 4.45833 6.66666C4.11316 6.66666 3.83333 6.38684 3.83333 6.04166C3.83333 5.69649 4.11316 5.41666 4.45833 5.41666C4.80351 5.41666 5.08333 5.69649 5.08333 6.04166Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M6.75008 6.04166C6.75008 6.38684 6.47026 6.66666 6.12508 6.66666C5.77991 6.66666 5.50008 6.38684 5.50008 6.04166C5.50008 5.69649 5.77991 5.41666 6.12508 5.41666C6.47026 5.41666 6.75008 5.69649 6.75008 6.04166Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M8.41675 6.04166C8.41675 6.38684 8.13693 6.66666 7.79175 6.66666C7.44657 6.66666 7.16675 6.38684 7.16675 6.04166C7.16675 5.69649 7.44657 5.41666 7.79175 5.41666C8.13693 5.41666 8.41675 5.69649 8.41675 6.04166Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_3334_82005\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n`;\nexport const BookmarkIcon = html`\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_3433_78963)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        fill=\"currentColor\"\n        d=\"M4.16667 4.79167C3.59137 4.79167 3.125 5.25804 3.125 5.83334V14.1667C3.125 14.742 3.59137 15.2083 4.16667 15.2083H15.8333C16.4086 15.2083 16.875 14.742 16.875 14.1667V10C16.875 9.65483 17.1548 9.375 17.5 9.375C17.8452 9.375 18.125 9.65483 18.125 10V14.1667C18.125 15.4323 17.099 16.4583 15.8333 16.4583H4.16667C2.90101 16.4583 1.875 15.4323 1.875 14.1667V5.83334C1.875 4.56768 2.90101 3.54167 4.16667 3.54167H10C10.3452 3.54167 10.625 3.82149 10.625 4.16667C10.625 4.51185 10.3452 4.79167 10 4.79167H4.16667Z\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        fill=\"currentColor\"\n        d=\"M13.6063 3.48363C14.64 2.44991 16.316 2.44991 17.3497 3.48363C18.3834 4.51735 18.3834 6.19334 17.3497 7.22706L16.2774 8.29939C16.0333 8.54347 15.6376 8.54347 15.3935 8.29939C15.3371 8.24297 15.2937 8.17845 15.2634 8.10958C15.2915 8.82166 15.0338 9.54296 14.4902 10.0866L13.0604 11.5164C12.0267 12.5501 10.3507 12.5501 9.31696 11.5164C8.28324 10.4827 8.28324 8.80667 9.31696 7.77295L10.3893 6.70062C10.6334 6.45654 11.0291 6.45654 11.2732 6.70062C11.3296 6.75703 11.373 6.82155 11.4033 6.89043C11.3751 6.17834 11.6329 5.45705 12.1765 4.9134L13.6063 3.48363ZM11.4445 7.26331C11.4215 7.38099 11.3643 7.49333 11.2732 7.5845L10.2008 8.65683C9.65528 9.2024 9.65528 10.0869 10.2008 10.6325C10.7464 11.1781 11.6309 11.1781 12.1765 10.6325L13.6063 9.20272C14.1518 8.65716 14.1518 7.77262 13.6063 7.22706C13.5203 7.1411 13.4267 7.06921 13.3279 7.01087C13.0307 6.83533 12.932 6.45209 13.1076 6.15488C13.2831 5.85767 13.6664 5.75903 13.9636 5.93457C14.1521 6.04591 14.3293 6.18228 14.4902 6.34317C14.8849 6.73788 15.1289 7.22622 15.2221 7.7367C15.2452 7.61901 15.3023 7.50668 15.3935 7.4155L16.4658 6.34317C17.0114 5.79761 17.0114 4.91307 16.4658 4.36751C15.9203 3.82194 15.0357 3.82194 14.4902 4.36751L13.0604 5.79728C12.5148 6.34285 12.5148 7.22738 13.0604 7.77295C13.1463 7.8589 13.24 7.9308 13.3388 7.98914C13.636 8.16467 13.7346 8.54791 13.5591 8.84512C13.3835 9.14234 13.0003 9.24097 12.7031 9.06544C12.5146 8.9541 12.3374 8.81773 12.1765 8.65683C11.7818 8.26213 11.5378 7.77378 11.4445 7.26331Z\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_3433_78963\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n`;\nexport const ConnectorIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M17.5 4.75C16.5335 4.75 15.75 5.5335 15.75 6.5C15.75 7.4665 16.5335 8.25 17.5 8.25C18.4665 8.25 19.25 7.4665 19.25 6.5C19.25 5.5335 18.4665 4.75 17.5 4.75ZM14.25 6.5C14.25 4.70507 15.7051 3.25 17.5 3.25C19.2949 3.25 20.75 4.70507 20.75 6.5C20.75 8.29493 19.2949 9.75 17.5 9.75C16.8901 9.75 16.3194 9.58197 15.8317 9.28968L9.28968 15.8317C9.58197 16.3194 9.75 16.8901 9.75 17.5C9.75 19.2949 8.29493 20.75 6.5 20.75C4.70507 20.75 3.25 19.2949 3.25 17.5C3.25 15.7051 4.70507 14.25 6.5 14.25C7.1415 14.25 7.73958 14.4359 8.24335 14.7567L14.7567 8.24335C14.4359 7.73958 14.25 7.1415 14.25 6.5ZM6.5 15.75C5.5335 15.75 4.75 16.5335 4.75 17.5C4.75 18.4665 5.5335 19.25 6.5 19.25C7.4665 19.25 8.25 18.4665 8.25 17.5C8.25 16.5335 7.4665 15.75 6.5 15.75Z\"\n  />\n</svg>`;\n\nexport const PenIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M15.894 5.32233L15.0516 6.19412L17.8059 8.94836L18.6776 8.106C19.4422 7.33698 19.4408 6.09381 18.6735 5.32652C17.9062 4.55923 16.663 4.55783 15.894 5.32233ZM16.727 9.99082L14.0092 7.27298L6.16599 15.3901L5.11859 18.8814L8.60991 17.834L16.727 9.99082ZM14.8291 4.26586C16.1836 2.91138 18.3797 2.91138 19.7341 4.26586C21.0886 5.62033 21.0886 7.81637 19.7341 9.17085L19.725 9.17995L9.52114 19.0394C9.43501 19.1226 9.33021 19.184 9.2155 19.2184L4.2155 20.7184C3.95122 20.7977 3.66476 20.7254 3.46966 20.5303C3.27456 20.3352 3.20234 20.0488 3.28162 19.7845L4.78162 14.7845C4.81603 14.6698 4.87742 14.565 4.96064 14.4788L14.8291 4.26586Z\"\n  />\n</svg>`;\n\nexport const HandIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M14.8114 20.999C13.2447 20.9679 11.7002 20.6209 10.2699 19.9787L4.67482 17.3458C4.12742 17.0853 3.70531 16.6178 3.501 16.0458C3.29668 15.4737 3.32684 14.8437 3.58486 14.2938C3.84271 13.7454 4.30714 13.3222 4.87604 13.1172C5.44494 12.9122 6.07173 12.9422 6.61858 13.2006L7.66312 13.6926C7.17264 12.0254 6.19168 9.26496 4.72024 7.65243L3.81194 6.9145C3.37099 6.55513 3.08591 6.03846 3.01648 5.47286C2.94705 4.90727 3.09867 4.33669 3.43953 3.88077C3.78344 3.42341 4.29072 3.11757 4.85476 3.02753C5.4188 2.93748 5.99569 3.07025 6.46417 3.39792C7.56208 4.18419 8.52532 5.14417 9.31623 6.24033C9.58326 5.83988 9.97184 5.53639 10.4244 5.37486C10.7041 5.27066 11.002 5.22422 11.3001 5.23831C11.5982 5.2524 11.8904 5.32672 12.1592 5.45685C12.4015 5.57016 12.6227 5.72422 12.8132 5.91236C13.058 5.63326 13.371 5.42289 13.7215 5.30197C13.9828 5.20656 14.2604 5.16466 14.5381 5.17874C14.8158 5.19282 15.0879 5.2626 15.3383 5.38396C15.6253 5.51414 15.8775 5.71086 16.074 5.95792C16.1756 5.89185 16.2856 5.83976 16.401 5.80304C16.7997 5.65961 17.2388 5.68073 17.622 5.86179C18.0052 6.04285 18.301 6.36905 18.4446 6.76873L20.6155 12.818C21.1282 14.2647 21.1282 15.8444 20.6155 17.2911C20.3444 18.0579 19.9061 18.7544 19.3326 19.3296C18.759 19.9049 18.0647 20.3445 17.3002 20.6164C16.4979 20.8833 15.6566 21.0127 14.8114 20.999ZM5.75747 14.4032C5.62583 14.3751 5.4278 14.3671 5.32879 14.4032C5.21385 14.4428 5.108 14.5051 5.01751 14.5865C4.92702 14.6678 4.85373 14.7666 4.80198 14.8769C4.74874 14.9866 4.71803 15.106 4.71166 15.2278C4.7053 15.3497 4.72341 15.4716 4.76492 15.5863C4.80643 15.7011 4.8705 15.8062 4.95332 15.8957C5.03614 15.9851 5.13602 16.0569 5.24704 16.1068L10.8058 18.7943C10.8058 18.7943 14.0939 20.3249 16.8006 19.3501C17.3787 19.1551 17.9049 18.8307 18.3392 18.4013C18.7736 17.9719 19.1048 17.449 19.3075 16.8721C19.7157 15.7262 19.7157 14.474 19.3075 13.3282L17.1276 7.27891C17.1185 7.2489 17.1033 7.22112 17.083 7.19728C17.0626 7.17344 17.0376 7.15407 17.0095 7.14038C16.9813 7.1267 16.9507 7.119 16.9194 7.11775C16.8882 7.11651 16.857 7.12174 16.8279 7.13314C16.7706 7.1556 16.7243 7.19958 16.6989 7.25572C16.6734 7.31186 16.6708 7.37574 16.6916 7.43378L17.0004 8.34481C17.0366 8.43122 17.0546 8.52416 17.0534 8.61785C17.0522 8.71153 17.0318 8.80397 16.9934 8.88941C16.9551 8.97485 16.8997 9.05147 16.8305 9.11451C16.7614 9.17755 16.6801 9.22565 16.5917 9.25584C16.5056 9.29207 16.4129 9.31014 16.3195 9.30893C16.2261 9.30772 16.1339 9.28726 16.0487 9.24881C15.9636 9.21036 15.8872 9.15474 15.8243 9.08543C15.7615 9.01611 15.7135 8.93458 15.6834 8.84588L15.0839 7.16959C15.0101 6.98388 14.8712 6.8316 14.6934 6.7414C14.6028 6.70307 14.5055 6.68331 14.4072 6.68331C14.309 6.68331 14.2117 6.70307 14.1211 6.7414C13.9396 6.80212 13.7882 6.93063 13.6986 7.10026C13.609 7.2699 13.5879 7.46763 13.6397 7.65243L13.8941 8.60902C13.9389 8.7793 13.9156 8.96042 13.829 9.11365C13.7424 9.26688 13.5995 9.38005 13.4308 9.42894C13.2645 9.4814 13.0845 9.46702 12.9285 9.38884C12.7726 9.31065 12.6531 9.17476 12.5952 9.00986L11.9957 7.35179C11.9119 7.12856 11.7441 6.94721 11.5284 6.84671C11.3127 6.7462 11.0663 6.73457 10.8422 6.81429C10.6196 6.89838 10.4388 7.06666 10.3386 7.283C10.2384 7.49933 10.2268 7.74646 10.3063 7.97129L10.7423 9.19208C10.7784 9.27848 10.7964 9.37141 10.7952 9.4651C10.794 9.55878 10.7736 9.65122 10.7352 9.73666C10.6969 9.8221 10.6415 9.89872 10.5724 9.96176C10.5033 10.0248 10.422 10.0729 10.3335 10.1031C10.2474 10.1393 10.1547 10.1574 10.0613 10.1562C9.96791 10.155 9.87575 10.1345 9.79056 10.0961C9.70538 10.0576 9.62899 10.002 9.56614 9.93269C9.50329 9.86338 9.45533 9.78183 9.42523 9.69313C8.68278 7.68202 7.3454 5.94647 5.5922 4.71891C5.41716 4.59322 5.19975 4.54185 4.98718 4.57597C4.7746 4.61008 4.58403 4.72692 4.45683 4.90112C4.32552 5.07405 4.33703 5.23645 4.36245 5.45231C4.38787 5.66818 4.49591 5.8657 4.66377 6.00319L5.57207 6.76845L5.63565 6.83222C8.11531 9.50154 9.26884 14.7126 9.31426 14.9313C9.34154 15.0568 9.33301 15.1875 9.28963 15.3083C9.24625 15.4292 9.1698 15.5353 9.06902 15.6146C8.96956 15.6916 8.85101 15.74 8.72616 15.7544C8.60131 15.7689 8.47489 15.7489 8.36055 15.6966L6.77594 14.8769C6.38102 14.6614 6.29788 14.5865 5.75747 14.4032Z\"\n  />\n</svg>`;\n\nexport const SquareIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" stroke-width=\"1.5\" />\n</svg>`;\n\nexport const EllipseIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <circle cx=\"12\" cy=\"12\" r=\"9\" stroke-width=\"1.5\" />\n</svg>`;\n\nexport const DiamondIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path d=\"M3 12L12 3L21 12L12 21L3 12Z\" stroke-width=\"1.5\" />\n</svg>`;\n\nexport const TriangleIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path d=\"M12 4L20.6603 19H3.33975L12 4Z\" stroke-width=\"1.5\" />\n</svg>`;\n\nexport const RoundedRectangleIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" stroke-width=\"1.5\" />\n</svg>`;\n\nexport const CollapseDownIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 3.25C12.4142 3.25 12.75 3.58579 12.75 4V14.1893L15.4697 11.4697C15.7626 11.1768 16.2374 11.1768 16.5303 11.4697C16.8232 11.7626 16.8232 12.2374 16.5303 12.5303L12.5303 16.5303C12.2374 16.8232 11.7626 16.8232 11.4697 16.5303L7.46967 12.5303C7.17678 12.2374 7.17678 11.7626 7.46967 11.4697C7.76256 11.1768 8.23744 11.1768 8.53033 11.4697L11.25 14.1893V4C11.25 3.58579 11.5858 3.25 12 3.25ZM3.25 20C3.25 19.5858 3.58579 19.25 4 19.25H20C20.4142 19.25 20.75 19.5858 20.75 20C20.75 20.4142 20.4142 20.75 20 20.75H4C3.58579 20.75 3.25 20.4142 3.25 20Z\"\n  />\n</svg>`;\n\nexport const MinusIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.25 12C5.25 11.5858 5.58579 11.25 6 11.25H18C18.4142 11.25 18.75 11.5858 18.75 12C18.75 12.4142 18.4142 12.75 18 12.75H6C5.58579 12.75 5.25 12.4142 5.25 12Z\"\n  />\n</svg>`;\n\nexport const PlusIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 5.25C12.4142 5.25 12.75 5.58579 12.75 6V11.25H18C18.4142 11.25 18.75 11.5858 18.75 12C18.75 12.4142 18.4142 12.75 18 12.75H12.75V18C12.75 18.4142 12.4142 18.75 12 18.75C11.5858 18.75 11.25 18.4142 11.25 18V12.75H6C5.58579 12.75 5.25 12.4142 5.25 12C5.25 11.5858 5.58579 11.25 6 11.25H11.25V6C11.25 5.58579 11.5858 5.25 12 5.25Z\"\n  />\n</svg>`;\n\nexport const ViewBarIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M3.25 20C2.83579 20 2.5 19.6642 2.5 19.25V4.75C2.5 4.33579 2.83579 4 3.25 4C3.66421 4 4 4.33579 4 4.75L4 19.25C4 19.6642 3.66421 20 3.25 20Z\"\n  />\n  <path\n    d=\"M9.16494 8.43945C9.47453 8.71464 9.50241 9.18869 9.22722 9.49828L7.67013 11.25H16.3299L14.7728 9.49828C14.4976 9.18869 14.5255 8.71464 14.8351 8.43945C15.1446 8.16426 15.6187 8.19215 15.8939 8.50174L18.5606 11.5017C18.8131 11.7859 18.8131 12.2141 18.5606 12.4983L15.8939 15.4983C15.6187 15.8079 15.1446 15.8358 14.8351 15.5606C14.5255 15.2854 14.4976 14.8113 14.7728 14.5017L16.3299 12.75H7.67013L9.22722 14.5017C9.50241 14.8113 9.47453 15.2854 9.16494 15.5606C8.85535 15.8358 8.3813 15.8079 8.10611 15.4983L5.43944 12.4983C5.18685 12.2141 5.18685 11.7859 5.43944 11.5017L8.10611 8.50174C8.3813 8.19215 8.85535 8.16426 9.16494 8.43945Z\"\n  />\n  <path\n    d=\"M21.5 4.75C21.5 4.33579 21.1642 4 20.75 4C20.3358 4 20 4.33579 20 4.75V19.25C20 19.6642 20.3358 20 20.75 20C21.1642 20 21.5 19.6642 21.5 19.25V4.75Z\"\n  />\n</svg>`;\n\nexport const TransparentIcon = html`<svg\n  width=\"16\"\n  height=\"16\"\n  viewBox=\"0 0 16 16\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M-0.939238 4.14286C-0.979281 4.4228 -1 4.70898 -1 5V6.71429H1.57143V9.28571H-1V11C-1 11.291 -0.979281 11.5772 -0.939238 11.8571H1.57143V14.4286H0.0754482C0.481795 15.0111 0.988871 15.5182 1.57143 15.9246V14.4286L4.14286 14.4286V16.9392C4.4228 16.9793 4.70898 17 5 17H6.71429V14.4286H9.28571V17H11C11.291 17 11.5772 16.9793 11.8571 16.9392V14.4286H14.4286L14.4286 15.9246C15.0111 15.5182 15.5182 15.0111 15.9246 14.4286L14.4286 14.4286V11.8571H16.9392C16.9793 11.5772 17 11.291 17 11V9.28571H14.4286V6.71429H17V5C17 4.70898 16.9793 4.4228 16.9392 4.14286H14.4286V1.57143H15.9246C15.5182 0.988871 15.0111 0.481795 14.4286 0.075448L14.4286 1.57143H11.8571V-0.939238C11.5772 -0.979281 11.291 -1 11 -1H9.28571V1.57143H6.71429V-1H5C4.70898 -1 4.4228 -0.979281 4.14286 -0.939238V1.57143H1.57143V0.0754479C0.988871 0.481795 0.481795 0.988871 0.0754479 1.57143H1.57143V4.14286H-0.939238ZM4.14286 4.14286V1.57143H6.71429V4.14286H4.14286ZM4.14286 6.71429H1.57143V4.14286H4.14286V6.71429ZM6.71429 6.71429V4.14286H9.28571V6.71429H6.71429ZM6.71429 9.28571V6.71429H4.14286V9.28571H1.57143V11.8571H4.14286V14.4286H6.71429V11.8571H9.28571V14.4286H11.8571V11.8571H14.4286V9.28571H11.8571V6.71429H14.4286V4.14286H11.8571V1.57143H9.28571V4.14286H11.8571V6.71429H9.28571V9.28571H6.71429ZM6.71429 9.28571V11.8571H4.14286V9.28571H6.71429ZM9.28571 9.28571H11.8571V11.8571H9.28571V9.28571Z\"\n    fill=\"#D9D9D9\"\n  />\n</svg>`;\n\nexport const MoreHorizontalIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M10 5.00004C9.53978 5.00004 9.16669 4.62694 9.16669 4.16671C9.16669 3.70647 9.53978 3.33337 10 3.33337C10.4603 3.33337 10.8334 3.70647 10.8334 4.16671C10.8334 4.62694 10.4603 5.00004 10 5.00004Z\"\n  />\n  <path\n    d=\"M10 10.8334C9.53978 10.8334 9.16669 10.4603 9.16669 10C9.16669 9.5398 9.53978 9.16671 10 9.16671C10.4603 9.16671 10.8334 9.5398 10.8334 10C10.8334 10.4603 10.4603 10.8334 10 10.8334Z\"\n  />\n  <path\n    d=\"M10 16.6667C9.53978 16.6667 9.16669 16.2936 9.16669 15.8334C9.16669 15.3731 9.53978 15 10 15C10.4603 15 10.8334 15.3731 10.8334 15.8334C10.8334 16.2936 10.4603 16.6667 10 16.6667Z\"\n  />\n  <path\n    d=\"M10 5.00004C9.53978 5.00004 9.16669 4.62694 9.16669 4.16671C9.16669 3.70647 9.53978 3.33337 10 3.33337C10.4603 3.33337 10.8334 3.70647 10.8334 4.16671C10.8334 4.62694 10.4603 5.00004 10 5.00004Z\"\n  />\n  <path\n    d=\"M10 10.8334C9.53978 10.8334 9.16669 10.4603 9.16669 10C9.16669 9.5398 9.53978 9.16671 10 9.16671C10.4603 9.16671 10.8334 9.5398 10.8334 10C10.8334 10.4603 10.4603 10.8334 10 10.8334Z\"\n  />\n  <path\n    d=\"M10 16.6667C9.53978 16.6667 9.16669 16.2936 9.16669 15.8334C9.16669 15.3731 9.53978 15 10 15C10.4603 15 10.8334 15.3731 10.8334 15.8334C10.8334 16.2936 10.4603 16.6667 10 16.6667Z\"\n  />\n</svg>`;\n\nexport const LineStyleIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.70825 3.33325C2.70825 2.98807 2.98807 2.70825 3.33325 2.70825H5.83325C6.17843 2.70825 6.45825 2.98807 6.45825 3.33325C6.45825 3.67843 6.17843 3.95825 5.83325 3.95825H3.33325C2.98807 3.95825 2.70825 3.67843 2.70825 3.33325Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.12492 3.33325C8.12492 2.98807 8.40474 2.70825 8.74992 2.70825L11.2499 2.70825C11.5951 2.70825 11.8749 2.98807 11.8749 3.33325C11.8749 3.67843 11.5951 3.95825 11.2499 3.95825L8.74992 3.95825C8.40474 3.95825 8.12492 3.67843 8.12492 3.33325Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.6666 3.95825L14.1666 3.95825C13.8214 3.95825 13.5416 3.67843 13.5416 3.33325C13.5416 2.98807 13.8214 2.70825 14.1666 2.70825L16.6666 2.70825C17.0118 2.70825 17.2916 2.98807 17.2916 3.33325C17.2916 3.67843 17.0118 3.95825 16.6666 3.95825Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.70825 9.99992C2.70825 9.65474 2.98807 9.37492 3.33325 9.37492H16.6666C17.0118 9.37492 17.2916 9.65474 17.2916 9.99992C17.2916 10.3451 17.0118 10.6249 16.6666 10.6249H3.33325C2.98807 10.6249 2.70825 10.3451 2.70825 9.99992Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M2.70825 16.2499C2.70825 15.6746 3.17462 15.2083 3.74992 15.2083H16.2499C16.8252 15.2083 17.2916 15.6746 17.2916 16.2499C17.2916 16.8252 16.8252 17.2916 16.2499 17.2916H3.74992C3.17462 17.2916 2.70825 16.8252 2.70825 16.2499Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n\nexport const ConnectorXIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11.25 7C11.25 5.48122 12.4812 4.25 14 4.25H21C21.4142 4.25 21.75 4.58579 21.75 5C21.75 5.41421 21.4142 5.75 21 5.75H14C13.3096 5.75 12.75 6.30964 12.75 7V17C12.75 18.5188 11.5188 19.75 10 19.75H3C2.58579 19.75 2.25 19.4142 2.25 19C2.25 18.5858 2.58579 18.25 3 18.25H10C10.6904 18.25 11.25 17.6904 11.25 17V7Z\"\n  />\n</svg>`;\n\nexport const ConnectorLIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.5303 3.53034C20.8232 3.82323 20.8232 4.29811 20.5303 4.591L4.591 20.5303C4.29811 20.8232 3.82323 20.8232 3.53034 20.5303C3.23745 20.2374 3.23745 19.7626 3.53034 19.4697L19.4697 3.53034C19.7626 3.23745 20.2374 3.23745 20.5303 3.53034Z\"\n  />\n</svg>`;\n\nexport const DashLineIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.5303 3.53034C20.8232 3.82323 20.8232 4.29811 20.5303 4.591L17.341 7.78034C17.0481 8.07323 16.5732 8.07323 16.2803 7.78034C15.9874 7.48745 15.9874 7.01257 16.2803 6.71968L19.4697 3.53034C19.7626 3.23745 20.2374 3.23745 20.5303 3.53034Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M14.1553 9.90534C14.4482 10.1982 14.4482 10.6731 14.1553 10.966L10.966 14.1553C10.6731 14.4482 10.1982 14.4482 9.90534 14.1553C9.61245 13.8624 9.61245 13.3876 9.90534 13.0947L13.0947 9.90534C13.3876 9.61245 13.8624 9.61245 14.1553 9.90534Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.78034 16.2803C8.07323 16.5732 8.07323 17.0481 7.78034 17.341L4.591 20.5303C4.29811 20.8232 3.82323 20.8232 3.53034 20.5303C3.23745 20.2374 3.23745 19.7626 3.53034 19.4697L6.71968 16.2803C7.01257 15.9874 7.48745 15.9874 7.78034 16.2803Z\"\n  />\n</svg>`;\n\nexport const BanIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.72068 18.34L18.34 6.72068C19.5331 8.15171 20.25 9.99158 20.25 12C20.25 16.5563 16.5563 20.25 12 20.25C9.99158 20.25 8.15171 19.5331 6.72068 18.34ZM17.2793 5.66002L5.66002 17.2793C4.46691 15.8483 3.75 14.0084 3.75 12C3.75 7.44365 7.44365 3.75 12 3.75C14.0084 3.75 15.8483 4.46691 17.2793 5.66002ZM5.10571 18.8943C6.86929 20.6579 9.30782 21.75 12 21.75C17.3848 21.75 21.75 17.3848 21.75 12C21.75 9.30782 20.6579 6.86929 18.8943 5.10571C17.1307 3.34213 14.6922 2.25 12 2.25C6.61522 2.25 2.25 6.61522 2.25 12C2.25 14.6922 3.34213 17.1307 5.10571 18.8943Z\"\n  />\n</svg>`;\n\nexport const NoteIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.75 18C20.75 19.5188 19.5188 20.75 18 20.75H10C9.58579 20.75 9.25 20.4142 9.25 20C9.25 19.5858 9.58579 19.25 10 19.25L18 19.25C18.6904 19.25 19.25 18.6904 19.25 18L19.25 4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4L20.75 18Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H15C15.4142 15.25 15.75 15.5858 15.75 16C15.75 16.4142 15.4142 16.75 15 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z\"\n  />\n</svg>`;\n\nexport const ImportIcon = html`<svg\n  width=\"16\"\n  height=\"16\"\n  viewBox=\"0 0 16 16\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.00004 0.708313C8.34522 0.708313 8.62504 0.988135 8.62504 1.33331V8.71332L9.78032 7.55804C10.0244 7.31396 10.4201 7.31396 10.6642 7.55804C10.9083 7.80211 10.9083 8.19784 10.6642 8.44192L8.44198 10.6641C8.32477 10.7814 8.1658 10.8472 8.00004 10.8472C7.83428 10.8472 7.67531 10.7814 7.5581 10.6641L5.33588 8.44192C5.0918 8.19784 5.0918 7.80211 5.33588 7.55804C5.57996 7.31396 5.97568 7.31396 6.21976 7.55804L7.37504 8.71332V1.33331C7.37504 0.988135 7.65486 0.708313 8.00004 0.708313ZM3.67888 5.15276L4.29634 5.15276C4.64152 5.15276 4.92134 5.43258 4.92134 5.77776C4.92134 6.12294 4.64152 6.40276 4.29634 6.40276H3.70375C3.27858 6.40276 2.99729 6.40324 2.78161 6.42087C2.57322 6.43789 2.48168 6.46775 2.42602 6.49611C2.26486 6.57822 2.13384 6.70925 2.05173 6.8704C2.02337 6.92606 1.99351 7.0176 1.97648 7.22599C1.95886 7.44167 1.95837 7.72296 1.95837 8.14813V12.2963C1.95837 12.7214 1.95886 13.0027 1.97648 13.2184C1.99351 13.4268 2.02337 13.5183 2.05173 13.574C2.13384 13.7352 2.26486 13.8662 2.42602 13.9483C2.48168 13.9767 2.57322 14.0065 2.78161 14.0235C2.99729 14.0412 3.27858 14.0416 3.70375 14.0416H12.2963C12.7215 14.0416 13.0028 14.0412 13.2185 14.0235C13.4269 14.0065 13.5184 13.9767 13.5741 13.9483C13.7352 13.8662 13.8662 13.7352 13.9484 13.574C13.9767 13.5183 14.0066 13.4268 14.0236 13.2184C14.0412 13.0027 14.0417 12.7214 14.0417 12.2963V8.14813C14.0417 7.72296 14.0412 7.44167 14.0236 7.22599C14.0066 7.0176 13.9767 6.92607 13.9484 6.87041C13.8662 6.70925 13.7352 6.57822 13.5741 6.49611C13.5184 6.46775 13.4269 6.43789 13.2185 6.42087C13.0028 6.40324 12.7215 6.40276 12.2963 6.40276H11.7037C11.3586 6.40276 11.0787 6.12294 11.0787 5.77776C11.0787 5.43258 11.3586 5.15276 11.7037 5.15276L12.3212 5.15276C12.7149 5.15275 13.0476 5.15274 13.3203 5.17502C13.606 5.19836 13.8803 5.24924 14.1416 5.38235C14.5379 5.58431 14.8602 5.90656 15.0621 6.30292C15.1952 6.56416 15.2461 6.83851 15.2694 7.1242C15.2917 7.39687 15.2917 7.72958 15.2917 8.12324V12.3212C15.2917 12.7148 15.2917 13.0475 15.2694 13.3202C15.2461 13.6059 15.1952 13.8802 15.0621 14.1415C14.8602 14.5378 14.5379 14.8601 14.1416 15.0621C13.8803 15.1952 13.606 15.246 13.3203 15.2694C13.0476 15.2917 12.7149 15.2917 12.3212 15.2916H3.67886C3.2852 15.2917 2.95248 15.2917 2.67982 15.2694C2.39413 15.246 2.11978 15.1952 1.85853 15.0621C1.46217 14.8601 1.13992 14.5378 0.937968 14.1415C0.804856 13.8802 0.753976 13.6059 0.730635 13.3202C0.708356 13.0475 0.708365 12.7148 0.708374 12.3211V8.12326C0.708365 7.72959 0.708356 7.39687 0.730635 7.1242C0.753976 6.83851 0.804856 6.56416 0.937968 6.30292C1.13992 5.90656 1.46217 5.58431 1.85853 5.38235C2.11978 5.24924 2.39413 5.19836 2.67982 5.17502C2.95249 5.15274 3.28521 5.15275 3.67888 5.15276Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n\nexport const AlighLeftIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <g clip-path=\"url(#clip0_2131_19971)\">\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.7085 12.0001C4.7085 11.6549 4.98832 11.3751 5.3335 11.3751H13.6668C14.012 11.3751 14.2918 11.6549 14.2918 12.0001C14.2918 12.3453 14.012 12.6251 13.6668 12.6251H5.3335C4.98832 12.6251 4.7085 12.3453 4.7085 12.0001Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.7085 17.8334C4.7085 17.4882 4.98832 17.2084 5.3335 17.2084H15.3335C15.6787 17.2084 15.9585 17.4882 15.9585 17.8334C15.9585 18.1786 15.6787 18.4584 15.3335 18.4584H5.3335C4.98832 18.4584 4.7085 18.1786 4.7085 17.8334Z\"\n      fill=\"#77757D\"\n    />\n  </g>\n  <defs>\n    <clipPath id=\"clip0_2131_19971\">\n      <rect width=\"20\" height=\"20\" fill=\"white\" transform=\"translate(2 2)\" />\n    </clipPath>\n  </defs>\n</svg>`;\n\nexport const AlignCenterIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <g clip-path=\"url(#clip0_2131_19972)\">\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M7.2085 12.0001C7.2085 11.6549 7.48832 11.3751 7.8335 11.3751H16.1668C16.512 11.3751 16.7918 11.6549 16.7918 12.0001C16.7918 12.3453 16.512 12.6251 16.1668 12.6251H7.8335C7.48832 12.6251 7.2085 12.3453 7.2085 12.0001Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.37516 17.8334C6.37516 17.4882 6.65498 17.2084 7.00016 17.2084H17.0002C17.3453 17.2084 17.6252 17.4882 17.6252 17.8334C17.6252 18.1786 17.3453 18.4584 17.0002 18.4584H7.00016C6.65498 18.4584 6.37516 18.1786 6.37516 17.8334Z\"\n      fill=\"#77757D\"\n    />\n  </g>\n  <defs>\n    <clipPath id=\"clip0_2131_19972\">\n      <rect width=\"20\" height=\"20\" fill=\"white\" transform=\"translate(2 2)\" />\n    </clipPath>\n  </defs>\n</svg>`;\n\nexport const AlignRightIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <g clip-path=\"url(#clip0_2131_19973)\">\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M9.7085 12.0001C9.7085 11.6549 9.98832 11.3751 10.3335 11.3751H18.6668C19.012 11.3751 19.2918 11.6549 19.2918 12.0001C19.2918 12.3453 19.012 12.6251 18.6668 12.6251H10.3335C9.98832 12.6251 9.7085 12.3453 9.7085 12.0001Z\"\n      fill=\"#77757D\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8.04183 17.8334C8.04183 17.4882 8.32165 17.2084 8.66683 17.2084H18.6668C19.012 17.2084 19.2918 17.4882 19.2918 17.8334C19.2918 18.1786 19.012 18.4584 18.6668 18.4584H8.66683C8.32165 18.4584 8.04183 18.1786 8.04183 17.8334Z\"\n      fill=\"#77757D\"\n    />\n  </g>\n  <defs>\n    <clipPath id=\"clip0_2131_19973\">\n      <rect width=\"20\" height=\"20\" fill=\"white\" transform=\"translate(2 2)\" />\n    </clipPath>\n  </defs>\n</svg>`;\n", "import { html } from 'lit';\n\nexport const CloseIcon = html`<svg\n  width=\"12\"\n  height=\"12\"\n  viewBox=\"0 0 12 12\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M0.343205 0.343144C0.636098 0.0502508 1.11097 0.0502508 1.40387 0.343144L6.00006 4.93934L10.5963 0.343144C10.8891 0.0502508 11.364 0.0502508 11.6569 0.343144C11.9498 0.636037 11.9498 1.11091 11.6569 1.4038L7.06072 6L11.6569 10.5962C11.9498 10.8891 11.9498 11.364 11.6569 11.6569C11.364 11.9497 10.8891 11.9497 10.5963 11.6569L6.00006 7.06066L1.40387 11.6569C1.11097 11.9497 0.636098 11.9497 0.343205 11.6569C0.0503118 11.364 0.0503118 10.8891 0.343205 10.5962L4.9394 6L0.343205 1.4038C0.0503118 1.11091 0.0503118 0.636037 0.343205 0.343144Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n\nexport const ExportToMarkdownIcon = html`<svg\n  width=\"14\"\n  height=\"18\"\n  viewBox=\"0 0 14 18\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.80805 0.875L7.83342 0.875001C7.99918 0.875001 8.15815 0.940849 8.27536 1.05806L13.2754 6.05806C13.3926 6.17527 13.4584 6.33424 13.4584 6.5V13.8587C13.4584 14.3038 13.4584 14.6754 13.4336 14.9789C13.4078 15.2955 13.3518 15.5927 13.2086 15.8737C12.9889 16.3049 12.6383 16.6555 12.2071 16.8752C11.9261 17.0184 11.6289 17.0744 11.3123 17.1002C11.0088 17.125 10.6372 17.125 10.1921 17.125H3.80804C3.36292 17.125 2.99138 17.125 2.68786 17.1002C2.37129 17.0744 2.07407 17.0184 1.79302 16.8752C1.36182 16.6555 1.01124 16.3049 0.791525 15.8737C0.648322 15.5927 0.592396 15.2955 0.566531 14.9789C0.541732 14.6754 0.541739 14.3038 0.541748 13.8587V4.1413C0.541739 3.69618 0.541732 3.32464 0.566531 3.02111C0.592396 2.70454 0.648322 2.40732 0.791525 2.12627C1.01124 1.69507 1.36182 1.34449 1.79302 1.12478C2.07407 0.981574 2.37129 0.925648 2.68786 0.899783C2.99138 0.874984 3.36292 0.874991 3.80805 0.875ZM2.78965 2.14563C2.55038 2.16518 2.43598 2.20008 2.36051 2.23854C2.16451 2.3384 2.00515 2.49776 1.90528 2.69376C1.86683 2.76923 1.83193 2.88363 1.81238 3.1229C1.79223 3.36946 1.79175 3.68964 1.79175 4.16667V13.8333C1.79175 14.3104 1.79223 14.6305 1.81238 14.8771C1.83193 15.1164 1.86683 15.2308 1.90528 15.3062C2.00515 15.5022 2.16451 15.6616 2.36051 15.7615C2.43598 15.7999 2.55038 15.8348 2.78965 15.8544C3.03621 15.8745 3.35639 15.875 3.83342 15.875H10.1667C10.6438 15.875 10.964 15.8745 11.2105 15.8544C11.4498 15.8348 11.5642 15.7999 11.6397 15.7615C11.8357 15.6616 11.995 15.5022 12.0949 15.3062C12.1333 15.2308 12.1682 15.1164 12.1878 14.8771C12.2079 14.6305 12.2084 14.3104 12.2084 13.8333V7.125H8.66675C7.86133 7.125 7.20842 6.47208 7.20842 5.66667V2.125H3.83342C3.35639 2.125 3.03621 2.12549 2.78965 2.14563ZM8.45842 3.00888L11.3245 5.875H8.66675C8.55169 5.875 8.45842 5.78173 8.45842 5.66667V3.00888Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M8.37009 13.1207L8.39316 10.2307H8.37585L7.31446 13.1207H6.62225L5.5897 10.2307H5.57239L5.59547 13.1207H4.66675V9.03662H6.06848L6.9972 11.6555H7.02027L7.90861 9.03662H9.33342V13.1207H8.37009Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n\nexport const ExportToHTMLIcon = html`<svg\n  width=\"16\"\n  height=\"18\"\n  viewBox=\"0 0 16 18\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M4.80797 0.875L8.83333 0.875001C8.99909 0.875001 9.15806 0.940849 9.27527 1.05806L14.2753 6.05806C14.3925 6.17527 14.4583 6.33424 14.4583 6.5V11.5C14.4583 11.8452 14.1785 12.125 13.8333 12.125C13.4882 12.125 13.2083 11.8452 13.2083 11.5V7.125H9.66667C8.86125 7.125 8.20833 6.47208 8.20833 5.66667V2.125H4.83333C4.35631 2.125 4.03613 2.12549 3.78956 2.14563C3.5503 2.16518 3.43589 2.20008 3.36043 2.23854C3.16442 2.3384 3.00507 2.49776 2.9052 2.69376C2.86675 2.76923 2.83185 2.88363 2.8123 3.1229C2.79215 3.36946 2.79167 3.68964 2.79167 4.16667V11.5C2.79167 11.8452 2.51184 12.125 2.16667 12.125C1.82149 12.125 1.54167 11.8452 1.54167 11.5L1.54167 4.1413C1.54166 3.69618 1.54165 3.32464 1.56645 3.02111C1.59231 2.70454 1.64824 2.40732 1.79144 2.12627C2.01115 1.69507 2.36173 1.34449 2.79294 1.12478C3.07399 0.981574 3.3712 0.925648 3.68777 0.899783C3.9913 0.874984 4.36284 0.874991 4.80797 0.875ZM9.45833 3.00888L12.3244 5.875H9.66667C9.55161 5.875 9.45833 5.78173 9.45833 5.66667V3.00888Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M3.2085 17.0607V15.4327H1.6905V17.0607H0.75V13.1667H1.6905V14.6407H3.2085V13.1667H4.149V17.0607H3.2085Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M6.6167 13.9697V17.0607H5.6762V13.9697H4.5762V13.1667H7.7167V13.9697H6.6167Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M11.677 17.0607L11.699 14.3052H11.6825L10.6705 17.0607H10.0105L9.026 14.3052H9.0095L9.0315 17.0607H8.146V13.1667H9.4825L10.368 15.6637H10.39L11.237 13.1667H12.5955V17.0607H11.677Z\"\n    fill=\"#77757D\"\n  />\n  <path\n    d=\"M13.3989 17.0607V13.1667H14.3449V16.2412H15.8519V17.0607H13.3989Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n\nexport const NotionIcon = html`<svg\n  width=\"16\"\n  height=\"16\"\n  viewBox=\"0 0 16 16\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M3.22321 3.16561C3.69638 3.54965 3.87301 3.52049 4.76102 3.46134L13.1323 2.959C13.3106 2.959 13.1623 2.78075 13.1032 2.75158L11.7128 1.74689C11.4462 1.54028 11.0914 1.30289 10.4116 1.36203L2.30522 1.9535C2.01029 1.98267 1.95114 2.13094 2.06863 2.24924L3.22321 3.16561ZM3.72555 5.11664V13.9238C3.72555 14.3978 3.96214 14.5745 4.49527 14.5453L13.6946 14.013C14.2269 13.9838 14.2861 13.6581 14.2861 13.274V4.52517C14.2861 4.14112 14.1386 3.9337 13.8129 3.96368L4.19872 4.52517C3.84384 4.55434 3.72555 4.73178 3.72555 5.11664ZM12.8082 5.589C12.8666 5.85476 12.8082 6.12133 12.5409 6.1513L12.0977 6.23962V12.7417C11.7128 12.9491 11.3579 13.0674 11.0622 13.0674C10.589 13.0674 10.4707 12.9192 10.1158 12.476L7.21602 7.92409V12.3285L8.13401 12.5351C8.13401 12.5351 8.13401 13.0674 7.39346 13.0674L5.35249 13.1857C5.29334 13.0674 5.35249 12.7725 5.55991 12.7125L6.09223 12.5651V6.74196L5.35249 6.68282C5.29334 6.41625 5.44162 6.0322 5.85564 6.00222L8.04489 5.85557L11.0622 10.4658V6.38789L10.2925 6.29958C10.2341 5.97386 10.4707 5.73809 10.7664 5.70811L12.8082 5.58981V5.589ZM1.62462 1.15542L10.0559 0.534789C11.0905 0.445664 11.3571 0.505621 12.0085 0.977985L14.6993 2.86987C15.1433 3.19477 15.2916 3.28309 15.2916 3.63797V14.013C15.2916 14.6636 15.055 15.0476 14.2269 15.1068L4.43531 15.6982C3.81386 15.7274 3.51813 15.6391 3.19242 15.2251L1.21059 12.6534C0.855714 12.1802 0.708252 11.8262 0.708252 11.4113V2.19009C0.708252 1.65777 0.944029 1.21457 1.62462 1.15542Z\"\n    fill=\"black\"\n  />\n</svg>`;\n\nexport const NewIcon = html`<svg\n  width=\"16\"\n  height=\"16\"\n  viewBox=\"0 0 16 16\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M13.1851 0.708313C13.5303 0.708313 13.8101 0.988135 13.8101 1.33331V2.18979H14.6666C15.0118 2.18979 15.2916 2.46962 15.2916 2.81479C15.2916 3.15997 15.0118 3.43979 14.6666 3.43979H13.8101V4.29628C13.8101 4.64145 13.5303 4.92128 13.1851 4.92128C12.8399 4.92128 12.5601 4.64145 12.5601 4.29628V3.43979H11.7036C11.3584 3.43979 11.0786 3.15997 11.0786 2.81479C11.0786 2.46962 11.3584 2.18979 11.7036 2.18979H12.5601V1.33331C12.5601 0.988135 12.8399 0.708313 13.1851 0.708313ZM6.51844 2.18979C6.77511 2.18979 7.00568 2.34672 7.09985 2.58549L8.18874 5.34639C8.3394 5.7284 8.37968 5.81859 8.43081 5.88998C8.48542 5.96623 8.55218 6.033 8.62844 6.08761C8.69983 6.13874 8.79002 6.17902 9.17203 6.32968L11.9329 7.41856C12.1717 7.51273 12.3286 7.74331 12.3286 7.99998C12.3286 8.25665 12.1717 8.48723 11.9329 8.58139L9.17203 9.67028C8.79002 9.82094 8.69983 9.86122 8.62844 9.91235C8.55218 9.96696 8.48542 10.0337 8.43081 10.11C8.37968 10.1814 8.3394 10.2716 8.18874 10.6536L7.09985 13.4145C7.00568 13.6532 6.77511 13.8102 6.51844 13.8102C6.26177 13.8102 6.03119 13.6532 5.93702 13.4145L4.84814 10.6536C4.69748 10.2716 4.6572 10.1814 4.60607 10.11C4.55146 10.0337 4.48469 9.96696 4.40844 9.91235C4.33705 9.86122 4.24685 9.82094 3.86484 9.67028L1.10395 8.58139C0.865175 8.48723 0.708252 8.25665 0.708252 7.99998C0.708252 7.74331 0.865175 7.51273 1.10395 7.41856L3.86484 6.32968C4.24685 6.17902 4.33705 6.13874 4.40844 6.08761C4.48469 6.033 4.55146 5.96623 4.60607 5.88998C4.6572 5.81859 4.69748 5.7284 4.84814 5.34639L5.93702 2.58549C6.03119 2.34672 6.26177 2.18979 6.51844 2.18979ZM6.51844 4.5183L6.01097 5.805C6.00357 5.82375 5.99627 5.8423 5.98905 5.86065C5.87158 6.15916 5.77495 6.40469 5.62232 6.61781C5.48801 6.80535 5.3238 6.96955 5.13626 7.10386C4.92315 7.25649 4.67762 7.35312 4.3791 7.4706C4.36076 7.47782 4.34221 7.48512 4.32346 7.49251L3.03676 7.99998L4.32346 8.50745C4.34221 8.51484 4.36075 8.52214 4.3791 8.52936C4.67762 8.64684 4.92315 8.74347 5.13626 8.8961C5.3238 9.03041 5.48801 9.19461 5.62232 9.38215C5.77495 9.59527 5.87157 9.84079 5.98905 10.1393C5.99627 10.1577 6.00357 10.1762 6.01097 10.195L6.51844 11.4817L7.0259 10.195C7.0333 10.1762 7.0406 10.1577 7.04782 10.1393C7.1653 9.8408 7.26193 9.59527 7.41455 9.38215C7.54887 9.19461 7.71307 9.03041 7.90061 8.8961C8.11373 8.74347 8.35926 8.64684 8.65777 8.52936C8.67612 8.52214 8.69467 8.51484 8.71342 8.50745L10.0001 7.99998L8.71342 7.49251C8.69467 7.48512 8.67612 7.47782 8.65777 7.4706C8.35926 7.35312 8.11373 7.25649 7.90061 7.10386C7.71307 6.96955 7.54887 6.80535 7.41455 6.61781C7.26193 6.40469 7.1653 6.15916 7.04782 5.86065C7.0406 5.8423 7.0333 5.82375 7.0259 5.805L6.51844 4.5183ZM13.1851 11.0787C13.5303 11.0787 13.8101 11.3585 13.8101 11.7037V12.5602H14.6666C15.0118 12.5602 15.2916 12.84 15.2916 13.1852C15.2916 13.5303 15.0118 13.8102 14.6666 13.8102H13.8101V14.6666C13.8101 15.0118 13.5303 15.2916 13.1851 15.2916C12.8399 15.2916 12.5601 15.0118 12.5601 14.6666V13.8102H11.7036C11.3584 13.8102 11.0786 13.5303 11.0786 13.1852C11.0786 12.84 11.3584 12.5602 11.7036 12.5602H12.5601V11.7037C12.5601 11.3585 12.8399 11.0787 13.1851 11.0787Z\"\n    fill=\"#A9A9AD\"\n  />\n</svg>`;\n\nexport const OpenInNewIcon = html`<svg\n  width=\"12\"\n  height=\"12\"\n  viewBox=\"0 0 12 12\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.83342 0.666687C7.83342 0.390545 8.05727 0.166687 8.33342 0.166687H11.3334C11.6096 0.166687 11.8334 0.390545 11.8334 0.666687V3.66669C11.8334 3.94283 11.6096 4.16669 11.3334 4.16669C11.0573 4.16669 10.8334 3.94283 10.8334 3.66669V1.87379L6.35364 6.35357C6.15837 6.54884 5.84179 6.54884 5.64653 6.35357C5.45127 6.15831 5.45127 5.84173 5.64653 5.64647L10.1263 1.16669H8.33342C8.05727 1.16669 7.83342 0.942829 7.83342 0.666687ZM2.77979 0.833353L5.66675 0.833354C5.94289 0.833354 6.16675 1.05721 6.16675 1.33335C6.16675 1.6095 5.94289 1.83335 5.66675 1.83335H2.80008C2.41846 1.83335 2.16232 1.83374 1.96507 1.84986C1.77365 1.8655 1.68213 1.89342 1.62176 1.92418C1.46495 2.00408 1.33747 2.13156 1.25758 2.28836C1.22681 2.34874 1.19889 2.44026 1.18325 2.63167C1.16714 2.82892 1.16675 3.08507 1.16675 3.46669V9.20002C1.16675 9.58164 1.16714 9.83778 1.18325 10.035C1.19889 10.2264 1.22681 10.318 1.25758 10.3783C1.33747 10.5351 1.46496 10.6626 1.62176 10.7425C1.68213 10.7733 1.77365 10.8012 1.96507 10.8168C2.16232 10.833 2.41846 10.8334 2.80008 10.8334H8.53342C8.91503 10.8334 9.17118 10.833 9.36843 10.8168C9.55985 10.8012 9.65137 10.7733 9.71174 10.7425C9.86854 10.6626 9.99603 10.5351 10.0759 10.3783C10.1067 10.318 10.1346 10.2264 10.1502 10.035C10.1664 9.83778 10.1667 9.58164 10.1667 9.20002V6.33335C10.1667 6.05721 10.3906 5.83335 10.6667 5.83335C10.9429 5.83335 11.1667 6.05721 11.1667 6.33335V9.22032C11.1668 9.57642 11.1668 9.87365 11.1469 10.1165C11.1262 10.3697 11.0815 10.6075 10.9669 10.8323C10.7912 11.1773 10.5107 11.4578 10.1657 11.6335C9.94089 11.7481 9.70312 11.7928 9.44986 11.8135C9.20704 11.8334 8.90981 11.8334 8.55372 11.8334H2.77978C2.42368 11.8334 2.12645 11.8334 1.88364 11.8135C1.63038 11.7928 1.39261 11.7481 1.16777 11.6335C0.822802 11.4578 0.542338 11.1773 0.36657 10.8323C0.252007 10.6075 0.207267 10.3697 0.186575 10.1165C0.166735 9.87364 0.166741 9.57641 0.166748 9.22031V3.4464C0.166741 3.0903 0.166735 2.79306 0.186575 2.55024C0.207267 2.29698 0.252007 2.05921 0.36657 1.83437C0.542338 1.48941 0.822802 1.20894 1.16777 1.03317C1.39261 0.918612 1.63038 0.873872 1.88364 0.85318C2.12646 0.83334 2.42369 0.833346 2.77979 0.833353Z\"\n    fill=\"#5872FB\"\n  />\n</svg>`;\n\nexport const HelpIcon = html`<svg\n  width=\"18\"\n  height=\"18\"\n  viewBox=\"0 0 18 18\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M9 2.125C5.20304 2.125 2.125 5.20304 2.125 9C2.125 12.797 5.20304 15.875 9 15.875C12.797 15.875 15.875 12.797 15.875 9C15.875 5.20304 12.797 2.125 9 2.125ZM0.875 9C0.875 4.51269 4.51269 0.875 9 0.875C13.4873 0.875 17.125 4.51269 17.125 9C17.125 13.4873 13.4873 17.125 9 17.125C4.51269 17.125 0.875 13.4873 0.875 9ZM8.97249 6.5C8.48797 6.5 8.07928 6.83137 7.96361 7.28079C7.87757 7.61507 7.53683 7.81631 7.20255 7.73027C6.86826 7.64423 6.66702 7.3035 6.75306 6.96921C7.00742 5.98094 7.90381 5.25 8.97249 5.25C10.2381 5.25 11.2642 6.27601 11.2642 7.54167C11.2642 8.23885 10.928 8.70316 10.5524 9.06572C10.3978 9.21488 10.2216 9.36095 10.0565 9.49784C10.0321 9.51805 10.008 9.53806 9.98417 9.55785C9.79133 9.71827 9.60144 9.87995 9.41445 10.0669C9.17037 10.311 8.77464 10.311 8.53057 10.0669C8.28649 9.82286 8.28649 9.42714 8.53057 9.18306C8.76025 8.95338 8.98703 8.76138 9.1848 8.59686C9.21087 8.57517 9.23619 8.55416 9.26081 8.53373C9.43034 8.39303 9.5663 8.28019 9.6843 8.1663C9.93364 7.92565 10.0142 7.76496 10.0142 7.54167C10.0142 6.96637 9.54779 6.5 8.97249 6.5ZM8.98084 12.75H8.97251C8.62733 12.75 8.34751 12.4702 8.34751 12.125C8.34751 11.7798 8.62733 11.5 8.97251 11.5H8.98084C9.32602 11.5 9.60584 11.7798 9.60584 12.125C9.60584 12.4702 9.32602 12.75 8.98084 12.75Z\"\n    fill=\"#77757D\"\n  />\n</svg>`;\n", "import { html, type TemplateResult } from 'lit';\n\nexport function fontIcon(svg: TemplateResult<2>, baseSize = 20) {\n  // assume 1em = 16px\n  const size = baseSize / 16;\n  // Control Icons with Font Size\n  // Set the width and height to be 1em, which will be the font-size of its parent element\n  // See https://css-tricks.com/control-icons-with-font-size/\n  const fontIconStyle = `\n    width: ${size}em;\n    height: ${size}em;\n    vertical-align: middle;\n    font-size: inherit;\n    margin-bottom: 0.1em;\n  `;\n\n  return html`<svg\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    style=${fontIconStyle}\n  >\n    ${svg}\n  </svg>`;\n}\n\nexport function icon(svg: TemplateResult<2>, size = 24) {\n  return html`<svg\n    width=\"${size}\"\n    height=\"${size}\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    ${svg}\n  </svg>`;\n}\n", "import { html, svg } from 'lit';\n\nimport { fontIcon, icon } from './utils.js';\n\n// Paragraph icons\n\nconst TextSVG = svg`<path\n  fill-rule=\"evenodd\"\n  clip-rule=\"evenodd\"\n  d=\"M3.25 4C3.25 3.58579 3.58579 3.25 4 3.25H20C20.4142 3.25 20.75 3.58579 20.75 4V6.66667C20.75 7.08088 20.4142 7.41667 20 7.41667C19.5858 7.41667 19.25 7.08088 19.25 6.66667V4.75H12.75V19.25H16C16.4142 19.25 16.75 19.5858 16.75 20C16.75 20.4142 16.4142 20.75 16 20.75H8C7.58579 20.75 7.25 20.4142 7.25 20C7.25 19.5858 7.58579 19.25 8 19.25H11.25V4.75H4.75V6.66667C4.75 7.08088 4.41421 7.41667 4 7.41667C3.58579 7.41667 3.25 7.08088 3.25 6.66667V4Z\"\n/>`;\n\nexport const TextIcon = icon(TextSVG, 20);\n\n/**\n * When icons with same shape with have multiple sizes, mark them as Small, _, Large size\n * For example: TextIconSmall, TextIcon, TextIconLarge\n */\nexport const TextIconLarge = icon(TextSVG);\n\nexport const H1Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.7499 6.81081C16.7231 6.83762 16.6947 6.86599 16.6646 6.89602L14.5303 9.03033C14.2374 9.32322 13.7626 9.32322 13.4697 9.03033C13.1768 8.73744 13.1768 8.26256 13.4697 7.96967L15.604 5.83536C15.6113 5.82808 15.6185 5.82081 15.6258 5.81357C15.8211 5.61819 16.0018 5.43743 16.1578 5.30688C16.3005 5.18739 16.5575 4.98807 16.9019 4.96096C17.3008 4.92957 17.6906 5.09103 17.9505 5.3953C18.1749 5.65804 18.2157 5.98068 18.2321 6.16609C18.25 6.36867 18.25 6.62428 18.25 6.90057C18.25 6.91081 18.25 6.92108 18.25 6.93137V18.25H21C21.4142 18.25 21.75 18.5858 21.75 19C21.75 19.4142 21.4142 19.75 21 19.75H14C13.5858 19.75 13.25 19.4142 13.25 19C13.25 18.5858 13.5858 18.25 14 18.25H16.75V6.93137C16.75 6.88891 16.75 6.84878 16.7499 6.81081Z\"\n  />\n</svg>`;\n\nexport const H2Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.9057 6.75035C16.3267 6.802 15.7718 7.01946 15.3049 7.3801C14.8318 7.74548 14.4682 8.24309 14.2591 8.81605C14.1172 9.20517 13.6866 9.40552 13.2975 9.26355C12.9084 9.12157 12.708 8.69103 12.85 8.30191C13.155 7.46589 13.6877 6.73376 14.388 6.19294C15.0884 5.65199 15.927 5.32534 16.8055 5.25346L16.8277 5.25164L16.8499 5.25115C17.8967 5.22771 18.9191 5.56392 19.7537 6.20306C20.5868 6.84102 21.1843 7.74329 21.4548 8.76409C21.7891 9.97619 21.5425 11.1146 21.1354 12.0147C20.7302 12.9106 20.1448 13.6215 19.7055 14.0279L19.6986 14.0343L19.6916 14.0405C18.9491 14.6937 18.1744 15.3076 17.3705 15.88C16.4743 16.5815 15.6527 17.3759 14.9186 18.25H21.2C21.6142 18.25 21.95 18.5858 21.95 19C21.95 19.4142 21.6142 19.75 21.2 19.75H13.5917C12.9084 19.75 12.4943 18.9759 12.9002 18.4076C13.9053 16.9999 15.1041 15.7469 16.4602 14.6877L16.4735 14.6773L16.4872 14.6675C17.2512 14.1242 17.9876 13.5412 18.6934 12.9208C19.0046 12.631 19.4584 12.0827 19.7687 11.3966C20.0787 10.7111 20.2239 9.93968 20.008 9.16007L20.0056 9.15134C19.8193 8.44582 19.4083 7.82782 18.8418 7.394C18.2815 6.965 17.6006 6.73982 16.9057 6.75035Z\"\n  />\n</svg>`;\n\nexport const H3Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M17.3196 6.75154C16.8178 6.78189 16.3346 6.95347 15.926 7.24657C15.5153 7.54113 15.1968 7.94629 15.0075 8.41487C14.8523 8.79893 14.4152 8.98449 14.0312 8.82933C13.6471 8.67418 13.4616 8.23706 13.6167 7.853C13.9125 7.1209 14.4101 6.48789 15.0517 6.02769C15.6933 5.56749 16.4525 5.29903 17.2408 5.25359L17.2482 5.25316L17.2557 5.25288C18.2533 5.21525 19.2296 5.54803 19.9965 6.18714C20.7634 6.82626 21.2668 7.72652 21.4097 8.71457L21.4143 8.74618L21.4161 8.77807C21.4603 9.53257 21.2968 10.2847 20.9433 10.9528C20.6919 11.4279 20.3514 11.8475 19.9423 12.1898C20.4639 12.4619 20.9143 12.8568 21.2521 13.4177C21.8984 14.4739 21.8675 15.759 21.4573 16.838C21.0461 17.9197 20.2127 18.9107 19.0815 19.378L19.0786 19.3792C18.0333 19.8058 16.8745 19.8662 15.7905 19.5506C14.7065 19.2351 13.7612 18.5621 13.1082 17.6411C12.8686 17.3032 12.9483 16.8351 13.2862 16.5955C13.6241 16.3559 14.0923 16.4356 14.3318 16.7735C14.789 17.4183 15.4508 17.8895 16.2098 18.1104C16.9681 18.3312 17.7789 18.2891 18.5103 17.991C19.1943 17.7079 19.7645 17.0696 20.0552 16.305C20.3467 15.5381 20.3161 14.7606 19.9717 14.199L19.9682 14.1933C19.5426 13.4852 18.7016 13.1471 17.2275 13.1471C17.2201 13.1471 17.2121 13.1471 17.2038 13.1471C17.1523 13.1472 17.0876 13.1473 17.0508 13.1451C17.0439 13.1447 17.0076 13.1426 16.9647 13.1352L16.9637 13.135C16.9524 13.1332 16.865 13.1191 16.7673 13.0722L16.7655 13.0714C16.7295 13.0542 16.547 12.967 16.4309 12.7512C16.3831 12.6425 16.3413 12.3989 16.3519 12.2701C16.3793 12.1601 16.4656 11.9821 16.5164 11.914C16.6196 11.7908 16.7354 11.7347 16.7637 11.721C16.8085 11.6993 16.8465 11.6864 16.8651 11.6805C16.9035 11.6683 16.9346 11.662 16.9457 11.6597C16.9718 11.6545 16.993 11.6517 16.9996 11.6509C17.024 11.6477 17.0535 11.645 17.0677 11.6438L17.0706 11.6435C17.0761 11.643 17.082 11.6425 17.0882 11.6419C17.1709 11.6346 17.3161 11.6217 17.4965 11.597C17.9218 11.5387 18.3862 11.4336 18.6392 11.2811L18.6415 11.2798C19.0547 11.0326 19.3923 10.6769 19.6175 10.2513C19.8377 9.83509 19.9422 9.36767 19.9204 8.89772C19.8245 8.28862 19.5105 7.73468 19.0362 7.33947C18.5557 6.93905 17.9446 6.7298 17.3196 6.75154Z\"\n  />\n</svg>`;\n\nexport const H4Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M18.1928 5.85878C18.6593 5.15904 19.75 5.48927 19.75 6.33028V14.25H21C21.4142 14.25 21.75 14.5858 21.75 15C21.75 15.4142 21.4142 15.75 21 15.75H19.75V19C19.75 19.4142 19.4142 19.75 19 19.75C18.5858 19.75 18.25 19.4142 18.25 19V15.75H13.1869C12.508 15.75 12.103 14.9934 12.4796 14.4285L18.1928 5.85878ZM18.25 14.25V8.47708L14.4014 14.25H18.25Z\"\n  />\n</svg>`;\n\nexport const H5Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M13.9558 5.94948C14.0287 5.5446 14.381 5.25 14.7924 5.25H20.892C21.3062 5.25 21.642 5.58579 21.642 6C21.642 6.41421 21.3062 6.75 20.892 6.75H15.3359L14.677 10.4122C14.7083 10.3958 14.7397 10.3796 14.7713 10.3638C15.4506 10.0234 16.193 9.8296 16.9512 9.79502L16.9745 9.79396L16.9978 9.79435C18.0629 9.81203 19.0907 10.1881 19.9189 10.8615C20.743 11.5316 21.3224 12.4578 21.5681 13.4941C21.8521 14.5302 21.8025 15.6309 21.4262 16.6371C21.048 17.6482 20.3593 18.512 19.4591 19.1014L19.4463 19.1098L19.4332 19.1176C17.1285 20.4957 13.8824 19.5672 12.3514 16.9306C12.1434 16.5724 12.2652 16.1134 12.6234 15.9054C12.9816 15.6974 13.4406 15.8192 13.6486 16.1774C14.8123 18.1815 17.1546 18.7212 18.6504 17.838C19.2754 17.4248 19.756 16.8207 20.0213 16.1116C20.2883 15.3975 20.3225 14.6155 20.1186 13.8802L20.1145 13.8654L20.1111 13.8506C19.9425 13.1297 19.5413 12.4877 18.9726 12.0253C18.41 11.5679 17.7152 11.3117 16.996 11.2946C16.4565 11.3225 15.928 11.462 15.4433 11.7049C15.047 11.9035 14.6868 12.1677 14.3774 12.4863C14.075 12.7978 13.6591 12.7916 13.385 12.6587C13.1072 12.524 12.8336 12.1871 12.9141 11.7396L13.9558 5.94948Z\"\n  />\n</svg>`;\n\nexport const H6Icon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M15.8428 6.08001C16.5038 5.78482 17.221 5.63827 17.9443 5.65076L17.9528 5.65091L17.9612 5.65124C18.6652 5.67922 19.3558 5.85344 19.9894 6.16278C20.6596 6.48991 21.0427 6.86843 21.4674 7.36832C21.7355 7.68402 21.697 8.15733 21.3813 8.42549C21.0656 8.69365 20.5923 8.65511 20.3241 8.33942C19.9679 7.92001 19.7421 7.71121 19.3314 7.51075C18.8869 7.29373 18.4031 7.17116 17.91 7.1504C17.4093 7.14298 16.9127 7.245 16.4544 7.44965C15.9982 7.65337 15.5906 7.95407 15.2596 8.3315C14.8157 8.89075 14.4914 9.53705 14.3076 10.2297C14.1125 10.9831 13.997 11.753 13.9617 12.5269C14.7663 11.5406 15.9873 10.9103 17.3576 10.9103C19.7888 10.9103 21.75 12.8945 21.75 15.3302C21.75 17.7659 19.7888 19.75 17.3576 19.75C15.6443 19.75 14.1643 18.7645 13.4398 17.3301C13.0351 16.5834 12.7496 15.7772 12.5937 14.9411L12.5912 14.9278L12.5892 14.9144C12.3372 13.226 12.428 11.5036 12.856 9.85144L12.8571 9.84743C13.0954 8.94816 13.5178 8.10867 14.0975 7.38296L14.1072 7.37079L14.1174 7.35903C14.5931 6.81178 15.1818 6.37518 15.8428 6.08001ZM14.821 16.7346C15.3136 17.6393 16.2672 18.25 17.3576 18.25C18.9497 18.25 20.25 16.9481 20.25 15.3302C20.25 13.7122 18.9497 12.4103 17.3576 12.4103C15.7655 12.4103 14.4652 13.7122 14.4652 15.3302C14.4652 15.7995 14.5747 16.2423 14.7689 16.6344C14.7763 16.6478 14.7836 16.6612 14.791 16.6746C14.802 16.6943 14.812 16.7143 14.821 16.7346Z\"\n  />\n</svg>`;\n\nconst BulletedListSVG = svg`<path\n  fill-rule=\"evenodd\"\n  clip-rule=\"evenodd\"\n  d=\"M3 6.5C3 5.83266 3.54099 5.29167 4.20833 5.29167C4.87568 5.29167 5.41667 5.83265 5.41667 6.5C5.41667 7.16734 4.87568 7.70833 4.20833 7.70833C3.54099 7.70833 3 7.16734 3 6.5ZM7.58333 6.50057C7.58336 6.08636 7.91916 5.75059 8.33337 5.75061L20.25 5.75127C20.6642 5.7513 21 6.0871 21 6.50131C21 6.91553 20.6641 7.2513 20.2499 7.25127L8.33329 7.25061C7.91908 7.25059 7.58331 6.91478 7.58333 6.50057ZM3 12C3 11.3327 3.54099 10.7917 4.20833 10.7917C4.87568 10.7917 5.41667 11.3327 5.41667 12C5.41667 12.6673 4.87568 13.2083 4.20833 13.2083C3.54099 13.2083 3 12.6673 3 12ZM7.58333 12.0006C7.58336 11.5864 7.91916 11.2506 8.33338 11.2507L20.2501 11.2514C20.6643 11.2514 21.0001 11.5872 21 12.0014C21 12.4156 20.6642 12.7514 20.25 12.7514L8.33329 12.7507C7.91907 12.7506 7.58331 12.4148 7.58333 12.0006ZM3 17.5C3 16.8327 3.54099 16.2917 4.20833 16.2917C4.87568 16.2917 5.41667 16.8327 5.41667 17.5C5.41667 18.1673 4.87568 18.7083 4.20833 18.7083C3.54099 18.7083 3 18.1673 3 17.5ZM7.58333 17.5006C7.58336 17.0864 7.91916 16.7506 8.33338 16.7507L20.2501 16.7514C20.6643 16.7514 21 17.0872 21 17.5014C21 17.9156 20.6642 18.2514 20.25 18.2514L8.33329 18.2507C7.91907 18.2506 7.58331 17.9148 7.58333 17.5006Z\"\n/>`;\n\nexport const BulletedListIcon = icon(BulletedListSVG, 20);\n\nexport const BulletedListIconLarge = icon(BulletedListSVG, 24);\n\nexport const NumberedListIconLarge = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.97755 4.02864C6.19866 4.16529 6.33325 4.40669 6.33325 4.66663V9.41663H7.41659C7.8308 9.41663 8.16659 9.75241 8.16659 10.1666C8.16659 10.5808 7.8308 10.9166 7.41659 10.9166H3.74992C3.33571 10.9166 2.99992 10.5808 2.99992 10.1666C2.99992 9.75241 3.33571 9.41663 3.74992 9.41663H4.83325V5.88015L4.08533 6.25411C3.71485 6.43936 3.26434 6.28919 3.0791 5.9187C2.89386 5.54822 3.04403 5.09772 3.41451 4.91247L5.24784 3.99581C5.48033 3.87956 5.75644 3.89198 5.97755 4.02864ZM9.41659 6.49991C9.41661 6.0857 9.75242 5.74994 10.1666 5.74996L20.25 5.75057C20.6642 5.75059 20.9999 6.0864 20.9999 6.50061C20.9999 6.91483 20.6641 7.25059 20.2499 7.25057L10.1665 7.24996C9.75233 7.24994 9.41656 6.91413 9.41659 6.49991ZM9.41659 11.9999C9.41661 11.5857 9.75242 11.2499 10.1666 11.25L20.25 11.2506C20.6642 11.2506 20.9999 11.5864 20.9999 12.0006C20.9999 12.4148 20.6641 12.7506 20.2499 12.7506L10.1665 12.75C9.75233 12.7499 9.41656 12.4141 9.41659 11.9999ZM5.58325 14.5833C5.07949 14.5833 4.65431 14.9278 4.53401 15.3952C4.43076 15.7964 4.02187 16.0379 3.62073 15.9346C3.21959 15.8314 2.9781 15.4225 3.08135 15.0213C3.36809 13.9073 4.3785 13.0833 5.58325 13.0833H5.84022C7.12504 13.0833 8.16659 14.1248 8.16659 15.4097C8.16659 16.0805 7.877 16.7187 7.37215 17.1604L5.74601 18.5833H7.41659C7.8308 18.5833 8.16659 18.9191 8.16659 19.3333C8.16659 19.7475 7.8308 20.0833 7.41659 20.0833H3.74992C3.43746 20.0833 3.15774 19.8896 3.04784 19.5971C2.93794 19.3046 3.02089 18.9746 3.25604 18.7689L6.38439 16.0316C6.56372 15.8746 6.66659 15.6479 6.66659 15.4097C6.66659 14.9533 6.29661 14.5833 5.84022 14.5833H5.58325ZM9.41659 17.4999C9.41661 17.0857 9.75242 16.7499 10.1666 16.75L20.25 16.7506C20.6642 16.7506 20.9999 17.0864 20.9999 17.5006C20.9999 17.9148 20.6641 18.2506 20.2499 18.2506L10.1665 18.25C9.75233 18.2499 9.41656 17.9141 9.41659 17.4999Z\"\n  />\n</svg>`;\n\nexport const NumberedListIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.97763 4.02868C6.19874 4.16533 6.33333 4.40673 6.33333 4.66667V9.41667H7.41666C7.83088 9.41667 8.16666 9.75245 8.16666 10.1667C8.16666 10.5809 7.83088 10.9167 7.41666 10.9167H3.75C3.33578 10.9167 3 10.5809 3 10.1667C3 9.75245 3.33578 9.41667 3.75 9.41667H4.83333V5.88019L4.08541 6.25415C3.71492 6.4394 3.26442 6.28923 3.07918 5.91874C2.89393 5.54826 3.0441 5.09776 3.41459 4.91251L5.24792 3.99585C5.48041 3.8796 5.75652 3.89202 5.97763 4.02868ZM9.41666 6.49995C9.41669 6.08574 9.7525 5.74998 10.1667 5.75L20.25 5.75061C20.6643 5.75063 21 6.08644 21 6.50065C21 6.91487 20.6642 7.25063 20.25 7.25061L10.1666 7.25C9.75241 7.24998 9.41664 6.91417 9.41666 6.49995ZM9.41666 12C9.41669 11.5857 9.7525 11.25 10.1667 11.25L20.25 11.2506C20.6643 11.2506 21 11.5864 21 12.0007C21 12.4149 20.6642 12.7506 20.25 12.7506L10.1666 12.75C9.75241 12.75 9.41664 12.4142 9.41666 12ZM5.58333 14.5833C5.07957 14.5833 4.65439 14.9279 4.53408 15.3953C4.43084 15.7964 4.02195 16.0379 3.62081 15.9347C3.21967 15.8314 2.97818 15.4225 3.08143 15.0214C3.36816 13.9073 4.37857 13.0833 5.58333 13.0833H5.8403C7.12512 13.0833 8.16666 14.1249 8.16666 15.4097C8.16666 16.0805 7.87708 16.7187 7.37222 17.1605L5.74608 18.5833H7.41666C7.83088 18.5833 8.16666 18.9191 8.16666 19.3333C8.16666 19.7475 7.83088 20.0833 7.41666 20.0833H3.75C3.43754 20.0833 3.15782 19.8896 3.04792 19.5971C2.93802 19.3046 3.02097 18.9747 3.25612 18.7689L6.38446 16.0316C6.5638 15.8747 6.66666 15.648 6.66666 15.4097C6.66666 14.9533 6.29669 14.5833 5.8403 14.5833H5.58333ZM9.41666 17.5C9.41669 17.0857 9.7525 16.75 10.1667 16.75L20.25 16.7506C20.6643 16.7506 21 17.0864 21 17.5007C21 17.9149 20.6642 18.2506 20.25 18.2506L10.1666 18.25C9.75241 18.25 9.41664 17.9142 9.41666 17.5Z\"\n  />\n</svg>`;\n\nexport const DatabaseTableViewIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.1728 4.25H17.8272C18.3641 4.24999 18.8067 4.24999 19.1671 4.27575C19.5398 4.3024 19.8854 4.35951 20.2134 4.50573C20.721 4.73207 21.1527 5.10167 21.4301 5.57811C21.6157 5.89681 21.6871 6.23393 21.7195 6.58088C21.75 6.90782 21.75 7.30509 21.75 7.76685V16.2331C21.75 16.6949 21.75 17.0922 21.7195 17.4191C21.6871 17.7661 21.6157 18.1032 21.4301 18.4219C21.1527 18.8983 20.721 19.2679 20.2134 19.4943C19.8854 19.6405 19.5398 19.6976 19.1671 19.7242C18.8067 19.75 18.3641 19.75 17.8272 19.75H6.1728C5.63587 19.75 5.19332 19.75 4.83292 19.7242C4.46022 19.6976 4.1146 19.6405 3.78662 19.4943C3.27896 19.2679 2.8473 18.8983 2.56987 18.4219C2.38428 18.1032 2.31289 17.7661 2.2805 17.4191C2.24997 17.0922 2.24998 16.6949 2.25 16.2331V7.76689C2.24998 7.30511 2.24997 6.90783 2.2805 6.58088C2.31289 6.23393 2.38428 5.89681 2.56987 5.57811C2.8473 5.10167 3.27896 4.73207 3.78662 4.50573C4.1146 4.35951 4.46022 4.3024 4.83292 4.27575C5.19332 4.24999 5.63586 4.24999 6.1728 4.25ZM3.75 10.125V16.2C3.75 16.7042 3.75076 17.0308 3.774 17.2797C3.7961 17.5164 3.83371 17.6114 3.86611 17.6671C3.97217 17.8492 4.15244 18.015 4.39742 18.1243C4.49727 18.1688 4.64558 18.207 4.93989 18.2281C5.24043 18.2496 5.62911 18.25 6.2 18.25H7.25V10.125H3.75ZM3.75 8.625V7.8C3.75 7.29583 3.75076 6.96922 3.774 6.72033C3.7961 6.48364 3.83371 6.38857 3.86611 6.33293C3.97217 6.1508 4.15243 5.98497 4.39742 5.87574C4.49727 5.83123 4.64558 5.79297 4.93989 5.77193C5.24043 5.75045 5.62911 5.75 6.2 5.75H17.8C18.3709 5.75 18.7596 5.75045 19.0601 5.77193C19.3544 5.79297 19.5027 5.83123 19.6026 5.87574C19.8476 5.98497 20.0278 6.1508 20.1339 6.33293C20.1663 6.38857 20.2039 6.48364 20.226 6.72033C20.2492 6.96922 20.25 7.29583 20.25 7.8V8.625H3.75ZM8.75 10.125V18.25H17.8C18.3709 18.25 18.7596 18.2496 19.0601 18.2281C19.3544 18.207 19.5027 18.1688 19.6026 18.1243C19.8476 18.015 20.0278 17.8492 20.1339 17.6671C20.1663 17.6114 20.2039 17.5164 20.226 17.2797C20.2492 17.0308 20.25 16.7042 20.25 16.2V10.125H8.75Z\"\n  />\n</svg>`;\n\nexport const DatabaseKanbanViewIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.25 8.4C5.25 7.76487 5.76487 7.25 6.4 7.25H10.1C10.7351 7.25 11.25 7.76487 11.25 8.4V15.6C11.25 16.2351 10.7351 16.75 10.1 16.75H6.4C5.76487 16.75 5.25 16.2351 5.25 15.6V8.4ZM6.75 8.75V15.25H9.75V8.75H6.75Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12.75 8.4C12.75 7.76487 13.2649 7.25 13.9 7.25H17.6C18.2351 7.25 18.75 7.76487 18.75 8.4V13.6C18.75 14.2351 18.2351 14.75 17.6 14.75H13.9C13.2649 14.75 12.75 14.2351 12.75 13.6V8.4ZM14.25 8.75V13.25H17.25V8.75H14.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.25 7C2.25 5.48122 3.48122 4.25 5 4.25H19C20.5188 4.25 21.75 5.48122 21.75 7V17C21.75 18.5188 20.5188 19.75 19 19.75H5C3.48122 19.75 2.25 18.5188 2.25 17V7ZM5 5.75C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.6904 4.30964 18.25 5 18.25H19C19.6904 18.25 20.25 17.6904 20.25 17V7C20.25 6.30964 19.6904 5.75 19 5.75H5Z\"\n  />\n</svg>`;\n\nexport const TodoIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 6.28571C3.25 4.60914 4.60914 3.25 6.28571 3.25H17.7143C19.3909 3.25 20.75 4.60914 20.75 6.28571V17.7143C20.75 19.3909 19.3909 20.75 17.7143 20.75H6.28571C4.60914 20.75 3.25 19.3909 3.25 17.7143V6.28571ZM6.28571 4.75C5.43756 4.75 4.75 5.43756 4.75 6.28571V17.7143C4.75 18.5624 5.43756 19.25 6.28571 19.25H17.7143C18.5624 19.25 19.25 18.5624 19.25 17.7143V6.28571C19.25 5.43756 18.5624 4.75 17.7143 4.75H6.28571Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.5068 8.44713C16.8121 8.72703 16.8328 9.20145 16.5529 9.50679L11.0529 15.5068C10.9146 15.6576 10.7208 15.7454 10.5163 15.7498C10.3118 15.7543 10.1143 15.675 9.96967 15.5303L7.46967 13.0303C7.17678 12.7374 7.17678 12.2626 7.46967 11.9697C7.76256 11.6768 8.23744 11.6768 8.53033 11.9697L10.4764 13.9158L15.4471 8.49321C15.727 8.18787 16.2015 8.16724 16.5068 8.44713Z\"\n  />\n</svg>`;\n\nexport const CodeBlockIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.16957 4.25H17.8304C18.3646 4.24999 18.8104 4.24998 19.1747 4.27974C19.5546 4.31078 19.9112 4.37789 20.2485 4.54973C20.7659 4.81339 21.1866 5.23408 21.4503 5.75153C21.6221 6.08879 21.6892 6.44545 21.7203 6.82533C21.75 7.18956 21.75 7.6354 21.75 8.16955V15.8305C21.75 16.3646 21.75 16.8104 21.7203 17.1747C21.6892 17.5546 21.6221 17.9112 21.4503 18.2485C21.1866 18.7659 20.7659 19.1866 20.2485 19.4503C19.9112 19.6221 19.5546 19.6892 19.1747 19.7203C18.8104 19.75 18.3646 19.75 17.8305 19.75H6.16955C5.6354 19.75 5.18956 19.75 4.82533 19.7203C4.44545 19.6892 4.08879 19.6221 3.75153 19.4503C3.23408 19.1866 2.81338 18.7659 2.54973 18.2485C2.37789 17.9112 2.31078 17.5546 2.27974 17.1747C2.24998 16.8104 2.24999 16.3646 2.25 15.8304V8.16957C2.24999 7.63541 2.24998 7.18956 2.27974 6.82533C2.31078 6.44545 2.37789 6.08879 2.54973 5.75153C2.81338 5.23408 3.23408 4.81338 3.75153 4.54973C4.08879 4.37789 4.44545 4.31078 4.82533 4.27974C5.18956 4.24998 5.63541 4.24999 6.16957 4.25ZM4.94748 5.77476C4.66036 5.79822 4.52307 5.8401 4.43251 5.88624C4.19731 6.00608 4.00608 6.19731 3.88624 6.43251C3.8401 6.52307 3.79822 6.66036 3.77476 6.94748C3.75058 7.24336 3.75 7.62757 3.75 8.2V15.8C3.75 16.3724 3.75058 16.7566 3.77476 17.0525C3.79822 17.3396 3.8401 17.4769 3.88624 17.5675C4.00608 17.8027 4.19731 17.9939 4.43251 18.1138C4.52307 18.1599 4.66036 18.2018 4.94748 18.2252C5.24336 18.2494 5.62757 18.25 6.2 18.25H17.8C18.3724 18.25 18.7566 18.2494 19.0525 18.2252C19.3396 18.2018 19.4769 18.1599 19.5675 18.1138C19.8027 17.9939 19.9939 17.8027 20.1138 17.5675C20.1599 17.4769 20.2018 17.3396 20.2252 17.0525C20.2494 16.7566 20.25 16.3724 20.25 15.8V8.2C20.25 7.62757 20.2494 7.24336 20.2252 6.94748C20.2018 6.66036 20.1599 6.52307 20.1138 6.43251C19.9939 6.19731 19.8027 6.00608 19.5675 5.88624C19.4769 5.8401 19.3396 5.79822 19.0525 5.77476C18.7566 5.75058 18.3724 5.75 17.8 5.75H6.2C5.62757 5.75 5.24336 5.75058 4.94748 5.77476Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M10.5303 8.46967C10.8232 8.76256 10.8232 9.23744 10.5303 9.53033L8.06066 12L10.5303 14.4697C10.8232 14.7626 10.8232 15.2374 10.5303 15.5303C10.2374 15.8232 9.76256 15.8232 9.46967 15.5303L6.46967 12.5303C6.17678 12.2374 6.17678 11.7626 6.46967 11.4697L9.46967 8.46967C9.76256 8.17678 10.2374 8.17678 10.5303 8.46967ZM13.4697 8.46967C13.7626 8.17678 14.2374 8.17678 14.5303 8.46967L17.5303 11.4697C17.8232 11.7626 17.8232 12.2374 17.5303 12.5303L14.5303 15.5303C14.2374 15.8232 13.7626 15.8232 13.4697 15.5303C13.1768 15.2374 13.1768 14.7626 13.4697 14.4697L15.9393 12L13.4697 9.53033C13.1768 9.23744 13.1768 8.76256 13.4697 8.46967Z\"\n  />\n</svg>`;\n\nexport const QuoteIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.75 4C4.16421 4 4.5 4.33579 4.5 4.75L4.5 19.25C4.5 19.6642 4.16421 20 3.75 20C3.33579 20 3 19.6642 3 19.25L3 4.75C3 4.33579 3.33579 4 3.75 4Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M19 6.75C19 7.16421 18.6642 7.5 18.25 7.5H7.75C7.33579 7.5 7 7.16421 7 6.75C7 6.33579 7.33579 6 7.75 6H18.25C18.6642 6 19 6.33579 19 6.75Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M17 11.75C17 12.1642 16.6642 12.5 16.25 12.5H7.75C7.33579 12.5 7 12.1642 7 11.75C7 11.3358 7.33579 11 7.75 11H16.25C16.6642 11 17 11.3358 17 11.75Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M21 16.75C21 17.1642 20.6642 17.5 20.25 17.5H7.75C7.33579 17.5 7 17.1642 7 16.75C7 16.3358 7.33579 16 7.75 16H20.25C20.6642 16 21 16.3358 21 16.75Z\"\n  />\n</svg>`;\n\nexport const DividerIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H4.94118C5.35539 11.25 5.69118 11.5858 5.69118 12C5.69118 12.4142 5.35539 12.75 4.94118 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12ZM7.01471 12C7.01471 11.5858 7.35049 11.25 7.76471 11.25H8.70588C9.1201 11.25 9.45588 11.5858 9.45588 12C9.45588 12.4142 9.1201 12.75 8.70588 12.75H7.76471C7.35049 12.75 7.01471 12.4142 7.01471 12ZM10.7794 12C10.7794 11.5858 11.1152 11.25 11.5294 11.25H12.4706C12.8848 11.25 13.2206 11.5858 13.2206 12C13.2206 12.4142 12.8848 12.75 12.4706 12.75H11.5294C11.1152 12.75 10.7794 12.4142 10.7794 12ZM14.5441 12C14.5441 11.5858 14.8799 11.25 15.2941 11.25H16.2353C16.6495 11.25 16.9853 11.5858 16.9853 12C16.9853 12.4142 16.6495 12.75 16.2353 12.75H15.2941C14.8799 12.75 14.5441 12.4142 14.5441 12ZM18.3088 12C18.3088 11.5858 18.6446 11.25 19.0588 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H19.0588C18.6446 12.75 18.3088 12.4142 18.3088 12Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M4 4.25C4.41421 4.25 4.75 4.58579 4.75 5V6.59459C4.75 7.1261 5.1896 7.57432 5.75343 7.57432H18.2466C18.8104 7.57432 19.25 7.1261 19.25 6.59459V5C19.25 4.58579 19.5858 4.25 20 4.25C20.4142 4.25 20.75 4.58579 20.75 5V6.59459C20.75 7.9737 19.6195 9.07432 18.2466 9.07432H5.75343C4.38048 9.07432 3.25 7.9737 3.25 6.59459V5C3.25 4.58579 3.58579 4.25 4 4.25ZM5.75342 16.4257C5.1896 16.4257 4.75 16.8739 4.75 17.4054V19C4.75 19.4142 4.41421 19.75 4 19.75C3.58579 19.75 3.25 19.4142 3.25 19V17.4054C3.25 16.0263 4.38047 14.9257 5.75342 14.9257L18.2466 14.9257C19.6195 14.9257 20.75 16.0263 20.75 17.4054V19C20.75 19.4142 20.4142 19.75 20 19.75C19.5858 19.75 19.25 19.4142 19.25 19V17.4054C19.25 16.8739 18.8104 16.4257 18.2466 16.4257L5.75342 16.4257Z\"\n  />\n</svg>`;\n\n// Format icons\n\nexport const BoldIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.25 4C6.25 3.58579 6.58579 3.25 7 3.25H12.9583C15.6288 3.25 17.8333 5.35506 17.8333 8C17.8333 9.51519 17.1099 10.8532 15.9898 11.7198C17.6162 12.484 18.75 14.1032 18.75 16C18.75 18.6449 16.5455 20.75 13.875 20.75H7C6.58579 20.75 6.25 20.4142 6.25 20V4ZM7.75 12.75V19.25H13.875C15.7609 19.25 17.25 17.7733 17.25 16C17.25 14.2267 15.7609 12.75 13.875 12.75H7.75ZM7.75 11.25H12.9583C14.8442 11.25 16.3333 9.77334 16.3333 8C16.3333 6.22666 14.8442 4.75 12.9583 4.75H7.75V11.25Z\"\n  />\n</svg>`;\n\nexport const ItalicIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M14.6075 3.25H10.25C9.83579 3.25 9.5 3.58579 9.5 4C9.5 4.41421 9.83579 4.75 10.25 4.75H13.5896L8.83175 19.25H5C4.58579 19.25 4.25 19.5858 4.25 20C4.25 20.4142 4.58579 20.75 5 20.75H9.35778C9.36938 20.7503 9.38095 20.7503 9.39249 20.75H13.75C14.1642 20.75 14.5 20.4142 14.5 20C14.5 19.5858 14.1642 19.25 13.75 19.25H10.4104L15.1682 4.75H19C19.4142 4.75 19.75 4.41421 19.75 4C19.75 3.58579 19.4142 3.25 19 3.25H14.6422C14.6306 3.24973 14.619 3.24973 14.6075 3.25Z\"\n  />\n</svg>`;\n\nexport const UnderlineIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M4.25 4C4.25 3.58579 4.58579 3.25 5 3.25H8.5C8.91421 3.25 9.25 3.58579 9.25 4C9.25 4.41421 8.91421 4.75 8.5 4.75H7.48717C7.49559 4.79501 7.5 4.84143 7.5 4.88889V11.1111C7.5 13.6536 9.52581 15.6944 12 15.6944C14.4742 15.6944 16.5 13.6536 16.5 11.1111V4.88889C16.5 4.84143 16.5044 4.79501 16.5128 4.75H15.5C15.0858 4.75 14.75 4.41421 14.75 4C14.75 3.58579 15.0858 3.25 15.5 3.25H19C19.4142 3.25 19.75 3.58579 19.75 4C19.75 4.41421 19.4142 4.75 19 4.75H17.9872C17.9956 4.79501 18 4.84143 18 4.88889V11.1111C18 14.4597 15.3248 17.1944 12 17.1944C8.6752 17.1944 6 14.4597 6 11.1111V4.88889C6 4.84143 6.00441 4.79501 6.01283 4.75H5C4.58579 4.75 4.25 4.41421 4.25 4ZM4.25 20C4.25 19.5858 4.58579 19.25 5 19.25H19C19.4142 19.25 19.75 19.5858 19.75 20C19.75 20.4142 19.4142 20.75 19 20.75H5C4.58579 20.75 4.25 20.4142 4.25 20Z\"\n  />\n</svg>`;\n\nexport const StrikethroughIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.02778 8C5.02778 5.37665 7.15442 3.25 9.77778 3.25H14.3889C16.9202 3.25 18.9722 5.30203 18.9722 7.83333V8C18.9722 8.41421 18.6364 8.75 18.2222 8.75C17.808 8.75 17.4722 8.41421 17.4722 8V7.83333C17.4722 6.13046 16.0918 4.75 14.3889 4.75H9.77778C7.98285 4.75 6.52778 6.20507 6.52778 8C6.52778 9.79493 7.98285 11.25 9.77778 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H17.6863C18.4838 13.5997 18.9722 14.7428 18.9722 16C18.9722 18.6234 16.8456 20.75 14.2222 20.75H9.69444C7.11712 20.75 5.02778 18.6607 5.02778 16.0833V16C5.02778 15.5858 5.36356 15.25 5.77778 15.25C6.19199 15.25 6.52778 15.5858 6.52778 16V16.0833C6.52778 17.8322 7.94554 19.25 9.69444 19.25H14.2222C16.0171 19.25 17.4722 17.7949 17.4722 16C17.4722 14.2051 16.0171 12.75 14.2222 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H6.31366C5.5162 10.4003 5.02778 9.25721 5.02778 8Z\"\n  />\n</svg>`;\n\nexport const InlineCodeIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M14.1819 3.27239C14.5837 3.37285 14.8281 3.78006 14.7276 4.1819L10.7276 20.1819C10.6271 20.5837 10.2199 20.8281 9.8181 20.7276C9.41625 20.6271 9.17193 20.2199 9.27239 19.8181L13.2724 3.8181C13.3729 3.41625 13.7801 3.17193 14.1819 3.27239ZM7.5511 7.49129C7.83206 7.79566 7.81308 8.27015 7.50871 8.5511L4.06145 11.7332L7.5496 15.4897C7.83145 15.7932 7.81387 16.2677 7.51034 16.5496C7.20681 16.8314 6.73226 16.8139 6.45041 16.5103L2.45041 12.2026C2.31479 12.0566 2.24289 11.8626 2.25056 11.6634C2.25823 11.4643 2.34485 11.2764 2.49129 11.1412L6.49129 7.4489C6.79566 7.16794 7.27015 7.18692 7.5511 7.49129ZM16.4489 7.49129C16.7299 7.18692 17.2043 7.16794 17.5087 7.4489L21.5087 11.1412C21.6552 11.2764 21.7418 11.4643 21.7494 11.6634C21.7571 11.8626 21.6852 12.0566 21.5496 12.2026L17.5496 16.5103C17.2677 16.8139 16.7932 16.8314 16.4897 16.5496C16.1861 16.2677 16.1686 15.7932 16.4504 15.4897L19.9386 11.7332L16.4913 8.5511C16.1869 8.27015 16.1679 7.79566 16.4489 7.49129Z\"\n  />\n</svg>`;\n\nconst LinkSVG = svg`<path\n  fill-rule=\"evenodd\"\n  clip-rule=\"evenodd\"\n  d=\"M12.8423 4.60675C14.6513 2.79775 17.5842 2.79775 19.3932 4.60676C21.2023 6.41576 21.2023 9.34874 19.3932 11.1577L17.3344 13.2166C17.0415 13.5095 16.5666 13.5095 16.2737 13.2166C15.9808 12.9237 15.9808 12.4489 16.2737 12.156L18.3326 10.0971C19.5558 8.87387 19.5558 6.89064 18.3326 5.66742C17.1094 4.4442 15.1261 4.44419 13.9029 5.66741L11.1577 8.41258C9.93453 9.6358 9.93453 11.619 11.1577 12.8423C11.3498 13.0343 11.5596 13.1955 11.7816 13.3266C12.1382 13.5373 12.2566 13.9971 12.046 14.3538C11.8353 14.7104 11.3754 14.8288 11.0188 14.6182C10.6891 14.4235 10.379 14.1849 10.0971 13.9029C8.28808 12.0939 8.28808 9.16093 10.0971 7.35192L12.8423 4.60675ZM11.954 9.64621C12.1647 9.28955 12.6246 9.17119 12.9812 9.38183C13.3109 9.57652 13.621 9.81515 13.9029 10.0971C15.7119 11.9061 15.7119 14.8391 13.9029 16.6481L11.1577 19.3932C9.34874 21.2023 6.41576 21.2023 4.60675 19.3932C2.79775 17.5842 2.79775 14.6513 4.60675 12.8423L6.66563 10.7834C6.95852 10.4905 7.4334 10.4905 7.72629 10.7834C8.01918 11.0763 8.01918 11.5511 7.72629 11.844L5.66741 13.9029C4.4442 15.1261 4.4442 17.1094 5.66742 18.3326C6.89064 19.5558 8.87387 19.5558 10.0971 18.3326L12.8423 15.5874C14.0655 14.3642 14.0655 12.381 12.8423 11.1577C12.6502 10.9657 12.4404 10.8045 12.2184 10.6734C11.8618 10.4627 11.7434 10.0029 11.954 9.64621Z\"\n/>`;\n\nexport const LinkIcon = icon(LinkSVG, 20);\n\nexport const FontLinkIcon = fontIcon(LinkSVG);\n\n// Slash menu action icons\nexport const CopyIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11.1696 3.25H16.8304C17.3646 3.24999 17.8104 3.24998 18.1747 3.27974C18.5546 3.31078 18.9112 3.37789 19.2485 3.54973C19.7659 3.81338 20.1866 4.23408 20.4503 4.75153C20.6221 5.08879 20.6892 5.44545 20.7203 5.82533C20.75 6.18956 20.75 6.6354 20.75 7.16955V12.8305C20.75 13.3646 20.75 13.8104 20.7203 14.1747C20.6892 14.5546 20.6221 14.9112 20.4503 15.2485C20.1866 15.7659 19.7659 16.1866 19.2485 16.4503C18.9112 16.6221 18.5546 16.6892 18.1747 16.7203C17.8104 16.75 17.3646 16.75 16.8305 16.75H16.75V16.8305C16.75 17.3646 16.75 17.8104 16.7203 18.1747C16.6892 18.5546 16.6221 18.9112 16.4503 19.2485C16.1866 19.7659 15.7659 20.1866 15.2485 20.4503C14.9112 20.6221 14.5546 20.6892 14.1747 20.7203C13.8104 20.75 13.3646 20.75 12.8305 20.75H7.16955C6.6354 20.75 6.18956 20.75 5.82533 20.7203C5.44545 20.6892 5.08879 20.6221 4.75153 20.4503C4.23408 20.1866 3.81338 19.7659 3.54973 19.2485C3.37789 18.9112 3.31078 18.5546 3.27974 18.1747C3.24998 17.8104 3.24999 17.3646 3.25 16.8304V11.1696C3.24999 10.6354 3.24998 10.1896 3.27974 9.82533C3.31078 9.44545 3.37789 9.08879 3.54973 8.75153C3.81338 8.23408 4.23408 7.81339 4.75153 7.54973C5.08879 7.37789 5.44545 7.31078 5.82533 7.27974C6.18957 7.24998 6.63542 7.24999 7.16957 7.25L7.25 7.25L7.25 7.16957C7.24999 6.63542 7.24998 6.18957 7.27974 5.82533C7.31078 5.44545 7.37789 5.08879 7.54973 4.75153C7.81339 4.23408 8.23408 3.81338 8.75153 3.54973C9.08879 3.37789 9.44545 3.31078 9.82533 3.27974C10.1896 3.24998 10.6354 3.24999 11.1696 3.25ZM7.25 8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H11.1695C10.6354 16.75 10.1896 16.75 9.82533 16.7203C9.44545 16.6892 9.08879 16.6221 8.75153 16.4503C8.23408 16.1866 7.81339 15.7659 7.54973 15.2485C7.37789 14.9112 7.31078 14.5546 7.27974 14.1747C7.24998 13.8104 7.24999 13.3646 7.25 12.8304L7.25 8.75ZM11.2 15.25C10.6276 15.25 10.2434 15.2494 9.94748 15.2252C9.66036 15.2018 9.52307 15.1599 9.43251 15.1138C9.19731 14.9939 9.00608 14.8027 8.88624 14.5675C8.8401 14.4769 8.79822 14.3396 8.77476 14.0525C8.75058 13.7566 8.75 13.3724 8.75 12.8V7.2C8.75 6.62757 8.75058 6.24336 8.77476 5.94748C8.79822 5.66036 8.8401 5.52307 8.88624 5.43251C9.00608 5.19731 9.19731 5.00608 9.43251 4.88624C9.52307 4.8401 9.66036 4.79822 9.94748 4.77476C10.2434 4.75058 10.6276 4.75 11.2 4.75H16.8C17.3724 4.75 17.7566 4.75058 18.0525 4.77476C18.3396 4.79822 18.4769 4.8401 18.5675 4.88624C18.8027 5.00608 18.9939 5.19731 19.1138 5.43251C19.1599 5.52307 19.2018 5.66036 19.2252 5.94748C19.2494 6.24336 19.25 6.62757 19.25 7.2V12.8C19.25 13.3724 19.2494 13.7566 19.2252 14.0525C19.2018 14.3396 19.1599 14.4769 19.1138 14.5675C18.9939 14.8027 18.8027 14.9939 18.5675 15.1138C18.4769 15.1599 18.3396 15.2018 18.0525 15.2252C17.7566 15.2494 17.3724 15.25 16.8 15.25H11.2Z\"\n  />\n</svg>`;\n\nexport const PasteIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.96967 2.96967C8.43047 2.50887 9.05544 2.25 9.70711 2.25H14.2929C14.9446 2.25 15.5695 2.50887 16.0303 2.96967C16.3835 3.32285 16.6181 3.77248 16.7084 4.25665C16.9029 4.26164 17.0816 4.27042 17.245 4.28594C17.5984 4.31952 17.9317 4.38831 18.2485 4.54973C18.7659 4.81338 19.1866 5.23408 19.4503 5.75153C19.6221 6.08879 19.6892 6.44545 19.7203 6.82533C19.75 7.18956 19.75 7.6354 19.75 8.16955V17.8305C19.75 18.3646 19.75 18.8104 19.7203 19.1747C19.6892 19.5546 19.6221 19.9112 19.4503 20.2485C19.1866 20.7659 18.7659 21.1866 18.2485 21.4503C17.9112 21.6221 17.5546 21.6892 17.1747 21.7203C16.8104 21.75 16.3646 21.75 15.8305 21.75H8.16955C7.6354 21.75 7.18956 21.75 6.82533 21.7203C6.44545 21.6892 6.08879 21.6221 5.75153 21.4503C5.23408 21.1866 4.81339 20.7659 4.54973 20.2485C4.37789 19.9112 4.31078 19.5546 4.27974 19.1747C4.24998 18.8104 4.24999 18.3646 4.25 17.8304V8.16957C4.24999 7.63541 4.24998 7.18956 4.27974 6.82533C4.31078 6.44545 4.37789 6.08879 4.54973 5.75153C4.81338 5.23408 5.23408 4.81338 5.75153 4.54973C6.06834 4.38831 6.40164 4.31952 6.75503 4.28594C6.91838 4.27042 7.09706 4.26164 7.29163 4.25665C7.38193 3.77248 7.61649 3.32285 7.96967 2.96967ZM7.25 5.75845C7.11656 5.76281 7.00058 5.76937 6.8969 5.77922C6.64378 5.80327 6.51726 5.84306 6.43251 5.88624C6.19731 6.00608 6.00608 6.19731 5.88624 6.43251C5.8401 6.52307 5.79822 6.66035 5.77476 6.94748C5.75058 7.24336 5.75 7.62757 5.75 8.2V17.8C5.75 18.3724 5.75058 18.7566 5.77476 19.0525C5.79822 19.3396 5.8401 19.4769 5.88624 19.5675C6.00608 19.8027 6.19731 19.9939 6.43251 20.1138C6.52307 20.1599 6.66036 20.2018 6.94748 20.2252C7.24336 20.2494 7.62757 20.25 8.2 20.25H15.8C16.3724 20.25 16.7566 20.2494 17.0525 20.2252C17.3396 20.2018 17.4769 20.1599 17.5675 20.1138C17.8027 19.9939 17.9939 19.8027 18.1138 19.5675C18.1599 19.4769 18.2018 19.3396 18.2252 19.0525C18.2494 18.7566 18.25 18.3724 18.25 17.8V8.2C18.25 7.62757 18.2494 7.24336 18.2252 6.94748C18.2018 6.66035 18.1599 6.52307 18.1138 6.43251C17.9939 6.19731 17.8027 6.00608 17.5675 5.88624C17.4827 5.84306 17.3562 5.80327 17.1031 5.77922C16.9994 5.76937 16.8834 5.76281 16.75 5.75845V7C16.75 7.41421 16.4142 7.75 16 7.75H8C7.58579 7.75 7.25 7.41421 7.25 7V5.75845ZM9.70711 3.75C9.45327 3.75 9.20982 3.85084 9.03033 4.03033C8.85084 4.20982 8.75 4.45327 8.75 4.70711V6.25H15.25V4.70711C15.25 4.45327 15.1492 4.20982 14.9697 4.03033C14.7902 3.85084 14.5467 3.75 14.2929 3.75H9.70711Z\"\n  />\n</svg>`;\n\nexport const DuplicateIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M11.25 9C11.25 9.41421 11.5858 9.75 12 9.75H13.1893L7.46967 15.4697C7.17678 15.7626 7.17678 16.2374 7.46967 16.5303C7.76256 16.8232 8.23744 16.8232 8.53033 16.5303L14.25 10.8107V12C14.25 12.4142 14.5858 12.75 15 12.75C15.4142 12.75 15.75 12.4142 15.75 12V9.1C15.75 9.08264 15.7495 9.0654 15.7485 9.04829C15.7618 8.84059 15.6891 8.62841 15.5303 8.46967C15.3716 8.31093 15.1594 8.23823 14.9517 8.25155C14.9346 8.25052 14.9174 8.25 14.9 8.25H12C11.5858 8.25 11.25 8.58579 11.25 9Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.8304 3.25H11.1696C10.6354 3.24999 10.1896 3.24998 9.82533 3.27974C9.44545 3.31078 9.08879 3.37789 8.75153 3.54973C8.23408 3.81338 7.81339 4.23408 7.54973 4.75153C7.37789 5.08879 7.31078 5.44545 7.27974 5.82533C7.24998 6.18956 7.24999 6.63541 7.25 7.16956L7.25 7.25L7.16957 7.25C6.63542 7.24999 6.18956 7.24998 5.82533 7.27974C5.44545 7.31078 5.08879 7.37789 4.75153 7.54973C4.23408 7.81339 3.81338 8.23408 3.54973 8.75153C3.37789 9.08879 3.31078 9.44545 3.27974 9.82533C3.24998 10.1896 3.24999 10.6354 3.25 11.1696V16.8304C3.24999 17.3646 3.24998 17.8104 3.27974 18.1747C3.31078 18.5546 3.37789 18.9112 3.54973 19.2485C3.81338 19.7659 4.23408 20.1866 4.75153 20.4503C5.08879 20.6221 5.44545 20.6892 5.82533 20.7203C6.18956 20.75 6.6354 20.75 7.16955 20.75H12.8305C13.3646 20.75 13.8104 20.75 14.1747 20.7203C14.5546 20.6892 14.9112 20.6221 15.2485 20.4503C15.7659 20.1866 16.1866 19.7659 16.4503 19.2485C16.6221 18.9112 16.6892 18.5546 16.7203 18.1747C16.75 17.8105 16.75 17.3646 16.75 16.8305V16.75H16.8305C17.3646 16.75 17.8105 16.75 18.1747 16.7203C18.5546 16.6892 18.9112 16.6221 19.2485 16.4503C19.7659 16.1866 20.1866 15.7659 20.4503 15.2485C20.6221 14.9112 20.6892 14.5546 20.7203 14.1747C20.75 13.8104 20.75 13.3646 20.75 12.8305V7.16955C20.75 6.6354 20.75 6.18956 20.7203 5.82533C20.6892 5.44545 20.6221 5.08879 20.4503 4.75153C20.1866 4.23408 19.7659 3.81338 19.2485 3.54973C18.9112 3.37789 18.5546 3.31078 18.1747 3.27974C17.8104 3.24998 17.3646 3.24999 16.8304 3.25ZM7.25 11V8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H13C12.5858 16.75 12.25 16.4142 12.25 16C12.25 15.5858 12.5858 15.25 13 15.25H16.8C17.3724 15.25 17.7566 15.2494 18.0525 15.2252C18.3396 15.2018 18.4769 15.1599 18.5675 15.1138C18.8027 14.9939 18.9939 14.8027 19.1138 14.5675C19.1599 14.4769 19.2018 14.3396 19.2252 14.0525C19.2494 13.7566 19.25 13.3724 19.25 12.8V7.2C19.25 6.62757 19.2494 6.24336 19.2252 5.94748C19.2018 5.66036 19.1599 5.52307 19.1138 5.43251C18.9939 5.19731 18.8027 5.00608 18.5675 4.88624C18.4769 4.8401 18.3396 4.79822 18.0525 4.77476C17.7566 4.75058 17.3724 4.75 16.8 4.75H11.2C10.6276 4.75 10.2434 4.75058 9.94748 4.77476C9.66036 4.79822 9.52307 4.8401 9.43251 4.88624C9.19731 5.00608 9.00608 5.19731 8.88624 5.43251C8.8401 5.52307 8.79822 5.66036 8.77476 5.94748C8.75058 6.24336 8.75 6.62757 8.75 7.2V11C8.75 11.4142 8.41422 11.75 8 11.75C7.58579 11.75 7.25 11.4142 7.25 11Z\"\n  />\n</svg>`;\n\nexport const DeleteIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11.1799 2.24992C11.2215 2.24996 11.2637 2.25 11.3064 2.25H12.6936C12.7363 2.25 12.7785 2.24996 12.8201 2.24992C13.5245 2.24927 14.0767 2.24875 14.565 2.44082C14.9934 2.60932 15.3727 2.88268 15.668 3.23585C16.0047 3.6384 16.1788 4.1624 16.4009 4.83082C16.4141 4.87034 16.4274 4.91036 16.4409 4.9509L16.5406 5.25H20C20.4142 5.25 20.75 5.58579 20.75 6C20.75 6.41421 20.4142 6.75 20 6.75H18.75V16.2321C18.75 17.045 18.75 17.7006 18.7066 18.2315C18.662 18.7781 18.5676 19.2582 18.3413 19.7025C17.9817 20.4081 17.4081 20.9818 16.7025 21.3413C16.2582 21.5676 15.7781 21.662 15.2315 21.7066C14.7006 21.75 14.045 21.75 13.2321 21.75H10.7679C9.95505 21.75 9.29944 21.75 8.76853 21.7066C8.2219 21.662 7.74175 21.5676 7.29754 21.3413C6.59193 20.9818 6.01825 20.4081 5.65873 19.7025C5.43238 19.2582 5.33803 18.7781 5.29336 18.2315C5.24999 17.7006 5.24999 17.0449 5.25 16.2321L5.25 6.75H4C3.58579 6.75 3.25 6.41421 3.25 6C3.25 5.58579 3.58579 5.25 4 5.25H7.45943L7.55913 4.9509C7.57264 4.91036 7.58594 4.87034 7.59908 4.83081C7.82119 4.1624 7.99532 3.6384 8.33195 3.23585C8.62729 2.88269 9.00657 2.60932 9.435 2.44082C9.92335 2.24875 10.4755 2.24927 11.1799 2.24992ZM7.9827 6.75C7.99433 6.75027 8.00594 6.75027 8.01751 6.75H15.9825C15.9941 6.75027 16.0057 6.75027 16.0173 6.75H17.25V16.2C17.25 17.0525 17.2494 17.6467 17.2116 18.1093C17.1745 18.5632 17.1054 18.824 17.0048 19.0215C16.7891 19.4448 16.4448 19.789 16.0215 20.0048C15.824 20.1054 15.5632 20.1745 15.1093 20.2116C14.6467 20.2494 14.0525 20.25 13.2 20.25H10.8C9.94755 20.25 9.35331 20.2494 8.89068 20.2116C8.4368 20.1745 8.17604 20.1054 7.97852 20.0048C7.55516 19.789 7.21095 19.4448 6.99524 19.0215C6.8946 18.824 6.82546 18.5632 6.78838 18.1093C6.75058 17.6467 6.75 17.0525 6.75 16.2V6.75H7.9827ZM14.9592 5.25H9.0408C9.27769 4.54546 9.36214 4.34218 9.48262 4.19811C9.61687 4.03758 9.78927 3.91333 9.98401 3.83674C10.1725 3.76261 10.4131 3.75 11.3064 3.75H12.6936C13.5869 3.75 13.8275 3.76261 14.016 3.83674C14.2107 3.91333 14.3831 4.03759 14.5174 4.19811C14.6379 4.34218 14.7223 4.54546 14.9592 5.25ZM10 9.25C10.4142 9.25 10.75 9.58579 10.75 10V17C10.75 17.4142 10.4142 17.75 10 17.75C9.58579 17.75 9.25 17.4142 9.25 17V10C9.25 9.58579 9.58579 9.25 10 9.25ZM14 9.25C14.4142 9.25 14.75 9.58579 14.75 10V17C14.75 17.4142 14.4142 17.75 14 17.75C13.5858 17.75 13.25 17.4142 13.25 17V10C13.25 9.58579 13.5858 9.25 14 9.25Z\"\n  />\n</svg>`;\n\n// Date & Time icons\n\nexport const TodayIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M8.5 13.75C8.5 13.3358 8.16421 13 7.75 13C7.33579 13 7 13.3358 7 13.75L7 15.25C7 15.6642 7.33579 16 7.75 16C8.16421 16 8.5 15.6642 8.5 15.25V13.75Z\"\n  />\n  <path\n    d=\"M12 11C12.4142 11 12.75 11.3358 12.75 11.75V17.25C12.75 17.6642 12.4142 18 12 18C11.5858 18 11.25 17.6642 11.25 17.25V11.75C11.25 11.3358 11.5858 11 12 11Z\"\n  />\n  <path\n    d=\"M15.5 15.25C15.5 15.6642 15.8358 16 16.25 16C16.6642 16 17 15.6642 17 15.25V13.75C17 13.3358 16.6642 13 16.25 13C15.8358 13 15.5 13.3358 15.5 13.75V15.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.30556 4C8.30556 3.58579 7.96977 3.25 7.55556 3.25C7.14134 3.25 6.80556 3.58579 6.80556 4V5.02778C6.33711 5.02777 5.94085 5.02793 5.61573 5.05449C5.2729 5.0825 4.94369 5.14356 4.63019 5.30329C4.15456 5.54564 3.76786 5.93234 3.52551 6.40797C3.36578 6.72146 3.30472 7.05068 3.27671 7.39351C3.24998 7.72071 3.24999 8.11996 3.25 8.59235V17.1854C3.24999 17.6578 3.24998 18.0571 3.27671 18.3843C3.30472 18.7271 3.36578 19.0563 3.52551 19.3698C3.76786 19.8454 4.15456 20.2321 4.63019 20.4745C4.94369 20.6342 5.2729 20.6953 5.61573 20.7233C5.94291 20.75 6.34214 20.75 6.81449 20.75H17.1854C17.6578 20.75 18.0571 20.75 18.3843 20.7233C18.7271 20.6953 19.0563 20.6342 19.3698 20.4745C19.8454 20.2321 20.2321 19.8454 20.4745 19.3698C20.6342 19.0563 20.6953 18.7271 20.7233 18.3843C20.75 18.0571 20.75 17.6579 20.75 17.1855V8.59236C20.75 8.12001 20.75 7.72069 20.7233 7.39351C20.6953 7.05068 20.6342 6.72146 20.4745 6.40797C20.2321 5.93234 19.8454 5.54564 19.3698 5.30329C19.0563 5.14356 18.7271 5.0825 18.3843 5.05449C18.0592 5.02793 17.6629 5.02777 17.1944 5.02778V4C17.1944 3.58579 16.8587 3.25 16.4444 3.25C16.0302 3.25 15.6944 3.58579 15.6944 4V5.02778H8.30556V4ZM5.73788 6.54951C5.9967 6.52836 6.33425 6.52778 6.84445 6.52778H17.1556C17.6658 6.52778 18.0033 6.52836 18.2621 6.54951C18.5122 6.56994 18.622 6.60577 18.6888 6.6398C18.8822 6.73833 19.0394 6.89556 19.138 7.08895C19.172 7.15575 19.2078 7.26559 19.2283 7.51566C19.2489 7.76785 19.25 8.09477 19.25 8.58333H4.75C4.75004 8.09477 4.75113 7.76785 4.77173 7.51566C4.79216 7.26559 4.82799 7.15575 4.86202 7.08895C4.96056 6.89557 5.11779 6.73834 5.31118 6.6398C5.37797 6.60577 5.48781 6.56994 5.73788 6.54951ZM4.75 10.0833H19.25V17.1556C19.25 17.6658 19.2494 18.0033 19.2283 18.2621C19.2078 18.5122 19.172 18.622 19.138 18.6888C19.0394 18.8822 18.8822 19.0394 18.6888 19.138C18.622 19.172 18.5122 19.2078 18.2621 19.2283C18.0033 19.2494 17.6658 19.25 17.1556 19.25H6.84445C6.33425 19.25 5.9967 19.2494 5.73788 19.2283C5.48781 19.2078 5.37797 19.172 5.31118 19.138C5.11779 19.0394 4.96056 18.8822 4.86202 18.6888C4.82799 18.622 4.79216 18.5122 4.77173 18.2621C4.75058 18.0033 4.75 17.6658 4.75 17.1556V10.0833Z\"\n  />\n</svg>`;\n\nexport const TomorrowIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    d=\"M8.5 13.75C8.5 13.3358 8.16421 13 7.75 13C7.33579 13 7 13.3358 7 13.75L7 15.25C7 15.6642 7.33579 16 7.75 16C8.16421 16 8.5 15.6642 8.5 15.25V13.75Z\"\n  />\n  <path\n    d=\"M12 13C12.4142 13 12.75 13.3358 12.75 13.75V15.25C12.75 15.6642 12.4142 16 12 16C11.5858 16 11.25 15.6642 11.25 15.25V13.75C11.25 13.3358 11.5858 13 12 13Z\"\n  />\n  <path\n    d=\"M15.5 17.25C15.5 17.6642 15.8358 18 16.25 18C16.6642 18 17 17.6642 17 17.25V11.75C17 11.3358 16.6642 11 16.25 11C15.8358 11 15.5 11.3358 15.5 11.75V17.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.30556 4C8.30556 3.58579 7.96977 3.25 7.55556 3.25C7.14134 3.25 6.80556 3.58579 6.80556 4V5.02778C6.33711 5.02777 5.94085 5.02793 5.61573 5.05449C5.2729 5.0825 4.94369 5.14356 4.63019 5.30329C4.15456 5.54564 3.76786 5.93234 3.52551 6.40797C3.36578 6.72146 3.30472 7.05068 3.27671 7.39351C3.24998 7.72071 3.24999 8.11996 3.25 8.59235V17.1854C3.24999 17.6578 3.24998 18.0571 3.27671 18.3843C3.30472 18.7271 3.36578 19.0563 3.52551 19.3698C3.76786 19.8454 4.15456 20.2321 4.63019 20.4745C4.94369 20.6342 5.2729 20.6953 5.61573 20.7233C5.94291 20.75 6.34214 20.75 6.81449 20.75H17.1854C17.6578 20.75 18.0571 20.75 18.3843 20.7233C18.7271 20.6953 19.0563 20.6342 19.3698 20.4745C19.8454 20.2321 20.2321 19.8454 20.4745 19.3698C20.6342 19.0563 20.6953 18.7271 20.7233 18.3843C20.75 18.0571 20.75 17.6579 20.75 17.1855V8.59236C20.75 8.12001 20.75 7.72069 20.7233 7.39351C20.6953 7.05068 20.6342 6.72146 20.4745 6.40797C20.2321 5.93234 19.8454 5.54564 19.3698 5.30329C19.0563 5.14356 18.7271 5.0825 18.3843 5.05449C18.0592 5.02793 17.6629 5.02777 17.1944 5.02778V4C17.1944 3.58579 16.8587 3.25 16.4444 3.25C16.0302 3.25 15.6944 3.58579 15.6944 4V5.02778H8.30556V4ZM5.73788 6.54951C5.9967 6.52836 6.33425 6.52778 6.84445 6.52778H17.1556C17.6658 6.52778 18.0033 6.52836 18.2621 6.54951C18.5122 6.56994 18.622 6.60577 18.6888 6.6398C18.8822 6.73833 19.0394 6.89556 19.138 7.08895C19.172 7.15575 19.2078 7.26559 19.2283 7.51566C19.2489 7.76785 19.25 8.09477 19.25 8.58333H4.75C4.75004 8.09477 4.75113 7.76785 4.77173 7.51566C4.79216 7.26559 4.82799 7.15575 4.86202 7.08895C4.96056 6.89557 5.11779 6.73834 5.31118 6.6398C5.37797 6.60577 5.48781 6.56994 5.73788 6.54951ZM4.75 10.0833H19.25V17.1556C19.25 17.6658 19.2494 18.0033 19.2283 18.2621C19.2078 18.5122 19.172 18.622 19.138 18.6888C19.0394 18.8822 18.8822 19.0394 18.6888 19.138C18.622 19.172 18.5122 19.2078 18.2621 19.2283C18.0033 19.2494 17.6658 19.25 17.1556 19.25H6.84445C6.33425 19.25 5.9967 19.2494 5.73788 19.2283C5.48781 19.2078 5.37797 19.172 5.31118 19.138C5.11779 19.0394 4.96056 18.8822 4.86202 18.6888C4.82799 18.622 4.79216 18.5122 4.77173 18.2621C4.75058 18.0033 4.75 17.6658 4.75 17.1556V10.0833Z\"\n  />\n</svg>`;\n\nexport const YesterdayIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.55556 3.25C7.96977 3.25 8.30556 3.58579 8.30556 4V5.02778H15.6944V4C15.6944 3.58579 16.0302 3.25 16.4444 3.25C16.8587 3.25 17.1944 3.58579 17.1944 4V5.02778C17.6629 5.02777 18.0592 5.02793 18.3843 5.05449C18.7271 5.0825 19.0563 5.14356 19.3698 5.30329C19.8454 5.54564 20.2321 5.93234 20.4745 6.40797C20.6342 6.72146 20.6953 7.05068 20.7233 7.39351C20.75 7.72071 20.75 8.11997 20.75 8.59236V17.1854C20.75 17.6578 20.75 18.0571 20.7233 18.3843C20.6953 18.7271 20.6342 19.0563 20.4745 19.3698C20.2321 19.8454 19.8454 20.2321 19.3698 20.4745C19.0563 20.6342 18.7271 20.6953 18.3843 20.7233C18.0571 20.75 17.6578 20.75 17.1854 20.75H6.81458C6.34219 20.75 5.94293 20.75 5.61573 20.7233C5.2729 20.6953 4.94369 20.6342 4.63019 20.4745C4.15456 20.2321 3.76786 19.8454 3.52551 19.3698C3.36578 19.0563 3.30472 18.7271 3.27671 18.3843C3.24998 18.0571 3.24999 17.6578 3.25 17.1854V8.59238C3.24999 8.11998 3.24998 7.72071 3.27671 7.39351C3.30472 7.05068 3.36578 6.72146 3.52551 6.40797C3.76786 5.93234 4.15456 5.54564 4.63019 5.30329C4.94369 5.14356 5.2729 5.0825 5.61573 5.05449C5.94085 5.02793 6.33711 5.02777 6.80556 5.02778V4C6.80556 3.58579 7.14134 3.25 7.55556 3.25ZM6.84445 6.52778C6.33425 6.52778 5.9967 6.52836 5.73788 6.54951C5.48781 6.56994 5.37797 6.60577 5.31118 6.6398C5.11779 6.73834 4.96056 6.89557 4.86202 7.08895C4.82799 7.15575 4.79216 7.26559 4.77173 7.51566C4.75113 7.76785 4.75004 8.09477 4.75 8.58333H19.25C19.25 8.09477 19.2489 7.76785 19.2283 7.51566C19.2078 7.26559 19.172 7.15575 19.138 7.08895C19.0394 6.89556 18.8822 6.73833 18.6888 6.6398C18.622 6.60577 18.5122 6.56994 18.2621 6.54951C18.0033 6.52836 17.6658 6.52778 17.1556 6.52778H6.84445ZM19.25 10.0833H4.75V17.1556C4.75 17.6658 4.75058 18.0033 4.77173 18.2621C4.79216 18.5122 4.82799 18.622 4.86202 18.6888C4.96056 18.8822 5.11779 19.0394 5.31118 19.138C5.37797 19.172 5.48781 19.2078 5.73788 19.2283C5.9967 19.2494 6.33425 19.25 6.84445 19.25H17.1556C17.6658 19.25 18.0033 19.2494 18.2621 19.2283C18.5122 19.2078 18.622 19.172 18.6888 19.138C18.8822 19.0394 19.0394 18.8822 19.138 18.6888C19.172 18.622 19.2078 18.5122 19.2283 18.2621C19.2494 18.0033 19.25 17.6658 19.25 17.1556V10.0833Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M16.25 13C15.8358 13 15.5 13.3358 15.5 13.75V15.25C15.5 15.6642 15.8358 16 16.25 16C16.6642 16 17 15.6642 17 15.25V13.75C17 13.3358 16.6642 13 16.25 13Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 13C11.5858 13 11.25 13.3358 11.25 13.75V15.25C11.25 15.6642 11.5858 16 12 16C12.4142 16 12.75 15.6642 12.75 15.25V13.75C12.75 13.3358 12.4142 13 12 13Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M7.75 18C8.16421 18 8.5 17.6642 8.5 17.25L8.5 11.75C8.5 11.3358 8.16421 11 7.75 11C7.33579 11 7 11.3358 7 11.75L7 17.25C7 17.6642 7.33579 18 7.75 18Z\"\n  />\n</svg>`;\n\nexport const NowIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.11366 3.678C6.40656 3.9709 6.40656 4.44577 6.11366 4.73866L4.28033 6.572C3.98744 6.86489 3.51256 6.86489 3.21967 6.572C2.92678 6.2791 2.92678 5.80423 3.21967 5.51134L5.053 3.678C5.3459 3.38511 5.82077 3.38511 6.11366 3.678ZM17.8863 3.678C18.1792 3.38511 18.6541 3.38511 18.947 3.678L20.7803 5.51134C21.0732 5.80423 21.0732 6.2791 20.7803 6.572C20.4874 6.86489 20.0126 6.86489 19.7197 6.572L17.8863 4.73866C17.5934 4.44577 17.5934 3.9709 17.8863 3.678ZM12 5.875C8.36413 5.875 5.41667 8.82246 5.41667 12.4583C5.41667 16.0942 8.36413 19.0417 12 19.0417C15.6359 19.0417 18.5833 16.0942 18.5833 12.4583C18.5833 8.82246 15.6359 5.875 12 5.875ZM3.91667 12.4583C3.91667 7.99403 7.5357 4.375 12 4.375C16.4643 4.375 20.0833 7.99403 20.0833 12.4583C20.0833 16.9226 16.4643 20.5417 12 20.5417C7.5357 20.5417 3.91667 16.9226 3.91667 12.4583Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M15.197 10.3586C15.4899 10.6515 15.4899 11.1264 15.197 11.4192L11.6415 14.9748C11.3486 15.2677 10.8737 15.2677 10.5808 14.9748L8.80301 13.197C8.51012 12.9041 8.51012 12.4293 8.80301 12.1364C9.09591 11.8435 9.57078 11.8435 9.86367 12.1364L11.1111 13.3838L14.1363 10.3586C14.4292 10.0657 14.9041 10.0657 15.197 10.3586Z\"\n  />\n</svg>`;\n\n// Misc icons\n\nexport const CrossIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.34315 6.34314C6.63604 6.05025 7.11091 6.05025 7.40381 6.34314L12 10.9393L16.5962 6.34314C16.8891 6.05025 17.364 6.05025 17.6569 6.34314C17.9497 6.63604 17.9497 7.11091 17.6569 7.4038L13.0607 12L17.6569 16.5962C17.9497 16.8891 17.9497 17.364 17.6569 17.6569C17.364 17.9497 16.8891 17.9497 16.5962 17.6569L12 13.0607L7.40381 17.6569C7.11091 17.9497 6.63604 17.9497 6.34315 17.6569C6.05025 17.364 6.05025 16.8891 6.34315 16.5962L10.9393 12L6.34315 7.4038C6.05025 7.11091 6.05025 6.63604 6.34315 6.34314Z\"\n  />\n</svg>`;\n\nconst InsertBlocksIcon = svg`<path\n  fill-rule=\"evenodd\"\n  clip-rule=\"evenodd\"\n  d=\"M5.57378 3.25C5.5825 3.25 5.59124 3.25 5.6 3.25L8.42622 3.25C8.68371 3.24998 8.92019 3.24996 9.11787 3.26612C9.33101 3.28353 9.56418 3.32339 9.79449 3.44074C10.1238 3.60852 10.3915 3.87623 10.5593 4.20552C10.6766 4.43582 10.7165 4.669 10.7339 4.88213C10.75 5.07982 10.75 5.3163 10.75 5.57379V8.42621C10.75 8.6837 10.75 8.92019 10.7339 9.11787C10.7165 9.33101 10.6766 9.56418 10.5593 9.79448C10.3915 10.1238 10.1238 10.3915 9.79449 10.5593C9.56418 10.6766 9.33101 10.7165 9.11787 10.7339C8.92019 10.75 8.6837 10.75 8.42622 10.75H5.57379C5.3163 10.75 5.07982 10.75 4.88213 10.7339C4.669 10.7165 4.43583 10.6766 4.20552 10.5593C3.87624 10.3915 3.60852 10.1238 3.44074 9.79448C3.32339 9.56418 3.28353 9.33101 3.26612 9.11787C3.24997 8.92019 3.24998 8.6837 3.25 8.42622L3.25 5.6C3.25 5.59124 3.25 5.5825 3.25 5.57378C3.24998 5.3163 3.24997 5.07981 3.26612 4.88213C3.28353 4.669 3.32339 4.43582 3.44074 4.20552C3.60852 3.87623 3.87624 3.60852 4.20552 3.44074C4.43583 3.32339 4.669 3.28353 4.88213 3.26612C5.07982 3.24996 5.3163 3.24998 5.57378 3.25ZM4.88088 4.77973C4.88085 4.77972 4.88132 4.77952 4.88239 4.77917L4.88088 4.77973ZM4.88346 4.77882C4.89234 4.77607 4.92547 4.76757 5.00428 4.76113C5.13341 4.75058 5.3076 4.75 5.6 4.75H8.4C8.6924 4.75 8.8666 4.75058 8.99573 4.76113C9.07454 4.76757 9.10766 4.77607 9.11654 4.77882C9.16118 4.80234 9.19766 4.83882 9.22118 4.88346C9.22393 4.89234 9.23243 4.92547 9.23887 5.00428C9.24942 5.1334 9.25 5.3076 9.25 5.6V8.4C9.25 8.6924 9.24942 8.8666 9.23887 8.99572C9.23243 9.07453 9.22393 9.10766 9.22118 9.11654C9.19766 9.16118 9.16118 9.19766 9.11654 9.22118C9.10767 9.22393 9.07454 9.23243 8.99573 9.23887C8.8666 9.24942 8.6924 9.25 8.4 9.25H5.6C5.3076 9.25 5.13341 9.24942 5.00428 9.23887C4.92547 9.23243 4.89234 9.22393 4.88347 9.22118C4.83883 9.19766 4.80235 9.16118 4.77883 9.11654C4.77607 9.10766 4.76757 9.07453 4.76114 8.99572C4.75059 8.8666 4.75 8.6924 4.75 8.4V5.6C4.75 5.3076 4.75059 5.1334 4.76114 5.00428C4.76757 4.92547 4.77607 4.89234 4.77883 4.88346C4.80235 4.83882 4.83883 4.80234 4.88346 4.77882ZM4.77973 4.88088C4.77974 4.8809 4.77956 4.88144 4.77917 4.88239L4.77973 4.88088ZM4.77973 9.11913C4.77972 9.11915 4.77953 9.11869 4.77918 9.11764L4.77973 9.11913ZM4.88088 9.22027C4.88091 9.22026 4.88143 9.22044 4.88236 9.22082L4.88088 9.22027ZM9.11913 9.22027C9.11916 9.22028 9.11869 9.22048 9.11764 9.22082L9.11913 9.22027ZM9.22028 9.11913C9.22027 9.11909 9.22044 9.11856 9.22084 9.11761L9.22028 9.11913ZM9.22028 4.88088C9.22029 4.88085 9.22048 4.88132 9.22084 4.88239L9.22028 4.88088ZM9.11764 4.77918C9.11869 4.77952 9.11916 4.77972 9.11913 4.77973L9.11764 4.77918ZM15.5738 3.25H18.4262C18.6837 3.24998 18.9202 3.24996 19.1179 3.26612C19.331 3.28353 19.5642 3.32339 19.7945 3.44074C20.1238 3.60852 20.3915 3.87623 20.5593 4.20552C20.6766 4.43582 20.7165 4.669 20.7339 4.88213C20.75 5.07981 20.75 5.31629 20.75 5.57377V8.42623C20.75 8.68371 20.75 8.92019 20.7339 9.11787C20.7165 9.33101 20.6766 9.56418 20.5593 9.79448C20.3915 10.1238 20.1238 10.3915 19.7945 10.5593C19.5642 10.6766 19.331 10.7165 19.1179 10.7339C18.9202 10.75 18.6837 10.75 18.4262 10.75H15.5738C15.3163 10.75 15.0798 10.75 14.8821 10.7339C14.669 10.7165 14.4358 10.6766 14.2055 10.5593C13.8762 10.3915 13.6085 10.1238 13.4407 9.79448C13.3234 9.56418 13.2835 9.33101 13.2661 9.11787C13.25 8.92019 13.25 8.68371 13.25 8.42623V5.57377C13.25 5.31629 13.25 5.07981 13.2661 4.88213C13.2835 4.669 13.3234 4.43582 13.4407 4.20552C13.6085 3.87623 13.8762 3.60852 14.2055 3.44074C14.4358 3.32339 14.669 3.28353 14.8821 3.26612C15.0798 3.24996 15.3163 3.24998 15.5738 3.25ZM14.8809 4.77973C14.8808 4.77972 14.8813 4.77953 14.8824 4.77918L14.8809 4.77973ZM14.8835 4.77882C14.8923 4.77607 14.9255 4.76757 15.0043 4.76113C15.1334 4.75058 15.3076 4.75 15.6 4.75H18.4C18.6924 4.75 18.8666 4.75058 18.9957 4.76113C19.0745 4.76757 19.1077 4.77607 19.1165 4.77882C19.1612 4.80234 19.1977 4.83882 19.2212 4.88346C19.2239 4.89234 19.2324 4.92547 19.2389 5.00428C19.2494 5.1334 19.25 5.3076 19.25 5.6V8.4C19.25 8.6924 19.2494 8.8666 19.2389 8.99572C19.2324 9.07453 19.2239 9.10766 19.2212 9.11654C19.1977 9.16118 19.1612 9.19766 19.1165 9.22118C19.1077 9.22393 19.0745 9.23243 18.9957 9.23887C18.8666 9.24942 18.6924 9.25 18.4 9.25H15.6C15.3076 9.25 15.1334 9.24942 15.0043 9.23887C14.9255 9.23243 14.8923 9.22393 14.8835 9.22118C14.8388 9.19766 14.8023 9.16118 14.7788 9.11654C14.7761 9.10766 14.7676 9.07453 14.7611 8.99572C14.7506 8.8666 14.75 8.6924 14.75 8.4V5.6C14.75 5.3076 14.7506 5.1334 14.7611 5.00428C14.7676 4.92547 14.7761 4.89234 14.7788 4.88346C14.8023 4.83882 14.8388 4.80234 14.8835 4.77882ZM14.7797 4.88088C14.7797 4.8809 14.7796 4.88143 14.7792 4.88236L14.7797 4.88088ZM14.7797 9.11913C14.7797 9.11915 14.7795 9.11867 14.7792 9.11761L14.7797 9.11913ZM14.8809 9.22027C14.8809 9.22026 14.8814 9.22044 14.8824 9.22082L14.8809 9.22027ZM19.1191 9.22027C19.1192 9.22028 19.1187 9.22048 19.1176 9.22082L19.1191 9.22027ZM19.2203 9.11913C19.2203 9.11911 19.2204 9.11857 19.2208 9.11761L19.2203 9.11913ZM19.2203 4.88088C19.2203 4.88085 19.2205 4.88131 19.2208 4.88236L19.2203 4.88088ZM19.1176 4.77917C19.1187 4.77952 19.1192 4.77972 19.1191 4.77973L19.1176 4.77917ZM5.57377 13.25H8.42623C8.68372 13.25 8.92019 13.25 9.11787 13.2661C9.33101 13.2835 9.56418 13.3234 9.79449 13.4407C10.1238 13.6085 10.3915 13.8762 10.5593 14.2055C10.6766 14.4358 10.7165 14.669 10.7339 14.8821C10.75 15.0798 10.75 15.3163 10.75 15.5738V18.4262C10.75 18.6837 10.75 18.9202 10.7339 19.1179C10.7165 19.331 10.6766 19.5642 10.5593 19.7945C10.3915 20.1238 10.1238 20.3915 9.79449 20.5593C9.56418 20.6766 9.33101 20.7165 9.11787 20.7339C8.92019 20.75 8.68372 20.75 8.42623 20.75H5.57377C5.31629 20.75 5.07981 20.75 4.88213 20.7339C4.669 20.7165 4.43583 20.6766 4.20552 20.5593C3.87624 20.3915 3.60852 20.1238 3.44074 19.7945C3.32339 19.5642 3.28353 19.331 3.26612 19.1179C3.24997 18.9202 3.24998 18.6837 3.25 18.4262V15.5738C3.24998 15.3163 3.24997 15.0798 3.26612 14.8821C3.28353 14.669 3.32339 14.4358 3.44074 14.2055C3.60852 13.8762 3.87624 13.6085 4.20552 13.4407C4.43583 13.3234 4.669 13.2835 4.88213 13.2661C5.07981 13.25 5.31629 13.25 5.57377 13.25ZM4.88088 14.7797C4.88085 14.7797 4.88131 14.7795 4.88237 14.7792L4.88088 14.7797ZM4.88346 14.7788C4.89234 14.7761 4.92546 14.7676 5.00428 14.7611C5.13341 14.7506 5.3076 14.75 5.6 14.75H8.4C8.6924 14.75 8.8666 14.7506 8.99573 14.7611C9.07453 14.7676 9.10766 14.7761 9.11654 14.7788C9.16118 14.8023 9.19766 14.8388 9.22118 14.8835C9.22393 14.8923 9.23243 14.9255 9.23887 15.0043C9.24942 15.1334 9.25 15.3076 9.25 15.6V18.4C9.25 18.6924 9.24942 18.8666 9.23887 18.9957C9.23243 19.0745 9.22393 19.1077 9.22118 19.1165C9.19766 19.1612 9.16118 19.1977 9.11654 19.2212C9.10767 19.2239 9.07454 19.2324 8.99573 19.2389C8.8666 19.2494 8.6924 19.25 8.4 19.25H5.6C5.3076 19.25 5.13341 19.2494 5.00428 19.2389C4.92547 19.2324 4.89235 19.2239 4.88347 19.2212C4.83883 19.1977 4.80235 19.1612 4.77883 19.1165C4.77607 19.1077 4.76757 19.0745 4.76114 18.9957C4.75059 18.8666 4.75 18.6924 4.75 18.4V15.6C4.75 15.3076 4.75059 15.1334 4.76114 15.0043C4.76757 14.9255 4.77607 14.8923 4.77883 14.8835C4.80234 14.8388 4.83882 14.8023 4.88346 14.7788ZM4.77973 14.8809C4.77974 14.8809 4.77956 14.8814 4.77918 14.8824L4.77973 14.8809ZM4.77973 19.1191C4.77972 19.1192 4.77953 19.1187 4.77918 19.1176L4.77973 19.1191ZM4.88088 19.2203C4.8809 19.2203 4.88143 19.2204 4.88236 19.2208L4.88088 19.2203ZM9.11913 19.2203C9.11917 19.2203 9.1187 19.2205 9.11762 19.2208L9.11913 19.2203ZM9.22028 19.1191C9.22026 19.1191 9.22044 19.1185 9.22087 19.1175L9.22028 19.1191ZM9.22027 14.8809C9.22028 14.8808 9.22048 14.8813 9.22084 14.8824L9.22027 14.8809ZM9.11761 14.7792C9.11868 14.7795 9.11915 14.7797 9.11913 14.7797L9.11761 14.7792ZM17 13.25C17.4142 13.25 17.75 13.5858 17.75 14V16.25H20C20.4142 16.25 20.75 16.5858 20.75 17C20.75 17.4142 20.4142 17.75 20 17.75H17.75V20C17.75 20.4142 17.4142 20.75 17 20.75C16.5858 20.75 16.25 20.4142 16.25 20V17.75H14C13.5858 17.75 13.25 17.4142 13.25 17C13.25 16.5858 13.5858 16.25 14 16.25H16.25V14C16.25 13.5858 16.5858 13.25 17 13.25Z\"\n/>`;\n\nexport const BlockHubIcon20 = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  ${InsertBlocksIcon}\n</svg>`;\n\nexport const BlockHubIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M5.57378 3.25C5.5825 3.25 5.59124 3.25 5.6 3.25L8.42622 3.25C8.68371 3.24998 8.92019 3.24996 9.11787 3.26612C9.33101 3.28353 9.56418 3.32339 9.79449 3.44074C10.1238 3.60852 10.3915 3.87623 10.5593 4.20552C10.6766 4.43582 10.7165 4.669 10.7339 4.88213C10.75 5.07982 10.75 5.3163 10.75 5.57379V8.42621C10.75 8.6837 10.75 8.92019 10.7339 9.11787C10.7165 9.33101 10.6766 9.56418 10.5593 9.79448C10.3915 10.1238 10.1238 10.3915 9.79449 10.5593C9.56418 10.6766 9.33101 10.7165 9.11787 10.7339C8.92019 10.75 8.6837 10.75 8.42622 10.75H5.57379C5.3163 10.75 5.07982 10.75 4.88213 10.7339C4.669 10.7165 4.43583 10.6766 4.20552 10.5593C3.87624 10.3915 3.60852 10.1238 3.44074 9.79448C3.32339 9.56418 3.28353 9.33101 3.26612 9.11787C3.24997 8.92019 3.24998 8.6837 3.25 8.42622L3.25 5.6C3.25 5.59124 3.25 5.5825 3.25 5.57378C3.24998 5.3163 3.24997 5.07981 3.26612 4.88213C3.28353 4.669 3.32339 4.43582 3.44074 4.20552C3.60852 3.87623 3.87624 3.60852 4.20552 3.44074C4.43583 3.32339 4.669 3.28353 4.88213 3.26612C5.07982 3.24996 5.3163 3.24998 5.57378 3.25ZM4.88088 4.77973C4.88085 4.77972 4.88132 4.77952 4.88239 4.77917L4.88088 4.77973ZM4.88346 4.77882C4.89234 4.77607 4.92547 4.76757 5.00428 4.76113C5.13341 4.75058 5.3076 4.75 5.6 4.75H8.4C8.6924 4.75 8.8666 4.75058 8.99573 4.76113C9.07454 4.76757 9.10766 4.77607 9.11654 4.77882C9.16118 4.80234 9.19766 4.83882 9.22118 4.88346C9.22393 4.89234 9.23243 4.92547 9.23887 5.00428C9.24942 5.1334 9.25 5.3076 9.25 5.6V8.4C9.25 8.6924 9.24942 8.8666 9.23887 8.99572C9.23243 9.07453 9.22393 9.10766 9.22118 9.11654C9.19766 9.16118 9.16118 9.19766 9.11654 9.22118C9.10767 9.22393 9.07454 9.23243 8.99573 9.23887C8.8666 9.24942 8.6924 9.25 8.4 9.25H5.6C5.3076 9.25 5.13341 9.24942 5.00428 9.23887C4.92547 9.23243 4.89234 9.22393 4.88347 9.22118C4.83883 9.19766 4.80235 9.16118 4.77883 9.11654C4.77607 9.10766 4.76757 9.07453 4.76114 8.99572C4.75059 8.8666 4.75 8.6924 4.75 8.4V5.6C4.75 5.3076 4.75059 5.1334 4.76114 5.00428C4.76757 4.92547 4.77607 4.89234 4.77883 4.88346C4.80235 4.83882 4.83883 4.80234 4.88346 4.77882ZM4.77973 4.88088C4.77974 4.8809 4.77956 4.88144 4.77917 4.88239L4.77973 4.88088ZM4.77973 9.11913C4.77972 9.11915 4.77953 9.11869 4.77918 9.11764L4.77973 9.11913ZM4.88088 9.22027C4.88091 9.22026 4.88143 9.22044 4.88236 9.22082L4.88088 9.22027ZM9.11913 9.22027C9.11916 9.22028 9.11869 9.22048 9.11764 9.22082L9.11913 9.22027ZM9.22028 9.11913C9.22027 9.11909 9.22044 9.11856 9.22084 9.11761L9.22028 9.11913ZM9.22028 4.88088C9.22029 4.88085 9.22048 4.88132 9.22084 4.88239L9.22028 4.88088ZM9.11764 4.77918C9.11869 4.77952 9.11916 4.77972 9.11913 4.77973L9.11764 4.77918ZM15.5738 3.25H18.4262C18.6837 3.24998 18.9202 3.24996 19.1179 3.26612C19.331 3.28353 19.5642 3.32339 19.7945 3.44074C20.1238 3.60852 20.3915 3.87623 20.5593 4.20552C20.6766 4.43582 20.7165 4.669 20.7339 4.88213C20.75 5.07981 20.75 5.31629 20.75 5.57377V8.42623C20.75 8.68371 20.75 8.92019 20.7339 9.11787C20.7165 9.33101 20.6766 9.56418 20.5593 9.79448C20.3915 10.1238 20.1238 10.3915 19.7945 10.5593C19.5642 10.6766 19.331 10.7165 19.1179 10.7339C18.9202 10.75 18.6837 10.75 18.4262 10.75H15.5738C15.3163 10.75 15.0798 10.75 14.8821 10.7339C14.669 10.7165 14.4358 10.6766 14.2055 10.5593C13.8762 10.3915 13.6085 10.1238 13.4407 9.79448C13.3234 9.56418 13.2835 9.33101 13.2661 9.11787C13.25 8.92019 13.25 8.68371 13.25 8.42623V5.57377C13.25 5.31629 13.25 5.07981 13.2661 4.88213C13.2835 4.669 13.3234 4.43582 13.4407 4.20552C13.6085 3.87623 13.8762 3.60852 14.2055 3.44074C14.4358 3.32339 14.669 3.28353 14.8821 3.26612C15.0798 3.24996 15.3163 3.24998 15.5738 3.25ZM14.8809 4.77973C14.8808 4.77972 14.8813 4.77953 14.8824 4.77918L14.8809 4.77973ZM14.8835 4.77882C14.8923 4.77607 14.9255 4.76757 15.0043 4.76113C15.1334 4.75058 15.3076 4.75 15.6 4.75H18.4C18.6924 4.75 18.8666 4.75058 18.9957 4.76113C19.0745 4.76757 19.1077 4.77607 19.1165 4.77882C19.1612 4.80234 19.1977 4.83882 19.2212 4.88346C19.2239 4.89234 19.2324 4.92547 19.2389 5.00428C19.2494 5.1334 19.25 5.3076 19.25 5.6V8.4C19.25 8.6924 19.2494 8.8666 19.2389 8.99572C19.2324 9.07453 19.2239 9.10766 19.2212 9.11654C19.1977 9.16118 19.1612 9.19766 19.1165 9.22118C19.1077 9.22393 19.0745 9.23243 18.9957 9.23887C18.8666 9.24942 18.6924 9.25 18.4 9.25H15.6C15.3076 9.25 15.1334 9.24942 15.0043 9.23887C14.9255 9.23243 14.8923 9.22393 14.8835 9.22118C14.8388 9.19766 14.8023 9.16118 14.7788 9.11654C14.7761 9.10766 14.7676 9.07453 14.7611 8.99572C14.7506 8.8666 14.75 8.6924 14.75 8.4V5.6C14.75 5.3076 14.7506 5.1334 14.7611 5.00428C14.7676 4.92547 14.7761 4.89234 14.7788 4.88346C14.8023 4.83882 14.8388 4.80234 14.8835 4.77882ZM14.7797 4.88088C14.7797 4.8809 14.7796 4.88143 14.7792 4.88236L14.7797 4.88088ZM14.7797 9.11913C14.7797 9.11915 14.7795 9.11867 14.7792 9.11761L14.7797 9.11913ZM14.8809 9.22027C14.8809 9.22026 14.8814 9.22044 14.8824 9.22082L14.8809 9.22027ZM19.1191 9.22027C19.1192 9.22028 19.1187 9.22048 19.1176 9.22082L19.1191 9.22027ZM19.2203 9.11913C19.2203 9.11911 19.2204 9.11857 19.2208 9.11761L19.2203 9.11913ZM19.2203 4.88088C19.2203 4.88085 19.2205 4.88131 19.2208 4.88236L19.2203 4.88088ZM19.1176 4.77917C19.1187 4.77952 19.1192 4.77972 19.1191 4.77973L19.1176 4.77917ZM5.57377 13.25H8.42623C8.68372 13.25 8.92019 13.25 9.11787 13.2661C9.33101 13.2835 9.56418 13.3234 9.79449 13.4407C10.1238 13.6085 10.3915 13.8762 10.5593 14.2055C10.6766 14.4358 10.7165 14.669 10.7339 14.8821C10.75 15.0798 10.75 15.3163 10.75 15.5738V18.4262C10.75 18.6837 10.75 18.9202 10.7339 19.1179C10.7165 19.331 10.6766 19.5642 10.5593 19.7945C10.3915 20.1238 10.1238 20.3915 9.79449 20.5593C9.56418 20.6766 9.33101 20.7165 9.11787 20.7339C8.92019 20.75 8.68372 20.75 8.42623 20.75H5.57377C5.31629 20.75 5.07981 20.75 4.88213 20.7339C4.669 20.7165 4.43583 20.6766 4.20552 20.5593C3.87624 20.3915 3.60852 20.1238 3.44074 19.7945C3.32339 19.5642 3.28353 19.331 3.26612 19.1179C3.24997 18.9202 3.24998 18.6837 3.25 18.4262V15.5738C3.24998 15.3163 3.24997 15.0798 3.26612 14.8821C3.28353 14.669 3.32339 14.4358 3.44074 14.2055C3.60852 13.8762 3.87624 13.6085 4.20552 13.4407C4.43583 13.3234 4.669 13.2835 4.88213 13.2661C5.07981 13.25 5.31629 13.25 5.57377 13.25ZM4.88088 14.7797C4.88085 14.7797 4.88131 14.7795 4.88237 14.7792L4.88088 14.7797ZM4.88346 14.7788C4.89234 14.7761 4.92546 14.7676 5.00428 14.7611C5.13341 14.7506 5.3076 14.75 5.6 14.75H8.4C8.6924 14.75 8.8666 14.7506 8.99573 14.7611C9.07453 14.7676 9.10766 14.7761 9.11654 14.7788C9.16118 14.8023 9.19766 14.8388 9.22118 14.8835C9.22393 14.8923 9.23243 14.9255 9.23887 15.0043C9.24942 15.1334 9.25 15.3076 9.25 15.6V18.4C9.25 18.6924 9.24942 18.8666 9.23887 18.9957C9.23243 19.0745 9.22393 19.1077 9.22118 19.1165C9.19766 19.1612 9.16118 19.1977 9.11654 19.2212C9.10767 19.2239 9.07454 19.2324 8.99573 19.2389C8.8666 19.2494 8.6924 19.25 8.4 19.25H5.6C5.3076 19.25 5.13341 19.2494 5.00428 19.2389C4.92547 19.2324 4.89235 19.2239 4.88347 19.2212C4.83883 19.1977 4.80235 19.1612 4.77883 19.1165C4.77607 19.1077 4.76757 19.0745 4.76114 18.9957C4.75059 18.8666 4.75 18.6924 4.75 18.4V15.6C4.75 15.3076 4.75059 15.1334 4.76114 15.0043C4.76757 14.9255 4.77607 14.8923 4.77883 14.8835C4.80234 14.8388 4.83882 14.8023 4.88346 14.7788ZM4.77973 14.8809C4.77974 14.8809 4.77956 14.8814 4.77918 14.8824L4.77973 14.8809ZM4.77973 19.1191C4.77972 19.1192 4.77953 19.1187 4.77918 19.1176L4.77973 19.1191ZM4.88088 19.2203C4.8809 19.2203 4.88143 19.2204 4.88236 19.2208L4.88088 19.2203ZM9.11913 19.2203C9.11917 19.2203 9.1187 19.2205 9.11762 19.2208L9.11913 19.2203ZM9.22028 19.1191C9.22026 19.1191 9.22044 19.1185 9.22087 19.1175L9.22028 19.1191ZM9.22027 14.8809C9.22028 14.8808 9.22048 14.8813 9.22084 14.8824L9.22027 14.8809ZM9.11761 14.7792C9.11868 14.7795 9.11915 14.7797 9.11913 14.7797L9.11761 14.7792ZM17 13.25C17.4142 13.25 17.75 13.5858 17.75 14V16.25H20C20.4142 16.25 20.75 16.5858 20.75 17C20.75 17.4142 20.4142 17.75 20 17.75H17.75V20C17.75 20.4142 17.4142 20.75 17 20.75C16.5858 20.75 16.25 20.4142 16.25 20V17.75H14C13.5858 17.75 13.25 17.4142 13.25 17C13.25 16.5858 13.5858 16.25 14 16.25H16.25V14C16.25 13.5858 16.5858 13.25 17 13.25Z\"\n  />\n</svg>`;\n\nexport const BlockHubRoundedRectangleIcon = html`<svg\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.25 7C2.25 5.48122 3.48122 4.25 5 4.25H19C20.5188 4.25 21.75 5.48122 21.75 7V17C21.75 18.5188 20.5188 19.75 19 19.75H5C3.48122 19.75 2.25 18.5188 2.25 17V7ZM5 5.75C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.6904 4.30964 18.25 5 18.25H19C19.6904 18.25 20.25 17.6904 20.25 17V7C20.25 6.30964 19.6904 5.75 19 5.75H5Z\"\n  />\n</svg>`;\n\nexport const SearchIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M11 3.75C6.99594 3.75 3.75 6.99594 3.75 11C3.75 15.0041 6.99594 18.25 11 18.25C13.0026 18.25 14.8156 17.4381 16.1276 16.1254C16.128 16.1251 16.1284 16.1247 16.1287 16.1243C16.1288 16.1243 16.1289 16.1242 16.1289 16.1241C17.4395 14.8123 18.25 13.0008 18.25 11C18.25 6.99594 15.0041 3.75 11 3.75ZM17.6965 16.6324C18.9779 15.1104 19.75 13.1453 19.75 11C19.75 6.16751 15.8325 2.25 11 2.25C6.16751 2.25 2.25 6.16751 2.25 11C2.25 15.8325 6.16751 19.75 11 19.75C13.1471 19.75 15.1136 18.9767 16.6361 17.6933L20.4694 21.5301C20.7622 21.8231 21.2371 21.8233 21.5301 21.5306C21.8231 21.2378 21.8233 20.7629 21.5306 20.4699L17.6965 16.6324ZM10.25 6C10.25 5.58579 10.5858 5.25 11 5.25C14.1756 5.25 16.75 7.82436 16.75 11C16.75 11.4142 16.4142 11.75 16 11.75C15.5858 11.75 15.25 11.4142 15.25 11C15.25 8.65279 13.3472 6.75 11 6.75C10.5858 6.75 10.25 6.41421 10.25 6Z\"\n  />\n</svg>`;\n\n// Link Icon\n\n/**\n * ✅\n */\nexport const ConfirmIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M17.6726 6.0059L7.49998 16.1785L2.32739 11.0059L3.5059 9.82739L7.49998 13.8215L16.4941 4.82739L17.6726 6.0059Z\"\n  />\n</svg>`;\n\n/**\n * 🖊️\n */\nexport const EditIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M13.245 4.43531L12.543 5.16181L14.8382 7.45701L15.5647 6.75504C16.2018 6.11419 16.2006 5.07822 15.5612 4.4388C14.9218 3.7994 13.8859 3.79823 13.245 4.43531ZM13.9392 8.32572L11.6743 6.06086L5.13833 12.8251L4.2655 15.7345L7.17493 14.8617L13.9392 8.32572ZM12.3576 3.55492C13.4863 2.42619 15.3164 2.42619 16.4451 3.55492C17.5738 4.68365 17.5738 6.51369 16.4451 7.64242L16.4375 7.65L7.93429 15.8662C7.86252 15.9355 7.77518 15.9867 7.67959 16.0153L3.51292 17.2654C3.29269 17.3314 3.05397 17.2712 2.89139 17.1087C2.7288 16.9461 2.66862 16.7073 2.73469 16.4871L3.98469 12.3204C4.01337 12.2249 4.06452 12.1375 4.13387 12.0657L12.3576 3.55492Z\"\n  />\n</svg>`;\n\nexport const UnlinkIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12.8423 4.60675C14.6513 2.79775 17.5843 2.79775 19.3933 4.60675C21.2023 6.41576 21.2023 9.34874 19.3933 11.1577L17.3344 13.2166C17.0415 13.5095 16.5666 13.5095 16.2737 13.2166C15.9808 12.9237 15.9808 12.4489 16.2737 12.156L18.3326 10.0971C19.5558 8.87386 19.5558 6.89063 18.3326 5.66741C17.1094 4.44419 15.1261 4.44419 13.9029 5.66741L11.1578 8.41258C9.93454 9.6358 9.93454 11.619 11.1578 12.8423C11.3498 13.0343 11.5596 13.1955 11.7816 13.3266C12.1383 13.5372 12.2566 13.9971 12.046 14.3538C11.8353 14.7104 11.3755 14.8288 11.0188 14.6182C10.6892 14.4235 10.379 14.1849 10.0971 13.9029C8.28809 12.0939 8.28809 9.16093 10.0971 7.35192L12.8423 4.60675ZM11.954 9.64621C12.1647 9.28955 12.6246 9.17119 12.9812 9.38183C13.3109 9.57652 13.621 9.81514 13.9029 10.0971C15.7119 11.9061 15.7119 14.8391 13.9029 16.6481L11.1578 19.3932C9.34875 21.2023 6.41577 21.2023 4.60677 19.3932C2.79776 17.5842 2.79776 14.6513 4.60677 12.8423L6.66564 10.7834C6.95854 10.4905 7.43341 10.4905 7.7263 10.7834C8.0192 11.0763 8.0192 11.5511 7.7263 11.844L5.66743 13.9029C4.44421 15.1261 4.44421 17.1094 5.66743 18.3326C6.89065 19.5558 8.87388 19.5558 10.0971 18.3326L12.8423 15.5874C14.0655 14.3642 14.0655 12.381 12.8423 11.1577C12.6503 10.9657 12.4404 10.8045 12.2184 10.6734C11.8618 10.4627 11.7434 10.0029 11.954 9.64621Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.19501 3.26921C8.59861 3.17607 9.0013 3.42775 9.09444 3.83135L9.53081 5.72226C9.62395 6.12587 9.37227 6.52856 8.96866 6.6217C8.56505 6.71484 8.16236 6.46316 8.06922 6.05955L7.63286 4.16864C7.53972 3.76504 7.7914 3.36234 8.19501 3.26921ZM3.26922 8.19499C3.36236 7.79138 3.76505 7.5397 4.16866 7.63284L6.05957 8.06921C6.46317 8.16235 6.71486 8.56504 6.62172 8.96864C6.52858 9.37225 6.12588 9.62393 5.72228 9.53079L3.83137 9.09443C3.42776 9.00129 3.17608 8.5986 3.26922 8.19499ZM17.3783 15.0314C17.4715 14.6277 17.8741 14.3761 18.2777 14.4692L20.1687 14.9056C20.5723 14.9987 20.8239 15.4014 20.7308 15.805C20.6377 16.2086 20.235 16.4603 19.8314 16.3672L17.9405 15.9308C17.5369 15.8377 17.2852 15.435 17.3783 15.0314ZM15.0314 17.3783C15.435 17.2852 15.8377 17.5368 15.9308 17.9404L16.3672 19.8314C16.4603 20.235 16.2086 20.6377 15.805 20.7308C15.4014 20.8239 14.9987 20.5723 14.9056 20.1686L14.4692 18.2777C14.3761 17.8741 14.6278 17.4714 15.0314 17.3783Z\"\n  />\n</svg>`;\n\nexport const LinkToCardIcon = html`\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_3409_77516)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M6.16667 6.79166C5.59137 6.79166 5.125 7.25803 5.125 7.83333V16.1667C5.125 16.742 5.59137 17.2083 6.16667 17.2083H17.8333C18.4086 17.2083 18.875 16.742 18.875 16.1667V12C18.875 11.6548 19.1548 11.375 19.5 11.375C19.8452 11.375 20.125 11.6548 20.125 12V16.1667C20.125 17.4323 19.099 18.4583 17.8333 18.4583H6.16667C4.90101 18.4583 3.875 17.4323 3.875 16.1667V7.83333C3.875 6.56768 4.90101 5.54166 6.16667 5.54166H12C12.3452 5.54166 12.625 5.82148 12.625 6.16666C12.625 6.51184 12.3452 6.79166 12 6.79166H6.16667Z\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M15.6063 5.48362C16.64 4.4499 18.316 4.4499 19.3497 5.48362C20.3834 6.51734 20.3834 8.19333 19.3497 9.22705L18.2774 10.2994C18.0333 10.5435 17.6376 10.5435 17.3935 10.2994C17.3371 10.243 17.2937 10.1784 17.2634 10.1096C17.2915 10.8217 17.0338 11.5429 16.4902 12.0866L15.0604 13.5164C14.0267 14.5501 12.3507 14.5501 11.317 13.5164C10.2832 12.4827 10.2832 10.8067 11.317 9.77294L12.3893 8.70061C12.6334 8.45653 13.0291 8.45653 13.2732 8.70061C13.3296 8.75703 13.373 8.82155 13.4033 8.89042C13.3751 8.17833 13.6329 7.45704 14.1765 6.91339L15.6063 5.48362ZM13.4445 9.2633C13.4215 9.38098 13.3643 9.49332 13.2732 9.58449L12.2008 10.6568C11.6553 11.2024 11.6553 12.0869 12.2008 12.6325C12.7464 13.1781 13.6309 13.1781 14.1765 12.6325L15.6063 11.2027C16.1518 10.6571 16.1518 9.77261 15.6063 9.22705C15.5203 9.1411 15.4267 9.0692 15.3279 9.01086C15.0307 8.83532 14.932 8.45209 15.1076 8.15487C15.2831 7.85766 15.6664 7.75902 15.9636 7.93456C16.1521 8.0459 16.3293 8.18227 16.4902 8.34317C16.8849 8.73787 17.1289 9.22622 17.2221 9.73669C17.2452 9.619 17.3023 9.50667 17.3935 9.4155L18.4658 8.34317C19.0114 7.7976 19.0114 6.91307 18.4658 6.3675C17.9203 5.82194 17.0357 5.82194 16.4902 6.3675L15.0604 7.79728C14.5148 8.34284 14.5148 9.22738 15.0604 9.77294C15.1463 9.85889 15.24 9.93079 15.3388 9.98913C15.636 10.1647 15.7346 10.5479 15.5591 10.8451C15.3835 11.1423 15.0003 11.241 14.7031 11.0654C14.5146 10.9541 14.3374 10.8177 14.1765 10.6568C13.7818 10.2621 13.5378 9.77377 13.4445 9.2633Z\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_3409_77516\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" transform=\"translate(2 2)\" />\n      </clipPath>\n    </defs>\n  </svg>\n`;\n\n// Image Icon\n\nexport const CaptionIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.70831 4.16671C2.70831 3.36129 3.36123 2.70837 4.16665 2.70837H7.49998C8.30539 2.70837 8.95831 3.36129 8.95831 4.16671V7.50004C8.95831 8.30546 8.30539 8.95837 7.49998 8.95837H4.16665C3.36123 8.95837 2.70831 8.30546 2.70831 7.50004V4.16671ZM4.16665 3.95837C4.05159 3.95837 3.95831 4.05165 3.95831 4.16671V7.50004C3.95831 7.6151 4.05159 7.70837 4.16665 7.70837H7.49998C7.61504 7.70837 7.70831 7.6151 7.70831 7.50004V4.16671C7.70831 4.05165 7.61504 3.95837 7.49998 3.95837H4.16665Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.70831 16.6667C2.70831 16.3215 2.98814 16.0417 3.33331 16.0417L13.3333 16.0417C13.6785 16.0417 13.9583 16.3215 13.9583 16.6667C13.9583 17.0119 13.6785 17.2917 13.3333 17.2917L3.33331 17.2917C2.98813 17.2917 2.70831 17.0119 2.70831 16.6667Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M2.70831 12.5C2.70831 12.1549 2.98814 11.875 3.33331 11.875L16.6666 11.875C17.0118 11.875 17.2916 12.1549 17.2916 12.5C17.2916 12.8452 17.0118 13.125 16.6666 13.125L3.33331 13.125C2.98813 13.125 2.70831 12.8452 2.70831 12.5Z\"\n  />\n</svg>`;\n\nexport const DownloadIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M9.99997 2.70837C10.3452 2.70837 10.625 2.9882 10.625 3.33337V10.7134L12.197 9.14138C12.4411 8.8973 12.8368 8.8973 13.0809 9.14138C13.3249 9.38546 13.3249 9.78119 13.0809 10.0253L10.4419 12.6642C10.1978 12.9083 9.80211 12.9083 9.55803 12.6642L6.91909 10.0253C6.67502 9.78119 6.67502 9.38546 6.91909 9.14138C7.16317 8.8973 7.5589 8.8973 7.80298 9.14138L9.37498 10.7134V3.33337C9.37498 2.9882 9.6548 2.70837 9.99997 2.70837ZM16.6666 11.212C17.0118 11.212 17.2916 11.4918 17.2916 11.837V14.9104C17.2916 15.5317 17.0577 16.1337 16.6318 16.5825C16.2049 17.0324 15.6186 17.2917 15 17.2917H4.99998C4.38132 17.2917 3.79506 17.0324 3.36812 16.5825C2.94223 16.1337 2.70831 15.5317 2.70831 14.9104L2.70831 11.837C2.70831 11.4918 2.98813 11.212 3.33331 11.212C3.67849 11.212 3.95831 11.4918 3.95831 11.837L3.95831 14.9104C3.95831 15.2207 4.07559 15.5121 4.27482 15.722C4.473 15.9309 4.73459 16.0417 4.99998 16.0417H15C15.2654 16.0417 15.527 15.9309 15.7251 15.722C15.9244 15.5121 16.0416 15.2207 16.0416 14.9104V11.837C16.0416 11.4918 16.3215 11.212 16.6666 11.212Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M13.0787 13.6458C13.0787 13.3007 13.3585 13.0208 13.7037 13.0208H13.7111C14.0563 13.0208 14.3361 13.3007 14.3361 13.6458C14.3361 13.991 14.0563 14.2708 13.7111 14.2708H13.7037C13.3585 14.2708 13.0787 13.991 13.0787 13.6458Z\"\n  />\n</svg>`;\n\nexport const WrapIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 20 20\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.16665 2.5C3.53484 2.5 3.83331 2.79848 3.83331 3.16667L3.83331 16.8333C3.83331 17.2015 3.53484 17.5 3.16665 17.5C2.79846 17.5 2.49998 17.2015 2.49998 16.8333L2.49998 3.16667C2.49998 2.79848 2.79846 2.5 3.16665 2.5ZM9.31209 14.6598C9.58453 14.4121 9.60461 13.9905 9.35694 13.7181L8.85553 13.1665H11.8939C13.5757 13.1665 14.8333 11.6875 14.8333 9.99983C14.8333 8.31215 13.5757 6.83317 11.8939 6.83317H5.83334C5.46515 6.83317 5.16668 7.13164 5.16668 7.49983C5.16668 7.86802 5.46515 8.1665 5.83334 8.1665H11.8939C12.7226 8.1665 13.5 8.92609 13.5 9.99983C13.5 11.0736 12.7226 11.8332 11.8939 11.8332H8.85553L9.35694 11.2816C9.60461 11.0092 9.58453 10.5875 9.31209 10.3399C9.03966 10.0922 8.61802 10.1123 8.37035 10.3847L6.8552 12.0514C6.62404 12.3057 6.62404 12.694 6.8552 12.9483L8.37035 14.6149C8.61802 14.8874 9.03966 14.9075 9.31209 14.6598ZM16.1666 16.8333C16.1666 17.2015 16.4651 17.5 16.8333 17.5C17.2015 17.5 17.5 17.2015 17.5 16.8333L17.5 3.16667C17.5 2.79848 17.2015 2.5 16.8333 2.5C16.4651 2.5 16.1666 2.79848 16.1666 3.16667V16.8333Z\"\n  />\n</svg>`;\n\nexport const CancelWrapIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M4 3.25C4.41421 3.25 4.75 3.58579 4.75 4L4.75 20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20L3.25 4C3.25 3.58579 3.58579 3.25 4 3.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20 3.25C20.4142 3.25 20.75 3.58579 20.75 4V20C20.75 20.4142 20.4142 20.75 20 20.75C19.5858 20.75 19.25 20.4142 19.25 20V4C19.25 3.58579 19.5858 3.25 20 3.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M10.6437 12.408C10.3168 12.7053 10.2927 13.2112 10.5899 13.5381L11.1916 14.2H7C6.55817 14.2 6.2 14.5582 6.2 15C6.2 15.4418 6.55817 15.8 7 15.8L11.1916 15.8L10.5899 16.4619C10.2927 16.7888 10.3168 17.2947 10.6437 17.592C10.9706 17.8892 11.4766 17.8651 11.7738 17.5381L13.592 15.5381C13.8693 15.233 13.8693 14.767 13.592 14.4619L11.7738 12.4619C11.4766 12.1349 10.9706 12.1108 10.6437 12.408Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M14.6437 6.40805C14.3168 6.70525 14.2927 7.21121 14.5899 7.53814L15.1916 8.2H7C6.55817 8.2 6.2 8.55817 6.2 9C6.2 9.44183 6.55817 9.8 7 9.8H15.1916L14.5899 10.4619C14.2927 10.7888 14.3168 11.2947 14.6437 11.592C14.9706 11.8892 15.4766 11.8651 15.7738 11.5381L17.592 9.53814C17.8693 9.233 17.8693 8.767 17.592 8.46186L15.7738 6.46186C15.4766 6.13494 14.9706 6.11084 14.6437 6.40805Z\"\n  />\n</svg>`;\n\n// A Rectangular Icon\nexport const RectIcon = html`<svg\n  width=\"36\"\n  height=\"36\"\n  viewBox=\"0 0 36 36\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 14C8.25 11.9289 9.92893 10.25 12 10.25H24C26.0711 10.25 27.75 11.9289 27.75 14V22C27.75 24.0711 26.0711 25.75 24 25.75H12C9.92893 25.75 8.25 24.0711 8.25 22V14ZM12 11.75C10.7574 11.75 9.75 12.7574 9.75 14V22C9.75 23.2426 10.7574 24.25 12 24.25H24C25.2426 24.25 26.25 23.2426 26.25 22V14C26.25 12.7574 25.2426 11.75 24 11.75H12Z\"\n  />\n</svg>`;\n\nexport const ArrowDownIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M6.46967 9.46967C6.76256 9.17678 7.23744 9.17678 7.53033 9.46967L11.6464 13.5858C11.8417 13.781 12.1583 13.781 12.3536 13.5858L16.4697 9.46967C16.7626 9.17678 17.2374 9.17678 17.5303 9.46967C17.8232 9.76256 17.8232 10.2374 17.5303 10.5303L13.4142 14.6464C12.6332 15.4275 11.3668 15.4275 10.5858 14.6464L6.46967 10.5303C6.17678 10.2374 6.17678 9.76256 6.46967 9.46967Z\"\n  />\n</svg>`;\n\n// Linked Page\n\nconst PageIconSVG = svg`\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20.75 18C20.75 19.5188 19.5188 20.75 18 20.75H10C9.58579 20.75 9.25 20.4142 9.25 20C9.25 19.5858 9.58579 19.25 10 19.25L18 19.25C18.6904 19.25 19.25 18.6904 19.25 18L19.25 4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4L20.75 18Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H15C15.4142 15.25 15.75 15.5858 15.75 16C15.75 16.4142 15.4142 16.75 15 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z\"\n  />`;\n\nconst LinkedPageSVG = svg`<path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M20 10.75C19.5858 10.75 19.25 10.4142 19.25 10V4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4V10C20.75 10.4142 20.4142 10.75 20 10.75Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H12C12.4142 15.25 12.75 15.5858 12.75 16C12.75 16.4142 12.4142 16.75 12 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M18 14.75C17.5858 14.75 17.25 14.4142 17.25 14C17.25 13.5858 17.5858 13.25 18 13.25H20.9C20.9174 13.25 20.9346 13.2505 20.9517 13.2515C21.1594 13.2382 21.3716 13.3109 21.5303 13.4697C21.6891 13.6284 21.7618 13.8406 21.7485 14.0483C21.7495 14.0654 21.75 14.0826 21.75 14.1V17C21.75 17.4142 21.4142 17.75 21 17.75C20.5858 17.75 20.25 17.4142 20.25 17V15.8107L14.5303 21.5303C14.2374 21.8232 13.7626 21.8232 13.4697 21.5303C13.1768 21.2374 13.1768 20.7626 13.4697 20.4697L19.1893 14.75H18Z\"\n  />`;\n\nexport const FontPageIcon = fontIcon(PageIconSVG);\nexport const FontLinkedPageIcon = fontIcon(LinkedPageSVG);\n\nexport const PageIcon = icon(PageIconSVG, 20);\nexport const LinkedPageIcon = icon(LinkedPageSVG, 20);\n\nexport const NewPageIcon = html`<svg\n  width=\"20\"\n  height=\"20\"\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M12 3.25C12.4142 3.25 12.75 3.58579 12.75 4V20C12.75 20.4142 12.4142 20.75 12 20.75C11.5858 20.75 11.25 20.4142 11.25 20V4C11.25 3.58579 11.5858 3.25 12 3.25Z\"\n  />\n  <path\n    fill-rule=\"evenodd\"\n    clip-rule=\"evenodd\"\n    d=\"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z\"\n  />\n</svg>`;\n\nexport const DualLinkSVG = svg`<path\n  fill-rule=\"evenodd\"\n  clip-rule=\"evenodd\"\n  d=\"M11 4.75C10.5858 4.75 10.25 4.41421 10.25 4C10.25 3.58579 10.5858 3.25 11 3.25H19.9C19.9174 3.25 19.9346 3.25052 19.9517 3.25155C20.1594 3.23823 20.3716 3.31093 20.5303 3.46967C20.6891 3.62841 20.7618 3.84059 20.7485 4.04829C20.7495 4.0654 20.75 4.08264 20.75 4.1V13C20.75 13.4142 20.4142 13.75 20 13.75C19.5858 13.75 19.25 13.4142 19.25 13V5.81066L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L18.1893 4.75H11Z\"\n/>`;\n\nexport const DualLinkIcon = icon(DualLinkSVG, 20);\nexport const DualLinkIcon16 = icon(DualLinkSVG, 16);\n", "import type { TemplateResult } from 'lit/html.js';\n\nimport type { BlockModelProps } from '../../types.js';\nimport {\n  BookmarkIcon,\n  BulletedListIcon,\n  CodeBlockIcon,\n  DividerIcon,\n  H1Icon,\n  H2Icon,\n  H3Icon,\n  H4Icon,\n  H5Icon,\n  H6Icon,\n  ImageIcon,\n  NumberedListIcon,\n  QuoteIcon,\n  TextIcon,\n  TodoIcon,\n} from '../icons/index.js';\nimport { SHORT_KEY } from './platform.js';\n\nexport type BlockConfig<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ALLProps extends Record<string, any> = BlockModelProps,\n  Flavour extends keyof ALLProps & string = keyof ALLProps & string\n> = {\n  flavour: Flavour;\n  type: ALLProps[Flavour]['type'];\n  name: string;\n  hotkey: string | null;\n  icon: TemplateResult<1>;\n};\n\nexport const paragraphConfig = [\n  {\n    flavour: 'affine:paragraph',\n    type: 'text',\n    name: 'Text',\n    hotkey: `${SHORT_KEY}+option+0,${SHORT_KEY}+shift+0`,\n    icon: TextIcon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h1',\n    name: 'Heading 1',\n    hotkey: `${SHORT_KEY}+option+1,${SHORT_KEY}+shift+1`,\n    icon: H1Icon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h2',\n    name: 'Heading 2',\n    hotkey: `${SHORT_KEY}+option+2,${SHORT_KEY}+shift+2`,\n    icon: H2Icon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h3',\n    name: 'Heading 3',\n    hotkey: `${SHORT_KEY}+option+3,${SHORT_KEY}+shift+3`,\n    icon: H3Icon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h4',\n    name: 'Heading 4',\n    hotkey: `${SHORT_KEY}+option+4,${SHORT_KEY}+shift+4`,\n    icon: H4Icon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h5',\n    name: 'Heading 5',\n    hotkey: `${SHORT_KEY}+option+5,${SHORT_KEY}+shift+5`,\n    icon: H5Icon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h6',\n    name: 'Heading 6',\n    hotkey: `${SHORT_KEY}+option+6,${SHORT_KEY}+shift+6`,\n    icon: H6Icon,\n  },\n  {\n    flavour: 'affine:list',\n    type: 'bulleted',\n    name: 'Bulleted List',\n    hotkey: `${SHORT_KEY}+option+8,${SHORT_KEY}+shift+8`,\n    icon: BulletedListIcon,\n  },\n  {\n    flavour: 'affine:list',\n    type: 'numbered',\n    name: 'Numbered List',\n    hotkey: `${SHORT_KEY}+option+9,${SHORT_KEY}+shift+9`,\n    icon: NumberedListIcon,\n  },\n  {\n    flavour: 'affine:list',\n    type: 'todo',\n    name: 'To-do List',\n    hotkey: null,\n    icon: TodoIcon,\n  },\n  {\n    flavour: 'affine:code',\n    type: undefined,\n    name: 'Code Block',\n    // Use `alt` instead of `shift` because `ctrl+shift+c` will open chrome devtools on Windows.\n    // Use `command` / `ctrl` instead of `${SHORT_KEY}` because `option` and `alt` are the same key on Mac, they will trigger twice.\n    hotkey: `command+option+c,ctrl+alt+c`,\n    icon: CodeBlockIcon,\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'quote',\n    name: 'Quote',\n    hotkey: null,\n    icon: QuoteIcon,\n  },\n  {\n    flavour: 'affine:divider',\n    type: 'divider',\n    name: 'Divider',\n    hotkey: `${SHORT_KEY}+option+d,${SHORT_KEY}+shift+d`,\n    icon: DividerIcon,\n  },\n  // {\n  //   flavour: 'affine:',\n  //   type: 'callout',\n  //   name: 'Callout',\n  //   icon: CalloutIcon,\n  // },\n] satisfies BlockConfig[];\n\nexport const BLOCKHUB_TEXT_ITEMS = [\n  {\n    flavour: 'affine:paragraph',\n    type: 'text',\n    name: 'Text',\n    description: 'Start typing with plain text.',\n    icon: TextIcon,\n    tooltip: 'Drag/Click to insert Text block',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h1',\n    name: 'Heading 1',\n    description: 'Headings in the largest font.',\n    icon: H1Icon,\n    tooltip: 'Drag/Click to insert Heading 1',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h2',\n    name: 'Heading 2',\n    description: 'Headings in the 2nd font size.',\n    icon: H2Icon,\n    tooltip: 'Drag/Click to insert Heading 2',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h3',\n    name: 'Heading 3',\n    description: 'Headings in the 3rd font size.',\n    icon: H3Icon,\n    tooltip: 'Drag/Click to insert Heading 3',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h4',\n    name: 'Heading 4',\n    description: 'Heading in the 4th font size.',\n    icon: H4Icon,\n    tooltip: 'Drag/Click to insert Heading 4',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h5',\n    name: 'Heading 5',\n    description: 'Heading in the 5th font size.',\n    icon: H5Icon,\n    tooltip: 'Drag/Click to insert Heading 5',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'h6',\n    name: 'Heading 6',\n    description: 'Heading in the 6th font size.',\n    icon: H6Icon,\n    tooltip: 'Drag/Click to insert Heading 6',\n  },\n  {\n    flavour: 'affine:code',\n    type: null,\n    name: 'Code Block',\n    description: 'Capture a code snippet.',\n    icon: CodeBlockIcon,\n    tooltip: 'Drag/Click to insert Code Block',\n  },\n  {\n    flavour: 'affine:paragraph',\n    type: 'quote',\n    name: 'Quote',\n    description: 'Capture a quote.',\n    icon: QuoteIcon,\n    tooltip: 'Drag/Click to insert Quote',\n  },\n  {\n    flavour: 'affine:divider',\n    type: null,\n    name: 'Divider',\n    description: 'A visual divider.',\n    icon: DividerIcon,\n    tooltip: 'A visual divider',\n  },\n];\n\nexport const BLOCKHUB_LIST_ITEMS = [\n  {\n    flavour: 'affine:list',\n    type: 'bulleted',\n    name: 'Bulleted List',\n    description: 'A simple bulleted list.',\n    icon: BulletedListIcon,\n    tooltip: 'Drag/Click to insert Bulleted List',\n  },\n  {\n    flavour: 'affine:list',\n    type: 'numbered',\n    name: 'Numbered List',\n    description: 'A list with numbering.',\n    icon: NumberedListIcon,\n    tooltip: 'Drag/Click to insert Numbered List',\n  },\n  {\n    flavour: 'affine:list',\n    type: 'todo',\n    name: 'To-do List',\n    description: 'Track tasks with a to-do list.',\n    icon: TodoIcon,\n    tooltip: 'Drag/Click to insert To-do List',\n  },\n];\n\nexport const BLOCKHUB_FILE_ITEMS = [\n  {\n    flavour: 'affine:embed',\n    type: 'image',\n    name: 'Image',\n    description: 'Upload images.',\n    icon: ImageIcon,\n    tooltip: 'Drag/Click to insert Image',\n  },\n  {\n    flavour: 'affine:bookmark',\n    type: 'bookmark',\n    name: 'Bookmark',\n    description: 'Insert a link in card view.',\n    icon: BookmarkIcon,\n    tooltip: 'Drag/Click to insert Bookmark',\n  },\n];\n", "import type { CssVariableName } from '@blocksuite/blocks';\n\nimport { SHORT_KEY } from './consts/platform.js';\n\nexport * from './consts/block-hub.js';\nexport * from './consts/platform.js';\n\nexport const BLOCK_ID_ATTR = 'data-block-id';\nexport const BLOCK_SERVICE_LOADING_ATTR = 'data-service-loading';\nexport const PREVENT_DEFAULT = false;\nexport type PREVENT_DEFAULT = typeof PREVENT_DEFAULT;\nexport const ALLOW_DEFAULT = true;\nexport type ALLOW_DEFAULT = typeof ALLOW_DEFAULT;\n\nexport const HOTKEYS = {\n  ANY_KEY: '*',\n  UNDO: `${SHORT_KEY}+z`,\n  REDO: `${SHORT_KEY}+shift+z,ctrl+y`,\n  BACKSPACE: 'backspace',\n  DELETE: 'delete',\n  SELECT_ALL: `${SHORT_KEY}+a`,\n  SHIFT_UP: 'shift+up',\n  SHIFT_DOWN: 'shift+down',\n\n  UP: 'up',\n  DOWN: 'down',\n  LEFT: 'left',\n  RIGHT: 'right',\n  ENTER: 'enter',\n  TAB: 'tab',\n  SPACE: 'space',\n  ESC: 'esc',\n};\n\nexport const MOVE_DETECT_THRESHOLD = 2;\nexport const SCROLL_THRESHOLD = 100;\n\nexport const EDITOR_WIDTH = 800;\nexport const BLOCK_CHILDREN_CONTAINER_PADDING_LEFT = 26;\nexport const PAGE_BLOCK_PADDING_BOTTOM = 150;\nexport const PAGE_BLOCK_CHILD_PADDING = 24;\nexport const DRAG_HANDLE_OFFSET_LEFT = 1;\nexport const EDGELESS_BLOCK_CHILD_PADDING = 24;\n\nexport const FRAME_BACKGROUND_COLORS: CssVariableName[] = [\n  '--affine-background-secondary-color',\n  '--affine-tag-yellow',\n  '--affine-tag-red',\n  '--affine-tag-green',\n  '--affine-tag-blue',\n  '--affine-tag-purple',\n];\n", "type DisposeCallback = () => void;\n\ninterface AllDocumentEventMap extends DocumentEventMap {\n  'virgo-vrange-updated': CustomEvent;\n}\n\nexport interface Disposable {\n  dispose: DisposeCallback;\n}\n\nexport class DisposableGroup implements Disposable {\n  private _disposed = false;\n  private _disposables: Disposable[] = [];\n\n  get disposed() {\n    return this._disposed;\n  }\n\n  /**\n   * Add to group to be disposed with others.\n   * This will be immediately disposed if this group has already been disposed.\n   */\n  add(d: Disposable | DisposeCallback) {\n    if (typeof d === 'function') {\n      if (this._disposed) d();\n      else this._disposables.push({ dispose: d });\n    } else {\n      if (this._disposed) d.dispose();\n      else this._disposables.push(d);\n    }\n  }\n\n  addFromEvent<N extends keyof WindowEventMap>(\n    element: Window,\n    eventName: N,\n    handler: (e: WindowEventMap[N]) => void,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  addFromEvent<N extends keyof AllDocumentEventMap>(\n    element: Document,\n    eventName: N,\n    handler: (e: AllDocumentEventMap[N]) => void,\n    eventOptions?: boolean | AddEventListenerOptions\n  ): void;\n  addFromEvent<N extends keyof HTMLElementEventMap>(\n    element: HTMLElement,\n    eventName: N,\n    handler: (e: HTMLElementEventMap[N]) => void,\n    eventOptions?: boolean | AddEventListenerOptions\n  ): void;\n  addFromEvent(\n    target: HTMLElement | Window | Document,\n    type: string,\n    handler: (e: Event) => void,\n    eventOptions?: boolean | AddEventListenerOptions\n  ) {\n    this.add({\n      dispose: () => {\n        target.removeEventListener(type, handler as () => void, eventOptions);\n      },\n    });\n    target.addEventListener(type, handler as () => void, eventOptions);\n  }\n\n  dispose() {\n    disposeAll(this._disposables);\n    this._disposables = [];\n    this._disposed = true;\n  }\n}\n\nexport function flattenDisposables(disposables: Disposable[]): Disposable {\n  return {\n    dispose: () => disposeAll(disposables),\n  };\n}\n\nfunction disposeAll(disposables: Disposable[]) {\n  for (const disposable of disposables) {\n    try {\n      disposable.dispose();\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n", "import { type Disposable, flattenDisposables } from './disposable.js';\n\n// Credits to blocky-editor\n// https://github.com/vincentdchan/blocky-editor\nexport class Slot<T = void> implements Disposable {\n  private _emitting = false;\n  private _callbacks: ((v: T) => unknown)[] = [];\n  private _disposables: Disposable[] = [];\n\n  filter(testFun: (v: T) => boolean): Slot<T> {\n    const result = new Slot<T>();\n    // if result is disposed, dispose this too\n    result._disposables.push({ dispose: () => this.dispose() });\n\n    this.on((v: T) => {\n      if (testFun(v)) {\n        result.emit(v);\n      }\n    });\n\n    return result;\n  }\n\n  on(callback: (v: T) => unknown): Disposable {\n    if (this._emitting) {\n      const newCallback = [...this._callbacks, callback];\n      this._callbacks = newCallback;\n    } else {\n      this._callbacks.push(callback);\n    }\n    return {\n      dispose: () => {\n        if (this._emitting) {\n          this._callbacks = this._callbacks.filter(v => v !== callback);\n        } else {\n          const index = this._callbacks.indexOf(callback);\n          if (index > -1) {\n            this._callbacks.splice(index, 1); // remove one item only\n          }\n        }\n      },\n    };\n  }\n\n  subscribe = <U>(\n    selector: (state: T) => U,\n    callback: (value: U) => void,\n    config?: {\n      equalityFn?: (a: U, b: U) => boolean;\n      filter?: (state: T) => boolean;\n    }\n  ) => {\n    let prevState: U | undefined;\n    const { filter, equalityFn = Object.is } = config ?? {};\n    return this.on(state => {\n      if (filter && !filter(state)) {\n        return;\n      }\n      const nextState = selector(state);\n      if (prevState === undefined || !equalityFn(prevState, nextState)) {\n        callback(nextState);\n        prevState = nextState;\n      }\n    });\n  };\n\n  once(callback: (v: T) => unknown): Disposable {\n    let dispose: Disposable['dispose'] | undefined = undefined;\n    const handler = (v: T) => {\n      callback(v);\n      if (dispose) {\n        dispose();\n      }\n    };\n    const disposable = this.on(handler);\n    dispose = disposable.dispose;\n    return disposable;\n  }\n\n  unshift(callback: (v: T) => unknown): Disposable {\n    if (this._emitting) {\n      const newCallback = [callback, ...this._callbacks];\n      this._callbacks = newCallback;\n    } else {\n      this._callbacks.unshift(callback);\n    }\n    return {\n      dispose: () => {\n        if (this._emitting) {\n          this._callbacks = this._callbacks.filter(v => v !== callback);\n        } else {\n          const index = this._callbacks.indexOf(callback);\n          if (index > -1) {\n            this._callbacks.splice(index, 1); // remove one item only\n          }\n        }\n      },\n    };\n  }\n\n  emit(v: T) {\n    const prevEmitting = this._emitting;\n    this._emitting = true;\n    this._callbacks.forEach(f => {\n      try {\n        f(v);\n      } catch (err) {\n        console.error(err);\n      }\n    });\n    this._emitting = prevEmitting;\n  }\n\n  pipe(that: Slot<T>): Slot<T> {\n    this._callbacks.push(v => that.emit(v));\n    return this;\n  }\n\n  dispose() {\n    flattenDisposables(this._disposables).dispose();\n    this._callbacks = [];\n    this._disposables = [];\n  }\n\n  toDispose(disposables: Disposable[]): Slot<T> {\n    disposables.push(this);\n    return this;\n  }\n}\n", "export const isWeb = typeof window !== 'undefined';\nexport const isFirefox =\n  isWeb && navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\ndeclare global {\n  interface Document {\n    caretPositionFromPoint(\n      x: number,\n      y: number\n    ): {\n      offsetNode: Node;\n      offset: number;\n    };\n  }\n}\n\nconst withHidePopup = <T>(fn: () => T): T => {\n  const map = new Map<HTMLElement, string>();\n  const formatBar = document.querySelector<HTMLElement>('format-quick-bar');\n  if (formatBar) {\n    map.set(formatBar, formatBar.style.visibility);\n    formatBar.style.visibility = 'hidden';\n  }\n  try {\n    return fn();\n  } finally {\n    // recover\n    map.forEach((visibility, node) => {\n      node.style.visibility = visibility;\n    });\n  }\n};\n\nexport function caretRangeFromPoint(\n  clientX: number,\n  clientY: number\n): Range | null {\n  if (isFirefox) {\n    const caret = document.caretPositionFromPoint(clientX, clientY);\n    // TODO handle caret is covered by popup\n    const range = document.createRange();\n    range.setStart(caret.offsetNode, caret.offset);\n    return range;\n  }\n\n  const range = document.caretRangeFromPoint(clientX, clientY);\n\n  if (!range) {\n    return null;\n  }\n\n  // See https://github.com/toeverything/blocksuite/issues/1382\n  const rangeRects = range?.getClientRects();\n  if (\n    rangeRects &&\n    rangeRects.length === 2 &&\n    range.startOffset === range.endOffset &&\n    clientY < rangeRects[0].y + rangeRects[0].height\n  ) {\n    const deltaX = (rangeRects[0].x | 0) - (rangeRects[1].x | 0);\n\n    if (deltaX > 0) {\n      range.setStart(range.startContainer, range.startOffset - 1);\n      range.setEnd(range.endContainer, range.endOffset - 1);\n    }\n  }\n  // This is a workaround\n  // Sometimes the point be covered by the format bar,\n  // so the range will return the body element,\n  // which is not what we want.\n  if (\n    range.startContainer === document.body &&\n    range.endContainer === document.body\n  ) {\n    const retryRange = withHidePopup(() =>\n      document.caretRangeFromPoint(clientX, clientY)\n    );\n    return retryRange;\n  }\n  return range;\n}\n", "import type { BaseBlockModel } from '@blocksuite/store';\n\nimport type { BlockModels } from './types.js';\n\nexport type { Disposable } from './utils/disposable.js';\nexport { DisposableGroup } from './utils/disposable.js';\nexport { Slot } from './utils/slot.js';\nexport { caretRangeFromPoint, isFirefox, isWeb } from './utils/web.js';\nexport const SYS_KEYS = new Set(['id', 'flavour', 'children']);\n\n// https://stackoverflow.com/questions/31538010/test-if-a-variable-is-a-primitive-rather-than-an-object\nexport function isPrimitive(\n  a: unknown\n): a is null | undefined | boolean | number | string {\n  return a !== Object(a);\n}\n\nexport function assertExists<T>(\n  val: T | null | undefined,\n  message: string | Error = 'val does not exist'\n): asserts val is T {\n  if (val === null || val === undefined) {\n    if (message instanceof Error) {\n      throw message;\n    }\n    throw new Error(message);\n  }\n}\n\nexport function assertNotExists<T>(\n  val: T | null | undefined,\n  message = 'val exists'\n): asserts val is null | undefined {\n  if (val !== null && val !== undefined) {\n    throw new Error(message);\n  }\n}\n\nexport function assertFlavours(model: { flavour: string }, allowed: string[]) {\n  if (!allowed.includes(model.flavour)) {\n    throw new Error(`model flavour ${model.flavour} is not allowed`);\n  }\n}\n\ntype BlockModelKey = keyof BlockModels;\ntype Flavours<T> = T extends BlockModelKey[] ? BlockModels[T[number]] : never;\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nexport function matchFlavours<const Key extends readonly string[]>(\n  model: BaseBlockModel,\n  expected: Key\n): model is Flavours<Writeable<Key>> {\n  return expected.includes(model.flavour);\n}\n\nexport const nonTextBlock: (keyof BlockModels)[] = [\n  'affine:database',\n  'affine:divider',\n  'affine:embed',\n  'affine:code',\n];\n\nexport const isNonTextBlock = <\n  Key extends keyof BlockModels & string = keyof BlockModels & string\n>(\n  model: BaseBlockModel\n) => matchFlavours(model, nonTextBlock);\n\ntype Allowed =\n  | unknown\n  | void\n  | null\n  | undefined\n  | boolean\n  | number\n  | string\n  | unknown[]\n  | object;\nexport function assertEquals<T extends Allowed, U extends T>(\n  val: T,\n  expected: U,\n  message = 'val is not same as expected'\n): asserts val is U {\n  if (!isEqual(val, expected)) {\n    throw new Error(message);\n  }\n}\n\nexport function isEqual<T extends Allowed, U extends T>(\n  val: T,\n  expected: U\n): boolean {\n  const a = isPrimitive(val);\n  const b = isPrimitive(expected);\n  if (a && b) {\n    if (!Object.is(val, expected)) {\n      return false;\n    }\n  } else if (a !== b) {\n    return false;\n  } else {\n    if (Array.isArray(val) && Array.isArray(expected)) {\n      if (val.length !== expected.length) {\n        return false;\n      }\n      return val.every((x, i) => isEqual(x, expected[i]));\n    } else if (typeof val === 'object' && typeof expected === 'object') {\n      const obj1 = Object.entries(val as Record<string, unknown>);\n      const obj2 = Object.entries(expected as Record<string, unknown>);\n      if (obj1.length !== obj2.length) {\n        return false;\n      }\n      return obj1.every((x, i) => isEqual(x, obj2[i]));\n    }\n  }\n  return true;\n}\n\nexport async function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Returns an object with four arrays: add, remove and unchanged.\n *\n * add: elements in after that are not in before\n * remove: elements in before that are not in after\n * unchanged: elements in both before and after\n */\nexport function diffArray<T>(\n  before: T[],\n  after: T[],\n  compare = (a: T, b: T) => a === b\n) {\n  const add: T[] = [];\n  const remove: T[] = [];\n  const unchanged: T[] = [];\n\n  // Find elements in before that are not in after\n  for (const elem of before) {\n    if (!after.some(afterElem => compare(afterElem, elem))) {\n      remove.push(elem);\n    } else {\n      unchanged.push(elem);\n    }\n  }\n  // Find elements in after that are not in before\n  for (const elem of after) {\n    if (!before.some(beforeElem => compare(beforeElem, elem))) {\n      add.push(elem);\n    }\n  }\n\n  return { changed: add.length || remove.length, add, remove, unchanged };\n}\n", "import { Slot } from '@blocksuite/global/utils';\nimport { merge } from 'merge';\nimport type { Awareness as YAwareness } from 'y-protocols/awareness.js';\n\nimport type { Space } from './space.js';\nimport type { Store } from './store.js';\nimport { uuidv4 } from './utils/id-generator.js';\n\nexport interface UserRange {\n  startOffset: number;\n  endOffset: number;\n  blockIds: string[];\n}\n\nexport interface UserInfo {\n  id: number;\n  name: string;\n  color: string;\n}\n\ntype Request<\n  Flags extends Record<string, unknown> = BlockSuiteFlags,\n  Key extends keyof Flags = keyof Flags\n> = {\n  id: string;\n  clientId: number;\n  field: Key;\n  value: Flags[Key];\n};\n\ntype Response = {\n  id: string;\n};\n\n// Raw JSON state in awareness CRDT\nexport type RawAwarenessState<\n  Flags extends Record<string, unknown> = BlockSuiteFlags\n> = {\n  rangeMap?: Record<Space['prefixedId'], UserRange>;\n  user?: UserInfo;\n  flags: Flags;\n  request?: Request<Flags>[];\n  response?: Response[];\n};\n\ninterface AwarenessEvent<\n  Flags extends Record<string, unknown> = BlockSuiteFlags\n> {\n  id: number;\n  type: 'add' | 'update' | 'remove';\n  state?: RawAwarenessState<Flags>;\n}\n\nexport class AwarenessStore<\n  Flags extends Record<string, unknown> = BlockSuiteFlags\n> {\n  readonly awareness: YAwareness<RawAwarenessState<Flags>>;\n  readonly store: Store;\n\n  readonly slots = {\n    update: new Slot<AwarenessEvent<Flags>>(),\n  };\n\n  constructor(\n    store: Store,\n    awareness: YAwareness<RawAwarenessState<Flags>>,\n    defaultFlags: Flags\n  ) {\n    this.store = store;\n    this.awareness = awareness;\n    this.awareness.on('change', this._onAwarenessChange);\n    this.slots.update.on(this._onAwarenessMessage);\n    const upstreamFlags = awareness.getLocalState()?.flags;\n    if (upstreamFlags) {\n      this.awareness.setLocalStateField(\n        'flags',\n        merge(true, defaultFlags, upstreamFlags)\n      );\n    } else {\n      this.awareness.setLocalStateField('flags', { ...defaultFlags });\n    }\n  }\n\n  setFlag<Key extends keyof Flags>(field: Key, value: Flags[Key]) {\n    const oldFlags = this.awareness.getLocalState()?.flags ?? {};\n    this.awareness.setLocalStateField('flags', { ...oldFlags, [field]: value });\n  }\n\n  getFlag<Key extends keyof Flags>(field: Key): Flags[Key] | undefined {\n    const flags = this.awareness.getLocalState()?.flags ?? {};\n    return flags[field];\n  }\n\n  setReadonly(space: Space, value: boolean): void {\n    const flags = this.getFlag('readonly') ?? {};\n    this.setFlag('readonly', {\n      ...flags,\n      [space.prefixedId]: value,\n    } as Flags['readonly']);\n  }\n\n  isReadonly(space: Space): boolean {\n    const rd = this.getFlag('readonly');\n    if (rd && typeof rd === 'object') {\n      return Boolean((rd as Record<string, boolean>)[space.prefixedId]);\n    } else {\n      return false;\n    }\n  }\n\n  setRemoteFlag<Key extends keyof Flags>(\n    clientId: number,\n    field: Key,\n    value: Flags[Key]\n  ) {\n    if (!this.getFlag('enable_set_remote_flag')) {\n      console.error('set remote flag feature disabled');\n      return;\n    }\n    const oldRequest = this.awareness.getLocalState()?.request ?? [];\n    this.awareness.setLocalStateField('request', [\n      ...oldRequest,\n      {\n        id: uuidv4(),\n        clientId,\n        field,\n        value,\n      },\n    ] satisfies Request<Flags>[]);\n  }\n\n  setLocalRange(space: Space, range: UserRange | null) {\n    const rangeMap = this.awareness.getLocalState()?.rangeMap ?? {};\n    if (range === null) {\n      delete rangeMap[space.prefixedId];\n      this.awareness.setLocalStateField('rangeMap', rangeMap);\n    } else {\n      this.awareness.setLocalStateField('rangeMap', {\n        ...rangeMap,\n        [space.prefixedId]: range,\n      });\n    }\n  }\n\n  getLocalRange(space: Space): UserRange | undefined {\n    return this.awareness.getLocalState()?.['rangeMap']?.[space.prefixedId];\n  }\n\n  getStates(): Map<number, RawAwarenessState<Flags>> {\n    return this.awareness.getStates();\n  }\n\n  private _onAwarenessChange = (diff: {\n    added: number[];\n    removed: number[];\n    updated: number[];\n  }) => {\n    const { added, removed, updated } = diff;\n\n    const states = this.awareness.getStates();\n    added.forEach(id => {\n      this.slots.update.emit({\n        id,\n        type: 'add',\n        state: states.get(id) as RawAwarenessState<Flags>,\n      });\n    });\n    updated.forEach(id => {\n      this.slots.update.emit({\n        id,\n        type: 'update',\n        state: states.get(id) as RawAwarenessState<Flags>,\n      });\n    });\n    removed.forEach(id => {\n      this.slots.update.emit({\n        id,\n        type: 'remove',\n      });\n    });\n  };\n\n  private _onAwarenessMessage = (awMsg: AwarenessEvent<Flags>) => {\n    if (this.getFlag('enable_set_remote_flag') === true) {\n      this._handleRemoteFlags();\n    }\n  };\n\n  private _handleRemoteFlags() {\n    const nextTick: (() => void)[] = [];\n    const localState =\n      this.awareness.getLocalState() as RawAwarenessState<Flags>;\n    const request = (localState?.request ?? []) as Request<Flags>[];\n    const selfResponse = [] as Response[];\n    const fakeDirtyResponse = [] as Response[];\n    if (localState && Array.isArray(localState.response)) {\n      selfResponse.push(...localState.response);\n      fakeDirtyResponse.push(...localState.response);\n    }\n    const response = [] as Response[];\n    for (const [clientId, state] of this.awareness.getStates()) {\n      if (clientId === this.awareness.clientID) {\n        continue;\n      }\n      if (Array.isArray(state.response)) {\n        response.push(...state.response);\n      }\n      if (Array.isArray(state.request)) {\n        const remoteRequest = state.request as Request<Flags>[];\n        selfResponse.forEach((response, idx) => {\n          if (response === null) {\n            return;\n          }\n          const index = remoteRequest.findIndex(\n            request => request.id === response.id\n          );\n          if (index === -1) {\n            fakeDirtyResponse[idx].id = 'remove';\n          }\n        });\n        remoteRequest.forEach(request => {\n          if (request.clientId === this.awareness.clientID) {\n            // handle request\n            nextTick.push(() => {\n              this.setFlag(request.field, request.value);\n            });\n            selfResponse.push({\n              id: request.id,\n            });\n          }\n        });\n      }\n    }\n    response.forEach(response => {\n      const idx = request.findIndex(request => request.id === response.id);\n      if (idx !== -1) {\n        request.splice(idx, 1);\n      }\n    });\n    nextTick.push(() => {\n      this.awareness.setLocalStateField('request', request);\n      this.awareness.setLocalStateField(\n        'response',\n        selfResponse.filter((response, idx) =>\n          fakeDirtyResponse[idx] ? fakeDirtyResponse[idx].id !== 'remove' : true\n        )\n      );\n    });\n\n    setTimeout(() => {\n      nextTick.forEach(fn => fn());\n    }, 100);\n  }\n\n  destroy() {\n    if (this.awareness) {\n      this.awareness.off('change', this._onAwarenessChange);\n      this.slots.update.dispose();\n    }\n  }\n}\n", "/**\n * Common Math expressions.\n *\n * @module math\n */\n\nexport const floor = Math.floor\nexport const ceil = Math.ceil\nexport const abs = Math.abs\nexport const imul = Math.imul\nexport const round = Math.round\nexport const log10 = Math.log10\nexport const log2 = Math.log2\nexport const log = Math.log\nexport const sqrt = Math.sqrt\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The sum of a and b\n */\nexport const add = (a, b) => a + b\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The smaller element of a and b\n */\nexport const min = (a, b) => a < b ? a : b\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The bigger element of a and b\n */\nexport const max = (a, b) => a > b ? a : b\n\nexport const isNaN = Number.isNaN\n\nexport const pow = Math.pow\n/**\n * Base 10 exponential function. Returns the value of 10 raised to the power of pow.\n *\n * @param {number} exp\n * @return {number}\n */\nexport const exp10 = exp => Math.pow(10, exp)\n\nexport const sign = Math.sign\n\n/**\n * @param {number} n\n * @return {boolean} Wether n is negative. This function also differentiates between -0 and +0\n */\nexport const isNegativeZero = n => n !== 0 ? n < 0 : 1 / n < 0\n", "/* eslint-env browser */\n\n/**\n * Binary data constants.\n *\n * @module binary\n */\n\n/**\n * n-th bit activated.\n *\n * @type {number}\n */\nexport const BIT1 = 1\nexport const BIT2 = 2\nexport const BIT3 = 4\nexport const BIT4 = 8\nexport const BIT5 = 16\nexport const BIT6 = 32\nexport const BIT7 = 64\nexport const BIT8 = 128\nexport const BIT9 = 256\nexport const BIT10 = 512\nexport const BIT11 = 1024\nexport const BIT12 = 2048\nexport const BIT13 = 4096\nexport const BIT14 = 8192\nexport const BIT15 = 16384\nexport const BIT16 = 32768\nexport const BIT17 = 65536\nexport const BIT18 = 1 << 17\nexport const BIT19 = 1 << 18\nexport const BIT20 = 1 << 19\nexport const BIT21 = 1 << 20\nexport const BIT22 = 1 << 21\nexport const BIT23 = 1 << 22\nexport const BIT24 = 1 << 23\nexport const BIT25 = 1 << 24\nexport const BIT26 = 1 << 25\nexport const BIT27 = 1 << 26\nexport const BIT28 = 1 << 27\nexport const BIT29 = 1 << 28\nexport const BIT30 = 1 << 29\nexport const BIT31 = 1 << 30\nexport const BIT32 = 1 << 31\n\n/**\n * First n bits activated.\n *\n * @type {number}\n */\nexport const BITS0 = 0\nexport const BITS1 = 1\nexport const BITS2 = 3\nexport const BITS3 = 7\nexport const BITS4 = 15\nexport const BITS5 = 31\nexport const BITS6 = 63\nexport const BITS7 = 127\nexport const BITS8 = 255\nexport const BITS9 = 511\nexport const BITS10 = 1023\nexport const BITS11 = 2047\nexport const BITS12 = 4095\nexport const BITS13 = 8191\nexport const BITS14 = 16383\nexport const BITS15 = 32767\nexport const BITS16 = 65535\nexport const BITS17 = BIT18 - 1\nexport const BITS18 = BIT19 - 1\nexport const BITS19 = BIT20 - 1\nexport const BITS20 = BIT21 - 1\nexport const BITS21 = BIT22 - 1\nexport const BITS22 = BIT23 - 1\nexport const BITS23 = BIT24 - 1\nexport const BITS24 = BIT25 - 1\nexport const BITS25 = BIT26 - 1\nexport const BITS26 = BIT27 - 1\nexport const BITS27 = BIT28 - 1\nexport const BITS28 = BIT29 - 1\nexport const BITS29 = BIT30 - 1\nexport const BITS30 = BIT31 - 1\n/**\n * @type {number}\n */\nexport const BITS31 = 0x7FFFFFFF\n/**\n * @type {number}\n */\nexport const BITS32 = 0xFFFFFFFF\n", "/* eslint-env browser */\n\nexport const subtle = crypto.subtle\nexport const getRandomValues = crypto.getRandomValues.bind(crypto)\n", "\n/**\n * Isomorphic module for true random numbers / buffers / uuids.\n *\n * Attention: falls back to Math.random if the browser does not support crypto.\n *\n * @module random\n */\n\nimport * as math from './math.js'\nimport * as binary from './binary.js'\nimport { getRandomValues } from 'lib0/webcrypto'\n\nexport const rand = Math.random\n\nexport const uint32 = () => getRandomValues(new Uint32Array(1))[0]\n\nexport const uint53 = () => {\n  const arr = getRandomValues(new Uint32Array(8))\n  return (arr[0] & binary.BITS21) * (binary.BITS32 + 1) + (arr[1] >>> 0)\n}\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {T}\n */\nexport const oneOf = arr => arr[math.floor(rand() * arr.length)]\n\n// @ts-ignore\nconst uuidv4Template = [1e7] + -1e3 + -4e3 + -8e3 + -1e11\nexport const uuidv4 = () => uuidv4Template.replace(/[018]/g, /** @param {number} c */ c =>\n  (c ^ uint32() & 15 >> c / 4).toString(16)\n)\n", "export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n", "import { uuidv4 as uuidv4IdGenerator } from 'lib0/random.js';\nimport { nanoid as nanoidGenerator } from 'nanoid';\n\nexport type IdGenerator = () => string;\n\nexport function createAutoIncrementIdGenerator(): IdGenerator {\n  let i = 0;\n  return () => (i++).toString();\n}\n\nexport function createAutoIncrementIdGeneratorByClientId(\n  clientId: number\n): IdGenerator {\n  let i = 0;\n  return () => `${clientId}:${i++}`;\n}\n\nexport function uuidv4() {\n  return uuidv4IdGenerator();\n}\n\nexport function nanoid() {\n  return nanoidGenerator(10);\n}\n", "var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    get errors() {\n        return this.issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: issueData.message || errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap,\n            ctx.schemaErrorMap,\n            getErrorMap(),\n            errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            syncPairs.push({\n                key: await pair.key,\n                value: await pair.value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (typeof value.value !== \"undefined\" || pair.alwaysSet) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        if (typeof ctx.data === \"undefined\") {\n            return { message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError };\n        }\n        return { message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n    }\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this, this._def);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[a-z][a-z0-9]*$/;\nconst ulidRegex = /[0-9A-HJKMNP-TV-Z]{26}/;\nconst uuidRegex = /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst emojiRegex = /^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$/u;\nconst ipv4Regex = /^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;\nconst ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\n// Adapted from https://stackoverflow.com/a/3143231\nconst datetimeRegex = (args) => {\n    if (args.precision) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}Z$`);\n        }\n    }\n    else if (args.precision === 0) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$`);\n        }\n    }\n    else {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$`);\n        }\n    }\n};\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._regex = (regex, validation, message) => this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n        /**\n         * @deprecated Use z.string().min(1) instead.\n         * @see {@link ZodString.min}\n         */\n        this.nonempty = (message) => this.min(1, errorUtil.errToObj(message));\n        this.trim = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n        this.toLowerCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n        this.toUpperCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            }\n            //\n            );\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = BigInt(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.bigint,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    syncPairs.push({\n                        key,\n                        value: await pair.value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return Object.keys(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else {\n        return null;\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            return OK(async (...args) => {\n                const error = new ZodError([]);\n                const parsedArgs = await this._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await fn(...parsedArgs);\n                const parsedReturns = await this._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            return OK((...args) => {\n                const parsedArgs = this._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = fn(...parsedArgs.data);\n                const parsedReturns = this._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (this._def.values.indexOf(input.data) === -1) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values) {\n        return ZodEnum.create(values);\n    }\n    exclude(values) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)));\n    }\n}\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (nativeEnumValues.indexOf(input.data) === -1) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then((processed) => {\n                    return this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                });\n            }\n            else {\n                return this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc\n            // effect: RefinementEffect<any>\n            ) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nconst custom = (check, params = {}, \n/*\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) => {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            if (!check(data)) {\n                const p = typeof params === \"function\"\n                    ? params(data)\n                    : typeof params === \"string\"\n                        ? { message: params }\n                        : params;\n                const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                const p2 = typeof p === \"string\" ? { message: p } : p;\n                ctx.addIssue({ code: \"custom\", ...p2, fatal: _fatal });\n            }\n        });\n    return ZodAny.create();\n};\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodCatch, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPipeline, ZodPromise, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodSymbol, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, coerce, custom, dateType as date, z as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, util, voidType as void, z };\n", "/**\n * Utility module to work with key-value stores.\n *\n * @module map\n */\n\n/**\n * Creates a new Map instance.\n *\n * @function\n * @return {Map<any, any>}\n *\n * @function\n */\nexport const create = () => new Map()\n\n/**\n * Copy a Map object into a fresh Map object.\n *\n * @function\n * @template X,Y\n * @param {Map<X,Y>} m\n * @return {Map<X,Y>}\n */\nexport const copy = m => {\n  const r = create()\n  m.forEach((v, k) => { r.set(k, v) })\n  return r\n}\n\n/**\n * Get map property. Create T if property is undefined and set T on map.\n *\n * ```js\n * const listeners = map.setIfUndefined(events, 'eventName', set.create)\n * listeners.add(listener)\n * ```\n *\n * @function\n * @template V,K\n * @template {Map<K,V>} MAP\n * @param {MAP} map\n * @param {K} key\n * @param {function():V} createT\n * @return {V}\n */\nexport const setIfUndefined = (map, key, createT) => {\n  let set = map.get(key)\n  if (set === undefined) {\n    map.set(key, set = createT())\n  }\n  return set\n}\n\n/**\n * Creates an Array and populates it with the content of all key-value pairs using the `f(value, key)` function.\n *\n * @function\n * @template K\n * @template V\n * @template R\n * @param {Map<K,V>} m\n * @param {function(V,K):R} f\n * @return {Array<R>}\n */\nexport const map = (m, f) => {\n  const res = []\n  for (const [key, value] of m) {\n    res.push(f(value, key))\n  }\n  return res\n}\n\n/**\n * Tests whether any key-value pairs pass the test implemented by `f(value, key)`.\n *\n * @todo should rename to some - similarly to Array.some\n *\n * @function\n * @template K\n * @template V\n * @param {Map<K,V>} m\n * @param {function(V,K):boolean} f\n * @return {boolean}\n */\nexport const any = (m, f) => {\n  for (const [key, value] of m) {\n    if (f(value, key)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * Tests whether all key-value pairs pass the test implemented by `f(value, key)`.\n *\n * @function\n * @template K\n * @template V\n * @param {Map<K,V>} m\n * @param {function(V,K):boolean} f\n * @return {boolean}\n */\nexport const all = (m, f) => {\n  for (const [key, value] of m) {\n    if (!f(value, key)) {\n      return false\n    }\n  }\n  return true\n}\n", "/**\n * Utility module to work with sets.\n *\n * @module set\n */\n\nexport const create = () => new Set()\n\n/**\n * @template T\n * @param {Set<T>} set\n * @return {Array<T>}\n */\nexport const toArray = set => Array.from(set)\n\n/**\n * @template T\n * @param {Set<T>} set\n * @return {T}\n */\nexport const first = set =>\n  set.values().next().value || undefined\n\n/**\n * @template T\n * @param {Iterable<T>} entries\n * @return {Set<T>}\n */\nexport const from = entries => new Set(entries)\n", "/**\n * Utility module to work with Arrays.\n *\n * @module array\n */\n\nimport * as set from './set.js'\n\n/**\n * Return the last element of an array. The element must exist\n *\n * @template L\n * @param {ArrayLike<L>} arr\n * @return {L}\n */\nexport const last = arr => arr[arr.length - 1]\n\n/**\n * @template C\n * @return {Array<C>}\n */\nexport const create = () => /** @type {Array<C>} */ ([])\n\n/**\n * @template D\n * @param {Array<D>} a\n * @return {Array<D>}\n */\nexport const copy = a => /** @type {Array<D>} */ (a.slice())\n\n/**\n * Append elements from src to dest\n *\n * @template M\n * @param {Array<M>} dest\n * @param {Array<M>} src\n */\nexport const appendTo = (dest, src) => {\n  for (let i = 0; i < src.length; i++) {\n    dest.push(src[i])\n  }\n}\n\n/**\n * Transforms something array-like to an actual Array.\n *\n * @function\n * @template T\n * @param {ArrayLike<T>|Iterable<T>} arraylike\n * @return {T}\n */\nexport const from = Array.from\n\n/**\n * True iff condition holds on every element in the Array.\n *\n * @function\n * @template ITEM\n * @template {ArrayLike<ITEM>} ARR\n *\n * @param {ARR} arr\n * @param {function(ITEM, number, ARR):boolean} f\n * @return {boolean}\n */\nexport const every = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (!f(arr[i], i, arr)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * True iff condition holds on some element in the Array.\n *\n * @function\n * @template S\n * @template {ArrayLike<S>} ARR\n * @param {ARR} arr\n * @param {function(S, number, ARR):boolean} f\n * @return {boolean}\n */\nexport const some = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (f(arr[i], i, arr)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @template ELEM\n *\n * @param {ArrayLike<ELEM>} a\n * @param {ArrayLike<ELEM>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a.length === b.length && every(a, (item, index) => item === b[index])\n\n/**\n * @template ELEM\n * @param {Array<Array<ELEM>>} arr\n * @return {Array<ELEM>}\n */\nexport const flatten = arr => fold(arr, /** @type {Array<ELEM>} */ ([]), (acc, val) => acc.concat(val))\n\n/**\n * @template T\n * @param {number} len\n * @param {function(number, Array<T>):T} f\n * @return {Array<T>}\n */\nexport const unfold = (len, f) => {\n  const array = new Array(len)\n  for (let i = 0; i < len; i++) {\n    array[i] = f(i, array)\n  }\n  return array\n}\n\n/**\n * @template T\n * @template RESULT\n * @param {Array<T>} arr\n * @param {RESULT} seed\n * @param {function(RESULT, T, number):RESULT} folder\n */\nexport const fold = (arr, seed, folder) => arr.reduce(folder, seed)\n\nexport const isArray = Array.isArray\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {Array<T>}\n */\nexport const unique = arr => from(set.from(arr))\n\n/**\n * @template T\n * @template M\n * @param {ArrayLike<T>} arr\n * @param {function(T):M} mapper\n * @return {Array<T>}\n */\nexport const uniqueBy = (arr, mapper) => {\n  /**\n   * @type {Set<M>}\n   */\n  const happened = set.create()\n  /**\n   * @type {Array<T>}\n   */\n  const result = []\n  for (let i = 0; i < arr.length; i++) {\n    const el = arr[i]\n    const mapped = mapper(el)\n    if (!happened.has(mapped)) {\n      happened.add(mapped)\n      result.push(el)\n    }\n  }\n  return result\n}\n", "/**\n * Observable class prototype.\n *\n * @module observable\n */\n\nimport * as map from './map.js'\nimport * as set from './set.js'\nimport * as array from './array.js'\n\n/**\n * Handles named events.\n *\n * @template N\n */\nexport class Observable {\n  constructor () {\n    /**\n     * Some desc.\n     * @type {Map<N, any>}\n     */\n    this._observers = map.create()\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  on (name, f) {\n    map.setIfUndefined(this._observers, name, set.create).add(f)\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  once (name, f) {\n    /**\n     * @param  {...any} args\n     */\n    const _f = (...args) => {\n      this.off(name, _f)\n      f(...args)\n    }\n    this.on(name, _f)\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  off (name, f) {\n    const observers = this._observers.get(name)\n    if (observers !== undefined) {\n      observers.delete(f)\n      if (observers.size === 0) {\n        this._observers.delete(name)\n      }\n    }\n  }\n\n  /**\n   * Emit a named event. All registered event listeners that listen to the\n   * specified name will receive the event.\n   *\n   * @todo This should catch exceptions\n   *\n   * @param {N} name The event name.\n   * @param {Array<any>} args The arguments that are applied to the event listener.\n   */\n  emit (name, args) {\n    // copy all listeners to an array first to make sure that no event is emitted to listeners that are subscribed while the event handler is called.\n    return array.from((this._observers.get(name) || map.create()).values()).forEach(f => f(...args))\n  }\n\n  destroy () {\n    this._observers = map.create()\n  }\n}\n", "import * as array from './array.js'\n\n/**\n * Utility module to work with strings.\n *\n * @module string\n */\n\nexport const fromCharCode = String.fromCharCode\nexport const fromCodePoint = String.fromCodePoint\n\n/**\n * The largest utf16 character.\n * Corresponds to Uint8Array([255, 255]) or charcodeof(2x2^8)\n */\nexport const MAX_UTF16_CHARACTER = fromCharCode(65535)\n\n/**\n * @param {string} s\n * @return {string}\n */\nconst toLowerCase = s => s.toLowerCase()\n\nconst trimLeftRegex = /^\\s*/g\n\n/**\n * @param {string} s\n * @return {string}\n */\nexport const trimLeft = s => s.replace(trimLeftRegex, '')\n\nconst fromCamelCaseRegex = /([A-Z])/g\n\n/**\n * @param {string} s\n * @param {string} separator\n * @return {string}\n */\nexport const fromCamelCase = (s, separator) => trimLeft(s.replace(fromCamelCaseRegex, match => `${separator}${toLowerCase(match)}`))\n\n/**\n * Compute the utf8ByteLength\n * @param {string} str\n * @return {number}\n */\nexport const utf8ByteLength = str => unescape(encodeURIComponent(str)).length\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\nexport const _encodeUtf8Polyfill = str => {\n  const encodedString = unescape(encodeURIComponent(str))\n  const len = encodedString.length\n  const buf = new Uint8Array(len)\n  for (let i = 0; i < len; i++) {\n    buf[i] = /** @type {number} */ (encodedString.codePointAt(i))\n  }\n  return buf\n}\n\n/* c8 ignore next */\nexport const utf8TextEncoder = /** @type {TextEncoder} */ (typeof TextEncoder !== 'undefined' ? new TextEncoder() : null)\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\nexport const _encodeUtf8Native = str => utf8TextEncoder.encode(str)\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\n/* c8 ignore next */\nexport const encodeUtf8 = utf8TextEncoder ? _encodeUtf8Native : _encodeUtf8Polyfill\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\nexport const _decodeUtf8Polyfill = buf => {\n  let remainingLen = buf.length\n  let encodedString = ''\n  let bufPos = 0\n  while (remainingLen > 0) {\n    const nextLen = remainingLen < 10000 ? remainingLen : 10000\n    const bytes = buf.subarray(bufPos, bufPos + nextLen)\n    bufPos += nextLen\n    // Starting with ES5.1 we can supply a generic array-like object as arguments\n    encodedString += String.fromCodePoint.apply(null, /** @type {any} */ (bytes))\n    remainingLen -= nextLen\n  }\n  return decodeURIComponent(escape(encodedString))\n}\n\n/* c8 ignore next */\nexport let utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf-8', { fatal: true, ignoreBOM: true })\n\n/* c8 ignore start */\nif (utf8TextDecoder && utf8TextDecoder.decode(new Uint8Array()).length === 1) {\n  // Safari doesn't handle BOM correctly.\n  // This fixes a bug in Safari 13.0.5 where it produces a BOM the first time it is called.\n  // utf8TextDecoder.decode(new Uint8Array()).length === 1 on the first call and\n  // utf8TextDecoder.decode(new Uint8Array()).length === 1 on the second call\n  // Another issue is that from then on no BOM chars are recognized anymore\n  /* c8 ignore next */\n  utf8TextDecoder = null\n}\n/* c8 ignore stop */\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\nexport const _decodeUtf8Native = buf => /** @type {TextDecoder} */ (utf8TextDecoder).decode(buf)\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\n/* c8 ignore next */\nexport const decodeUtf8 = utf8TextDecoder ? _decodeUtf8Native : _decodeUtf8Polyfill\n\n/**\n * @param {string} str The initial string\n * @param {number} index Starting position\n * @param {number} remove Number of characters to remove\n * @param {string} insert New content to insert\n */\nexport const splice = (str, index, remove, insert = '') => str.slice(0, index) + insert + str.slice(index + remove)\n\n/**\n * @param {string} source\n * @param {number} n\n */\nexport const repeat = (source, n) => array.unfold(n, () => source).join('')\n", "/**\n * Often used conditions.\n *\n * @module conditions\n */\n\n/**\n * @template T\n * @param {T|null|undefined} v\n * @return {T|null}\n */\n/* c8 ignore next */\nexport const undefinedToNull = v => v === undefined ? null : v\n", "/* eslint-env browser */\n\n/**\n * Isomorphic variable storage.\n *\n * Uses LocalStorage in the browser and falls back to in-memory storage.\n *\n * @module storage\n */\n\n/* c8 ignore start */\nclass VarStoragePolyfill {\n  constructor () {\n    this.map = new Map()\n  }\n\n  /**\n   * @param {string} key\n   * @param {any} newValue\n   */\n  setItem (key, newValue) {\n    this.map.set(key, newValue)\n  }\n\n  /**\n   * @param {string} key\n   */\n  getItem (key) {\n    return this.map.get(key)\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @type {any}\n */\nlet _localStorage = new VarStoragePolyfill()\nlet usePolyfill = true\n\n/* c8 ignore start */\ntry {\n  // if the same-origin rule is violated, accessing localStorage might thrown an error\n  if (typeof localStorage !== 'undefined') {\n    _localStorage = localStorage\n    usePolyfill = false\n  }\n} catch (e) { }\n/* c8 ignore stop */\n\n/**\n * This is basically localStorage in browser, or a polyfill in nodejs\n */\n/* c8 ignore next */\nexport const varStorage = _localStorage\n\n/**\n * A polyfill for `addEventListener('storage', event => {..})` that does nothing if the polyfill is being used.\n *\n * @param {function({ key: string, newValue: string, oldValue: string }): void} eventHandler\n * @function\n */\n/* c8 ignore next */\nexport const onChange = eventHandler => usePolyfill || addEventListener('storage', /** @type {any} */ (eventHandler))\n\n/**\n * A polyfill for `removeEventListener('storage', event => {..})` that does nothing if the polyfill is being used.\n *\n * @param {function({ key: string, newValue: string, oldValue: string }): void} eventHandler\n * @function\n */\n/* c8 ignore next */\nexport const offChange = eventHandler => usePolyfill || removeEventListener('storage', /** @type {any} */ (eventHandler))\n", "/**\n * Utility functions for working with EcmaScript objects.\n *\n * @module object\n */\n\n/**\n * @return {Object<string,any>} obj\n */\nexport const create = () => Object.create(null)\n\n/**\n * Object.assign\n */\nexport const assign = Object.assign\n\n/**\n * @param {Object<string,any>} obj\n */\nexport const keys = Object.keys\n\n/**\n * @template V\n * @param {{[k:string]:V}} obj\n * @param {function(V,string):any} f\n */\nexport const forEach = (obj, f) => {\n  for (const key in obj) {\n    f(obj[key], key)\n  }\n}\n\n/**\n * @todo implement mapToArray & map\n *\n * @template R\n * @param {Object<string,any>} obj\n * @param {function(any,string):R} f\n * @return {Array<R>}\n */\nexport const map = (obj, f) => {\n  const results = []\n  for (const key in obj) {\n    results.push(f(obj[key], key))\n  }\n  return results\n}\n\n/**\n * @param {Object<string,any>} obj\n * @return {number}\n */\nexport const length = obj => keys(obj).length\n\n/**\n * @param {Object<string,any>} obj\n * @param {function(any,string):boolean} f\n * @return {boolean}\n */\nexport const some = (obj, f) => {\n  for (const key in obj) {\n    if (f(obj[key], key)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @param {Object|undefined} obj\n */\nexport const isEmpty = obj => {\n  for (const _k in obj) {\n    return false\n  }\n  return true\n}\n\n/**\n * @param {Object<string,any>} obj\n * @param {function(any,string):boolean} f\n * @return {boolean}\n */\nexport const every = (obj, f) => {\n  for (const key in obj) {\n    if (!f(obj[key], key)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * Calls `Object.prototype.hasOwnProperty`.\n *\n * @param {any} obj\n * @param {string|symbol} key\n * @return {boolean}\n */\nexport const hasProperty = (obj, key) => Object.prototype.hasOwnProperty.call(obj, key)\n\n/**\n * @param {Object<string,any>} a\n * @param {Object<string,any>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a === b || (length(a) === length(b) && every(a, (val, key) => (val !== undefined || hasProperty(b, key)) && b[key] === val))\n", "/**\n * Common functions and function call helpers.\n *\n * @module function\n */\n\nimport * as array from './array.js'\nimport * as object from './object.js'\n\n/**\n * Calls all functions in `fs` with args. Only throws after all functions were called.\n *\n * @param {Array<function>} fs\n * @param {Array<any>} args\n */\nexport const callAll = (fs, args, i = 0) => {\n  try {\n    for (; i < fs.length; i++) {\n      fs[i](...args)\n    }\n  } finally {\n    if (i < fs.length) {\n      callAll(fs, args, i + 1)\n    }\n  }\n}\n\nexport const nop = () => {}\n\n/**\n * @template T\n * @param {function():T} f\n * @return {T}\n */\nexport const apply = f => f()\n\n/**\n * @template A\n *\n * @param {A} a\n * @return {A}\n */\nexport const id = a => a\n\n/**\n * @template T\n *\n * @param {T} a\n * @param {T} b\n * @return {boolean}\n */\nexport const equalityStrict = (a, b) => a === b\n\n/**\n * @template T\n *\n * @param {Array<T>|object} a\n * @param {Array<T>|object} b\n * @return {boolean}\n */\nexport const equalityFlat = (a, b) => a === b || (a != null && b != null && a.constructor === b.constructor && ((array.isArray(a) && array.equalFlat(a, /** @type {Array<T>} */ (b))) || (typeof a === 'object' && object.equalFlat(a, b))))\n\n/* c8 ignore start */\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nexport const equalityDeep = (a, b) => {\n  if (a == null || b == null) {\n    return equalityStrict(a, b)\n  }\n  if (a.constructor !== b.constructor) {\n    return false\n  }\n  if (a === b) {\n    return true\n  }\n  switch (a.constructor) {\n    case ArrayBuffer:\n      a = new Uint8Array(a)\n      b = new Uint8Array(b)\n    // eslint-disable-next-line no-fallthrough\n    case Uint8Array: {\n      if (a.byteLength !== b.byteLength) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n          return false\n        }\n      }\n      break\n    }\n    case Set: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const value of a) {\n        if (!b.has(value)) {\n          return false\n        }\n      }\n      break\n    }\n    case Map: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const key of a.keys()) {\n        if (!b.has(key) || !equalityDeep(a.get(key), b.get(key))) {\n          return false\n        }\n      }\n      break\n    }\n    case Object:\n      if (object.length(a) !== object.length(b)) {\n        return false\n      }\n      for (const key in a) {\n        if (!object.hasProperty(a, key) || !equalityDeep(a[key], b[key])) {\n          return false\n        }\n      }\n      break\n    case Array:\n      if (a.length !== b.length) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (!equalityDeep(a[i], b[i])) {\n          return false\n        }\n      }\n      break\n    default:\n      return false\n  }\n  return true\n}\n\n/**\n * @template V\n * @template {V} OPTS\n *\n * @param {V} value\n * @param {Array<OPTS>} options\n */\n// @ts-ignore\nexport const isOneOf = (value, options) => options.includes(value)\n/* c8 ignore stop */\n\nexport const isArray = array.isArray\n\n/**\n * @param {any} s\n * @return {s is String}\n */\nexport const isString = (s) => s && s.constructor === String\n\n/**\n * @param {any} n\n * @return {n is Number}\n */\nexport const isNumber = n => n != null && n.constructor === Number\n\n/**\n * @template {abstract new (...args: any) => any} TYPE\n * @param {any} n\n * @param {TYPE} T\n * @return {n is InstanceType<TYPE>}\n */\nexport const is = (n, T) => n && n.constructor === T\n\n/**\n * @template {abstract new (...args: any) => any} TYPE\n * @param {TYPE} T\n */\nexport const isTemplate = (T) =>\n  /**\n   * @param {any} n\n   * @return {n is InstanceType<TYPE>}\n   **/\n  n => n && n.constructor === T\n", "/**\n * Isomorphic module to work access the environment (query params, env variables).\n *\n * @module map\n */\n\nimport * as map from './map.js'\nimport * as string from './string.js'\nimport * as conditions from './conditions.js'\nimport * as storage from './storage.js'\nimport * as f from './function.js'\n\n/* c8 ignore next */\n// @ts-ignore\nexport const isNode = typeof process !== 'undefined' && process.release &&\n  /node|io\\.js/.test(process.release.name)\n/* c8 ignore next */\nexport const isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && !isNode\n/* c8 ignore next 3 */\nexport const isMac = typeof navigator !== 'undefined'\n  ? /Mac/.test(navigator.platform)\n  : false\n\n/**\n * @type {Map<string,string>}\n */\nlet params\nconst args = []\n\n/* c8 ignore start */\nconst computeParams = () => {\n  if (params === undefined) {\n    if (isNode) {\n      params = map.create()\n      const pargs = process.argv\n      let currParamName = null\n      for (let i = 0; i < pargs.length; i++) {\n        const parg = pargs[i]\n        if (parg[0] === '-') {\n          if (currParamName !== null) {\n            params.set(currParamName, '')\n          }\n          currParamName = parg\n        } else {\n          if (currParamName !== null) {\n            params.set(currParamName, parg)\n            currParamName = null\n          } else {\n            args.push(parg)\n          }\n        }\n      }\n      if (currParamName !== null) {\n        params.set(currParamName, '')\n      }\n      // in ReactNative for example this would not be true (unless connected to the Remote Debugger)\n    } else if (typeof location === 'object') {\n      params = map.create(); // eslint-disable-next-line no-undef\n      (location.search || '?').slice(1).split('&').forEach((kv) => {\n        if (kv.length !== 0) {\n          const [key, value] = kv.split('=')\n          params.set(`--${string.fromCamelCase(key, '-')}`, value)\n          params.set(`-${string.fromCamelCase(key, '-')}`, value)\n        }\n      })\n    } else {\n      params = map.create()\n    }\n  }\n  return params\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* c8 ignore next */\nexport const hasParam = (name) => computeParams().has(name)\n\n/**\n * @param {string} name\n * @param {string} defaultVal\n * @return {string}\n */\n/* c8 ignore next 2 */\nexport const getParam = (name, defaultVal) =>\n  computeParams().get(name) || defaultVal\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* c8 ignore next 4 */\nexport const getVariable = (name) =>\n  isNode\n    ? conditions.undefinedToNull(process.env[name.toUpperCase()])\n    : conditions.undefinedToNull(storage.varStorage.getItem(name))\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* c8 ignore next 2 */\nexport const getConf = (name) =>\n  computeParams().get('--' + name) || getVariable(name)\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* c8 ignore next 2 */\nexport const hasConf = (name) =>\n  hasParam('--' + name) || getVariable(name) !== null\n\n/* c8 ignore next */\nexport const production = hasConf('production')\n\n/* c8 ignore next 2 */\nconst forceColor = isNode &&\n  f.isOneOf(process.env.FORCE_COLOR, ['true', '1', '2'])\n\n/* c8 ignore start */\nexport const supportsColor = !hasParam('no-colors') &&\n  (!isNode || process.stdout.isTTY || forceColor) && (\n  !isNode || hasParam('color') || forceColor ||\n    getVariable('COLORTERM') !== null ||\n    (getVariable('TERM') || '').includes('color')\n)\n/* c8 ignore stop */\n", "/**\n * Utility helpers for working with numbers.\n *\n * @module number\n */\n\nimport * as math from './math.js'\nimport * as binary from './binary.js'\n\nexport const MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER\nexport const MIN_SAFE_INTEGER = Number.MIN_SAFE_INTEGER\n\nexport const LOWEST_INT32 = 1 << 31\nexport const HIGHEST_INT32 = binary.BITS31\nexport const HIGHEST_UINT32 = binary.BITS32\n\n/* c8 ignore next */\nexport const isInteger = Number.isInteger || (num => typeof num === 'number' && isFinite(num) && math.floor(num) === num)\nexport const isNaN = Number.isNaN\nexport const parseInt = Number.parseInt\n", "/**\n * Error helpers.\n *\n * @module error\n */\n\n/**\n * @param {string} s\n * @return {Error}\n */\n/* c8 ignore next */\nexport const create = s => new Error(s)\n\n/**\n * @throws {Error}\n * @return {never}\n */\n/* c8 ignore next 3 */\nexport const methodUnimplemented = () => {\n  throw create('Method unimplemented')\n}\n\n/**\n * @throws {Error}\n * @return {never}\n */\n/* c8 ignore next 3 */\nexport const unexpectedCase = () => {\n  throw create('Unexpected case')\n}\n", "/**\n * Efficient schema-less binary decoding with support for variable length encoding.\n *\n * Use [lib0/decoding] with [lib0/encoding]. Every encoding function has a corresponding decoding function.\n *\n * Encodes numbers in little-endian order (least to most significant byte order)\n * and is compatible with Golang's binary encoding (https://golang.org/pkg/encoding/binary/)\n * which is also used in Protocol Buffers.\n *\n * ```js\n * // encoding step\n * const encoder = encoding.createEncoder()\n * encoding.writeVarUint(encoder, 256)\n * encoding.writeVarString(encoder, 'Hello world!')\n * const buf = encoding.toUint8Array(encoder)\n * ```\n *\n * ```js\n * // decoding step\n * const decoder = decoding.createDecoder(buf)\n * decoding.readVarUint(decoder) // => 256\n * decoding.readVarString(decoder) // => 'Hello world!'\n * decoding.hasContent(decoder) // => false - all data is read\n * ```\n *\n * @module decoding\n */\n\nimport * as buffer from './buffer.js'\nimport * as binary from './binary.js'\nimport * as math from './math.js'\nimport * as number from './number.js'\nimport * as string from './string.js'\nimport * as error from './error.js'\nimport * as encoding from './encoding.js'\n\nconst errorUnexpectedEndOfArray = error.create('Unexpected end of array')\nconst errorIntegerOutOfRange = error.create('Integer out of Range')\n\n/**\n * A Decoder handles the decoding of an Uint8Array.\n */\nexport class Decoder {\n  /**\n   * @param {Uint8Array} uint8Array Binary data to decode\n   */\n  constructor (uint8Array) {\n    /**\n     * Decoding target.\n     *\n     * @type {Uint8Array}\n     */\n    this.arr = uint8Array\n    /**\n     * Current decoding position.\n     *\n     * @type {number}\n     */\n    this.pos = 0\n  }\n}\n\n/**\n * @function\n * @param {Uint8Array} uint8Array\n * @return {Decoder}\n */\nexport const createDecoder = uint8Array => new Decoder(uint8Array)\n\n/**\n * @function\n * @param {Decoder} decoder\n * @return {boolean}\n */\nexport const hasContent = decoder => decoder.pos !== decoder.arr.length\n\n/**\n * Clone a decoder instance.\n * Optionally set a new position parameter.\n *\n * @function\n * @param {Decoder} decoder The decoder instance\n * @param {number} [newPos] Defaults to current position\n * @return {Decoder} A clone of `decoder`\n */\nexport const clone = (decoder, newPos = decoder.pos) => {\n  const _decoder = createDecoder(decoder.arr)\n  _decoder.pos = newPos\n  return _decoder\n}\n\n/**\n * Create an Uint8Array view of the next `len` bytes and advance the position by `len`.\n *\n * Important: The Uint8Array still points to the underlying ArrayBuffer. Make sure to discard the result as soon as possible to prevent any memory leaks.\n *            Use `buffer.copyUint8Array` to copy the result into a new Uint8Array.\n *\n * @function\n * @param {Decoder} decoder The decoder instance\n * @param {number} len The length of bytes to read\n * @return {Uint8Array}\n */\nexport const readUint8Array = (decoder, len) => {\n  const view = buffer.createUint8ArrayViewFromArrayBuffer(decoder.arr.buffer, decoder.pos + decoder.arr.byteOffset, len)\n  decoder.pos += len\n  return view\n}\n\n/**\n * Read variable length Uint8Array.\n *\n * Important: The Uint8Array still points to the underlying ArrayBuffer. Make sure to discard the result as soon as possible to prevent any memory leaks.\n *            Use `buffer.copyUint8Array` to copy the result into a new Uint8Array.\n *\n * @function\n * @param {Decoder} decoder\n * @return {Uint8Array}\n */\nexport const readVarUint8Array = decoder => readUint8Array(decoder, readVarUint(decoder))\n\n/**\n * Read the rest of the content as an ArrayBuffer\n * @function\n * @param {Decoder} decoder\n * @return {Uint8Array}\n */\nexport const readTailAsUint8Array = decoder => readUint8Array(decoder, decoder.arr.length - decoder.pos)\n\n/**\n * Skip one byte, jump to the next position.\n * @function\n * @param {Decoder} decoder The decoder instance\n * @return {number} The next position\n */\nexport const skip8 = decoder => decoder.pos++\n\n/**\n * Read one byte as unsigned integer.\n * @function\n * @param {Decoder} decoder The decoder instance\n * @return {number} Unsigned 8-bit integer\n */\nexport const readUint8 = decoder => decoder.arr[decoder.pos++]\n\n/**\n * Read 2 bytes as unsigned integer.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const readUint16 = decoder => {\n  const uint =\n    decoder.arr[decoder.pos] +\n    (decoder.arr[decoder.pos + 1] << 8)\n  decoder.pos += 2\n  return uint\n}\n\n/**\n * Read 4 bytes as unsigned integer.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const readUint32 = decoder => {\n  const uint =\n    (decoder.arr[decoder.pos] +\n    (decoder.arr[decoder.pos + 1] << 8) +\n    (decoder.arr[decoder.pos + 2] << 16) +\n    (decoder.arr[decoder.pos + 3] << 24)) >>> 0\n  decoder.pos += 4\n  return uint\n}\n\n/**\n * Read 4 bytes as unsigned integer in big endian order.\n * (most significant byte first)\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const readUint32BigEndian = decoder => {\n  const uint =\n    (decoder.arr[decoder.pos + 3] +\n    (decoder.arr[decoder.pos + 2] << 8) +\n    (decoder.arr[decoder.pos + 1] << 16) +\n    (decoder.arr[decoder.pos] << 24)) >>> 0\n  decoder.pos += 4\n  return uint\n}\n\n/**\n * Look ahead without incrementing the position\n * to the next byte and read it as unsigned integer.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const peekUint8 = decoder => decoder.arr[decoder.pos]\n\n/**\n * Look ahead without incrementing the position\n * to the next byte and read it as unsigned integer.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const peekUint16 = decoder =>\n  decoder.arr[decoder.pos] +\n  (decoder.arr[decoder.pos + 1] << 8)\n\n/**\n * Look ahead without incrementing the position\n * to the next byte and read it as unsigned integer.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.\n */\nexport const peekUint32 = decoder => (\n  decoder.arr[decoder.pos] +\n  (decoder.arr[decoder.pos + 1] << 8) +\n  (decoder.arr[decoder.pos + 2] << 16) +\n  (decoder.arr[decoder.pos + 3] << 24)\n) >>> 0\n\n/**\n * Read unsigned integer (32bit) with variable length.\n * 1/8th of the storage is used as encoding overhead.\n *  * numbers < 2^7 is stored in one bytlength\n *  * numbers < 2^14 is stored in two bylength\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.length\n */\nexport const readVarUint = decoder => {\n  let num = 0\n  let mult = 1\n  const len = decoder.arr.length\n  while (decoder.pos < len) {\n    const r = decoder.arr[decoder.pos++]\n    // num = num | ((r & binary.BITS7) << len)\n    num = num + (r & binary.BITS7) * mult // shift $r << (7*#iterations) and add it to num\n    mult *= 128 // next iteration, shift 7 \"more\" to the left\n    if (r < binary.BIT8) {\n      return num\n    }\n    /* c8 ignore start */\n    if (num > number.MAX_SAFE_INTEGER) {\n      throw errorIntegerOutOfRange\n    }\n    /* c8 ignore stop */\n  }\n  throw errorUnexpectedEndOfArray\n}\n\n/**\n * Read signed integer (32bit) with variable length.\n * 1/8th of the storage is used as encoding overhead.\n *  * numbers < 2^7 is stored in one bytlength\n *  * numbers < 2^14 is stored in two bylength\n * @todo This should probably create the inverse ~num if number is negative - but this would be a breaking change.\n *\n * @function\n * @param {Decoder} decoder\n * @return {number} An unsigned integer.length\n */\nexport const readVarInt = decoder => {\n  let r = decoder.arr[decoder.pos++]\n  let num = r & binary.BITS6\n  let mult = 64\n  const sign = (r & binary.BIT7) > 0 ? -1 : 1\n  if ((r & binary.BIT8) === 0) {\n    // don't continue reading\n    return sign * num\n  }\n  const len = decoder.arr.length\n  while (decoder.pos < len) {\n    r = decoder.arr[decoder.pos++]\n    // num = num | ((r & binary.BITS7) << len)\n    num = num + (r & binary.BITS7) * mult\n    mult *= 128\n    if (r < binary.BIT8) {\n      return sign * num\n    }\n    /* c8 ignore start */\n    if (num > number.MAX_SAFE_INTEGER) {\n      throw errorIntegerOutOfRange\n    }\n    /* c8 ignore stop */\n  }\n  throw errorUnexpectedEndOfArray\n}\n\n/**\n * Look ahead and read varUint without incrementing position\n *\n * @function\n * @param {Decoder} decoder\n * @return {number}\n */\nexport const peekVarUint = decoder => {\n  const pos = decoder.pos\n  const s = readVarUint(decoder)\n  decoder.pos = pos\n  return s\n}\n\n/**\n * Look ahead and read varUint without incrementing position\n *\n * @function\n * @param {Decoder} decoder\n * @return {number}\n */\nexport const peekVarInt = decoder => {\n  const pos = decoder.pos\n  const s = readVarInt(decoder)\n  decoder.pos = pos\n  return s\n}\n\n/**\n * We don't test this function anymore as we use native decoding/encoding by default now.\n * Better not modify this anymore..\n *\n * Transforming utf8 to a string is pretty expensive. The code performs 10x better\n * when String.fromCodePoint is fed with all characters as arguments.\n * But most environments have a maximum number of arguments per functions.\n * For effiency reasons we apply a maximum of 10000 characters at once.\n *\n * @function\n * @param {Decoder} decoder\n * @return {String} The read String.\n */\n/* c8 ignore start */\nexport const _readVarStringPolyfill = decoder => {\n  let remainingLen = readVarUint(decoder)\n  if (remainingLen === 0) {\n    return ''\n  } else {\n    let encodedString = String.fromCodePoint(readUint8(decoder)) // remember to decrease remainingLen\n    if (--remainingLen < 100) { // do not create a Uint8Array for small strings\n      while (remainingLen--) {\n        encodedString += String.fromCodePoint(readUint8(decoder))\n      }\n    } else {\n      while (remainingLen > 0) {\n        const nextLen = remainingLen < 10000 ? remainingLen : 10000\n        // this is dangerous, we create a fresh array view from the existing buffer\n        const bytes = decoder.arr.subarray(decoder.pos, decoder.pos + nextLen)\n        decoder.pos += nextLen\n        // Starting with ES5.1 we can supply a generic array-like object as arguments\n        encodedString += String.fromCodePoint.apply(null, /** @type {any} */ (bytes))\n        remainingLen -= nextLen\n      }\n    }\n    return decodeURIComponent(escape(encodedString))\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @function\n * @param {Decoder} decoder\n * @return {String} The read String\n */\nexport const _readVarStringNative = decoder =>\n  /** @type any */ (string.utf8TextDecoder).decode(readVarUint8Array(decoder))\n\n/**\n * Read string of variable length\n * * varUint is used to store the length of the string\n *\n * @function\n * @param {Decoder} decoder\n * @return {String} The read String\n *\n */\n/* c8 ignore next */\nexport const readVarString = string.utf8TextDecoder ? _readVarStringNative : _readVarStringPolyfill\n\n/**\n * @param {Decoder} decoder\n * @return {Uint8Array}\n */\nexport const readTerminatedUint8Array = decoder => {\n  const encoder = encoding.createEncoder()\n  let b\n  while (true) {\n    b = readUint8(decoder)\n    if (b === 0) {\n      return encoding.toUint8Array(encoder)\n    }\n    if (b === 1) {\n      b = readUint8(decoder)\n    }\n    encoding.write(encoder, b)\n  }\n}\n\n/**\n * @param {Decoder} decoder\n * @return {string}\n */\nexport const readTerminatedString = decoder => string.decodeUtf8(readTerminatedUint8Array(decoder))\n\n/**\n * Look ahead and read varString without incrementing position\n *\n * @function\n * @param {Decoder} decoder\n * @return {string}\n */\nexport const peekVarString = decoder => {\n  const pos = decoder.pos\n  const s = readVarString(decoder)\n  decoder.pos = pos\n  return s\n}\n\n/**\n * @param {Decoder} decoder\n * @param {number} len\n * @return {DataView}\n */\nexport const readFromDataView = (decoder, len) => {\n  const dv = new DataView(decoder.arr.buffer, decoder.arr.byteOffset + decoder.pos, len)\n  decoder.pos += len\n  return dv\n}\n\n/**\n * @param {Decoder} decoder\n */\nexport const readFloat32 = decoder => readFromDataView(decoder, 4).getFloat32(0, false)\n\n/**\n * @param {Decoder} decoder\n */\nexport const readFloat64 = decoder => readFromDataView(decoder, 8).getFloat64(0, false)\n\n/**\n * @param {Decoder} decoder\n */\nexport const readBigInt64 = decoder => /** @type {any} */ (readFromDataView(decoder, 8)).getBigInt64(0, false)\n\n/**\n * @param {Decoder} decoder\n */\nexport const readBigUint64 = decoder => /** @type {any} */ (readFromDataView(decoder, 8)).getBigUint64(0, false)\n\n/**\n * @type {Array<function(Decoder):any>}\n */\nconst readAnyLookupTable = [\n  decoder => undefined, // CASE 127: undefined\n  decoder => null, // CASE 126: null\n  readVarInt, // CASE 125: integer\n  readFloat32, // CASE 124: float32\n  readFloat64, // CASE 123: float64\n  readBigInt64, // CASE 122: bigint\n  decoder => false, // CASE 121: boolean (false)\n  decoder => true, // CASE 120: boolean (true)\n  readVarString, // CASE 119: string\n  decoder => { // CASE 118: object<string,any>\n    const len = readVarUint(decoder)\n    /**\n     * @type {Object<string,any>}\n     */\n    const obj = {}\n    for (let i = 0; i < len; i++) {\n      const key = readVarString(decoder)\n      obj[key] = readAny(decoder)\n    }\n    return obj\n  },\n  decoder => { // CASE 117: array<any>\n    const len = readVarUint(decoder)\n    const arr = []\n    for (let i = 0; i < len; i++) {\n      arr.push(readAny(decoder))\n    }\n    return arr\n  },\n  readVarUint8Array // CASE 116: Uint8Array\n]\n\n/**\n * @param {Decoder} decoder\n */\nexport const readAny = decoder => readAnyLookupTable[127 - readUint8(decoder)](decoder)\n\n/**\n * T must not be null.\n *\n * @template T\n */\nexport class RleDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   * @param {function(Decoder):T} reader\n   */\n  constructor (uint8Array, reader) {\n    super(uint8Array)\n    /**\n     * The reader\n     */\n    this.reader = reader\n    /**\n     * Current state\n     * @type {T|null}\n     */\n    this.s = null\n    this.count = 0\n  }\n\n  read () {\n    if (this.count === 0) {\n      this.s = this.reader(this)\n      if (hasContent(this)) {\n        this.count = readVarUint(this) + 1 // see encoder implementation for the reason why this is incremented\n      } else {\n        this.count = -1 // read the current value forever\n      }\n    }\n    this.count--\n    return /** @type {T} */ (this.s)\n  }\n}\n\nexport class IntDiffDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   * @param {number} start\n   */\n  constructor (uint8Array, start) {\n    super(uint8Array)\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n  }\n\n  /**\n   * @return {number}\n   */\n  read () {\n    this.s += readVarInt(this)\n    return this.s\n  }\n}\n\nexport class RleIntDiffDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   * @param {number} start\n   */\n  constructor (uint8Array, start) {\n    super(uint8Array)\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n    this.count = 0\n  }\n\n  /**\n   * @return {number}\n   */\n  read () {\n    if (this.count === 0) {\n      this.s += readVarInt(this)\n      if (hasContent(this)) {\n        this.count = readVarUint(this) + 1 // see encoder implementation for the reason why this is incremented\n      } else {\n        this.count = -1 // read the current value forever\n      }\n    }\n    this.count--\n    return /** @type {number} */ (this.s)\n  }\n}\n\nexport class UintOptRleDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   */\n  constructor (uint8Array) {\n    super(uint8Array)\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  read () {\n    if (this.count === 0) {\n      this.s = readVarInt(this)\n      // if the sign is negative, we read the count too, otherwise count is 1\n      const isNegative = math.isNegativeZero(this.s)\n      this.count = 1\n      if (isNegative) {\n        this.s = -this.s\n        this.count = readVarUint(this) + 2\n      }\n    }\n    this.count--\n    return /** @type {number} */ (this.s)\n  }\n}\n\nexport class IncUintOptRleDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   */\n  constructor (uint8Array) {\n    super(uint8Array)\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  read () {\n    if (this.count === 0) {\n      this.s = readVarInt(this)\n      // if the sign is negative, we read the count too, otherwise count is 1\n      const isNegative = math.isNegativeZero(this.s)\n      this.count = 1\n      if (isNegative) {\n        this.s = -this.s\n        this.count = readVarUint(this) + 2\n      }\n    }\n    this.count--\n    return /** @type {number} */ (this.s++)\n  }\n}\n\nexport class IntDiffOptRleDecoder extends Decoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   */\n  constructor (uint8Array) {\n    super(uint8Array)\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n    this.diff = 0\n  }\n\n  /**\n   * @return {number}\n   */\n  read () {\n    if (this.count === 0) {\n      const diff = readVarInt(this)\n      // if the first bit is set, we read more data\n      const hasCount = diff & 1\n      this.diff = math.floor(diff / 2) // shift >> 1\n      this.count = 1\n      if (hasCount) {\n        this.count = readVarUint(this) + 2\n      }\n    }\n    this.s += this.diff\n    this.count--\n    return this.s\n  }\n}\n\nexport class StringDecoder {\n  /**\n   * @param {Uint8Array} uint8Array\n   */\n  constructor (uint8Array) {\n    this.decoder = new UintOptRleDecoder(uint8Array)\n    this.str = readVarString(this.decoder)\n    /**\n     * @type {number}\n     */\n    this.spos = 0\n  }\n\n  /**\n   * @return {string}\n   */\n  read () {\n    const end = this.spos + this.decoder.read()\n    const res = this.str.slice(this.spos, end)\n    this.spos = end\n    return res\n  }\n}\n", "/**\n * Utility functions to work with buffers (Uint8Array).\n *\n * @module buffer\n */\n\nimport * as string from './string.js'\nimport * as env from './environment.js'\nimport * as encoding from './encoding.js'\nimport * as decoding from './decoding.js'\n\n/**\n * @param {number} len\n */\nexport const createUint8ArrayFromLen = len => new Uint8Array(len)\n\n/**\n * Create Uint8Array with initial content from buffer\n *\n * @param {ArrayBuffer} buffer\n * @param {number} byteOffset\n * @param {number} length\n */\nexport const createUint8ArrayViewFromArrayBuffer = (buffer, byteOffset, length) => new Uint8Array(buffer, byteOffset, length)\n\n/**\n * Create Uint8Array with initial content from buffer\n *\n * @param {ArrayBuffer} buffer\n */\nexport const createUint8ArrayFromArrayBuffer = buffer => new Uint8Array(buffer)\n\n/* c8 ignore start */\n/**\n * @param {Uint8Array} bytes\n * @return {string}\n */\nconst toBase64Browser = bytes => {\n  let s = ''\n  for (let i = 0; i < bytes.byteLength; i++) {\n    s += string.fromCharCode(bytes[i])\n  }\n  // eslint-disable-next-line no-undef\n  return btoa(s)\n}\n/* c8 ignore stop */\n\n/**\n * @param {Uint8Array} bytes\n * @return {string}\n */\nconst toBase64Node = bytes => Buffer.from(bytes.buffer, bytes.byteOffset, bytes.byteLength).toString('base64')\n\n/* c8 ignore start */\n/**\n * @param {string} s\n * @return {Uint8Array}\n */\nconst fromBase64Browser = s => {\n  // eslint-disable-next-line no-undef\n  const a = atob(s)\n  const bytes = createUint8ArrayFromLen(a.length)\n  for (let i = 0; i < a.length; i++) {\n    bytes[i] = a.charCodeAt(i)\n  }\n  return bytes\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} s\n */\nconst fromBase64Node = s => {\n  const buf = Buffer.from(s, 'base64')\n  return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength)\n}\n\n/* c8 ignore next */\nexport const toBase64 = env.isBrowser ? toBase64Browser : toBase64Node\n\n/* c8 ignore next */\nexport const fromBase64 = env.isBrowser ? fromBase64Browser : fromBase64Node\n\n/**\n * Copy the content of an Uint8Array view to a new ArrayBuffer.\n *\n * @param {Uint8Array} uint8Array\n * @return {Uint8Array}\n */\nexport const copyUint8Array = uint8Array => {\n  const newBuf = createUint8ArrayFromLen(uint8Array.byteLength)\n  newBuf.set(uint8Array)\n  return newBuf\n}\n\n/**\n * Encode anything as a UInt8Array. It's a pun on typescripts's `any` type.\n * See encoding.writeAny for more information.\n *\n * @param {any} data\n * @return {Uint8Array}\n */\nexport const encodeAny = data => {\n  const encoder = encoding.createEncoder()\n  encoding.writeAny(encoder, data)\n  return encoding.toUint8Array(encoder)\n}\n\n/**\n * Decode an any-encoded value.\n *\n * @param {Uint8Array} buf\n * @return {any}\n */\nexport const decodeAny = buf => decoding.readAny(decoding.createDecoder(buf))\n", "/**\n * Efficient schema-less binary encoding with support for variable length encoding.\n *\n * Use [lib0/encoding] with [lib0/decoding]. Every encoding function has a corresponding decoding function.\n *\n * Encodes numbers in little-endian order (least to most significant byte order)\n * and is compatible with Golang's binary encoding (https://golang.org/pkg/encoding/binary/)\n * which is also used in Protocol Buffers.\n *\n * ```js\n * // encoding step\n * const encoder = encoding.createEncoder()\n * encoding.writeVarUint(encoder, 256)\n * encoding.writeVarString(encoder, 'Hello world!')\n * const buf = encoding.toUint8Array(encoder)\n * ```\n *\n * ```js\n * // decoding step\n * const decoder = decoding.createDecoder(buf)\n * decoding.readVarUint(decoder) // => 256\n * decoding.readVarString(decoder) // => 'Hello world!'\n * decoding.hasContent(decoder) // => false - all data is read\n * ```\n *\n * @module encoding\n */\n\nimport * as buffer from './buffer.js'\nimport * as math from './math.js'\nimport * as number from './number.js'\nimport * as binary from './binary.js'\nimport * as string from './string.js'\nimport * as array from './array.js'\n\n/**\n * A BinaryEncoder handles the encoding to an Uint8Array.\n */\nexport class Encoder {\n  constructor () {\n    this.cpos = 0\n    this.cbuf = new Uint8Array(100)\n    /**\n     * @type {Array<Uint8Array>}\n     */\n    this.bufs = []\n  }\n}\n\n/**\n * @function\n * @return {Encoder}\n */\nexport const createEncoder = () => new Encoder()\n\n/**\n * @param {function(Encoder):void} f\n */\nexport const encode = (f) => {\n  const encoder = createEncoder()\n  f(encoder)\n  return toUint8Array(encoder)\n}\n\n/**\n * The current length of the encoded data.\n *\n * @function\n * @param {Encoder} encoder\n * @return {number}\n */\nexport const length = encoder => {\n  let len = encoder.cpos\n  for (let i = 0; i < encoder.bufs.length; i++) {\n    len += encoder.bufs[i].length\n  }\n  return len\n}\n\n/**\n * Check whether encoder is empty.\n *\n * @function\n * @param {Encoder} encoder\n * @return {boolean}\n */\nexport const hasContent = encoder => encoder.cpos > 0 || encoder.bufs.length > 0\n\n/**\n * Transform to Uint8Array.\n *\n * @function\n * @param {Encoder} encoder\n * @return {Uint8Array} The created ArrayBuffer.\n */\nexport const toUint8Array = encoder => {\n  const uint8arr = new Uint8Array(length(encoder))\n  let curPos = 0\n  for (let i = 0; i < encoder.bufs.length; i++) {\n    const d = encoder.bufs[i]\n    uint8arr.set(d, curPos)\n    curPos += d.length\n  }\n  uint8arr.set(buffer.createUint8ArrayViewFromArrayBuffer(encoder.cbuf.buffer, 0, encoder.cpos), curPos)\n  return uint8arr\n}\n\n/**\n * Verify that it is possible to write `len` bytes wtihout checking. If\n * necessary, a new Buffer with the required length is attached.\n *\n * @param {Encoder} encoder\n * @param {number} len\n */\nexport const verifyLen = (encoder, len) => {\n  const bufferLen = encoder.cbuf.length\n  if (bufferLen - encoder.cpos < len) {\n    encoder.bufs.push(buffer.createUint8ArrayViewFromArrayBuffer(encoder.cbuf.buffer, 0, encoder.cpos))\n    encoder.cbuf = new Uint8Array(math.max(bufferLen, len) * 2)\n    encoder.cpos = 0\n  }\n}\n\n/**\n * Write one byte to the encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The byte that is to be encoded.\n */\nexport const write = (encoder, num) => {\n  const bufferLen = encoder.cbuf.length\n  if (encoder.cpos === bufferLen) {\n    encoder.bufs.push(encoder.cbuf)\n    encoder.cbuf = new Uint8Array(bufferLen * 2)\n    encoder.cpos = 0\n  }\n  encoder.cbuf[encoder.cpos++] = num\n}\n\n/**\n * Write one byte at a specific position.\n * Position must already be written (i.e. encoder.length > pos)\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos Position to which to write data\n * @param {number} num Unsigned 8-bit integer\n */\nexport const set = (encoder, pos, num) => {\n  let buffer = null\n  // iterate all buffers and adjust position\n  for (let i = 0; i < encoder.bufs.length && buffer === null; i++) {\n    const b = encoder.bufs[i]\n    if (pos < b.length) {\n      buffer = b // found buffer\n    } else {\n      pos -= b.length\n    }\n  }\n  if (buffer === null) {\n    // use current buffer\n    buffer = encoder.cbuf\n  }\n  buffer[pos] = num\n}\n\n/**\n * Write one byte as an unsigned integer.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint8 = write\n\n/**\n * Write one byte as an unsigned Integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint8 = set\n\n/**\n * Write two bytes as an unsigned integer.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint16 = (encoder, num) => {\n  write(encoder, num & binary.BITS8)\n  write(encoder, (num >>> 8) & binary.BITS8)\n}\n/**\n * Write two bytes as an unsigned integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint16 = (encoder, pos, num) => {\n  set(encoder, pos, num & binary.BITS8)\n  set(encoder, pos + 1, (num >>> 8) & binary.BITS8)\n}\n\n/**\n * Write two bytes as an unsigned integer\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint32 = (encoder, num) => {\n  for (let i = 0; i < 4; i++) {\n    write(encoder, num & binary.BITS8)\n    num >>>= 8\n  }\n}\n\n/**\n * Write two bytes as an unsigned integer in big endian order.\n * (most significant byte first)\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint32BigEndian = (encoder, num) => {\n  for (let i = 3; i >= 0; i--) {\n    write(encoder, (num >>> (8 * i)) & binary.BITS8)\n  }\n}\n\n/**\n * Write two bytes as an unsigned integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint32 = (encoder, pos, num) => {\n  for (let i = 0; i < 4; i++) {\n    set(encoder, pos + i, num & binary.BITS8)\n    num >>>= 8\n  }\n}\n\n/**\n * Write a variable length unsigned integer. Max encodable integer is 2^53.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeVarUint = (encoder, num) => {\n  while (num > binary.BITS7) {\n    write(encoder, binary.BIT8 | (binary.BITS7 & num))\n    num = math.floor(num / 128) // shift >>> 7\n  }\n  write(encoder, binary.BITS7 & num)\n}\n\n/**\n * Write a variable length integer.\n *\n * We use the 7th bit instead for signaling that this is a negative number.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeVarInt = (encoder, num) => {\n  const isNegative = math.isNegativeZero(num)\n  if (isNegative) {\n    num = -num\n  }\n  //             |- whether to continue reading         |- whether is negative     |- number\n  write(encoder, (num > binary.BITS6 ? binary.BIT8 : 0) | (isNegative ? binary.BIT7 : 0) | (binary.BITS6 & num))\n  num = math.floor(num / 64) // shift >>> 6\n  // We don't need to consider the case of num === 0 so we can use a different\n  // pattern here than above.\n  while (num > 0) {\n    write(encoder, (num > binary.BITS7 ? binary.BIT8 : 0) | (binary.BITS7 & num))\n    num = math.floor(num / 128) // shift >>> 7\n  }\n}\n\n/**\n * A cache to store strings temporarily\n */\nconst _strBuffer = new Uint8Array(30000)\nconst _maxStrBSize = _strBuffer.length / 3\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const _writeVarStringNative = (encoder, str) => {\n  if (str.length < _maxStrBSize) {\n    // We can encode the string into the existing buffer\n    /* c8 ignore next */\n    const written = string.utf8TextEncoder.encodeInto(str, _strBuffer).written || 0\n    writeVarUint(encoder, written)\n    for (let i = 0; i < written; i++) {\n      write(encoder, _strBuffer[i])\n    }\n  } else {\n    writeVarUint8Array(encoder, string.encodeUtf8(str))\n  }\n}\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const _writeVarStringPolyfill = (encoder, str) => {\n  const encodedString = unescape(encodeURIComponent(str))\n  const len = encodedString.length\n  writeVarUint(encoder, len)\n  for (let i = 0; i < len; i++) {\n    write(encoder, /** @type {number} */ (encodedString.codePointAt(i)))\n  }\n}\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\n/* c8 ignore next */\nexport const writeVarString = (string.utf8TextEncoder && /** @type {any} */ (string.utf8TextEncoder).encodeInto) ? _writeVarStringNative : _writeVarStringPolyfill\n\n/**\n * Write a string terminated by a special byte sequence. This is not very performant and is\n * generally discouraged. However, the resulting byte arrays are lexiographically ordered which\n * makes this a nice feature for databases.\n *\n * The string will be encoded using utf8 and then terminated and escaped using writeTerminatingUint8Array.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const writeTerminatedString = (encoder, str) =>\n  writeTerminatedUint8Array(encoder, string.encodeUtf8(str))\n\n/**\n * Write a terminating Uint8Array. Note that this is not performant and is generally\n * discouraged. There are few situations when this is needed.\n *\n * We use 0x0 as a terminating character. 0x1 serves as an escape character for 0x0 and 0x1.\n *\n * Example: [0,1,2] is encoded to [1,0,1,1,2,0]. 0x0, and 0x1 needed to be escaped using 0x1. Then\n * the result is terminated using the 0x0 character.\n *\n * This is basically how many systems implement null terminated strings. However, we use an escape\n * character 0x1 to avoid issues and potenial attacks on our database (if this is used as a key\n * encoder for NoSql databases).\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} buf The string that is to be encoded.\n */\nexport const writeTerminatedUint8Array = (encoder, buf) => {\n  for (let i = 0; i < buf.length; i++) {\n    const b = buf[i]\n    if (b === 0 || b === 1) {\n      write(encoder, 1)\n    }\n    write(encoder, buf[i])\n  }\n  write(encoder, 0)\n}\n\n/**\n * Write the content of another Encoder.\n *\n * @TODO: can be improved!\n *        - Note: Should consider that when appending a lot of small Encoders, we should rather clone than referencing the old structure.\n *                Encoders start with a rather big initial buffer.\n *\n * @function\n * @param {Encoder} encoder The enUint8Arr\n * @param {Encoder} append The BinaryEncoder to be written.\n */\nexport const writeBinaryEncoder = (encoder, append) => writeUint8Array(encoder, toUint8Array(append))\n\n/**\n * Append fixed-length Uint8Array to the encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} uint8Array\n */\nexport const writeUint8Array = (encoder, uint8Array) => {\n  const bufferLen = encoder.cbuf.length\n  const cpos = encoder.cpos\n  const leftCopyLen = math.min(bufferLen - cpos, uint8Array.length)\n  const rightCopyLen = uint8Array.length - leftCopyLen\n  encoder.cbuf.set(uint8Array.subarray(0, leftCopyLen), cpos)\n  encoder.cpos += leftCopyLen\n  if (rightCopyLen > 0) {\n    // Still something to write, write right half..\n    // Append new buffer\n    encoder.bufs.push(encoder.cbuf)\n    // must have at least size of remaining buffer\n    encoder.cbuf = new Uint8Array(math.max(bufferLen * 2, rightCopyLen))\n    // copy array\n    encoder.cbuf.set(uint8Array.subarray(leftCopyLen))\n    encoder.cpos = rightCopyLen\n  }\n}\n\n/**\n * Append an Uint8Array to Encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} uint8Array\n */\nexport const writeVarUint8Array = (encoder, uint8Array) => {\n  writeVarUint(encoder, uint8Array.byteLength)\n  writeUint8Array(encoder, uint8Array)\n}\n\n/**\n * Create an DataView of the next `len` bytes. Use it to write data after\n * calling this function.\n *\n * ```js\n * // write float32 using DataView\n * const dv = writeOnDataView(encoder, 4)\n * dv.setFloat32(0, 1.1)\n * // read float32 using DataView\n * const dv = readFromDataView(encoder, 4)\n * dv.getFloat32(0) // => 1.100000023841858 (leaving it to the reader to find out why this is the correct result)\n * ```\n *\n * @param {Encoder} encoder\n * @param {number} len\n * @return {DataView}\n */\nexport const writeOnDataView = (encoder, len) => {\n  verifyLen(encoder, len)\n  const dview = new DataView(encoder.cbuf.buffer, encoder.cpos, len)\n  encoder.cpos += len\n  return dview\n}\n\n/**\n * @param {Encoder} encoder\n * @param {number} num\n */\nexport const writeFloat32 = (encoder, num) => writeOnDataView(encoder, 4).setFloat32(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {number} num\n */\nexport const writeFloat64 = (encoder, num) => writeOnDataView(encoder, 8).setFloat64(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {bigint} num\n */\nexport const writeBigInt64 = (encoder, num) => /** @type {any} */ (writeOnDataView(encoder, 8)).setBigInt64(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {bigint} num\n */\nexport const writeBigUint64 = (encoder, num) => /** @type {any} */ (writeOnDataView(encoder, 8)).setBigUint64(0, num, false)\n\nconst floatTestBed = new DataView(new ArrayBuffer(4))\n/**\n * Check if a number can be encoded as a 32 bit float.\n *\n * @param {number} num\n * @return {boolean}\n */\nconst isFloat32 = num => {\n  floatTestBed.setFloat32(0, num)\n  return floatTestBed.getFloat32(0) === num\n}\n\n/**\n * Encode data with efficient binary format.\n *\n * Differences to JSON:\n * • Transforms data to a binary format (not to a string)\n * • Encodes undefined, NaN, and ArrayBuffer (these can't be represented in JSON)\n * • Numbers are efficiently encoded either as a variable length integer, as a\n *   32 bit float, as a 64 bit float, or as a 64 bit bigint.\n *\n * Encoding table:\n *\n * | Data Type           | Prefix   | Encoding Method    | Comment |\n * | ------------------- | -------- | ------------------ | ------- |\n * | undefined           | 127      |                    | Functions, symbol, and everything that cannot be identified is encoded as undefined |\n * | null                | 126      |                    | |\n * | integer             | 125      | writeVarInt        | Only encodes 32 bit signed integers |\n * | float32             | 124      | writeFloat32       | |\n * | float64             | 123      | writeFloat64       | |\n * | bigint              | 122      | writeBigInt64      | |\n * | boolean (false)     | 121      |                    | True and false are different data types so we save the following byte |\n * | boolean (true)      | 120      |                    | - 0b01111000 so the last bit determines whether true or false |\n * | string              | 119      | writeVarString     | |\n * | object<string,any>  | 118      | custom             | Writes {length} then {length} key-value pairs |\n * | array<any>          | 117      | custom             | Writes {length} then {length} json values |\n * | Uint8Array          | 116      | writeVarUint8Array | We use Uint8Array for any kind of binary data |\n *\n * Reasons for the decreasing prefix:\n * We need the first bit for extendability (later we may want to encode the\n * prefix with writeVarUint). The remaining 7 bits are divided as follows:\n * [0-30]   the beginning of the data range is used for custom purposes\n *          (defined by the function that uses this library)\n * [31-127] the end of the data range is used for data encoding by\n *          lib0/encoding.js\n *\n * @param {Encoder} encoder\n * @param {undefined|null|number|bigint|boolean|string|Object<string,any>|Array<any>|Uint8Array} data\n */\nexport const writeAny = (encoder, data) => {\n  switch (typeof data) {\n    case 'string':\n      // TYPE 119: STRING\n      write(encoder, 119)\n      writeVarString(encoder, data)\n      break\n    case 'number':\n      if (number.isInteger(data) && math.abs(data) <= binary.BITS31) {\n        // TYPE 125: INTEGER\n        write(encoder, 125)\n        writeVarInt(encoder, data)\n      } else if (isFloat32(data)) {\n        // TYPE 124: FLOAT32\n        write(encoder, 124)\n        writeFloat32(encoder, data)\n      } else {\n        // TYPE 123: FLOAT64\n        write(encoder, 123)\n        writeFloat64(encoder, data)\n      }\n      break\n    case 'bigint':\n      // TYPE 122: BigInt\n      write(encoder, 122)\n      writeBigInt64(encoder, data)\n      break\n    case 'object':\n      if (data === null) {\n        // TYPE 126: null\n        write(encoder, 126)\n      } else if (array.isArray(data)) {\n        // TYPE 117: Array\n        write(encoder, 117)\n        writeVarUint(encoder, data.length)\n        for (let i = 0; i < data.length; i++) {\n          writeAny(encoder, data[i])\n        }\n      } else if (data instanceof Uint8Array) {\n        // TYPE 116: ArrayBuffer\n        write(encoder, 116)\n        writeVarUint8Array(encoder, data)\n      } else {\n        // TYPE 118: Object\n        write(encoder, 118)\n        const keys = Object.keys(data)\n        writeVarUint(encoder, keys.length)\n        for (let i = 0; i < keys.length; i++) {\n          const key = keys[i]\n          writeVarString(encoder, key)\n          writeAny(encoder, data[key])\n        }\n      }\n      break\n    case 'boolean':\n      // TYPE 120/121: boolean (true/false)\n      write(encoder, data ? 120 : 121)\n      break\n    default:\n      // TYPE 127: undefined\n      write(encoder, 127)\n  }\n}\n\n/**\n * Now come a few stateful encoder that have their own classes.\n */\n\n/**\n * Basic Run Length Encoder - a basic compression implementation.\n *\n * Encodes [1,1,1,7] to [1,3,7,1] (3 times 1, 1 time 7). This encoder might do more harm than good if there are a lot of values that are not repeated.\n *\n * It was originally used for image compression. Cool .. article http://csbruce.com/cbm/transactor/pdfs/trans_v7_i06.pdf\n *\n * @note T must not be null!\n *\n * @template T\n */\nexport class RleEncoder extends Encoder {\n  /**\n   * @param {function(Encoder, T):void} writer\n   */\n  constructor (writer) {\n    super()\n    /**\n     * The writer\n     */\n    this.w = writer\n    /**\n     * Current state\n     * @type {T|null}\n     */\n    this.s = null\n    this.count = 0\n  }\n\n  /**\n   * @param {T} v\n   */\n  write (v) {\n    if (this.s === v) {\n      this.count++\n    } else {\n      if (this.count > 0) {\n        // flush counter, unless this is the first value (count = 0)\n        writeVarUint(this, this.count - 1) // since count is always > 0, we can decrement by one. non-standard encoding ftw\n      }\n      this.count = 1\n      // write first value\n      this.w(this, v)\n      this.s = v\n    }\n  }\n}\n\n/**\n * Basic diff decoder using variable length encoding.\n *\n * Encodes the values [3, 1100, 1101, 1050, 0] to [3, 1097, 1, -51, -1050] using writeVarInt.\n */\nexport class IntDiffEncoder extends Encoder {\n  /**\n   * @param {number} start\n   */\n  constructor (start) {\n    super()\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    writeVarInt(this, v - this.s)\n    this.s = v\n  }\n}\n\n/**\n * A combination of IntDiffEncoder and RleEncoder.\n *\n * Basically first writes the IntDiffEncoder and then counts duplicate diffs using RleEncoding.\n *\n * Encodes the values [1,1,1,2,3,4,5,6] as [1,1,0,2,1,5] (RLE([1,0,0,1,1,1,1,1]) ⇒ RleIntDiff[1,1,0,2,1,5])\n */\nexport class RleIntDiffEncoder extends Encoder {\n  /**\n   * @param {number} start\n   */\n  constructor (start) {\n    super()\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s === v && this.count > 0) {\n      this.count++\n    } else {\n      if (this.count > 0) {\n        // flush counter, unless this is the first value (count = 0)\n        writeVarUint(this, this.count - 1) // since count is always > 0, we can decrement by one. non-standard encoding ftw\n      }\n      this.count = 1\n      // write first value\n      writeVarInt(this, v - this.s)\n      this.s = v\n    }\n  }\n}\n\n/**\n * @param {UintOptRleEncoder} encoder\n */\nconst flushUintOptRleEncoder = encoder => {\n  if (encoder.count > 0) {\n    // flush counter, unless this is the first value (count = 0)\n    // case 1: just a single value. set sign to positive\n    // case 2: write several values. set sign to negative to indicate that there is a length coming\n    writeVarInt(encoder.encoder, encoder.count === 1 ? encoder.s : -encoder.s)\n    if (encoder.count > 1) {\n      writeVarUint(encoder.encoder, encoder.count - 2) // since count is always > 1, we can decrement by one. non-standard encoding ftw\n    }\n  }\n}\n\n/**\n * Optimized Rle encoder that does not suffer from the mentioned problem of the basic Rle encoder.\n *\n * Internally uses VarInt encoder to write unsigned integers. If the input occurs multiple times, we write\n * write it as a negative number. The UintOptRleDecoder then understands that it needs to read a count.\n *\n * Encodes [1,2,3,3,3] as [1,2,-3,3] (once 1, once 2, three times 3)\n */\nexport class UintOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s === v) {\n      this.count++\n    } else {\n      flushUintOptRleEncoder(this)\n      this.count = 1\n      this.s = v\n    }\n  }\n\n  toUint8Array () {\n    flushUintOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * Increasing Uint Optimized RLE Encoder\n *\n * The RLE encoder counts the number of same occurences of the same value.\n * The IncUintOptRle encoder counts if the value increases.\n * I.e. 7, 8, 9, 10 will be encoded as [-7, 4]. 1, 3, 5 will be encoded\n * as [1, 3, 5].\n */\nexport class IncUintOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s + this.count === v) {\n      this.count++\n    } else {\n      flushUintOptRleEncoder(this)\n      this.count = 1\n      this.s = v\n    }\n  }\n\n  toUint8Array () {\n    flushUintOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * @param {IntDiffOptRleEncoder} encoder\n */\nconst flushIntDiffOptRleEncoder = encoder => {\n  if (encoder.count > 0) {\n    //          31 bit making up the diff | wether to write the counter\n    // const encodedDiff = encoder.diff << 1 | (encoder.count === 1 ? 0 : 1)\n    const encodedDiff = encoder.diff * 2 + (encoder.count === 1 ? 0 : 1)\n    // flush counter, unless this is the first value (count = 0)\n    // case 1: just a single value. set first bit to positive\n    // case 2: write several values. set first bit to negative to indicate that there is a length coming\n    writeVarInt(encoder.encoder, encodedDiff)\n    if (encoder.count > 1) {\n      writeVarUint(encoder.encoder, encoder.count - 2) // since count is always > 1, we can decrement by one. non-standard encoding ftw\n    }\n  }\n}\n\n/**\n * A combination of the IntDiffEncoder and the UintOptRleEncoder.\n *\n * The count approach is similar to the UintDiffOptRleEncoder, but instead of using the negative bitflag, it encodes\n * in the LSB whether a count is to be read. Therefore this Encoder only supports 31 bit integers!\n *\n * Encodes [1, 2, 3, 2] as [3, 1, 6, -1] (more specifically [(1 << 1) | 1, (3 << 0) | 0, -1])\n *\n * Internally uses variable length encoding. Contrary to normal UintVar encoding, the first byte contains:\n * * 1 bit that denotes whether the next value is a count (LSB)\n * * 1 bit that denotes whether this value is negative (MSB - 1)\n * * 1 bit that denotes whether to continue reading the variable length integer (MSB)\n *\n * Therefore, only five bits remain to encode diff ranges.\n *\n * Use this Encoder only when appropriate. In most cases, this is probably a bad idea.\n */\nexport class IntDiffOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n    this.diff = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.diff === v - this.s) {\n      this.s = v\n      this.count++\n    } else {\n      flushIntDiffOptRleEncoder(this)\n      this.count = 1\n      this.diff = v - this.s\n      this.s = v\n    }\n  }\n\n  toUint8Array () {\n    flushIntDiffOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * Optimized String Encoder.\n *\n * Encoding many small strings in a simple Encoder is not very efficient. The function call to decode a string takes some time and creates references that must be eventually deleted.\n * In practice, when decoding several million small strings, the GC will kick in more and more often to collect orphaned string objects (or maybe there is another reason?).\n *\n * This string encoder solves the above problem. All strings are concatenated and written as a single string using a single encoding call.\n *\n * The lengths are encoded using a UintOptRleEncoder.\n */\nexport class StringEncoder {\n  constructor () {\n    /**\n     * @type {Array<string>}\n     */\n    this.sarr = []\n    this.s = ''\n    this.lensE = new UintOptRleEncoder()\n  }\n\n  /**\n   * @param {string} string\n   */\n  write (string) {\n    this.s += string\n    if (this.s.length > 19) {\n      this.sarr.push(this.s)\n      this.s = ''\n    }\n    this.lensE.write(string.length)\n  }\n\n  toUint8Array () {\n    const encoder = new Encoder()\n    this.sarr.push(this.s)\n    this.s = ''\n    writeVarString(encoder, this.sarr.join(''))\n    writeUint8Array(encoder, this.lensE.toUint8Array())\n    return toUint8Array(encoder)\n  }\n}\n", "/**\n * Utility module to work with time.\n *\n * @module time\n */\n\nimport * as metric from './metric.js'\nimport * as math from './math.js'\n\n/**\n * Return current time.\n *\n * @return {Date}\n */\nexport const getDate = () => new Date()\n\n/**\n * Return current unix time.\n *\n * @return {number}\n */\nexport const getUnixTime = Date.now\n\n/**\n * Transform time (in ms) to a human readable format. E.g. 1100 => 1.1s. 60s => 1min. .001 => 10μs.\n *\n * @param {number} d duration in milliseconds\n * @return {string} humanized approximation of time\n */\nexport const humanizeDuration = d => {\n  if (d < 60000) {\n    const p = metric.prefix(d, -1)\n    return math.round(p.n * 100) / 100 + p.prefix + 's'\n  }\n  d = math.floor(d / 1000)\n  const seconds = d % 60\n  const minutes = math.floor(d / 60) % 60\n  const hours = math.floor(d / 3600) % 24\n  const days = math.floor(d / 86400)\n  if (days > 0) {\n    return days + 'd' + ((hours > 0 || minutes > 30) ? ' ' + (minutes > 30 ? hours + 1 : hours) + 'h' : '')\n  }\n  if (hours > 0) {\n    /* c8 ignore next */\n    return hours + 'h' + ((minutes > 0 || seconds > 30) ? ' ' + (seconds > 30 ? minutes + 1 : minutes) + 'min' : '')\n  }\n  return minutes + 'min' + (seconds > 0 ? ' ' + seconds + 's' : '')\n}\n", "/**\n * Utility helpers to work with promises.\n *\n * @module promise\n */\n\nimport * as time from './time.js'\n\n/**\n * @template T\n * @callback PromiseResolve\n * @param {T|PromiseLike<T>} [result]\n */\n\n/**\n * @template T\n * @param {function(PromiseResolve<T>,function(Error):void):any} f\n * @return {Promise<T>}\n */\nexport const create = f => /** @type {Promise<T>} */ (new Promise(f))\n\n/**\n * @param {function(function():void,function(Error):void):void} f\n * @return {Promise<void>}\n */\nexport const createEmpty = f => new Promise(f)\n\n/**\n * `Promise.all` wait for all promises in the array to resolve and return the result\n * @template {unknown[] | []} PS\n *\n * @param {PS} ps\n * @return {Promise<{ -readonly [P in keyof PS]: Awaited<PS[P]> }>}\n */\nexport const all = Promise.all.bind(Promise)\n\n/**\n * @param {Error} [reason]\n * @return {Promise<never>}\n */\nexport const reject = reason => Promise.reject(reason)\n\n/**\n * @template T\n * @param {T|void} res\n * @return {Promise<T|void>}\n */\nexport const resolve = res => Promise.resolve(res)\n\n/**\n * @template T\n * @param {T} res\n * @return {Promise<T>}\n */\nexport const resolveWith = res => Promise.resolve(res)\n\n/**\n * @todo Next version, reorder parameters: check, [timeout, [intervalResolution]]\n *\n * @param {number} timeout\n * @param {function():boolean} check\n * @param {number} [intervalResolution]\n * @return {Promise<void>}\n */\nexport const until = (timeout, check, intervalResolution = 10) => create((resolve, reject) => {\n  const startTime = time.getUnixTime()\n  const hasTimeout = timeout > 0\n  const untilInterval = () => {\n    if (check()) {\n      clearInterval(intervalHandle)\n      resolve()\n    } else if (hasTimeout) {\n      /* c8 ignore else */\n      if (time.getUnixTime() - startTime > timeout) {\n        clearInterval(intervalHandle)\n        reject(new Error('Timeout'))\n      }\n    }\n  }\n  const intervalHandle = setInterval(untilInterval, intervalResolution)\n})\n\n/**\n * @param {number} timeout\n * @return {Promise<undefined>}\n */\nexport const wait = timeout => create((resolve, reject) => setTimeout(resolve, timeout))\n\n/**\n * Checks if an object is a promise using ducktyping.\n *\n * Promises are often polyfilled, so it makes sense to add some additional guarantees if the user of this\n * library has some insane environment where global Promise objects are overwritten.\n *\n * @param {any} p\n * @return {boolean}\n */\nexport const isPromise = p => p instanceof Promise || (p && p.then && p.catch && p.finally)\n", "/**\n * Working with value pairs.\n *\n * @module pair\n */\n\n/**\n * @template L,R\n */\nexport class Pair {\n  /**\n   * @param {L} left\n   * @param {R} right\n   */\n  constructor (left, right) {\n    this.left = left\n    this.right = right\n  }\n}\n\n/**\n * @template L,R\n * @param {L} left\n * @param {R} right\n * @return {Pair<L,R>}\n */\nexport const create = (left, right) => new Pair(left, right)\n\n/**\n * @template L,R\n * @param {R} right\n * @param {L} left\n * @return {Pair<L,R>}\n */\nexport const createReversed = (right, left) => new Pair(left, right)\n\n/**\n * @template L,R\n * @param {Array<Pair<L,R>>} arr\n * @param {function(L, R):any} f\n */\nexport const forEach = (arr, f) => arr.forEach(p => f(p.left, p.right))\n\n/**\n * @template L,R,X\n * @param {Array<Pair<L,R>>} arr\n * @param {function(L, R):X} f\n * @return {Array<X>}\n */\nexport const map = (arr, f) => arr.map(p => f(p.left, p.right))\n", "/* eslint-env browser */\n\n/**\n * Utility module to work with the DOM.\n *\n * @module dom\n */\n\nimport * as pair from './pair.js'\nimport * as map from './map.js'\n\n/* c8 ignore start */\n/**\n * @type {Document}\n */\nexport const doc = /** @type {Document} */ (typeof document !== 'undefined' ? document : {})\n\n/**\n * @param {string} name\n * @return {HTMLElement}\n */\nexport const createElement = name => doc.createElement(name)\n\n/**\n * @return {DocumentFragment}\n */\nexport const createDocumentFragment = () => doc.createDocumentFragment()\n\n/**\n * @param {string} text\n * @return {Text}\n */\nexport const createTextNode = text => doc.createTextNode(text)\n\nexport const domParser = /** @type {DOMParser} */ (typeof DOMParser !== 'undefined' ? new DOMParser() : null)\n\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Object} opts\n */\nexport const emitCustomEvent = (el, name, opts) => el.dispatchEvent(new CustomEvent(name, opts))\n\n/**\n * @param {Element} el\n * @param {Array<pair.Pair<string,string|boolean>>} attrs Array of key-value pairs\n * @return {Element}\n */\nexport const setAttributes = (el, attrs) => {\n  pair.forEach(attrs, (key, value) => {\n    if (value === false) {\n      el.removeAttribute(key)\n    } else if (value === true) {\n      el.setAttribute(key, '')\n    } else {\n      // @ts-ignore\n      el.setAttribute(key, value)\n    }\n  })\n  return el\n}\n\n/**\n * @param {Element} el\n * @param {Map<string, string>} attrs Array of key-value pairs\n * @return {Element}\n */\nexport const setAttributesMap = (el, attrs) => {\n  attrs.forEach((value, key) => { el.setAttribute(key, value) })\n  return el\n}\n\n/**\n * @param {Array<Node>|HTMLCollection} children\n * @return {DocumentFragment}\n */\nexport const fragment = children => {\n  const fragment = createDocumentFragment()\n  for (let i = 0; i < children.length; i++) {\n    appendChild(fragment, children[i])\n  }\n  return fragment\n}\n\n/**\n * @param {Element} parent\n * @param {Array<Node>} nodes\n * @return {Element}\n */\nexport const append = (parent, nodes) => {\n  appendChild(parent, fragment(nodes))\n  return parent\n}\n\n/**\n * @param {HTMLElement} el\n */\nexport const remove = el => el.remove()\n\n/**\n * @param {EventTarget} el\n * @param {string} name\n * @param {EventListener} f\n */\nexport const addEventListener = (el, name, f) => el.addEventListener(name, f)\n\n/**\n * @param {EventTarget} el\n * @param {string} name\n * @param {EventListener} f\n */\nexport const removeEventListener = (el, name, f) => el.removeEventListener(name, f)\n\n/**\n * @param {Node} node\n * @param {Array<pair.Pair<string,EventListener>>} listeners\n * @return {Node}\n */\nexport const addEventListeners = (node, listeners) => {\n  pair.forEach(listeners, (name, f) => addEventListener(node, name, f))\n  return node\n}\n\n/**\n * @param {Node} node\n * @param {Array<pair.Pair<string,EventListener>>} listeners\n * @return {Node}\n */\nexport const removeEventListeners = (node, listeners) => {\n  pair.forEach(listeners, (name, f) => removeEventListener(node, name, f))\n  return node\n}\n\n/**\n * @param {string} name\n * @param {Array<pair.Pair<string,string>|pair.Pair<string,boolean>>} attrs Array of key-value pairs\n * @param {Array<Node>} children\n * @return {Element}\n */\nexport const element = (name, attrs = [], children = []) =>\n  append(setAttributes(createElement(name), attrs), children)\n\n/**\n * @param {number} width\n * @param {number} height\n */\nexport const canvas = (width, height) => {\n  const c = /** @type {HTMLCanvasElement} */ (createElement('canvas'))\n  c.height = height\n  c.width = width\n  return c\n}\n\n/**\n * @param {string} t\n * @return {Text}\n */\nexport const text = createTextNode\n\n/**\n * @param {pair.Pair<string,string>} pair\n */\nexport const pairToStyleString = pair => `${pair.left}:${pair.right};`\n\n/**\n * @param {Array<pair.Pair<string,string>>} pairs\n * @return {string}\n */\nexport const pairsToStyleString = pairs => pairs.map(pairToStyleString).join('')\n\n/**\n * @param {Map<string,string>} m\n * @return {string}\n */\nexport const mapToStyleString = m => map.map(m, (value, key) => `${key}:${value};`).join('')\n\n/**\n * @todo should always query on a dom element\n *\n * @param {HTMLElement|ShadowRoot} el\n * @param {string} query\n * @return {HTMLElement | null}\n */\nexport const querySelector = (el, query) => el.querySelector(query)\n\n/**\n * @param {HTMLElement|ShadowRoot} el\n * @param {string} query\n * @return {NodeListOf<HTMLElement>}\n */\nexport const querySelectorAll = (el, query) => el.querySelectorAll(query)\n\n/**\n * @param {string} id\n * @return {HTMLElement}\n */\nexport const getElementById = id => /** @type {HTMLElement} */ (doc.getElementById(id))\n\n/**\n * @param {string} html\n * @return {HTMLElement}\n */\nconst _parse = html => domParser.parseFromString(`<html><body>${html}</body></html>`, 'text/html').body\n\n/**\n * @param {string} html\n * @return {DocumentFragment}\n */\nexport const parseFragment = html => fragment(/** @type {any} */ (_parse(html).childNodes))\n\n/**\n * @param {string} html\n * @return {HTMLElement}\n */\nexport const parseElement = html => /** @type HTMLElement */ (_parse(html).firstElementChild)\n\n/**\n * @param {HTMLElement} oldEl\n * @param {HTMLElement|DocumentFragment} newEl\n */\nexport const replaceWith = (oldEl, newEl) => oldEl.replaceWith(newEl)\n\n/**\n * @param {HTMLElement} parent\n * @param {HTMLElement} el\n * @param {Node|null} ref\n * @return {HTMLElement}\n */\nexport const insertBefore = (parent, el, ref) => parent.insertBefore(el, ref)\n\n/**\n * @param {Node} parent\n * @param {Node} child\n * @return {Node}\n */\nexport const appendChild = (parent, child) => parent.appendChild(child)\n\nexport const ELEMENT_NODE = doc.ELEMENT_NODE\nexport const TEXT_NODE = doc.TEXT_NODE\nexport const CDATA_SECTION_NODE = doc.CDATA_SECTION_NODE\nexport const COMMENT_NODE = doc.COMMENT_NODE\nexport const DOCUMENT_NODE = doc.DOCUMENT_NODE\nexport const DOCUMENT_TYPE_NODE = doc.DOCUMENT_TYPE_NODE\nexport const DOCUMENT_FRAGMENT_NODE = doc.DOCUMENT_FRAGMENT_NODE\n\n/**\n * @param {any} node\n * @param {number} type\n */\nexport const checkNodeType = (node, type) => node.nodeType === type\n\n/**\n * @param {Node} parent\n * @param {HTMLElement} child\n */\nexport const isParentOf = (parent, child) => {\n  let p = child.parentNode\n  while (p && p !== parent) {\n    p = p.parentNode\n  }\n  return p === parent\n}\n/* c8 ignore stop */\n", "/* global requestIdleCallback, requestAnimationFrame, cancelIdleCallback, cancelAnimationFrame */\n\n/**\n * Utility module to work with EcmaScript's event loop.\n *\n * @module eventloop\n */\n\n/**\n * @type {Array<function>}\n */\nlet queue = []\n\nconst _runQueue = () => {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i]()\n  }\n  queue = []\n}\n\n/**\n * @param {function():void} f\n */\nexport const enqueue = f => {\n  queue.push(f)\n  if (queue.length === 1) {\n    setTimeout(_runQueue, 0)\n  }\n}\n\n/**\n * @typedef {Object} TimeoutObject\n * @property {function} TimeoutObject.destroy\n */\n\n/**\n * @param {function(number):void} clearFunction\n */\nconst createTimeoutClass = clearFunction => class TT {\n  /**\n   * @param {number} timeoutId\n   */\n  constructor (timeoutId) {\n    this._ = timeoutId\n  }\n\n  destroy () {\n    clearFunction(this._)\n  }\n}\n\nconst Timeout = createTimeoutClass(clearTimeout)\n\n/**\n * @param {number} timeout\n * @param {function} callback\n * @return {TimeoutObject}\n */\nexport const timeout = (timeout, callback) => new Timeout(setTimeout(callback, timeout))\n\nconst Interval = createTimeoutClass(clearInterval)\n\n/**\n * @param {number} timeout\n * @param {function} callback\n * @return {TimeoutObject}\n */\nexport const interval = (timeout, callback) => new Interval(setInterval(callback, timeout))\n\n/* c8 ignore next */\nexport const Animation = createTimeoutClass(arg => typeof requestAnimationFrame !== 'undefined' && cancelAnimationFrame(arg))\n\n/**\n * @param {function(number):void} cb\n * @return {TimeoutObject}\n */\n/* c8 ignore next */\nexport const animationFrame = cb => typeof requestAnimationFrame === 'undefined' ? timeout(0, cb) : new Animation(requestAnimationFrame(cb))\n\n/* c8 ignore next */\n// @ts-ignore\nconst Idle = createTimeoutClass(arg => typeof cancelIdleCallback !== 'undefined' && cancelIdleCallback(arg))\n\n/**\n * Note: this is experimental and is probably only useful in browsers.\n *\n * @param {function} cb\n * @return {TimeoutObject}\n */\n/* c8 ignore next 2 */\n// @ts-ignore\nexport const idleCallback = cb => typeof requestIdleCallback !== 'undefined' ? new Idle(requestIdleCallback(cb)) : timeout(1000, cb)\n\n/**\n * @param {number} timeout Timeout of the debounce action\n * @return {function(function():void):void}\n */\nexport const createDebouncer = timeout => {\n  let timer = -1\n  return f => {\n    clearTimeout(timer)\n    if (f) {\n      timer = /** @type {any} */ (setTimeout(f, timeout))\n    }\n  }\n}\n", "/**\n * Utility module to work with EcmaScript Symbols.\n *\n * @module symbol\n */\n\n/**\n * Return fresh symbol.\n *\n * @return {Symbol}\n */\nexport const create = Symbol\n\n/**\n * @param {any} s\n * @return {boolean}\n */\nexport const isSymbol = s => typeof s === 'symbol'\n", "import * as symbol from './symbol.js'\nimport * as time from './time.js'\nimport * as env from './environment.js'\nimport * as func from './function.js'\n\nexport const BOLD = symbol.create()\nexport const UNBOLD = symbol.create()\nexport const BLUE = symbol.create()\nexport const GREY = symbol.create()\nexport const GREEN = symbol.create()\nexport const RED = symbol.create()\nexport const PURPLE = symbol.create()\nexport const ORANGE = symbol.create()\nexport const UNCOLOR = symbol.create()\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nexport const computeNoColorLoggingArgs = args => {\n  const strBuilder = []\n  const logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (arg.constructor === String || arg.constructor === Number) {\n      strBuilder.push(arg)\n    } else if (arg.constructor === Object) {\n      logArgs.push(JSON.stringify(arg))\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\nconst loggingColors = [GREEN, PURPLE, ORANGE, BLUE]\nlet nextColor = 0\nlet lastLoggingTime = time.getUnixTime()\n\n/* c8 ignore start */\n/**\n * @param {function(...any):void} _print\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = (_print, moduleName) => {\n  const color = loggingColors[nextColor]\n  const debugRegexVar = env.getVariable('log')\n  const doLogging = debugRegexVar !== null &&\n    (debugRegexVar === '*' || debugRegexVar === 'true' ||\n      new RegExp(debugRegexVar, 'gi').test(moduleName))\n  nextColor = (nextColor + 1) % loggingColors.length\n  moduleName += ': '\n  return !doLogging\n    ? func.nop\n    : (...args) => {\n      const timeNow = time.getUnixTime()\n      const timeDiff = timeNow - lastLoggingTime\n      lastLoggingTime = timeNow\n      _print(\n        color,\n        moduleName,\n        UNCOLOR,\n        ...args.map((arg) =>\n          (typeof arg === 'string' || typeof arg === 'symbol')\n            ? arg\n            : JSON.stringify(arg)\n        ),\n        color,\n        ' +' + timeDiff + 'ms'\n      )\n    }\n}\n/* c8 ignore stop */\n", "/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\n\nimport * as env from './environment.js'\nimport * as set from './set.js'\nimport * as pair from './pair.js'\nimport * as dom from './dom.js'\nimport * as json from './json.js'\nimport * as map from './map.js'\nimport * as eventloop from './eventloop.js'\nimport * as math from './math.js'\nimport * as common from './logging.common.js'\n\nexport { BOLD, UNBOLD, BLUE, GREY, GREEN, RED, PURPLE, ORANGE, UNCOLOR } from './logging.common.js'\n\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\nconst _browserStyleMap = {\n  [common.BOLD]: pair.create('font-weight', 'bold'),\n  [common.UNBOLD]: pair.create('font-weight', 'normal'),\n  [common.BLUE]: pair.create('color', 'blue'),\n  [common.GREEN]: pair.create('color', 'green'),\n  [common.GREY]: pair.create('color', 'grey'),\n  [common.RED]: pair.create('color', 'red'),\n  [common.PURPLE]: pair.create('color', 'purple'),\n  [common.ORANGE]: pair.create('color', 'orange'), // not well supported in chrome when debugging node with inspector - TODO: deprecate\n  [common.UNCOLOR]: pair.create('color', 'black')\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\n/* c8 ignore start */\nconst computeBrowserLoggingArgs = (args) => {\n  const strBuilder = []\n  const styles = []\n  const currentStyle = map.create()\n  /**\n   * @type {Array<string|Object|number>}\n   */\n  let logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        const style = dom.mapToStyleString(currentStyle)\n        if (i > 0 || style.length > 0) {\n          strBuilder.push('%c' + arg)\n          styles.push(style)\n        } else {\n          strBuilder.push(arg)\n        }\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles\n    logArgs.unshift(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\n/* c8 ignore start */\nconst computeLoggingArgs = env.supportsColor\n  ? computeBrowserLoggingArgs\n  : common.computeNoColorLoggingArgs\n/* c8 ignore stop */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const print = (...args) => {\n  console.log(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.print(args))\n}\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const warn = (...args) => {\n  console.warn(...computeLoggingArgs(args))\n  args.unshift(common.ORANGE)\n  vconsoles.forEach((vc) => vc.print(args))\n}\n/* c8 ignore stop */\n\n/**\n * @param {Error} err\n */\n/* c8 ignore start */\nexport const printError = (err) => {\n  console.error(err)\n  vconsoles.forEach((vc) => vc.printError(err))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\n/* c8 ignore start */\nexport const printImg = (url, height) => {\n  if (env.isBrowser) {\n    console.log(\n      '%c                      ',\n      `font-size: ${height}px; background-size: contain; background-repeat: no-repeat; background-image: url(${url})`\n    )\n    // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n  vconsoles.forEach((vc) => vc.printImg(url, height))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} base64\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printImgBase64 = (base64, height) =>\n  printImg(`data:image/gif;base64,${base64}`, height)\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const group = (...args) => {\n  console.group(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.group(args))\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const groupCollapsed = (...args) => {\n  console.groupCollapsed(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupCollapsed(args))\n}\n\nexport const groupEnd = () => {\n  console.groupEnd()\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupEnd())\n}\n\n/**\n * @param {function():Node} createNode\n */\n/* c8 ignore next 2 */\nexport const printDom = (createNode) =>\n  vconsoles.forEach((vc) => vc.printDom(createNode()))\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printCanvas = (canvas, height) =>\n  printImg(canvas.toDataURL(), height)\n\nexport const vconsoles = set.create()\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\n/* c8 ignore start */\nconst _computeLineSpans = (args) => {\n  const spans = []\n  const currentStyle = new Map()\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        const span = dom.element('span', [\n          pair.create('style', dom.mapToStyleString(currentStyle))\n        ], [dom.text(arg.toString())])\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;'\n        }\n        spans.push(span)\n      } else {\n        break\n      }\n    }\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    let content = args[i]\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' '\n      }\n      spans.push(\n        dom.element('span', [], [dom.text(/** @type {string} */ (content))])\n      )\n    }\n  }\n  return spans\n}\n/* c8 ignore stop */\n\nconst lineStyle =\n  'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;'\n\n/* c8 ignore start */\nexport class VConsole {\n  /**\n   * @param {Element} dom\n   */\n  constructor (dom) {\n    this.dom = dom\n    /**\n     * @type {Element}\n     */\n    this.ccontainer = this.dom\n    this.depth = 0\n    vconsoles.add(this)\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n  group (args, collapsed = false) {\n    eventloop.enqueue(() => {\n      const triangleDown = dom.element('span', [\n        pair.create('hidden', collapsed),\n        pair.create('style', 'color:grey;font-size:120%;')\n      ], [dom.text('▼')])\n      const triangleRight = dom.element('span', [\n        pair.create('hidden', !collapsed),\n        pair.create('style', 'color:grey;font-size:125%;')\n      ], [dom.text('▶')])\n      const content = dom.element(\n        'div',\n        [pair.create(\n          'style',\n          `${lineStyle};padding-left:${this.depth * 10}px`\n        )],\n        [triangleDown, triangleRight, dom.text(' ')].concat(\n          _computeLineSpans(args)\n        )\n      )\n      const nextContainer = dom.element('div', [\n        pair.create('hidden', collapsed)\n      ])\n      const nextLine = dom.element('div', [], [content, nextContainer])\n      dom.append(this.ccontainer, [nextLine])\n      this.ccontainer = nextContainer\n      this.depth++\n      // when header is clicked, collapse/uncollapse container\n      dom.addEventListener(content, 'click', (_event) => {\n        nextContainer.toggleAttribute('hidden')\n        triangleDown.toggleAttribute('hidden')\n        triangleRight.toggleAttribute('hidden')\n      })\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  groupCollapsed (args) {\n    this.group(args, true)\n  }\n\n  groupEnd () {\n    eventloop.enqueue(() => {\n      if (this.depth > 0) {\n        this.depth--\n        // @ts-ignore\n        this.ccontainer = this.ccontainer.parentElement.parentElement\n      }\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  print (args) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('div', [\n          pair.create(\n            'style',\n            `${lineStyle};padding-left:${this.depth * 10}px`\n          )\n        ], _computeLineSpans(args))\n      ])\n    })\n  }\n\n  /**\n   * @param {Error} err\n   */\n  printError (err) {\n    this.print([common.RED, common.BOLD, err.toString()])\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} height\n   */\n  printImg (url, height) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('img', [\n          pair.create('src', url),\n          pair.create('height', `${math.round(height * 1.5)}px`)\n        ])\n      ])\n    })\n  }\n\n  /**\n   * @param {Node} node\n   */\n  printDom (node) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [node])\n    })\n  }\n\n  destroy () {\n    eventloop.enqueue(() => {\n      vconsoles.delete(this)\n    })\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @param {Element} dom\n */\n/* c8 ignore next */\nexport const createVConsole = (dom) => new VConsole(dom)\n\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = (moduleName) => common.createModuleLogger(print, moduleName)\n", "/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next () {\n    const r = iterator.next()\n    return { value: r.done ? undefined : f(r.value), done: r.done }\n  }\n})\n\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next\n})\n\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res\n  do {\n    res = iterator.next()\n  } while (!res.done && !filter(res.value))\n  return res\n})\n\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const { done, value } = iterator.next()\n  return { done, value: done ? undefined : fmap(value) }\n})\n", "\nimport { Observable } from 'lib0/observable'\n\nimport {\n  Doc // eslint-disable-line\n} from '../internals.js'\n\n/**\n * This is an abstract interface that all Connectors should implement to keep them interchangeable.\n *\n * @note This interface is experimental and it is not advised to actually inherit this class.\n *       It just serves as typing information.\n *\n * @extends {Observable<any>}\n */\nexport class AbstractConnector extends Observable {\n  /**\n   * @param {Doc} ydoc\n   * @param {any} awareness\n   */\n  constructor (ydoc, awareness) {\n    super()\n    this.doc = ydoc\n    this.awareness = awareness\n  }\n}\n", "\nimport {\n  findIndexSS,\n  getState,\n  splitItem,\n  iterateStructs,\n  UpdateEncoderV2,\n  DSDecoderV1, DSEncoderV1, DSDecoderV2, DSEncoderV2, Item, GC, StructStore, Transaction, ID // eslint-disable-line\n} from '../internals.js'\n\nimport * as array from 'lib0/array'\nimport * as math from 'lib0/math'\nimport * as map from 'lib0/map'\nimport * as encoding from 'lib0/encoding'\nimport * as decoding from 'lib0/decoding'\n\nexport class DeleteItem {\n  /**\n   * @param {number} clock\n   * @param {number} len\n   */\n  constructor (clock, len) {\n    /**\n     * @type {number}\n     */\n    this.clock = clock\n    /**\n     * @type {number}\n     */\n    this.len = len\n  }\n}\n\n/**\n * We no longer maintain a DeleteStore. DeleteSet is a temporary object that is created when needed.\n * - When created in a transaction, it must only be accessed after sorting, and merging\n *   - This DeleteSet is send to other clients\n * - We do not create a DeleteSet when we send a sync message. The DeleteSet message is created directly from StructStore\n * - We read a DeleteSet as part of a sync/update message. In this case the DeleteSet is already sorted and merged.\n */\nexport class DeleteSet {\n  constructor () {\n    /**\n     * @type {Map<number,Array<DeleteItem>>}\n     */\n    this.clients = new Map()\n  }\n}\n\n/**\n * Iterate over all structs that the DeleteSet gc's.\n *\n * @param {Transaction} transaction\n * @param {DeleteSet} ds\n * @param {function(GC|Item):void} f\n *\n * @function\n */\nexport const iterateDeletedStructs = (transaction, ds, f) =>\n  ds.clients.forEach((deletes, clientid) => {\n    const structs = /** @type {Array<GC|Item>} */ (transaction.doc.store.clients.get(clientid))\n    for (let i = 0; i < deletes.length; i++) {\n      const del = deletes[i]\n      iterateStructs(transaction, structs, del.clock, del.len, f)\n    }\n  })\n\n/**\n * @param {Array<DeleteItem>} dis\n * @param {number} clock\n * @return {number|null}\n *\n * @private\n * @function\n */\nexport const findIndexDS = (dis, clock) => {\n  let left = 0\n  let right = dis.length - 1\n  while (left <= right) {\n    const midindex = math.floor((left + right) / 2)\n    const mid = dis[midindex]\n    const midclock = mid.clock\n    if (midclock <= clock) {\n      if (clock < midclock + mid.len) {\n        return midindex\n      }\n      left = midindex + 1\n    } else {\n      right = midindex - 1\n    }\n  }\n  return null\n}\n\n/**\n * @param {DeleteSet} ds\n * @param {ID} id\n * @return {boolean}\n *\n * @private\n * @function\n */\nexport const isDeleted = (ds, id) => {\n  const dis = ds.clients.get(id.client)\n  return dis !== undefined && findIndexDS(dis, id.clock) !== null\n}\n\n/**\n * @param {DeleteSet} ds\n *\n * @private\n * @function\n */\nexport const sortAndMergeDeleteSet = ds => {\n  ds.clients.forEach(dels => {\n    dels.sort((a, b) => a.clock - b.clock)\n    // merge items without filtering or splicing the array\n    // i is the current pointer\n    // j refers to the current insert position for the pointed item\n    // try to merge dels[i] into dels[j-1] or set dels[j]=dels[i]\n    let i, j\n    for (i = 1, j = 1; i < dels.length; i++) {\n      const left = dels[j - 1]\n      const right = dels[i]\n      if (left.clock + left.len >= right.clock) {\n        left.len = math.max(left.len, right.clock + right.len - left.clock)\n      } else {\n        if (j < i) {\n          dels[j] = right\n        }\n        j++\n      }\n    }\n    dels.length = j\n  })\n}\n\n/**\n * @param {Array<DeleteSet>} dss\n * @return {DeleteSet} A fresh DeleteSet\n */\nexport const mergeDeleteSets = dss => {\n  const merged = new DeleteSet()\n  for (let dssI = 0; dssI < dss.length; dssI++) {\n    dss[dssI].clients.forEach((delsLeft, client) => {\n      if (!merged.clients.has(client)) {\n        // Write all missing keys from current ds and all following.\n        // If merged already contains `client` current ds has already been added.\n        /**\n         * @type {Array<DeleteItem>}\n         */\n        const dels = delsLeft.slice()\n        for (let i = dssI + 1; i < dss.length; i++) {\n          array.appendTo(dels, dss[i].clients.get(client) || [])\n        }\n        merged.clients.set(client, dels)\n      }\n    })\n  }\n  sortAndMergeDeleteSet(merged)\n  return merged\n}\n\n/**\n * @param {DeleteSet} ds\n * @param {number} client\n * @param {number} clock\n * @param {number} length\n *\n * @private\n * @function\n */\nexport const addToDeleteSet = (ds, client, clock, length) => {\n  map.setIfUndefined(ds.clients, client, () => /** @type {Array<DeleteItem>} */ ([])).push(new DeleteItem(clock, length))\n}\n\nexport const createDeleteSet = () => new DeleteSet()\n\n/**\n * @param {StructStore} ss\n * @return {DeleteSet} Merged and sorted DeleteSet\n *\n * @private\n * @function\n */\nexport const createDeleteSetFromStructStore = ss => {\n  const ds = createDeleteSet()\n  ss.clients.forEach((structs, client) => {\n    /**\n     * @type {Array<DeleteItem>}\n     */\n    const dsitems = []\n    for (let i = 0; i < structs.length; i++) {\n      const struct = structs[i]\n      if (struct.deleted) {\n        const clock = struct.id.clock\n        let len = struct.length\n        if (i + 1 < structs.length) {\n          for (let next = structs[i + 1]; i + 1 < structs.length && next.deleted; next = structs[++i + 1]) {\n            len += next.length\n          }\n        }\n        dsitems.push(new DeleteItem(clock, len))\n      }\n    }\n    if (dsitems.length > 0) {\n      ds.clients.set(client, dsitems)\n    }\n  })\n  return ds\n}\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {DeleteSet} ds\n *\n * @private\n * @function\n */\nexport const writeDeleteSet = (encoder, ds) => {\n  encoding.writeVarUint(encoder.restEncoder, ds.clients.size)\n\n  // Ensure that the delete set is written in a deterministic order\n  array.from(ds.clients.entries())\n    .sort((a, b) => b[0] - a[0])\n    .forEach(([client, dsitems]) => {\n      encoder.resetDsCurVal()\n      encoding.writeVarUint(encoder.restEncoder, client)\n      const len = dsitems.length\n      encoding.writeVarUint(encoder.restEncoder, len)\n      for (let i = 0; i < len; i++) {\n        const item = dsitems[i]\n        encoder.writeDsClock(item.clock)\n        encoder.writeDsLen(item.len)\n      }\n    })\n}\n\n/**\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @return {DeleteSet}\n *\n * @private\n * @function\n */\nexport const readDeleteSet = decoder => {\n  const ds = new DeleteSet()\n  const numClients = decoding.readVarUint(decoder.restDecoder)\n  for (let i = 0; i < numClients; i++) {\n    decoder.resetDsCurVal()\n    const client = decoding.readVarUint(decoder.restDecoder)\n    const numberOfDeletes = decoding.readVarUint(decoder.restDecoder)\n    if (numberOfDeletes > 0) {\n      const dsField = map.setIfUndefined(ds.clients, client, () => /** @type {Array<DeleteItem>} */ ([]))\n      for (let i = 0; i < numberOfDeletes; i++) {\n        dsField.push(new DeleteItem(decoder.readDsClock(), decoder.readDsLen()))\n      }\n    }\n  }\n  return ds\n}\n\n/**\n * @todo YDecoder also contains references to String and other Decoders. Would make sense to exchange YDecoder.toUint8Array for YDecoder.DsToUint8Array()..\n */\n\n/**\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @return {Uint8Array|null} Returns a v2 update containing all deletes that couldn't be applied yet; or null if all deletes were applied successfully.\n *\n * @private\n * @function\n */\nexport const readAndApplyDeleteSet = (decoder, transaction, store) => {\n  const unappliedDS = new DeleteSet()\n  const numClients = decoding.readVarUint(decoder.restDecoder)\n  for (let i = 0; i < numClients; i++) {\n    decoder.resetDsCurVal()\n    const client = decoding.readVarUint(decoder.restDecoder)\n    const numberOfDeletes = decoding.readVarUint(decoder.restDecoder)\n    const structs = store.clients.get(client) || []\n    const state = getState(store, client)\n    for (let i = 0; i < numberOfDeletes; i++) {\n      const clock = decoder.readDsClock()\n      const clockEnd = clock + decoder.readDsLen()\n      if (clock < state) {\n        if (state < clockEnd) {\n          addToDeleteSet(unappliedDS, client, state, clockEnd - state)\n        }\n        let index = findIndexSS(structs, clock)\n        /**\n         * We can ignore the case of GC and Delete structs, because we are going to skip them\n         * @type {Item}\n         */\n        // @ts-ignore\n        let struct = structs[index]\n        // split the first item if necessary\n        if (!struct.deleted && struct.id.clock < clock) {\n          structs.splice(index + 1, 0, splitItem(transaction, struct, clock - struct.id.clock))\n          index++ // increase we now want to use the next struct\n        }\n        while (index < structs.length) {\n          // @ts-ignore\n          struct = structs[index++]\n          if (struct.id.clock < clockEnd) {\n            if (!struct.deleted) {\n              if (clockEnd < struct.id.clock + struct.length) {\n                structs.splice(index, 0, splitItem(transaction, struct, clockEnd - struct.id.clock))\n              }\n              struct.delete(transaction)\n            }\n          } else {\n            break\n          }\n        }\n      } else {\n        addToDeleteSet(unappliedDS, client, clock, clockEnd - clock)\n      }\n    }\n  }\n  if (unappliedDS.clients.size > 0) {\n    const ds = new UpdateEncoderV2()\n    encoding.writeVarUint(ds.restEncoder, 0) // encode 0 structs\n    writeDeleteSet(ds, unappliedDS)\n    return ds.toUint8Array()\n  }\n  return null\n}\n\n/**\n * @param {DeleteSet} ds1\n * @param {DeleteSet} ds2\n */\nexport const equalDeleteSets = (ds1, ds2) => {\n  if (ds1.clients.size !== ds2.clients.size) return false\n  for (const [client, deleteItems1] of ds1.clients.entries()) {\n    const deleteItems2 = /** @type {Array<import('../internals.js').DeleteItem>} */ (ds2.clients.get(client))\n    if (deleteItems2 === undefined || deleteItems1.length !== deleteItems2.length) return false\n    for (let i = 0; i < deleteItems1.length; i++) {\n      const di1 = deleteItems1[i]\n      const di2 = deleteItems2[i]\n      if (di1.clock !== di2.clock || di1.len !== di2.len) {\n        return false\n      }\n    }\n  }\n  return true\n}\n", "/**\n * @module Y\n */\n\nimport {\n  StructStore,\n  AbstractType,\n  YArray,\n  YText,\n  YMap,\n  YXmlFragment,\n  transact,\n  ContentDoc, Item, Transaction, YEvent // eslint-disable-line\n} from '../internals.js'\n\nimport { Observable } from 'lib0/observable'\nimport * as random from 'lib0/random'\nimport * as map from 'lib0/map'\nimport * as array from 'lib0/array'\nimport * as promise from 'lib0/promise'\n\nexport const generateNewClientId = random.uint32\n\n/**\n * @typedef {Object} DocOpts\n * @property {boolean} [DocOpts.gc=true] Disable garbage collection (default: gc=true)\n * @property {function(Item):boolean} [DocOpts.gcFilter] Will be called before an Item is garbage collected. Return false to keep the Item.\n * @property {string} [DocOpts.guid] Define a globally unique identifier for this document\n * @property {string | null} [DocOpts.collectionid] Associate this document with a collection. This only plays a role if your provider has a concept of collection.\n * @property {any} [DocOpts.meta] Any kind of meta information you want to associate with this document. If this is a subdocument, remote peers will store the meta information as well.\n * @property {boolean} [DocOpts.autoLoad] If a subdocument, automatically load document. If this is a subdocument, remote peers will load the document as well automatically.\n * @property {boolean} [DocOpts.shouldLoad] Whether the document should be synced by the provider now. This is toggled to true when you call ydoc.load()\n */\n\n/**\n * A Yjs instance handles the state of shared data.\n * @extends Observable<string>\n */\nexport class Doc extends Observable {\n  /**\n   * @param {DocOpts} opts configuration\n   */\n  constructor ({ guid = random.uuidv4(), collectionid = null, gc = true, gcFilter = () => true, meta = null, autoLoad = false, shouldLoad = true } = {}) {\n    super()\n    this.gc = gc\n    this.gcFilter = gcFilter\n    this.clientID = generateNewClientId()\n    this.guid = guid\n    this.collectionid = collectionid\n    /**\n     * @type {Map<string, AbstractType<YEvent<any>>>}\n     */\n    this.share = new Map()\n    this.store = new StructStore()\n    /**\n     * @type {Transaction | null}\n     */\n    this._transaction = null\n    /**\n     * @type {Array<Transaction>}\n     */\n    this._transactionCleanups = []\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocs = new Set()\n    /**\n     * If this document is a subdocument - a document integrated into another document - then _item is defined.\n     * @type {Item?}\n     */\n    this._item = null\n    this.shouldLoad = shouldLoad\n    this.autoLoad = autoLoad\n    this.meta = meta\n    /**\n     * This is set to true when the persistence provider loaded the document from the database or when the `sync` event fires.\n     * Note that not all providers implement this feature. Provider authors are encouraged to fire the `load` event when the doc content is loaded from the database.\n     *\n     * @type {boolean}\n     */\n    this.isLoaded = false\n    /**\n     * This is set to true when the connection provider has successfully synced with a backend.\n     * Note that when using peer-to-peer providers this event may not provide very useful.\n     * Also note that not all providers implement this feature. Provider authors are encouraged to fire\n     * the `sync` event when the doc has been synced (with `true` as a parameter) or if connection is\n     * lost (with false as a parameter).\n     */\n    this.isSynced = false\n    /**\n     * Promise that resolves once the document has been loaded from a presistence provider.\n     */\n    this.whenLoaded = promise.create(resolve => {\n      this.on('load', () => {\n        this.isLoaded = true\n        resolve(this)\n      })\n    })\n    const provideSyncedPromise = () => promise.create(resolve => {\n      /**\n       * @param {boolean} isSynced\n       */\n      const eventHandler = (isSynced) => {\n        if (isSynced === undefined || isSynced === true) {\n          this.off('sync', eventHandler)\n          resolve()\n        }\n      }\n      this.on('sync', eventHandler)\n    })\n    this.on('sync', isSynced => {\n      if (isSynced === false && this.isSynced) {\n        this.whenSynced = provideSyncedPromise()\n      }\n      this.isSynced = isSynced === undefined || isSynced === true\n      if (!this.isLoaded) {\n        this.emit('load', [])\n      }\n    })\n    /**\n     * Promise that resolves once the document has been synced with a backend.\n     * This promise is recreated when the connection is lost.\n     * Note the documentation about the `isSynced` property.\n     */\n    this.whenSynced = provideSyncedPromise()\n  }\n\n  /**\n   * Notify the parent document that you request to load data into this subdocument (if it is a subdocument).\n   *\n   * `load()` might be used in the future to request any provider to load the most current data.\n   *\n   * It is safe to call `load()` multiple times.\n   */\n  load () {\n    const item = this._item\n    if (item !== null && !this.shouldLoad) {\n      transact(/** @type {any} */ (item.parent).doc, transaction => {\n        transaction.subdocsLoaded.add(this)\n      }, null, true)\n    }\n    this.shouldLoad = true\n  }\n\n  getSubdocs () {\n    return this.subdocs\n  }\n\n  getSubdocGuids () {\n    return new Set(array.from(this.subdocs).map(doc => doc.guid))\n  }\n\n  /**\n   * Changes that happen inside of a transaction are bundled. This means that\n   * the observer fires _after_ the transaction is finished and that all changes\n   * that happened inside of the transaction are sent as one message to the\n   * other peers.\n   *\n   * @template T\n   * @param {function(Transaction):T} f The function that should be executed as a transaction\n   * @param {any} [origin] Origin of who started the transaction. Will be stored on transaction.origin\n   * @return T\n   *\n   * @public\n   */\n  transact (f, origin = null) {\n    return transact(this, f, origin)\n  }\n\n  /**\n   * Define a shared data type.\n   *\n   * Multiple calls of `y.get(name, TypeConstructor)` yield the same result\n   * and do not overwrite each other. I.e.\n   * `y.define(name, Y.Array) === y.define(name, Y.Array)`\n   *\n   * After this method is called, the type is also available on `y.share.get(name)`.\n   *\n   * *Best Practices:*\n   * Define all types right after the Yjs instance is created and store them in a separate object.\n   * Also use the typed methods `getText(name)`, `getArray(name)`, ..\n   *\n   * @example\n   *   const y = new Y(..)\n   *   const appState = {\n   *     document: y.getText('document')\n   *     comments: y.getArray('comments')\n   *   }\n   *\n   * @param {string} name\n   * @param {Function} TypeConstructor The constructor of the type definition. E.g. Y.Text, Y.Array, Y.Map, ...\n   * @return {AbstractType<any>} The created type. Constructed with TypeConstructor\n   *\n   * @public\n   */\n  get (name, TypeConstructor = AbstractType) {\n    const type = map.setIfUndefined(this.share, name, () => {\n      // @ts-ignore\n      const t = new TypeConstructor()\n      t._integrate(this, null)\n      return t\n    })\n    const Constr = type.constructor\n    if (TypeConstructor !== AbstractType && Constr !== TypeConstructor) {\n      if (Constr === AbstractType) {\n        // @ts-ignore\n        const t = new TypeConstructor()\n        t._map = type._map\n        type._map.forEach(/** @param {Item?} n */ n => {\n          for (; n !== null; n = n.left) {\n            // @ts-ignore\n            n.parent = t\n          }\n        })\n        t._start = type._start\n        for (let n = t._start; n !== null; n = n.right) {\n          n.parent = t\n        }\n        t._length = type._length\n        this.share.set(name, t)\n        t._integrate(this, null)\n        return t\n      } else {\n        throw new Error(`Type with the name ${name} has already been defined with a different constructor`)\n      }\n    }\n    return type\n  }\n\n  /**\n   * @template T\n   * @param {string} [name]\n   * @return {YArray<T>}\n   *\n   * @public\n   */\n  getArray (name = '') {\n    // @ts-ignore\n    return this.get(name, YArray)\n  }\n\n  /**\n   * @param {string} [name]\n   * @return {YText}\n   *\n   * @public\n   */\n  getText (name = '') {\n    // @ts-ignore\n    return this.get(name, YText)\n  }\n\n  /**\n   * @template T\n   * @param {string} [name]\n   * @return {YMap<T>}\n   *\n   * @public\n   */\n  getMap (name = '') {\n    // @ts-ignore\n    return this.get(name, YMap)\n  }\n\n  /**\n   * @param {string} [name]\n   * @return {YXmlFragment}\n   *\n   * @public\n   */\n  getXmlFragment (name = '') {\n    // @ts-ignore\n    return this.get(name, YXmlFragment)\n  }\n\n  /**\n   * Converts the entire document into a js object, recursively traversing each yjs type\n   * Doesn't log types that have not been defined (using ydoc.getType(..)).\n   *\n   * @deprecated Do not use this method and rather call toJSON directly on the shared types.\n   *\n   * @return {Object<string, any>}\n   */\n  toJSON () {\n    /**\n     * @type {Object<string, any>}\n     */\n    const doc = {}\n\n    this.share.forEach((value, key) => {\n      doc[key] = value.toJSON()\n    })\n\n    return doc\n  }\n\n  /**\n   * Emit `destroy` event and unregister all event handlers.\n   */\n  destroy () {\n    array.from(this.subdocs).forEach(subdoc => subdoc.destroy())\n    const item = this._item\n    if (item !== null) {\n      this._item = null\n      const content = /** @type {ContentDoc} */ (item.content)\n      content.doc = new Doc({ guid: this.guid, ...content.opts, shouldLoad: false })\n      content.doc._item = item\n      transact(/** @type {any} */ (item).parent.doc, transaction => {\n        const doc = content.doc\n        if (!item.deleted) {\n          transaction.subdocsAdded.add(doc)\n        }\n        transaction.subdocsRemoved.add(this)\n      }, null, true)\n    }\n    this.emit('destroyed', [true])\n    this.emit('destroy', [this])\n    super.destroy()\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {function(...any):any} f\n   */\n  on (eventName, f) {\n    super.on(eventName, f)\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {function} f\n   */\n  off (eventName, f) {\n    super.off(eventName, f)\n  }\n}\n", "import * as buffer from 'lib0/buffer'\nimport * as decoding from 'lib0/decoding'\nimport {\n  ID, createID\n} from '../internals.js'\n\nexport class DSDecoderV1 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    this.restDecoder = decoder\n  }\n\n  resetDsCurVal () {\n    // nop\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsClock () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsLen () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n}\n\nexport class UpdateDecoderV1 extends DSDecoderV1 {\n  /**\n   * @return {ID}\n   */\n  readLeftID () {\n    return createID(decoding.readVarUint(this.restDecoder), decoding.readVarUint(this.restDecoder))\n  }\n\n  /**\n   * @return {ID}\n   */\n  readRightID () {\n    return createID(decoding.readVarUint(this.restDecoder), decoding.readVarUint(this.restDecoder))\n  }\n\n  /**\n   * Read the next client id.\n   * Use this in favor of readID whenever possible to reduce the number of objects created.\n   */\n  readClient () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readInfo () {\n    return decoding.readUint8(this.restDecoder)\n  }\n\n  /**\n   * @return {string}\n   */\n  readString () {\n    return decoding.readVarString(this.restDecoder)\n  }\n\n  /**\n   * @return {boolean} isKey\n   */\n  readParentInfo () {\n    return decoding.readVarUint(this.restDecoder) === 1\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readTypeRef () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @return {number} len\n   */\n  readLen () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {any}\n   */\n  readAny () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {Uint8Array}\n   */\n  readBuf () {\n    return buffer.copyUint8Array(decoding.readVarUint8Array(this.restDecoder))\n  }\n\n  /**\n   * Legacy implementation uses JSON parse. We use any-decoding in v2.\n   *\n   * @return {any}\n   */\n  readJSON () {\n    return JSON.parse(decoding.readVarString(this.restDecoder))\n  }\n\n  /**\n   * @return {string}\n   */\n  readKey () {\n    return decoding.readVarString(this.restDecoder)\n  }\n}\n\nexport class DSDecoderV2 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    /**\n     * @private\n     */\n    this.dsCurrVal = 0\n    this.restDecoder = decoder\n  }\n\n  resetDsCurVal () {\n    this.dsCurrVal = 0\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsClock () {\n    this.dsCurrVal += decoding.readVarUint(this.restDecoder)\n    return this.dsCurrVal\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsLen () {\n    const diff = decoding.readVarUint(this.restDecoder) + 1\n    this.dsCurrVal += diff\n    return diff\n  }\n}\n\nexport class UpdateDecoderV2 extends DSDecoderV2 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    super(decoder)\n    /**\n     * List of cached keys. If the keys[id] does not exist, we read a new key\n     * from stringEncoder and push it to keys.\n     *\n     * @type {Array<string>}\n     */\n    this.keys = []\n    decoding.readVarUint(decoder) // read feature flag - currently unused\n    this.keyClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder))\n    this.clientDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder))\n    this.leftClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder))\n    this.rightClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder))\n    this.infoDecoder = new decoding.RleDecoder(decoding.readVarUint8Array(decoder), decoding.readUint8)\n    this.stringDecoder = new decoding.StringDecoder(decoding.readVarUint8Array(decoder))\n    this.parentInfoDecoder = new decoding.RleDecoder(decoding.readVarUint8Array(decoder), decoding.readUint8)\n    this.typeRefDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder))\n    this.lenDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder))\n  }\n\n  /**\n   * @return {ID}\n   */\n  readLeftID () {\n    return new ID(this.clientDecoder.read(), this.leftClockDecoder.read())\n  }\n\n  /**\n   * @return {ID}\n   */\n  readRightID () {\n    return new ID(this.clientDecoder.read(), this.rightClockDecoder.read())\n  }\n\n  /**\n   * Read the next client id.\n   * Use this in favor of readID whenever possible to reduce the number of objects created.\n   */\n  readClient () {\n    return this.clientDecoder.read()\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readInfo () {\n    return /** @type {number} */ (this.infoDecoder.read())\n  }\n\n  /**\n   * @return {string}\n   */\n  readString () {\n    return this.stringDecoder.read()\n  }\n\n  /**\n   * @return {boolean}\n   */\n  readParentInfo () {\n    return this.parentInfoDecoder.read() === 1\n  }\n\n  /**\n   * @return {number} An unsigned 8-bit integer\n   */\n  readTypeRef () {\n    return this.typeRefDecoder.read()\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @return {number}\n   */\n  readLen () {\n    return this.lenDecoder.read()\n  }\n\n  /**\n   * @return {any}\n   */\n  readAny () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {Uint8Array}\n   */\n  readBuf () {\n    return decoding.readVarUint8Array(this.restDecoder)\n  }\n\n  /**\n   * This is mainly here for legacy purposes.\n   *\n   * Initial we incoded objects using JSON. Now we use the much faster lib0/any-encoder. This method mainly exists for legacy purposes for the v1 encoder.\n   *\n   * @return {any}\n   */\n  readJSON () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {string}\n   */\n  readKey () {\n    const keyClock = this.keyClockDecoder.read()\n    if (keyClock < this.keys.length) {\n      return this.keys[keyClock]\n    } else {\n      const key = this.stringDecoder.read()\n      this.keys.push(key)\n      return key\n    }\n  }\n}\n", "\nimport * as error from 'lib0/error'\nimport * as encoding from 'lib0/encoding'\n\nimport {\n  ID // eslint-disable-line\n} from '../internals.js'\n\nexport class DSEncoderV1 {\n  constructor () {\n    this.restEncoder = encoding.createEncoder()\n  }\n\n  toUint8Array () {\n    return encoding.toUint8Array(this.restEncoder)\n  }\n\n  resetDsCurVal () {\n    // nop\n  }\n\n  /**\n   * @param {number} clock\n   */\n  writeDsClock (clock) {\n    encoding.writeVarUint(this.restEncoder, clock)\n  }\n\n  /**\n   * @param {number} len\n   */\n  writeDsLen (len) {\n    encoding.writeVarUint(this.restEncoder, len)\n  }\n}\n\nexport class UpdateEncoderV1 extends DSEncoderV1 {\n  /**\n   * @param {ID} id\n   */\n  writeLeftID (id) {\n    encoding.writeVarUint(this.restEncoder, id.client)\n    encoding.writeVarUint(this.restEncoder, id.clock)\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeRightID (id) {\n    encoding.writeVarUint(this.restEncoder, id.client)\n    encoding.writeVarUint(this.restEncoder, id.clock)\n  }\n\n  /**\n   * Use writeClient and writeClock instead of writeID if possible.\n   * @param {number} client\n   */\n  writeClient (client) {\n    encoding.writeVarUint(this.restEncoder, client)\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeInfo (info) {\n    encoding.writeUint8(this.restEncoder, info)\n  }\n\n  /**\n   * @param {string} s\n   */\n  writeString (s) {\n    encoding.writeVarString(this.restEncoder, s)\n  }\n\n  /**\n   * @param {boolean} isYKey\n   */\n  writeParentInfo (isYKey) {\n    encoding.writeVarUint(this.restEncoder, isYKey ? 1 : 0)\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeTypeRef (info) {\n    encoding.writeVarUint(this.restEncoder, info)\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @param {number} len\n   */\n  writeLen (len) {\n    encoding.writeVarUint(this.restEncoder, len)\n  }\n\n  /**\n   * @param {any} any\n   */\n  writeAny (any) {\n    encoding.writeAny(this.restEncoder, any)\n  }\n\n  /**\n   * @param {Uint8Array} buf\n   */\n  writeBuf (buf) {\n    encoding.writeVarUint8Array(this.restEncoder, buf)\n  }\n\n  /**\n   * @param {any} embed\n   */\n  writeJSON (embed) {\n    encoding.writeVarString(this.restEncoder, JSON.stringify(embed))\n  }\n\n  /**\n   * @param {string} key\n   */\n  writeKey (key) {\n    encoding.writeVarString(this.restEncoder, key)\n  }\n}\n\nexport class DSEncoderV2 {\n  constructor () {\n    this.restEncoder = encoding.createEncoder() // encodes all the rest / non-optimized\n    this.dsCurrVal = 0\n  }\n\n  toUint8Array () {\n    return encoding.toUint8Array(this.restEncoder)\n  }\n\n  resetDsCurVal () {\n    this.dsCurrVal = 0\n  }\n\n  /**\n   * @param {number} clock\n   */\n  writeDsClock (clock) {\n    const diff = clock - this.dsCurrVal\n    this.dsCurrVal = clock\n    encoding.writeVarUint(this.restEncoder, diff)\n  }\n\n  /**\n   * @param {number} len\n   */\n  writeDsLen (len) {\n    if (len === 0) {\n      error.unexpectedCase()\n    }\n    encoding.writeVarUint(this.restEncoder, len - 1)\n    this.dsCurrVal += len\n  }\n}\n\nexport class UpdateEncoderV2 extends DSEncoderV2 {\n  constructor () {\n    super()\n    /**\n     * @type {Map<string,number>}\n     */\n    this.keyMap = new Map()\n    /**\n     * Refers to the next uniqe key-identifier to me used.\n     * See writeKey method for more information.\n     *\n     * @type {number}\n     */\n    this.keyClock = 0\n    this.keyClockEncoder = new encoding.IntDiffOptRleEncoder()\n    this.clientEncoder = new encoding.UintOptRleEncoder()\n    this.leftClockEncoder = new encoding.IntDiffOptRleEncoder()\n    this.rightClockEncoder = new encoding.IntDiffOptRleEncoder()\n    this.infoEncoder = new encoding.RleEncoder(encoding.writeUint8)\n    this.stringEncoder = new encoding.StringEncoder()\n    this.parentInfoEncoder = new encoding.RleEncoder(encoding.writeUint8)\n    this.typeRefEncoder = new encoding.UintOptRleEncoder()\n    this.lenEncoder = new encoding.UintOptRleEncoder()\n  }\n\n  toUint8Array () {\n    const encoder = encoding.createEncoder()\n    encoding.writeVarUint(encoder, 0) // this is a feature flag that we might use in the future\n    encoding.writeVarUint8Array(encoder, this.keyClockEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, this.clientEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, this.leftClockEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, this.rightClockEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, encoding.toUint8Array(this.infoEncoder))\n    encoding.writeVarUint8Array(encoder, this.stringEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, encoding.toUint8Array(this.parentInfoEncoder))\n    encoding.writeVarUint8Array(encoder, this.typeRefEncoder.toUint8Array())\n    encoding.writeVarUint8Array(encoder, this.lenEncoder.toUint8Array())\n    // @note The rest encoder is appended! (note the missing var)\n    encoding.writeUint8Array(encoder, encoding.toUint8Array(this.restEncoder))\n    return encoding.toUint8Array(encoder)\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeLeftID (id) {\n    this.clientEncoder.write(id.client)\n    this.leftClockEncoder.write(id.clock)\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeRightID (id) {\n    this.clientEncoder.write(id.client)\n    this.rightClockEncoder.write(id.clock)\n  }\n\n  /**\n   * @param {number} client\n   */\n  writeClient (client) {\n    this.clientEncoder.write(client)\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeInfo (info) {\n    this.infoEncoder.write(info)\n  }\n\n  /**\n   * @param {string} s\n   */\n  writeString (s) {\n    this.stringEncoder.write(s)\n  }\n\n  /**\n   * @param {boolean} isYKey\n   */\n  writeParentInfo (isYKey) {\n    this.parentInfoEncoder.write(isYKey ? 1 : 0)\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeTypeRef (info) {\n    this.typeRefEncoder.write(info)\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @param {number} len\n   */\n  writeLen (len) {\n    this.lenEncoder.write(len)\n  }\n\n  /**\n   * @param {any} any\n   */\n  writeAny (any) {\n    encoding.writeAny(this.restEncoder, any)\n  }\n\n  /**\n   * @param {Uint8Array} buf\n   */\n  writeBuf (buf) {\n    encoding.writeVarUint8Array(this.restEncoder, buf)\n  }\n\n  /**\n   * This is mainly here for legacy purposes.\n   *\n   * Initial we incoded objects using JSON. Now we use the much faster lib0/any-encoder. This method mainly exists for legacy purposes for the v1 encoder.\n   *\n   * @param {any} embed\n   */\n  writeJSON (embed) {\n    encoding.writeAny(this.restEncoder, embed)\n  }\n\n  /**\n   * Property keys are often reused. For example, in y-prosemirror the key `bold` might\n   * occur very often. For a 3d application, the key `position` might occur very often.\n   *\n   * We cache these keys in a Map and refer to them via a unique number.\n   *\n   * @param {string} key\n   */\n  writeKey (key) {\n    const clock = this.keyMap.get(key)\n    if (clock === undefined) {\n      /**\n       * @todo uncomment to introduce this feature finally\n       *\n       * Background. The ContentFormat object was always encoded using writeKey, but the decoder used to use readString.\n       * Furthermore, I forgot to set the keyclock. So everything was working fine.\n       *\n       * However, this feature here is basically useless as it is not being used (it actually only consumes extra memory).\n       *\n       * I don't know yet how to reintroduce this feature..\n       *\n       * Older clients won't be able to read updates when we reintroduce this feature. So this should probably be done using a flag.\n       *\n       */\n      // this.keyMap.set(key, this.keyClock)\n      this.keyClockEncoder.write(this.keyClock++)\n      this.stringEncoder.write(key)\n    } else {\n      this.keyClockEncoder.write(clock)\n    }\n  }\n}\n", "\n/**\n * @module encoding\n */\n/*\n * We use the first five bits in the info flag for determining the type of the struct.\n *\n * 0: GC\n * 1: Item with Deleted content\n * 2: Item with JSON content\n * 3: Item with Binary content\n * 4: Item with String content\n * 5: Item with Embed content (for richtext content)\n * 6: Item with Format content (a formatting marker for richtext content)\n * 7: Item with Type\n */\n\nimport {\n  findIndexSS,\n  getState,\n  createID,\n  getStateVector,\n  readAndApplyDeleteSet,\n  writeDeleteSet,\n  createDeleteSetFromStructStore,\n  transact,\n  readItemContent,\n  UpdateDecoderV1,\n  UpdateDecoderV2,\n  UpdateEncoderV1,\n  UpdateEncoderV2,\n  DSEncoderV2,\n  DSDecoderV1,\n  DSEncoderV1,\n  mergeUpdates,\n  mergeUpdatesV2,\n  Skip,\n  diffUpdateV2,\n  convertUpdateFormatV2ToV1,\n  DSDecoderV2, Doc, Transaction, GC, Item, StructStore // eslint-disable-line\n} from '../internals.js'\n\nimport * as encoding from 'lib0/encoding'\nimport * as decoding from 'lib0/decoding'\nimport * as binary from 'lib0/binary'\nimport * as map from 'lib0/map'\nimport * as math from 'lib0/math'\nimport * as array from 'lib0/array'\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Array<GC|Item>} structs All structs by `client`\n * @param {number} client\n * @param {number} clock write structs starting with `ID(client,clock)`\n *\n * @function\n */\nconst writeStructs = (encoder, structs, client, clock) => {\n  // write first id\n  clock = math.max(clock, structs[0].id.clock) // make sure the first id exists\n  const startNewStructs = findIndexSS(structs, clock)\n  // write # encoded structs\n  encoding.writeVarUint(encoder.restEncoder, structs.length - startNewStructs)\n  encoder.writeClient(client)\n  encoding.writeVarUint(encoder.restEncoder, clock)\n  const firstStruct = structs[startNewStructs]\n  // write first struct with an offset\n  firstStruct.write(encoder, clock - firstStruct.id.clock)\n  for (let i = startNewStructs + 1; i < structs.length; i++) {\n    structs[i].write(encoder, 0)\n  }\n}\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {StructStore} store\n * @param {Map<number,number>} _sm\n *\n * @private\n * @function\n */\nexport const writeClientsStructs = (encoder, store, _sm) => {\n  // we filter all valid _sm entries into sm\n  const sm = new Map()\n  _sm.forEach((clock, client) => {\n    // only write if new structs are available\n    if (getState(store, client) > clock) {\n      sm.set(client, clock)\n    }\n  })\n  getStateVector(store).forEach((_clock, client) => {\n    if (!_sm.has(client)) {\n      sm.set(client, 0)\n    }\n  })\n  // write # states that were updated\n  encoding.writeVarUint(encoder.restEncoder, sm.size)\n  // Write items with higher client ids first\n  // This heavily improves the conflict algorithm.\n  array.from(sm.entries()).sort((a, b) => b[0] - a[0]).forEach(([client, clock]) => {\n    writeStructs(encoder, /** @type {Array<GC|Item>} */ (store.clients.get(client)), client, clock)\n  })\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder The decoder object to read data from.\n * @param {Doc} doc\n * @return {Map<number, { i: number, refs: Array<Item | GC> }>}\n *\n * @private\n * @function\n */\nexport const readClientsStructRefs = (decoder, doc) => {\n  /**\n   * @type {Map<number, { i: number, refs: Array<Item | GC> }>}\n   */\n  const clientRefs = map.create()\n  const numOfStateUpdates = decoding.readVarUint(decoder.restDecoder)\n  for (let i = 0; i < numOfStateUpdates; i++) {\n    const numberOfStructs = decoding.readVarUint(decoder.restDecoder)\n    /**\n     * @type {Array<GC|Item>}\n     */\n    const refs = new Array(numberOfStructs)\n    const client = decoder.readClient()\n    let clock = decoding.readVarUint(decoder.restDecoder)\n    // const start = performance.now()\n    clientRefs.set(client, { i: 0, refs })\n    for (let i = 0; i < numberOfStructs; i++) {\n      const info = decoder.readInfo()\n      switch (binary.BITS5 & info) {\n        case 0: { // GC\n          const len = decoder.readLen()\n          refs[i] = new GC(createID(client, clock), len)\n          clock += len\n          break\n        }\n        case 10: { // Skip Struct (nothing to apply)\n          // @todo we could reduce the amount of checks by adding Skip struct to clientRefs so we know that something is missing.\n          const len = decoding.readVarUint(decoder.restDecoder)\n          refs[i] = new Skip(createID(client, clock), len)\n          clock += len\n          break\n        }\n        default: { // Item with content\n          /**\n           * The optimized implementation doesn't use any variables because inlining variables is faster.\n           * Below a non-optimized version is shown that implements the basic algorithm with\n           * a few comments\n           */\n          const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0\n          // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n          // and we read the next string as parentYKey.\n          // It indicates how we store/retrieve parent from `y.share`\n          // @type {string|null}\n          const struct = new Item(\n            createID(client, clock),\n            null, // leftd\n            (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null, // origin\n            null, // right\n            (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null, // right origin\n            cantCopyParentInfo ? (decoder.readParentInfo() ? doc.get(decoder.readString()) : decoder.readLeftID()) : null, // parent\n            cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n            readItemContent(decoder, info) // item content\n          )\n          /* A non-optimized implementation of the above algorithm:\n\n          // The item that was originally to the left of this item.\n          const origin = (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null\n          // The item that was originally to the right of this item.\n          const rightOrigin = (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null\n          const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0\n          const hasParentYKey = cantCopyParentInfo ? decoder.readParentInfo() : false\n          // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n          // and we read the next string as parentYKey.\n          // It indicates how we store/retrieve parent from `y.share`\n          // @type {string|null}\n          const parentYKey = cantCopyParentInfo && hasParentYKey ? decoder.readString() : null\n\n          const struct = new Item(\n            createID(client, clock),\n            null, // leftd\n            origin, // origin\n            null, // right\n            rightOrigin, // right origin\n            cantCopyParentInfo && !hasParentYKey ? decoder.readLeftID() : (parentYKey !== null ? doc.get(parentYKey) : null), // parent\n            cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n            readItemContent(decoder, info) // item content\n          )\n          */\n          refs[i] = struct\n          clock += struct.length\n        }\n      }\n    }\n    // console.log('time to read: ', performance.now() - start) // @todo remove\n  }\n  return clientRefs\n}\n\n/**\n * Resume computing structs generated by struct readers.\n *\n * While there is something to do, we integrate structs in this order\n * 1. top element on stack, if stack is not empty\n * 2. next element from current struct reader (if empty, use next struct reader)\n *\n * If struct causally depends on another struct (ref.missing), we put next reader of\n * `ref.id.client` on top of stack.\n *\n * At some point we find a struct that has no causal dependencies,\n * then we start emptying the stack.\n *\n * It is not possible to have circles: i.e. struct1 (from client1) depends on struct2 (from client2)\n * depends on struct3 (from client1). Therefore the max stack size is eqaul to `structReaders.length`.\n *\n * This method is implemented in a way so that we can resume computation if this update\n * causally depends on another update.\n *\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @param {Map<number, { i: number, refs: (GC | Item)[] }>} clientsStructRefs\n * @return { null | { update: Uint8Array, missing: Map<number,number> } }\n *\n * @private\n * @function\n */\nconst integrateStructs = (transaction, store, clientsStructRefs) => {\n  /**\n   * @type {Array<Item | GC>}\n   */\n  const stack = []\n  // sort them so that we take the higher id first, in case of conflicts the lower id will probably not conflict with the id from the higher user.\n  let clientsStructRefsIds = array.from(clientsStructRefs.keys()).sort((a, b) => a - b)\n  if (clientsStructRefsIds.length === 0) {\n    return null\n  }\n  const getNextStructTarget = () => {\n    if (clientsStructRefsIds.length === 0) {\n      return null\n    }\n    let nextStructsTarget = /** @type {{i:number,refs:Array<GC|Item>}} */ (clientsStructRefs.get(clientsStructRefsIds[clientsStructRefsIds.length - 1]))\n    while (nextStructsTarget.refs.length === nextStructsTarget.i) {\n      clientsStructRefsIds.pop()\n      if (clientsStructRefsIds.length > 0) {\n        nextStructsTarget = /** @type {{i:number,refs:Array<GC|Item>}} */ (clientsStructRefs.get(clientsStructRefsIds[clientsStructRefsIds.length - 1]))\n      } else {\n        return null\n      }\n    }\n    return nextStructsTarget\n  }\n  let curStructsTarget = getNextStructTarget()\n  if (curStructsTarget === null && stack.length === 0) {\n    return null\n  }\n\n  /**\n   * @type {StructStore}\n   */\n  const restStructs = new StructStore()\n  const missingSV = new Map()\n  /**\n   * @param {number} client\n   * @param {number} clock\n   */\n  const updateMissingSv = (client, clock) => {\n    const mclock = missingSV.get(client)\n    if (mclock == null || mclock > clock) {\n      missingSV.set(client, clock)\n    }\n  }\n  /**\n   * @type {GC|Item}\n   */\n  let stackHead = /** @type {any} */ (curStructsTarget).refs[/** @type {any} */ (curStructsTarget).i++]\n  // caching the state because it is used very often\n  const state = new Map()\n\n  const addStackToRestSS = () => {\n    for (const item of stack) {\n      const client = item.id.client\n      const unapplicableItems = clientsStructRefs.get(client)\n      if (unapplicableItems) {\n        // decrement because we weren't able to apply previous operation\n        unapplicableItems.i--\n        restStructs.clients.set(client, unapplicableItems.refs.slice(unapplicableItems.i))\n        clientsStructRefs.delete(client)\n        unapplicableItems.i = 0\n        unapplicableItems.refs = []\n      } else {\n        // item was the last item on clientsStructRefs and the field was already cleared. Add item to restStructs and continue\n        restStructs.clients.set(client, [item])\n      }\n      // remove client from clientsStructRefsIds to prevent users from applying the same update again\n      clientsStructRefsIds = clientsStructRefsIds.filter(c => c !== client)\n    }\n    stack.length = 0\n  }\n\n  // iterate over all struct readers until we are done\n  while (true) {\n    if (stackHead.constructor !== Skip) {\n      const localClock = map.setIfUndefined(state, stackHead.id.client, () => getState(store, stackHead.id.client))\n      const offset = localClock - stackHead.id.clock\n      if (offset < 0) {\n        // update from the same client is missing\n        stack.push(stackHead)\n        updateMissingSv(stackHead.id.client, stackHead.id.clock - 1)\n        // hid a dead wall, add all items from stack to restSS\n        addStackToRestSS()\n      } else {\n        const missing = stackHead.getMissing(transaction, store)\n        if (missing !== null) {\n          stack.push(stackHead)\n          // get the struct reader that has the missing struct\n          /**\n           * @type {{ refs: Array<GC|Item>, i: number }}\n           */\n          const structRefs = clientsStructRefs.get(/** @type {number} */ (missing)) || { refs: [], i: 0 }\n          if (structRefs.refs.length === structRefs.i) {\n            // This update message causally depends on another update message that doesn't exist yet\n            updateMissingSv(/** @type {number} */ (missing), getState(store, missing))\n            addStackToRestSS()\n          } else {\n            stackHead = structRefs.refs[structRefs.i++]\n            continue\n          }\n        } else if (offset === 0 || offset < stackHead.length) {\n          // all fine, apply the stackhead\n          stackHead.integrate(transaction, offset)\n          state.set(stackHead.id.client, stackHead.id.clock + stackHead.length)\n        }\n      }\n    }\n    // iterate to next stackHead\n    if (stack.length > 0) {\n      stackHead = /** @type {GC|Item} */ (stack.pop())\n    } else if (curStructsTarget !== null && curStructsTarget.i < curStructsTarget.refs.length) {\n      stackHead = /** @type {GC|Item} */ (curStructsTarget.refs[curStructsTarget.i++])\n    } else {\n      curStructsTarget = getNextStructTarget()\n      if (curStructsTarget === null) {\n        // we are done!\n        break\n      } else {\n        stackHead = /** @type {GC|Item} */ (curStructsTarget.refs[curStructsTarget.i++])\n      }\n    }\n  }\n  if (restStructs.clients.size > 0) {\n    const encoder = new UpdateEncoderV2()\n    writeClientsStructs(encoder, restStructs, new Map())\n    // write empty deleteset\n    // writeDeleteSet(encoder, new DeleteSet())\n    encoding.writeVarUint(encoder.restEncoder, 0) // => no need for an extra function call, just write 0 deletes\n    return { missing: missingSV, update: encoder.toUint8Array() }\n  }\n  return null\n}\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Transaction} transaction\n *\n * @private\n * @function\n */\nexport const writeStructsFromTransaction = (encoder, transaction) => writeClientsStructs(encoder, transaction.doc.store, transaction.beforeState)\n\n/**\n * Read and apply a document update.\n *\n * This function has the same effect as `applyUpdate` but accepts an decoder.\n *\n * @param {decoding.Decoder} decoder\n * @param {Doc} ydoc\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n * @param {UpdateDecoderV1 | UpdateDecoderV2} [structDecoder]\n *\n * @function\n */\nexport const readUpdateV2 = (decoder, ydoc, transactionOrigin, structDecoder = new UpdateDecoderV2(decoder)) =>\n  transact(ydoc, transaction => {\n    // force that transaction.local is set to non-local\n    transaction.local = false\n    let retry = false\n    const doc = transaction.doc\n    const store = doc.store\n    // let start = performance.now()\n    const ss = readClientsStructRefs(structDecoder, doc)\n    // console.log('time to read structs: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    // console.log('time to merge: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    const restStructs = integrateStructs(transaction, store, ss)\n    const pending = store.pendingStructs\n    if (pending) {\n      // check if we can apply something\n      for (const [client, clock] of pending.missing) {\n        if (clock < getState(store, client)) {\n          retry = true\n          break\n        }\n      }\n      if (restStructs) {\n        // merge restStructs into store.pending\n        for (const [client, clock] of restStructs.missing) {\n          const mclock = pending.missing.get(client)\n          if (mclock == null || mclock > clock) {\n            pending.missing.set(client, clock)\n          }\n        }\n        pending.update = mergeUpdatesV2([pending.update, restStructs.update])\n      }\n    } else {\n      store.pendingStructs = restStructs\n    }\n    // console.log('time to integrate: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    const dsRest = readAndApplyDeleteSet(structDecoder, transaction, store)\n    if (store.pendingDs) {\n      // @todo we could make a lower-bound state-vector check as we do above\n      const pendingDSUpdate = new UpdateDecoderV2(decoding.createDecoder(store.pendingDs))\n      decoding.readVarUint(pendingDSUpdate.restDecoder) // read 0 structs, because we only encode deletes in pendingdsupdate\n      const dsRest2 = readAndApplyDeleteSet(pendingDSUpdate, transaction, store)\n      if (dsRest && dsRest2) {\n        // case 1: ds1 != null && ds2 != null\n        store.pendingDs = mergeUpdatesV2([dsRest, dsRest2])\n      } else {\n        // case 2: ds1 != null\n        // case 3: ds2 != null\n        // case 4: ds1 == null && ds2 == null\n        store.pendingDs = dsRest || dsRest2\n      }\n    } else {\n      // Either dsRest == null && pendingDs == null OR dsRest != null\n      store.pendingDs = dsRest\n    }\n    // console.log('time to cleanup: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n\n    // console.log('time to resume delete readers: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    if (retry) {\n      const update = /** @type {{update: Uint8Array}} */ (store.pendingStructs).update\n      store.pendingStructs = null\n      applyUpdateV2(transaction.doc, update)\n    }\n  }, transactionOrigin, false)\n\n/**\n * Read and apply a document update.\n *\n * This function has the same effect as `applyUpdate` but accepts an decoder.\n *\n * @param {decoding.Decoder} decoder\n * @param {Doc} ydoc\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n *\n * @function\n */\nexport const readUpdate = (decoder, ydoc, transactionOrigin) => readUpdateV2(decoder, ydoc, transactionOrigin, new UpdateDecoderV1(decoder))\n\n/**\n * Apply a document update created by, for example, `y.on('update', update => ..)` or `update = encodeStateAsUpdate()`.\n *\n * This function has the same effect as `readUpdate` but accepts an Uint8Array instead of a Decoder.\n *\n * @param {Doc} ydoc\n * @param {Uint8Array} update\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n *\n * @function\n */\nexport const applyUpdateV2 = (ydoc, update, transactionOrigin, YDecoder = UpdateDecoderV2) => {\n  const decoder = decoding.createDecoder(update)\n  readUpdateV2(decoder, ydoc, transactionOrigin, new YDecoder(decoder))\n}\n\n/**\n * Apply a document update created by, for example, `y.on('update', update => ..)` or `update = encodeStateAsUpdate()`.\n *\n * This function has the same effect as `readUpdate` but accepts an Uint8Array instead of a Decoder.\n *\n * @param {Doc} ydoc\n * @param {Uint8Array} update\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n *\n * @function\n */\nexport const applyUpdate = (ydoc, update, transactionOrigin) => applyUpdateV2(ydoc, update, transactionOrigin, UpdateDecoderV1)\n\n/**\n * Write all the document as a single update message. If you specify the state of the remote client (`targetStateVector`) it will\n * only write the operations that are missing.\n *\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Doc} doc\n * @param {Map<number,number>} [targetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n *\n * @function\n */\nexport const writeStateAsUpdate = (encoder, doc, targetStateVector = new Map()) => {\n  writeClientsStructs(encoder, doc.store, targetStateVector)\n  writeDeleteSet(encoder, createDeleteSetFromStructStore(doc.store))\n}\n\n/**\n * Write all the document as a single update message that can be applied on the remote document. If you specify the state of the remote client (`targetState`) it will\n * only write the operations that are missing.\n *\n * Use `writeStateAsUpdate` instead if you are working with lib0/encoding.js#Encoder\n *\n * @param {Doc} doc\n * @param {Uint8Array} [encodedTargetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n * @param {UpdateEncoderV1 | UpdateEncoderV2} [encoder]\n * @return {Uint8Array}\n *\n * @function\n */\nexport const encodeStateAsUpdateV2 = (doc, encodedTargetStateVector = new Uint8Array([0]), encoder = new UpdateEncoderV2()) => {\n  const targetStateVector = decodeStateVector(encodedTargetStateVector)\n  writeStateAsUpdate(encoder, doc, targetStateVector)\n  const updates = [encoder.toUint8Array()]\n  // also add the pending updates (if there are any)\n  if (doc.store.pendingDs) {\n    updates.push(doc.store.pendingDs)\n  }\n  if (doc.store.pendingStructs) {\n    updates.push(diffUpdateV2(doc.store.pendingStructs.update, encodedTargetStateVector))\n  }\n  if (updates.length > 1) {\n    if (encoder.constructor === UpdateEncoderV1) {\n      return mergeUpdates(updates.map((update, i) => i === 0 ? update : convertUpdateFormatV2ToV1(update)))\n    } else if (encoder.constructor === UpdateEncoderV2) {\n      return mergeUpdatesV2(updates)\n    }\n  }\n  return updates[0]\n}\n\n/**\n * Write all the document as a single update message that can be applied on the remote document. If you specify the state of the remote client (`targetState`) it will\n * only write the operations that are missing.\n *\n * Use `writeStateAsUpdate` instead if you are working with lib0/encoding.js#Encoder\n *\n * @param {Doc} doc\n * @param {Uint8Array} [encodedTargetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n * @return {Uint8Array}\n *\n * @function\n */\nexport const encodeStateAsUpdate = (doc, encodedTargetStateVector) => encodeStateAsUpdateV2(doc, encodedTargetStateVector, new UpdateEncoderV1())\n\n/**\n * Read state vector from Decoder and return as Map\n *\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\nexport const readStateVector = decoder => {\n  const ss = new Map()\n  const ssLength = decoding.readVarUint(decoder.restDecoder)\n  for (let i = 0; i < ssLength; i++) {\n    const client = decoding.readVarUint(decoder.restDecoder)\n    const clock = decoding.readVarUint(decoder.restDecoder)\n    ss.set(client, clock)\n  }\n  return ss\n}\n\n/**\n * Read decodedState and return State as Map.\n *\n * @param {Uint8Array} decodedState\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\n// export const decodeStateVectorV2 = decodedState => readStateVector(new DSDecoderV2(decoding.createDecoder(decodedState)))\n\n/**\n * Read decodedState and return State as Map.\n *\n * @param {Uint8Array} decodedState\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\nexport const decodeStateVector = decodedState => readStateVector(new DSDecoderV1(decoding.createDecoder(decodedState)))\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {Map<number,number>} sv\n * @function\n */\nexport const writeStateVector = (encoder, sv) => {\n  encoding.writeVarUint(encoder.restEncoder, sv.size)\n  array.from(sv.entries()).sort((a, b) => b[0] - a[0]).forEach(([client, clock]) => {\n    encoding.writeVarUint(encoder.restEncoder, client) // @todo use a special client decoder that is based on mapping\n    encoding.writeVarUint(encoder.restEncoder, clock)\n  })\n  return encoder\n}\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {Doc} doc\n *\n * @function\n */\nexport const writeDocumentStateVector = (encoder, doc) => writeStateVector(encoder, getStateVector(doc.store))\n\n/**\n * Encode State as Uint8Array.\n *\n * @param {Doc|Map<number,number>} doc\n * @param {DSEncoderV1 | DSEncoderV2} [encoder]\n * @return {Uint8Array}\n *\n * @function\n */\nexport const encodeStateVectorV2 = (doc, encoder = new DSEncoderV2()) => {\n  if (doc instanceof Map) {\n    writeStateVector(encoder, doc)\n  } else {\n    writeDocumentStateVector(encoder, doc)\n  }\n  return encoder.toUint8Array()\n}\n\n/**\n * Encode State as Uint8Array.\n *\n * @param {Doc|Map<number,number>} doc\n * @return {Uint8Array}\n *\n * @function\n */\nexport const encodeStateVector = doc => encodeStateVectorV2(doc, new DSEncoderV1())\n", "import * as f from 'lib0/function'\n\n/**\n * General event handler implementation.\n *\n * @template ARG0, ARG1\n *\n * @private\n */\nexport class EventHandler {\n  constructor () {\n    /**\n     * @type {Array<function(ARG0, ARG1):void>}\n     */\n    this.l = []\n  }\n}\n\n/**\n * @template ARG0,ARG1\n * @returns {EventHandler<ARG0,ARG1>}\n *\n * @private\n * @function\n */\nexport const createEventHandler = () => new EventHandler()\n\n/**\n * Adds an event listener that is called when\n * {@link EventHandler#callEventListeners} is called.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {function(ARG0,ARG1):void} f The event handler.\n *\n * @private\n * @function\n */\nexport const addEventHandlerListener = (eventHandler, f) =>\n  eventHandler.l.push(f)\n\n/**\n * Removes an event listener.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {function(ARG0,ARG1):void} f The event handler that was added with\n *                     {@link EventHandler#addEventListener}\n *\n * @private\n * @function\n */\nexport const removeEventHandlerListener = (eventHandler, f) => {\n  const l = eventHandler.l\n  const len = l.length\n  eventHandler.l = l.filter(g => f !== g)\n  if (len === eventHandler.l.length) {\n    console.error('[yjs] Tried to remove event handler that doesn\\'t exist.')\n  }\n}\n\n/**\n * Removes all event listeners.\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n *\n * @private\n * @function\n */\nexport const removeAllEventHandlerListeners = eventHandler => {\n  eventHandler.l.length = 0\n}\n\n/**\n * Call all event listeners that were added via\n * {@link EventHandler#addEventListener}.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {ARG0} arg0\n * @param {ARG1} arg1\n *\n * @private\n * @function\n */\nexport const callEventHandlerListeners = (eventHandler, arg0, arg1) =>\n  f.callAll(eventHandler.l, [arg0, arg1])\n", "\nimport { AbstractType } from '../internals.js' // eslint-disable-line\n\nimport * as decoding from 'lib0/decoding'\nimport * as encoding from 'lib0/encoding'\nimport * as error from 'lib0/error'\n\nexport class ID {\n  /**\n   * @param {number} client client id\n   * @param {number} clock unique per client id, continuous number\n   */\n  constructor (client, clock) {\n    /**\n     * Client id\n     * @type {number}\n     */\n    this.client = client\n    /**\n     * unique per client id, continuous number\n     * @type {number}\n     */\n    this.clock = clock\n  }\n}\n\n/**\n * @param {ID | null} a\n * @param {ID | null} b\n * @return {boolean}\n *\n * @function\n */\nexport const compareIDs = (a, b) => a === b || (a !== null && b !== null && a.client === b.client && a.clock === b.clock)\n\n/**\n * @param {number} client\n * @param {number} clock\n *\n * @private\n * @function\n */\nexport const createID = (client, clock) => new ID(client, clock)\n\n/**\n * @param {encoding.Encoder} encoder\n * @param {ID} id\n *\n * @private\n * @function\n */\nexport const writeID = (encoder, id) => {\n  encoding.writeVarUint(encoder, id.client)\n  encoding.writeVarUint(encoder, id.clock)\n}\n\n/**\n * Read ID.\n * * If first varUint read is 0xFFFFFF a RootID is returned.\n * * Otherwise an ID is returned\n *\n * @param {decoding.Decoder} decoder\n * @return {ID}\n *\n * @private\n * @function\n */\nexport const readID = decoder =>\n  createID(decoding.readVarUint(decoder), decoding.readVarUint(decoder))\n\n/**\n * The top types are mapped from y.share.get(keyname) => type.\n * `type` does not store any information about the `keyname`.\n * This function finds the correct `keyname` for `type` and throws otherwise.\n *\n * @param {AbstractType<any>} type\n * @return {string}\n *\n * @private\n * @function\n */\nexport const findRootTypeKey = type => {\n  // @ts-ignore _y must be defined, otherwise unexpected case\n  for (const [key, value] of type.doc.share.entries()) {\n    if (value === type) {\n      return key\n    }\n  }\n  throw error.unexpectedCase()\n}\n", "\nimport { AbstractType, Item } from '../internals.js' // eslint-disable-line\n\n/**\n * Check if `parent` is a parent of `child`.\n *\n * @param {AbstractType<any>} parent\n * @param {Item|null} child\n * @return {Boolean} Whether `parent` is a parent of `child`.\n *\n * @private\n * @function\n */\nexport const isParentOf = (parent, child) => {\n  while (child !== null) {\n    if (child.parent === parent) {\n      return true\n    }\n    child = /** @type {AbstractType<any>} */ (child.parent)._item\n  }\n  return false\n}\n", "\nimport {\n  AbstractType // eslint-disable-line\n} from '../internals.js'\n\n/**\n * Convenient helper to log type information.\n *\n * Do not use in productive systems as the output can be immense!\n *\n * @param {AbstractType<any>} type\n */\nexport const logType = type => {\n  const res = []\n  let n = type._start\n  while (n) {\n    res.push(n)\n    n = n.right\n  }\n  console.log('Children: ', res)\n  console.log('Children content: ', res.filter(m => !m.deleted).map(m => m.content))\n}\n", "\nimport {\n  YArray,\n  YMap,\n  readDeleteSet,\n  writeDeleteSet,\n  createDeleteSet,\n  DSEncoderV1, DSDecoderV1, ID, DeleteSet, YArrayEvent, Transaction, Doc // eslint-disable-line\n} from '../internals.js'\n\nimport * as decoding from 'lib0/decoding'\n\nimport { mergeDeleteSets, isDeleted } from './DeleteSet.js'\n\nexport class PermanentUserData {\n  /**\n   * @param {Doc} doc\n   * @param {YMap<any>} [storeType]\n   */\n  constructor (doc, storeType = doc.getMap('users')) {\n    /**\n     * @type {Map<string,DeleteSet>}\n     */\n    const dss = new Map()\n    this.yusers = storeType\n    this.doc = doc\n    /**\n     * Maps from clientid to userDescription\n     *\n     * @type {Map<number,string>}\n     */\n    this.clients = new Map()\n    this.dss = dss\n    /**\n     * @param {YMap<any>} user\n     * @param {string} userDescription\n     */\n    const initUser = (user, userDescription) => {\n      /**\n       * @type {YArray<Uint8Array>}\n       */\n      const ds = user.get('ds')\n      const ids = user.get('ids')\n      const addClientId = /** @param {number} clientid */ clientid => this.clients.set(clientid, userDescription)\n      ds.observe(/** @param {YArrayEvent<any>} event */ event => {\n        event.changes.added.forEach(item => {\n          item.content.getContent().forEach(encodedDs => {\n            if (encodedDs instanceof Uint8Array) {\n              this.dss.set(userDescription, mergeDeleteSets([this.dss.get(userDescription) || createDeleteSet(), readDeleteSet(new DSDecoderV1(decoding.createDecoder(encodedDs)))]))\n            }\n          })\n        })\n      })\n      this.dss.set(userDescription, mergeDeleteSets(ds.map(encodedDs => readDeleteSet(new DSDecoderV1(decoding.createDecoder(encodedDs))))))\n      ids.observe(/** @param {YArrayEvent<any>} event */ event =>\n        event.changes.added.forEach(item => item.content.getContent().forEach(addClientId))\n      )\n      ids.forEach(addClientId)\n    }\n    // observe users\n    storeType.observe(event => {\n      event.keysChanged.forEach(userDescription =>\n        initUser(storeType.get(userDescription), userDescription)\n      )\n    })\n    // add intial data\n    storeType.forEach(initUser)\n  }\n\n  /**\n   * @param {Doc} doc\n   * @param {number} clientid\n   * @param {string} userDescription\n   * @param {Object} conf\n   * @param {function(Transaction, DeleteSet):boolean} [conf.filter]\n   */\n  setUserMapping (doc, clientid, userDescription, { filter = () => true } = {}) {\n    const users = this.yusers\n    let user = users.get(userDescription)\n    if (!user) {\n      user = new YMap()\n      user.set('ids', new YArray())\n      user.set('ds', new YArray())\n      users.set(userDescription, user)\n    }\n    user.get('ids').push([clientid])\n    users.observe(_event => {\n      setTimeout(() => {\n        const userOverwrite = users.get(userDescription)\n        if (userOverwrite !== user) {\n          // user was overwritten, port all data over to the next user object\n          // @todo Experiment with Y.Sets here\n          user = userOverwrite\n          // @todo iterate over old type\n          this.clients.forEach((_userDescription, clientid) => {\n            if (userDescription === _userDescription) {\n              user.get('ids').push([clientid])\n            }\n          })\n          const encoder = new DSEncoderV1()\n          const ds = this.dss.get(userDescription)\n          if (ds) {\n            writeDeleteSet(encoder, ds)\n            user.get('ds').push([encoder.toUint8Array()])\n          }\n        }\n      }, 0)\n    })\n    doc.on('afterTransaction', /** @param {Transaction} transaction */ transaction => {\n      setTimeout(() => {\n        const yds = user.get('ds')\n        const ds = transaction.deleteSet\n        if (transaction.local && ds.clients.size > 0 && filter(transaction, ds)) {\n          const encoder = new DSEncoderV1()\n          writeDeleteSet(encoder, ds)\n          yds.push([encoder.toUint8Array()])\n        }\n      })\n    })\n  }\n\n  /**\n   * @param {number} clientid\n   * @return {any}\n   */\n  getUserByClientId (clientid) {\n    return this.clients.get(clientid) || null\n  }\n\n  /**\n   * @param {ID} id\n   * @return {string | null}\n   */\n  getUserByDeletedId (id) {\n    for (const [userDescription, ds] of this.dss.entries()) {\n      if (isDeleted(ds, id)) {\n        return userDescription\n      }\n    }\n    return null\n  }\n}\n", "\nimport {\n  writeID,\n  readID,\n  compareIDs,\n  getState,\n  findRootTypeKey,\n  Item,\n  createID,\n  ContentType,\n  followRedone,\n  ID, Doc, AbstractType // eslint-disable-line\n} from '../internals.js'\n\nimport * as encoding from 'lib0/encoding'\nimport * as decoding from 'lib0/decoding'\nimport * as error from 'lib0/error'\n\n/**\n * A relative position is based on the Yjs model and is not affected by document changes.\n * E.g. If you place a relative position before a certain character, it will always point to this character.\n * If you place a relative position at the end of a type, it will always point to the end of the type.\n *\n * A numeric position is often unsuited for user selections, because it does not change when content is inserted\n * before or after.\n *\n * ```Insert(0, 'x')('a|bc') = 'xa|bc'``` Where | is the relative position.\n *\n * One of the properties must be defined.\n *\n * @example\n *   // Current cursor position is at position 10\n *   const relativePosition = createRelativePositionFromIndex(yText, 10)\n *   // modify yText\n *   yText.insert(0, 'abc')\n *   yText.delete(3, 10)\n *   // Compute the cursor position\n *   const absolutePosition = createAbsolutePositionFromRelativePosition(y, relativePosition)\n *   absolutePosition.type === yText // => true\n *   console.log('cursor location is ' + absolutePosition.index) // => cursor location is 3\n *\n */\nexport class RelativePosition {\n  /**\n   * @param {ID|null} type\n   * @param {string|null} tname\n   * @param {ID|null} item\n   * @param {number} assoc\n   */\n  constructor (type, tname, item, assoc = 0) {\n    /**\n     * @type {ID|null}\n     */\n    this.type = type\n    /**\n     * @type {string|null}\n     */\n    this.tname = tname\n    /**\n     * @type {ID | null}\n     */\n    this.item = item\n    /**\n     * A relative position is associated to a specific character. By default\n     * assoc >= 0, the relative position is associated to the character\n     * after the meant position.\n     * I.e. position 1 in 'ab' is associated to character 'b'.\n     *\n     * If assoc < 0, then the relative position is associated to the caharacter\n     * before the meant position.\n     *\n     * @type {number}\n     */\n    this.assoc = assoc\n  }\n}\n\n/**\n * @param {RelativePosition} rpos\n * @return {any}\n */\nexport const relativePositionToJSON = rpos => {\n  const json = {}\n  if (rpos.type) {\n    json.type = rpos.type\n  }\n  if (rpos.tname) {\n    json.tname = rpos.tname\n  }\n  if (rpos.item) {\n    json.item = rpos.item\n  }\n  if (rpos.assoc != null) {\n    json.assoc = rpos.assoc\n  }\n  return json\n}\n\n/**\n * @param {any} json\n * @return {RelativePosition}\n *\n * @function\n */\nexport const createRelativePositionFromJSON = json => new RelativePosition(json.type == null ? null : createID(json.type.client, json.type.clock), json.tname || null, json.item == null ? null : createID(json.item.client, json.item.clock), json.assoc == null ? 0 : json.assoc)\n\nexport class AbsolutePosition {\n  /**\n   * @param {AbstractType<any>} type\n   * @param {number} index\n   * @param {number} [assoc]\n   */\n  constructor (type, index, assoc = 0) {\n    /**\n     * @type {AbstractType<any>}\n     */\n    this.type = type\n    /**\n     * @type {number}\n     */\n    this.index = index\n    this.assoc = assoc\n  }\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} index\n * @param {number} [assoc]\n *\n * @function\n */\nexport const createAbsolutePosition = (type, index, assoc = 0) => new AbsolutePosition(type, index, assoc)\n\n/**\n * @param {AbstractType<any>} type\n * @param {ID|null} item\n * @param {number} [assoc]\n *\n * @function\n */\nexport const createRelativePosition = (type, item, assoc) => {\n  let typeid = null\n  let tname = null\n  if (type._item === null) {\n    tname = findRootTypeKey(type)\n  } else {\n    typeid = createID(type._item.id.client, type._item.id.clock)\n  }\n  return new RelativePosition(typeid, tname, item, assoc)\n}\n\n/**\n * Create a relativePosition based on a absolute position.\n *\n * @param {AbstractType<any>} type The base type (e.g. YText or YArray).\n * @param {number} index The absolute position.\n * @param {number} [assoc]\n * @return {RelativePosition}\n *\n * @function\n */\nexport const createRelativePositionFromTypeIndex = (type, index, assoc = 0) => {\n  let t = type._start\n  if (assoc < 0) {\n    // associated to the left character or the beginning of a type, increment index if possible.\n    if (index === 0) {\n      return createRelativePosition(type, null, assoc)\n    }\n    index--\n  }\n  while (t !== null) {\n    if (!t.deleted && t.countable) {\n      if (t.length > index) {\n        // case 1: found position somewhere in the linked list\n        return createRelativePosition(type, createID(t.id.client, t.id.clock + index), assoc)\n      }\n      index -= t.length\n    }\n    if (t.right === null && assoc < 0) {\n      // left-associated position, return last available id\n      return createRelativePosition(type, t.lastId, assoc)\n    }\n    t = t.right\n  }\n  return createRelativePosition(type, null, assoc)\n}\n\n/**\n * @param {encoding.Encoder} encoder\n * @param {RelativePosition} rpos\n *\n * @function\n */\nexport const writeRelativePosition = (encoder, rpos) => {\n  const { type, tname, item, assoc } = rpos\n  if (item !== null) {\n    encoding.writeVarUint(encoder, 0)\n    writeID(encoder, item)\n  } else if (tname !== null) {\n    // case 2: found position at the end of the list and type is stored in y.share\n    encoding.writeUint8(encoder, 1)\n    encoding.writeVarString(encoder, tname)\n  } else if (type !== null) {\n    // case 3: found position at the end of the list and type is attached to an item\n    encoding.writeUint8(encoder, 2)\n    writeID(encoder, type)\n  } else {\n    throw error.unexpectedCase()\n  }\n  encoding.writeVarInt(encoder, assoc)\n  return encoder\n}\n\n/**\n * @param {RelativePosition} rpos\n * @return {Uint8Array}\n */\nexport const encodeRelativePosition = rpos => {\n  const encoder = encoding.createEncoder()\n  writeRelativePosition(encoder, rpos)\n  return encoding.toUint8Array(encoder)\n}\n\n/**\n * @param {decoding.Decoder} decoder\n * @return {RelativePosition}\n *\n * @function\n */\nexport const readRelativePosition = decoder => {\n  let type = null\n  let tname = null\n  let itemID = null\n  switch (decoding.readVarUint(decoder)) {\n    case 0:\n      // case 1: found position somewhere in the linked list\n      itemID = readID(decoder)\n      break\n    case 1:\n      // case 2: found position at the end of the list and type is stored in y.share\n      tname = decoding.readVarString(decoder)\n      break\n    case 2: {\n      // case 3: found position at the end of the list and type is attached to an item\n      type = readID(decoder)\n    }\n  }\n  const assoc = decoding.hasContent(decoder) ? decoding.readVarInt(decoder) : 0\n  return new RelativePosition(type, tname, itemID, assoc)\n}\n\n/**\n * @param {Uint8Array} uint8Array\n * @return {RelativePosition}\n */\nexport const decodeRelativePosition = uint8Array => readRelativePosition(decoding.createDecoder(uint8Array))\n\n/**\n * @param {RelativePosition} rpos\n * @param {Doc} doc\n * @return {AbsolutePosition|null}\n *\n * @function\n */\nexport const createAbsolutePositionFromRelativePosition = (rpos, doc) => {\n  const store = doc.store\n  const rightID = rpos.item\n  const typeID = rpos.type\n  const tname = rpos.tname\n  const assoc = rpos.assoc\n  let type = null\n  let index = 0\n  if (rightID !== null) {\n    if (getState(store, rightID.client) <= rightID.clock) {\n      return null\n    }\n    const res = followRedone(store, rightID)\n    const right = res.item\n    if (!(right instanceof Item)) {\n      return null\n    }\n    type = /** @type {AbstractType<any>} */ (right.parent)\n    if (type._item === null || !type._item.deleted) {\n      index = (right.deleted || !right.countable) ? 0 : (res.diff + (assoc >= 0 ? 0 : 1)) // adjust position based on left association if necessary\n      let n = right.left\n      while (n !== null) {\n        if (!n.deleted && n.countable) {\n          index += n.length\n        }\n        n = n.left\n      }\n    }\n  } else {\n    if (tname !== null) {\n      type = doc.get(tname)\n    } else if (typeID !== null) {\n      if (getState(store, typeID.client) <= typeID.clock) {\n        // type does not exist yet\n        return null\n      }\n      const { item } = followRedone(store, typeID)\n      if (item instanceof Item && item.content instanceof ContentType) {\n        type = item.content.type\n      } else {\n        // struct is garbage collected\n        return null\n      }\n    } else {\n      throw error.unexpectedCase()\n    }\n    if (assoc >= 0) {\n      index = type._length\n    } else {\n      index = 0\n    }\n  }\n  return createAbsolutePosition(type, index, rpos.assoc)\n}\n\n/**\n * @param {RelativePosition|null} a\n * @param {RelativePosition|null} b\n * @return {boolean}\n *\n * @function\n */\nexport const compareRelativePositions = (a, b) => a === b || (\n  a !== null && b !== null && a.tname === b.tname && compareIDs(a.item, b.item) && compareIDs(a.type, b.type) && a.assoc === b.assoc\n)\n", "\nimport {\n  isDeleted,\n  createDeleteSetFromStructStore,\n  getStateVector,\n  getItemCleanStart,\n  iterateDeletedStructs,\n  writeDeleteSet,\n  writeStateVector,\n  readDeleteSet,\n  readStateVector,\n  createDeleteSet,\n  createID,\n  getState,\n  findIndexSS,\n  UpdateEncoderV2,\n  applyUpdateV2,\n  LazyStructReader,\n  equalDeleteSets,\n  UpdateDecoderV1, UpdateDecoderV2, DSEncoderV1, DSEncoderV2, DSDecoderV1, DSDecoderV2, Transaction, Doc, DeleteSet, Item, // eslint-disable-line\n  mergeDeleteSets\n} from '../internals.js'\n\nimport * as map from 'lib0/map'\nimport * as set from 'lib0/set'\nimport * as decoding from 'lib0/decoding'\nimport * as encoding from 'lib0/encoding'\n\nexport class Snapshot {\n  /**\n   * @param {DeleteSet} ds\n   * @param {Map<number,number>} sv state map\n   */\n  constructor (ds, sv) {\n    /**\n     * @type {DeleteSet}\n     */\n    this.ds = ds\n    /**\n     * State Map\n     * @type {Map<number,number>}\n     */\n    this.sv = sv\n  }\n}\n\n/**\n * @param {Snapshot} snap1\n * @param {Snapshot} snap2\n * @return {boolean}\n */\nexport const equalSnapshots = (snap1, snap2) => {\n  const ds1 = snap1.ds.clients\n  const ds2 = snap2.ds.clients\n  const sv1 = snap1.sv\n  const sv2 = snap2.sv\n  if (sv1.size !== sv2.size || ds1.size !== ds2.size) {\n    return false\n  }\n  for (const [key, value] of sv1.entries()) {\n    if (sv2.get(key) !== value) {\n      return false\n    }\n  }\n  for (const [client, dsitems1] of ds1.entries()) {\n    const dsitems2 = ds2.get(client) || []\n    if (dsitems1.length !== dsitems2.length) {\n      return false\n    }\n    for (let i = 0; i < dsitems1.length; i++) {\n      const dsitem1 = dsitems1[i]\n      const dsitem2 = dsitems2[i]\n      if (dsitem1.clock !== dsitem2.clock || dsitem1.len !== dsitem2.len) {\n        return false\n      }\n    }\n  }\n  return true\n}\n\n/**\n * @param {Snapshot} snapshot\n * @param {DSEncoderV1 | DSEncoderV2} [encoder]\n * @return {Uint8Array}\n */\nexport const encodeSnapshotV2 = (snapshot, encoder = new DSEncoderV2()) => {\n  writeDeleteSet(encoder, snapshot.ds)\n  writeStateVector(encoder, snapshot.sv)\n  return encoder.toUint8Array()\n}\n\n/**\n * @param {Snapshot} snapshot\n * @return {Uint8Array}\n */\nexport const encodeSnapshot = snapshot => encodeSnapshotV2(snapshot, new DSEncoderV1())\n\n/**\n * @param {Uint8Array} buf\n * @param {DSDecoderV1 | DSDecoderV2} [decoder]\n * @return {Snapshot}\n */\nexport const decodeSnapshotV2 = (buf, decoder = new DSDecoderV2(decoding.createDecoder(buf))) => {\n  return new Snapshot(readDeleteSet(decoder), readStateVector(decoder))\n}\n\n/**\n * @param {Uint8Array} buf\n * @return {Snapshot}\n */\nexport const decodeSnapshot = buf => decodeSnapshotV2(buf, new DSDecoderV1(decoding.createDecoder(buf)))\n\n/**\n * @param {DeleteSet} ds\n * @param {Map<number,number>} sm\n * @return {Snapshot}\n */\nexport const createSnapshot = (ds, sm) => new Snapshot(ds, sm)\n\nexport const emptySnapshot = createSnapshot(createDeleteSet(), new Map())\n\n/**\n * @param {Doc} doc\n * @return {Snapshot}\n */\nexport const snapshot = doc => createSnapshot(createDeleteSetFromStructStore(doc.store), getStateVector(doc.store))\n\n/**\n * @param {Item} item\n * @param {Snapshot|undefined} snapshot\n *\n * @protected\n * @function\n */\nexport const isVisible = (item, snapshot) => snapshot === undefined\n  ? !item.deleted\n  : snapshot.sv.has(item.id.client) && (snapshot.sv.get(item.id.client) || 0) > item.id.clock && !isDeleted(snapshot.ds, item.id)\n\n/**\n * @param {Transaction} transaction\n * @param {Snapshot} snapshot\n */\nexport const splitSnapshotAffectedStructs = (transaction, snapshot) => {\n  const meta = map.setIfUndefined(transaction.meta, splitSnapshotAffectedStructs, set.create)\n  const store = transaction.doc.store\n  // check if we already split for this snapshot\n  if (!meta.has(snapshot)) {\n    snapshot.sv.forEach((clock, client) => {\n      if (clock < getState(store, client)) {\n        getItemCleanStart(transaction, createID(client, clock))\n      }\n    })\n    iterateDeletedStructs(transaction, snapshot.ds, _item => {})\n    meta.add(snapshot)\n  }\n}\n\n/**\n * @example\n *  const ydoc = new Y.Doc({ gc: false })\n *  ydoc.getText().insert(0, 'world!')\n *  const snapshot = Y.snapshot(ydoc)\n *  ydoc.getText().insert(0, 'hello ')\n *  const restored = Y.createDocFromSnapshot(ydoc, snapshot)\n *  assert(restored.getText().toString() === 'world!')\n *\n * @param {Doc} originDoc\n * @param {Snapshot} snapshot\n * @param {Doc} [newDoc] Optionally, you may define the Yjs document that receives the data from originDoc\n * @return {Doc}\n */\nexport const createDocFromSnapshot = (originDoc, snapshot, newDoc = new Doc()) => {\n  if (originDoc.gc) {\n    // we should not try to restore a GC-ed document, because some of the restored items might have their content deleted\n    throw new Error('Garbage-collection must be disabled in `originDoc`!')\n  }\n  const { sv, ds } = snapshot\n\n  const encoder = new UpdateEncoderV2()\n  originDoc.transact(transaction => {\n    let size = 0\n    sv.forEach(clock => {\n      if (clock > 0) {\n        size++\n      }\n    })\n    encoding.writeVarUint(encoder.restEncoder, size)\n    // splitting the structs before writing them to the encoder\n    for (const [client, clock] of sv) {\n      if (clock === 0) {\n        continue\n      }\n      if (clock < getState(originDoc.store, client)) {\n        getItemCleanStart(transaction, createID(client, clock))\n      }\n      const structs = originDoc.store.clients.get(client) || []\n      const lastStructIndex = findIndexSS(structs, clock - 1)\n      // write # encoded structs\n      encoding.writeVarUint(encoder.restEncoder, lastStructIndex + 1)\n      encoder.writeClient(client)\n      // first clock written is 0\n      encoding.writeVarUint(encoder.restEncoder, 0)\n      for (let i = 0; i <= lastStructIndex; i++) {\n        structs[i].write(encoder, 0)\n      }\n    }\n    writeDeleteSet(encoder, ds)\n  })\n\n  applyUpdateV2(newDoc, encoder.toUint8Array(), 'snapshot')\n  return newDoc\n}\n\n/**\n * @param {Snapshot} snapshot\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n */\nexport const snapshotContainsUpdateV2 = (snapshot, update, YDecoder = UpdateDecoderV2) => {\n  const structs = []\n  const updateDecoder = new YDecoder(decoding.createDecoder(update))\n  const lazyDecoder = new LazyStructReader(updateDecoder, false)\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    structs.push(curr)\n    if ((snapshot.sv.get(curr.id.client) || 0) < curr.id.clock + curr.length) {\n      return false\n    }\n  }\n  const mergedDS = mergeDeleteSets([snapshot.ds, readDeleteSet(updateDecoder)])\n  return equalDeleteSets(snapshot.ds, mergedDS)\n}\n\n/**\n * @param {Snapshot} snapshot\n * @param {Uint8Array} update\n */\nexport const snapshotContainsUpdate = (snapshot, update) => snapshotContainsUpdateV2(snapshot, update, UpdateDecoderV1)\n", "\nimport {\n  GC,\n  splitItem,\n  Transaction, ID, Item, DSDecoderV2 // eslint-disable-line\n} from '../internals.js'\n\nimport * as math from 'lib0/math'\nimport * as error from 'lib0/error'\n\nexport class StructStore {\n  constructor () {\n    /**\n     * @type {Map<number,Array<GC|Item>>}\n     */\n    this.clients = new Map()\n    /**\n     * @type {null | { missing: Map<number, number>, update: Uint8Array }}\n     */\n    this.pendingStructs = null\n    /**\n     * @type {null | Uint8Array}\n     */\n    this.pendingDs = null\n  }\n}\n\n/**\n * Return the states as a Map<client,clock>.\n * Note that clock refers to the next expected clock id.\n *\n * @param {StructStore} store\n * @return {Map<number,number>}\n *\n * @public\n * @function\n */\nexport const getStateVector = store => {\n  const sm = new Map()\n  store.clients.forEach((structs, client) => {\n    const struct = structs[structs.length - 1]\n    sm.set(client, struct.id.clock + struct.length)\n  })\n  return sm\n}\n\n/**\n * @param {StructStore} store\n * @param {number} client\n * @return {number}\n *\n * @public\n * @function\n */\nexport const getState = (store, client) => {\n  const structs = store.clients.get(client)\n  if (structs === undefined) {\n    return 0\n  }\n  const lastStruct = structs[structs.length - 1]\n  return lastStruct.id.clock + lastStruct.length\n}\n\n/**\n * @param {StructStore} store\n *\n * @private\n * @function\n */\nexport const integretyCheck = store => {\n  store.clients.forEach(structs => {\n    for (let i = 1; i < structs.length; i++) {\n      const l = structs[i - 1]\n      const r = structs[i]\n      if (l.id.clock + l.length !== r.id.clock) {\n        throw new Error('StructStore failed integrety check')\n      }\n    }\n  })\n}\n\n/**\n * @param {StructStore} store\n * @param {GC|Item} struct\n *\n * @private\n * @function\n */\nexport const addStruct = (store, struct) => {\n  let structs = store.clients.get(struct.id.client)\n  if (structs === undefined) {\n    structs = []\n    store.clients.set(struct.id.client, structs)\n  } else {\n    const lastStruct = structs[structs.length - 1]\n    if (lastStruct.id.clock + lastStruct.length !== struct.id.clock) {\n      throw error.unexpectedCase()\n    }\n  }\n  structs.push(struct)\n}\n\n/**\n * Perform a binary search on a sorted array\n * @param {Array<Item|GC>} structs\n * @param {number} clock\n * @return {number}\n *\n * @private\n * @function\n */\nexport const findIndexSS = (structs, clock) => {\n  let left = 0\n  let right = structs.length - 1\n  let mid = structs[right]\n  let midclock = mid.id.clock\n  if (midclock === clock) {\n    return right\n  }\n  // @todo does it even make sense to pivot the search?\n  // If a good split misses, it might actually increase the time to find the correct item.\n  // Currently, the only advantage is that search with pivoting might find the item on the first try.\n  let midindex = math.floor((clock / (midclock + mid.length - 1)) * right) // pivoting the search\n  while (left <= right) {\n    mid = structs[midindex]\n    midclock = mid.id.clock\n    if (midclock <= clock) {\n      if (clock < midclock + mid.length) {\n        return midindex\n      }\n      left = midindex + 1\n    } else {\n      right = midindex - 1\n    }\n    midindex = math.floor((left + right) / 2)\n  }\n  // Always check state before looking for a struct in StructStore\n  // Therefore the case of not finding a struct is unexpected\n  throw error.unexpectedCase()\n}\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {StructStore} store\n * @param {ID} id\n * @return {GC|Item}\n *\n * @private\n * @function\n */\nexport const find = (store, id) => {\n  /**\n   * @type {Array<GC|Item>}\n   */\n  // @ts-ignore\n  const structs = store.clients.get(id.client)\n  return structs[findIndexSS(structs, id.clock)]\n}\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n * @private\n * @function\n */\nexport const getItem = /** @type {function(StructStore,ID):Item} */ (find)\n\n/**\n * @param {Transaction} transaction\n * @param {Array<Item|GC>} structs\n * @param {number} clock\n */\nexport const findIndexCleanStart = (transaction, structs, clock) => {\n  const index = findIndexSS(structs, clock)\n  const struct = structs[index]\n  if (struct.id.clock < clock && struct instanceof Item) {\n    structs.splice(index + 1, 0, splitItem(transaction, struct, clock - struct.id.clock))\n    return index + 1\n  }\n  return index\n}\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {Transaction} transaction\n * @param {ID} id\n * @return {Item}\n *\n * @private\n * @function\n */\nexport const getItemCleanStart = (transaction, id) => {\n  const structs = /** @type {Array<Item>} */ (transaction.doc.store.clients.get(id.client))\n  return structs[findIndexCleanStart(transaction, structs, id.clock)]\n}\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @param {ID} id\n * @return {Item}\n *\n * @private\n * @function\n */\nexport const getItemCleanEnd = (transaction, store, id) => {\n  /**\n   * @type {Array<Item>}\n   */\n  // @ts-ignore\n  const structs = store.clients.get(id.client)\n  const index = findIndexSS(structs, id.clock)\n  const struct = structs[index]\n  if (id.clock !== struct.id.clock + struct.length - 1 && struct.constructor !== GC) {\n    structs.splice(index + 1, 0, splitItem(transaction, struct, id.clock - struct.id.clock + 1))\n  }\n  return struct\n}\n\n/**\n * Replace `item` with `newitem` in store\n * @param {StructStore} store\n * @param {GC|Item} struct\n * @param {GC|Item} newStruct\n *\n * @private\n * @function\n */\nexport const replaceStruct = (store, struct, newStruct) => {\n  const structs = /** @type {Array<GC|Item>} */ (store.clients.get(struct.id.client))\n  structs[findIndexSS(structs, struct.id.clock)] = newStruct\n}\n\n/**\n * Iterate over a range of structs\n *\n * @param {Transaction} transaction\n * @param {Array<Item|GC>} structs\n * @param {number} clockStart Inclusive start\n * @param {number} len\n * @param {function(GC|Item):void} f\n *\n * @function\n */\nexport const iterateStructs = (transaction, structs, clockStart, len, f) => {\n  if (len === 0) {\n    return\n  }\n  const clockEnd = clockStart + len\n  let index = findIndexCleanStart(transaction, structs, clockStart)\n  let struct\n  do {\n    struct = structs[index++]\n    if (clockEnd < struct.id.clock + struct.length) {\n      findIndexCleanStart(transaction, structs, clockEnd)\n    }\n    f(struct)\n  } while (index < structs.length && structs[index].id.clock < clockEnd)\n}\n", "\nimport {\n  getState,\n  writeStructsFromTransaction,\n  writeDeleteSet,\n  DeleteSet,\n  sortAndMergeDeleteSet,\n  getStateVector,\n  findIndexSS,\n  callEventHandlerListeners,\n  Item,\n  generateNewClientId,\n  createID,\n  cleanupYTextAfterTransaction,\n  UpdateEncoderV1, UpdateEncoderV2, GC, StructStore, AbstractType, AbstractStruct, YEvent, Doc // eslint-disable-line\n} from '../internals.js'\n\nimport * as map from 'lib0/map'\nimport * as math from 'lib0/math'\nimport * as set from 'lib0/set'\nimport * as logging from 'lib0/logging'\nimport { callAll } from 'lib0/function'\n\n/**\n * A transaction is created for every change on the Yjs model. It is possible\n * to bundle changes on the Yjs model in a single transaction to\n * minimize the number on messages sent and the number of observer calls.\n * If possible the user of this library should bundle as many changes as\n * possible. Here is an example to illustrate the advantages of bundling:\n *\n * @example\n * const map = y.define('map', YMap)\n * // Log content when change is triggered\n * map.observe(() => {\n *   console.log('change triggered')\n * })\n * // Each change on the map type triggers a log message:\n * map.set('a', 0) // => \"change triggered\"\n * map.set('b', 0) // => \"change triggered\"\n * // When put in a transaction, it will trigger the log after the transaction:\n * y.transact(() => {\n *   map.set('a', 1)\n *   map.set('b', 1)\n * }) // => \"change triggered\"\n *\n * @public\n */\nexport class Transaction {\n  /**\n   * @param {Doc} doc\n   * @param {any} origin\n   * @param {boolean} local\n   */\n  constructor (doc, origin, local) {\n    /**\n     * The Yjs instance.\n     * @type {Doc}\n     */\n    this.doc = doc\n    /**\n     * Describes the set of deleted items by ids\n     * @type {DeleteSet}\n     */\n    this.deleteSet = new DeleteSet()\n    /**\n     * Holds the state before the transaction started.\n     * @type {Map<Number,Number>}\n     */\n    this.beforeState = getStateVector(doc.store)\n    /**\n     * Holds the state after the transaction.\n     * @type {Map<Number,Number>}\n     */\n    this.afterState = new Map()\n    /**\n     * All types that were directly modified (property added or child\n     * inserted/deleted). New types are not included in this Set.\n     * Maps from type to parentSubs (`item.parentSub = null` for YArray)\n     * @type {Map<AbstractType<YEvent<any>>,Set<String|null>>}\n     */\n    this.changed = new Map()\n    /**\n     * Stores the events for the types that observe also child elements.\n     * It is mainly used by `observeDeep`.\n     * @type {Map<AbstractType<YEvent<any>>,Array<YEvent<any>>>}\n     */\n    this.changedParentTypes = new Map()\n    /**\n     * @type {Array<AbstractStruct>}\n     */\n    this._mergeStructs = []\n    /**\n     * @type {any}\n     */\n    this.origin = origin\n    /**\n     * Stores meta information on the transaction\n     * @type {Map<any,any>}\n     */\n    this.meta = new Map()\n    /**\n     * Whether this change originates from this doc.\n     * @type {boolean}\n     */\n    this.local = local\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsAdded = new Set()\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsRemoved = new Set()\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsLoaded = new Set()\n    /**\n     * @type {boolean}\n     */\n    this._needFormattingCleanup = false\n  }\n}\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Transaction} transaction\n * @return {boolean} Whether data was written.\n */\nexport const writeUpdateMessageFromTransaction = (encoder, transaction) => {\n  if (transaction.deleteSet.clients.size === 0 && !map.any(transaction.afterState, (clock, client) => transaction.beforeState.get(client) !== clock)) {\n    return false\n  }\n  sortAndMergeDeleteSet(transaction.deleteSet)\n  writeStructsFromTransaction(encoder, transaction)\n  writeDeleteSet(encoder, transaction.deleteSet)\n  return true\n}\n\n/**\n * @param {Transaction} transaction\n *\n * @private\n * @function\n */\nexport const nextID = transaction => {\n  const y = transaction.doc\n  return createID(y.clientID, getState(y.store, y.clientID))\n}\n\n/**\n * If `type.parent` was added in current transaction, `type` technically\n * did not change, it was just added and we should not fire events for `type`.\n *\n * @param {Transaction} transaction\n * @param {AbstractType<YEvent<any>>} type\n * @param {string|null} parentSub\n */\nexport const addChangedTypeToTransaction = (transaction, type, parentSub) => {\n  const item = type._item\n  if (item === null || (item.id.clock < (transaction.beforeState.get(item.id.client) || 0) && !item.deleted)) {\n    map.setIfUndefined(transaction.changed, type, set.create).add(parentSub)\n  }\n}\n\n/**\n * @param {Array<AbstractStruct>} structs\n * @param {number} pos\n */\nconst tryToMergeWithLeft = (structs, pos) => {\n  const left = structs[pos - 1]\n  const right = structs[pos]\n  if (left.deleted === right.deleted && left.constructor === right.constructor) {\n    if (left.mergeWith(right)) {\n      structs.splice(pos, 1)\n      if (right instanceof Item && right.parentSub !== null && /** @type {AbstractType<any>} */ (right.parent)._map.get(right.parentSub) === right) {\n        /** @type {AbstractType<any>} */ (right.parent)._map.set(right.parentSub, /** @type {Item} */ (left))\n      }\n    }\n  }\n}\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n * @param {function(Item):boolean} gcFilter\n */\nconst tryGcDeleteSet = (ds, store, gcFilter) => {\n  for (const [client, deleteItems] of ds.clients.entries()) {\n    const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client))\n    for (let di = deleteItems.length - 1; di >= 0; di--) {\n      const deleteItem = deleteItems[di]\n      const endDeleteItemClock = deleteItem.clock + deleteItem.len\n      for (\n        let si = findIndexSS(structs, deleteItem.clock), struct = structs[si];\n        si < structs.length && struct.id.clock < endDeleteItemClock;\n        struct = structs[++si]\n      ) {\n        const struct = structs[si]\n        if (deleteItem.clock + deleteItem.len <= struct.id.clock) {\n          break\n        }\n        if (struct instanceof Item && struct.deleted && !struct.keep && gcFilter(struct)) {\n          struct.gc(store, false)\n        }\n      }\n    }\n  }\n}\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n */\nconst tryMergeDeleteSet = (ds, store) => {\n  // try to merge deleted / gc'd items\n  // merge from right to left for better efficiecy and so we don't miss any merge targets\n  ds.clients.forEach((deleteItems, client) => {\n    const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client))\n    for (let di = deleteItems.length - 1; di >= 0; di--) {\n      const deleteItem = deleteItems[di]\n      // start with merging the item next to the last deleted item\n      const mostRightIndexToCheck = math.min(structs.length - 1, 1 + findIndexSS(structs, deleteItem.clock + deleteItem.len - 1))\n      for (\n        let si = mostRightIndexToCheck, struct = structs[si];\n        si > 0 && struct.id.clock >= deleteItem.clock;\n        struct = structs[--si]\n      ) {\n        tryToMergeWithLeft(structs, si)\n      }\n    }\n  })\n}\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n * @param {function(Item):boolean} gcFilter\n */\nexport const tryGc = (ds, store, gcFilter) => {\n  tryGcDeleteSet(ds, store, gcFilter)\n  tryMergeDeleteSet(ds, store)\n}\n\n/**\n * @param {Array<Transaction>} transactionCleanups\n * @param {number} i\n */\nconst cleanupTransactions = (transactionCleanups, i) => {\n  if (i < transactionCleanups.length) {\n    const transaction = transactionCleanups[i]\n    const doc = transaction.doc\n    const store = doc.store\n    const ds = transaction.deleteSet\n    const mergeStructs = transaction._mergeStructs\n    try {\n      sortAndMergeDeleteSet(ds)\n      transaction.afterState = getStateVector(transaction.doc.store)\n      doc.emit('beforeObserverCalls', [transaction, doc])\n      /**\n       * An array of event callbacks.\n       *\n       * Each callback is called even if the other ones throw errors.\n       *\n       * @type {Array<function():void>}\n       */\n      const fs = []\n      // observe events on changed types\n      transaction.changed.forEach((subs, itemtype) =>\n        fs.push(() => {\n          if (itemtype._item === null || !itemtype._item.deleted) {\n            itemtype._callObserver(transaction, subs)\n          }\n        })\n      )\n      fs.push(() => {\n        // deep observe events\n        transaction.changedParentTypes.forEach((events, type) => {\n          // We need to think about the possibility that the user transforms the\n          // Y.Doc in the event.\n          if (type._dEH.l.length > 0 && (type._item === null || !type._item.deleted)) {\n            events = events\n              .filter(event =>\n                event.target._item === null || !event.target._item.deleted\n              )\n            events\n              .forEach(event => {\n                event.currentTarget = type\n                // path is relative to the current target\n                event._path = null\n              })\n            // sort events by path length so that top-level events are fired first.\n            events\n              .sort((event1, event2) => event1.path.length - event2.path.length)\n            // We don't need to check for events.length\n            // because we know it has at least one element\n            callEventHandlerListeners(type._dEH, events, transaction)\n          }\n        })\n      })\n      fs.push(() => doc.emit('afterTransaction', [transaction, doc]))\n      callAll(fs, [])\n      if (transaction._needFormattingCleanup) {\n        cleanupYTextAfterTransaction(transaction)\n      }\n    } finally {\n      // Replace deleted items with ItemDeleted / GC.\n      // This is where content is actually remove from the Yjs Doc.\n      if (doc.gc) {\n        tryGcDeleteSet(ds, store, doc.gcFilter)\n      }\n      tryMergeDeleteSet(ds, store)\n\n      // on all affected store.clients props, try to merge\n      transaction.afterState.forEach((clock, client) => {\n        const beforeClock = transaction.beforeState.get(client) || 0\n        if (beforeClock !== clock) {\n          const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client))\n          // we iterate from right to left so we can safely remove entries\n          const firstChangePos = math.max(findIndexSS(structs, beforeClock), 1)\n          for (let i = structs.length - 1; i >= firstChangePos; i--) {\n            tryToMergeWithLeft(structs, i)\n          }\n        }\n      })\n      // try to merge mergeStructs\n      // @todo: it makes more sense to transform mergeStructs to a DS, sort it, and merge from right to left\n      //        but at the moment DS does not handle duplicates\n      for (let i = 0; i < mergeStructs.length; i++) {\n        const { client, clock } = mergeStructs[i].id\n        const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client))\n        const replacedStructPos = findIndexSS(structs, clock)\n        if (replacedStructPos + 1 < structs.length) {\n          tryToMergeWithLeft(structs, replacedStructPos + 1)\n        }\n        if (replacedStructPos > 0) {\n          tryToMergeWithLeft(structs, replacedStructPos)\n        }\n      }\n      if (!transaction.local && transaction.afterState.get(doc.clientID) !== transaction.beforeState.get(doc.clientID)) {\n        logging.print(logging.ORANGE, logging.BOLD, '[yjs] ', logging.UNBOLD, logging.RED, 'Changed the client-id because another client seems to be using it.')\n        doc.clientID = generateNewClientId()\n      }\n      // @todo Merge all the transactions into one and provide send the data as a single update message\n      doc.emit('afterTransactionCleanup', [transaction, doc])\n      if (doc._observers.has('update')) {\n        const encoder = new UpdateEncoderV1()\n        const hasContent = writeUpdateMessageFromTransaction(encoder, transaction)\n        if (hasContent) {\n          doc.emit('update', [encoder.toUint8Array(), transaction.origin, doc, transaction])\n        }\n      }\n      if (doc._observers.has('updateV2')) {\n        const encoder = new UpdateEncoderV2()\n        const hasContent = writeUpdateMessageFromTransaction(encoder, transaction)\n        if (hasContent) {\n          doc.emit('updateV2', [encoder.toUint8Array(), transaction.origin, doc, transaction])\n        }\n      }\n      const { subdocsAdded, subdocsLoaded, subdocsRemoved } = transaction\n      if (subdocsAdded.size > 0 || subdocsRemoved.size > 0 || subdocsLoaded.size > 0) {\n        subdocsAdded.forEach(subdoc => {\n          subdoc.clientID = doc.clientID\n          if (subdoc.collectionid == null) {\n            subdoc.collectionid = doc.collectionid\n          }\n          doc.subdocs.add(subdoc)\n        })\n        subdocsRemoved.forEach(subdoc => doc.subdocs.delete(subdoc))\n        doc.emit('subdocs', [{ loaded: subdocsLoaded, added: subdocsAdded, removed: subdocsRemoved }, doc, transaction])\n        subdocsRemoved.forEach(subdoc => subdoc.destroy())\n      }\n\n      if (transactionCleanups.length <= i + 1) {\n        doc._transactionCleanups = []\n        doc.emit('afterAllTransactions', [doc, transactionCleanups])\n      } else {\n        cleanupTransactions(transactionCleanups, i + 1)\n      }\n    }\n  }\n}\n\n/**\n * Implements the functionality of `y.transact(()=>{..})`\n *\n * @template T\n * @param {Doc} doc\n * @param {function(Transaction):T} f\n * @param {any} [origin=true]\n * @return {T}\n *\n * @function\n */\nexport const transact = (doc, f, origin = null, local = true) => {\n  const transactionCleanups = doc._transactionCleanups\n  let initialCall = false\n  /**\n   * @type {any}\n   */\n  let result = null\n  if (doc._transaction === null) {\n    initialCall = true\n    doc._transaction = new Transaction(doc, origin, local)\n    transactionCleanups.push(doc._transaction)\n    if (transactionCleanups.length === 1) {\n      doc.emit('beforeAllTransactions', [doc])\n    }\n    doc.emit('beforeTransaction', [doc._transaction, doc])\n  }\n  try {\n    result = f(doc._transaction)\n  } finally {\n    if (initialCall) {\n      const finishCleanup = doc._transaction === transactionCleanups[0]\n      doc._transaction = null\n      if (finishCleanup) {\n        // The first transaction ended, now process observer calls.\n        // Observer call may create new transactions for which we need to call the observers and do cleanup.\n        // We don't want to nest these calls, so we execute these calls one after\n        // another.\n        // Also we need to ensure that all cleanups are called, even if the\n        // observes throw errors.\n        // This file is full of hacky try {} finally {} blocks to ensure that an\n        // event can throw errors and also that the cleanup is called.\n        cleanupTransactions(transactionCleanups, 0)\n      }\n    }\n  }\n  return result\n}\n", "import {\n  mergeDeleteSets,\n  iterateDeletedStructs,\n  keepItem,\n  transact,\n  createID,\n  redoItem,\n  isParentOf,\n  followRedone,\n  getItemCleanStart,\n  isDeleted,\n  addToDeleteSet,\n  Transaction, Doc, Item, GC, DeleteSet, AbstractType // eslint-disable-line\n} from '../internals.js'\n\nimport * as time from 'lib0/time'\nimport * as array from 'lib0/array'\nimport { Observable } from 'lib0/observable'\n\nexport class StackItem {\n  /**\n   * @param {DeleteSet} deletions\n   * @param {DeleteSet} insertions\n   */\n  constructor (deletions, insertions) {\n    this.insertions = insertions\n    this.deletions = deletions\n    /**\n     * Use this to save and restore metadata like selection range\n     */\n    this.meta = new Map()\n  }\n}\n/**\n * @param {Transaction} tr\n * @param {UndoManager} um\n * @param {StackItem} stackItem\n */\nconst clearUndoManagerStackItem = (tr, um, stackItem) => {\n  iterateDeletedStructs(tr, stackItem.deletions, item => {\n    if (item instanceof Item && um.scope.some(type => isParentOf(type, item))) {\n      keepItem(item, false)\n    }\n  })\n}\n\n/**\n * @param {UndoManager} undoManager\n * @param {Array<StackItem>} stack\n * @param {string} eventType\n * @return {StackItem?}\n */\nconst popStackItem = (undoManager, stack, eventType) => {\n  /**\n   * Whether a change happened\n   * @type {StackItem?}\n   */\n  let result = null\n  /**\n   * Keep a reference to the transaction so we can fire the event with the changedParentTypes\n   * @type {any}\n   */\n  let _tr = null\n  const doc = undoManager.doc\n  const scope = undoManager.scope\n  transact(doc, transaction => {\n    while (stack.length > 0 && result === null) {\n      const store = doc.store\n      const stackItem = /** @type {StackItem} */ (stack.pop())\n      /**\n       * @type {Set<Item>}\n       */\n      const itemsToRedo = new Set()\n      /**\n       * @type {Array<Item>}\n       */\n      const itemsToDelete = []\n      let performedChange = false\n      iterateDeletedStructs(transaction, stackItem.insertions, struct => {\n        if (struct instanceof Item) {\n          if (struct.redone !== null) {\n            let { item, diff } = followRedone(store, struct.id)\n            if (diff > 0) {\n              item = getItemCleanStart(transaction, createID(item.id.client, item.id.clock + diff))\n            }\n            struct = item\n          }\n          if (!struct.deleted && scope.some(type => isParentOf(type, /** @type {Item} */ (struct)))) {\n            itemsToDelete.push(struct)\n          }\n        }\n      })\n      iterateDeletedStructs(transaction, stackItem.deletions, struct => {\n        if (\n          struct instanceof Item &&\n          scope.some(type => isParentOf(type, struct)) &&\n          // Never redo structs in stackItem.insertions because they were created and deleted in the same capture interval.\n          !isDeleted(stackItem.insertions, struct.id)\n        ) {\n          itemsToRedo.add(struct)\n        }\n      })\n      itemsToRedo.forEach(struct => {\n        performedChange = redoItem(transaction, struct, itemsToRedo, stackItem.insertions, undoManager.ignoreRemoteMapChanges, undoManager) !== null || performedChange\n      })\n      // We want to delete in reverse order so that children are deleted before\n      // parents, so we have more information available when items are filtered.\n      for (let i = itemsToDelete.length - 1; i >= 0; i--) {\n        const item = itemsToDelete[i]\n        if (undoManager.deleteFilter(item)) {\n          item.delete(transaction)\n          performedChange = true\n        }\n      }\n      result = performedChange ? stackItem : null\n    }\n    transaction.changed.forEach((subProps, type) => {\n      // destroy search marker if necessary\n      if (subProps.has(null) && type._searchMarker) {\n        type._searchMarker.length = 0\n      }\n    })\n    _tr = transaction\n  }, undoManager)\n  if (result != null) {\n    const changedParentTypes = _tr.changedParentTypes\n    undoManager.emit('stack-item-popped', [{ stackItem: result, type: eventType, changedParentTypes }, undoManager])\n  }\n  return result\n}\n\n/**\n * @typedef {Object} UndoManagerOptions\n * @property {number} [UndoManagerOptions.captureTimeout=500]\n * @property {function(Transaction):boolean} [UndoManagerOptions.captureTransaction] Do not capture changes of a Transaction if result false.\n * @property {function(Item):boolean} [UndoManagerOptions.deleteFilter=()=>true] Sometimes\n * it is necessary to filter what an Undo/Redo operation can delete. If this\n * filter returns false, the type/item won't be deleted even it is in the\n * undo/redo scope.\n * @property {Set<any>} [UndoManagerOptions.trackedOrigins=new Set([null])]\n * @property {boolean} [ignoreRemoteMapChanges] Experimental. By default, the UndoManager will never overwrite remote changes. Enable this property to enable overwriting remote changes on key-value changes (Y.Map, properties on Y.Xml, etc..).\n * @property {Doc} [doc] The document that this UndoManager operates on. Only needed if typeScope is empty.\n */\n\n/**\n * Fires 'stack-item-added' event when a stack item was added to either the undo- or\n * the redo-stack. You may store additional stack information via the\n * metadata property on `event.stackItem.meta` (it is a `Map` of metadata properties).\n * Fires 'stack-item-popped' event when a stack item was popped from either the\n * undo- or the redo-stack. You may restore the saved stack information from `event.stackItem.meta`.\n *\n * @extends {Observable<'stack-item-added'|'stack-item-popped'|'stack-cleared'|'stack-item-updated'>}\n */\nexport class UndoManager extends Observable {\n  /**\n   * @param {AbstractType<any>|Array<AbstractType<any>>} typeScope Accepts either a single type, or an array of types\n   * @param {UndoManagerOptions} options\n   */\n  constructor (typeScope, {\n    captureTimeout = 500,\n    captureTransaction = _tr => true,\n    deleteFilter = () => true,\n    trackedOrigins = new Set([null]),\n    ignoreRemoteMapChanges = false,\n    doc = /** @type {Doc} */ (array.isArray(typeScope) ? typeScope[0].doc : typeScope.doc)\n  } = {}) {\n    super()\n    /**\n     * @type {Array<AbstractType<any>>}\n     */\n    this.scope = []\n    this.addToScope(typeScope)\n    this.deleteFilter = deleteFilter\n    trackedOrigins.add(this)\n    this.trackedOrigins = trackedOrigins\n    this.captureTransaction = captureTransaction\n    /**\n     * @type {Array<StackItem>}\n     */\n    this.undoStack = []\n    /**\n     * @type {Array<StackItem>}\n     */\n    this.redoStack = []\n    /**\n     * Whether the client is currently undoing (calling UndoManager.undo)\n     *\n     * @type {boolean}\n     */\n    this.undoing = false\n    this.redoing = false\n    this.doc = doc\n    this.lastChange = 0\n    this.ignoreRemoteMapChanges = ignoreRemoteMapChanges\n    this.captureTimeout = captureTimeout\n    /**\n     * @param {Transaction} transaction\n     */\n    this.afterTransactionHandler = transaction => {\n      // Only track certain transactions\n      if (\n        !this.captureTransaction(transaction) ||\n        !this.scope.some(type => transaction.changedParentTypes.has(type)) ||\n        (!this.trackedOrigins.has(transaction.origin) && (!transaction.origin || !this.trackedOrigins.has(transaction.origin.constructor)))\n      ) {\n        return\n      }\n      const undoing = this.undoing\n      const redoing = this.redoing\n      const stack = undoing ? this.redoStack : this.undoStack\n      if (undoing) {\n        this.stopCapturing() // next undo should not be appended to last stack item\n      } else if (!redoing) {\n        // neither undoing nor redoing: delete redoStack\n        this.clear(false, true)\n      }\n      const insertions = new DeleteSet()\n      transaction.afterState.forEach((endClock, client) => {\n        const startClock = transaction.beforeState.get(client) || 0\n        const len = endClock - startClock\n        if (len > 0) {\n          addToDeleteSet(insertions, client, startClock, len)\n        }\n      })\n      const now = time.getUnixTime()\n      let didAdd = false\n      if (this.lastChange > 0 && now - this.lastChange < this.captureTimeout && stack.length > 0 && !undoing && !redoing) {\n        // append change to last stack op\n        const lastOp = stack[stack.length - 1]\n        lastOp.deletions = mergeDeleteSets([lastOp.deletions, transaction.deleteSet])\n        lastOp.insertions = mergeDeleteSets([lastOp.insertions, insertions])\n      } else {\n        // create a new stack op\n        stack.push(new StackItem(transaction.deleteSet, insertions))\n        didAdd = true\n      }\n      if (!undoing && !redoing) {\n        this.lastChange = now\n      }\n      // make sure that deleted structs are not gc'd\n      iterateDeletedStructs(transaction, transaction.deleteSet, /** @param {Item|GC} item */ item => {\n        if (item instanceof Item && this.scope.some(type => isParentOf(type, item))) {\n          keepItem(item, true)\n        }\n      })\n      const changeEvent = [{ stackItem: stack[stack.length - 1], origin: transaction.origin, type: undoing ? 'redo' : 'undo', changedParentTypes: transaction.changedParentTypes }, this]\n      if (didAdd) {\n        this.emit('stack-item-added', changeEvent)\n      } else {\n        this.emit('stack-item-updated', changeEvent)\n      }\n    }\n    this.doc.on('afterTransaction', this.afterTransactionHandler)\n    this.doc.on('destroy', () => {\n      this.destroy()\n    })\n  }\n\n  /**\n   * @param {Array<AbstractType<any>> | AbstractType<any>} ytypes\n   */\n  addToScope (ytypes) {\n    ytypes = array.isArray(ytypes) ? ytypes : [ytypes]\n    ytypes.forEach(ytype => {\n      if (this.scope.every(yt => yt !== ytype)) {\n        this.scope.push(ytype)\n      }\n    })\n  }\n\n  /**\n   * @param {any} origin\n   */\n  addTrackedOrigin (origin) {\n    this.trackedOrigins.add(origin)\n  }\n\n  /**\n   * @param {any} origin\n   */\n  removeTrackedOrigin (origin) {\n    this.trackedOrigins.delete(origin)\n  }\n\n  clear (clearUndoStack = true, clearRedoStack = true) {\n    if ((clearUndoStack && this.canUndo()) || (clearRedoStack && this.canRedo())) {\n      this.doc.transact(tr => {\n        if (clearUndoStack) {\n          this.undoStack.forEach(item => clearUndoManagerStackItem(tr, this, item))\n          this.undoStack = []\n        }\n        if (clearRedoStack) {\n          this.redoStack.forEach(item => clearUndoManagerStackItem(tr, this, item))\n          this.redoStack = []\n        }\n        this.emit('stack-cleared', [{ undoStackCleared: clearUndoStack, redoStackCleared: clearRedoStack }])\n      })\n    }\n  }\n\n  /**\n   * UndoManager merges Undo-StackItem if they are created within time-gap\n   * smaller than `options.captureTimeout`. Call `um.stopCapturing()` so that the next\n   * StackItem won't be merged.\n   *\n   *\n   * @example\n   *     // without stopCapturing\n   *     ytext.insert(0, 'a')\n   *     ytext.insert(1, 'b')\n   *     um.undo()\n   *     ytext.toString() // => '' (note that 'ab' was removed)\n   *     // with stopCapturing\n   *     ytext.insert(0, 'a')\n   *     um.stopCapturing()\n   *     ytext.insert(0, 'b')\n   *     um.undo()\n   *     ytext.toString() // => 'a' (note that only 'b' was removed)\n   *\n   */\n  stopCapturing () {\n    this.lastChange = 0\n  }\n\n  /**\n   * Undo last changes on type.\n   *\n   * @return {StackItem?} Returns StackItem if a change was applied\n   */\n  undo () {\n    this.undoing = true\n    let res\n    try {\n      res = popStackItem(this, this.undoStack, 'undo')\n    } finally {\n      this.undoing = false\n    }\n    return res\n  }\n\n  /**\n   * Redo last undo operation.\n   *\n   * @return {StackItem?} Returns StackItem if a change was applied\n   */\n  redo () {\n    this.redoing = true\n    let res\n    try {\n      res = popStackItem(this, this.redoStack, 'redo')\n    } finally {\n      this.redoing = false\n    }\n    return res\n  }\n\n  /**\n   * Are undo steps available?\n   *\n   * @return {boolean} `true` if undo is possible\n   */\n  canUndo () {\n    return this.undoStack.length > 0\n  }\n\n  /**\n   * Are redo steps available?\n   *\n   * @return {boolean} `true` if redo is possible\n   */\n  canRedo () {\n    return this.redoStack.length > 0\n  }\n\n  destroy () {\n    this.trackedOrigins.delete(this)\n    this.doc.off('afterTransaction', this.afterTransactionHandler)\n    super.destroy()\n  }\n}\n", "\nimport * as binary from 'lib0/binary'\nimport * as decoding from 'lib0/decoding'\nimport * as encoding from 'lib0/encoding'\nimport * as error from 'lib0/error'\nimport * as f from 'lib0/function'\nimport * as logging from 'lib0/logging'\nimport * as map from 'lib0/map'\nimport * as math from 'lib0/math'\nimport * as string from 'lib0/string'\n\nimport {\n  ContentAny,\n  ContentBinary,\n  ContentDeleted,\n  ContentDoc,\n  ContentEmbed,\n  ContentFormat,\n  ContentJSON,\n  ContentString,\n  ContentType,\n  createID,\n  decodeStateVector,\n  DSEncoderV1,\n  DSEncoderV2,\n  GC,\n  Item,\n  mergeDeleteSets,\n  readDeleteSet,\n  readItemContent,\n  Skip,\n  UpdateDecoderV1,\n  UpdateDecoderV2,\n  UpdateEncoderV1,\n  UpdateEncoderV2,\n  writeDeleteSet,\n  YXmlElement,\n  YXmlHook\n} from '../internals.js'\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n */\nfunction * lazyStructReaderGenerator (decoder) {\n  const numOfStateUpdates = decoding.readVarUint(decoder.restDecoder)\n  for (let i = 0; i < numOfStateUpdates; i++) {\n    const numberOfStructs = decoding.readVarUint(decoder.restDecoder)\n    const client = decoder.readClient()\n    let clock = decoding.readVarUint(decoder.restDecoder)\n    for (let i = 0; i < numberOfStructs; i++) {\n      const info = decoder.readInfo()\n      // @todo use switch instead of ifs\n      if (info === 10) {\n        const len = decoding.readVarUint(decoder.restDecoder)\n        yield new Skip(createID(client, clock), len)\n        clock += len\n      } else if ((binary.BITS5 & info) !== 0) {\n        const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0\n        // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n        // and we read the next string as parentYKey.\n        // It indicates how we store/retrieve parent from `y.share`\n        // @type {string|null}\n        const struct = new Item(\n          createID(client, clock),\n          null, // left\n          (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null, // origin\n          null, // right\n          (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null, // right origin\n          // @ts-ignore Force writing a string here.\n          cantCopyParentInfo ? (decoder.readParentInfo() ? decoder.readString() : decoder.readLeftID()) : null, // parent\n          cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n          readItemContent(decoder, info) // item content\n        )\n        yield struct\n        clock += struct.length\n      } else {\n        const len = decoder.readLen()\n        yield new GC(createID(client, clock), len)\n        clock += len\n      }\n    }\n  }\n}\n\nexport class LazyStructReader {\n  /**\n   * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n   * @param {boolean} filterSkips\n   */\n  constructor (decoder, filterSkips) {\n    this.gen = lazyStructReaderGenerator(decoder)\n    /**\n     * @type {null | Item | Skip | GC}\n     */\n    this.curr = null\n    this.done = false\n    this.filterSkips = filterSkips\n    this.next()\n  }\n\n  /**\n   * @return {Item | GC | Skip |null}\n   */\n  next () {\n    // ignore \"Skip\" structs\n    do {\n      this.curr = this.gen.next().value || null\n    } while (this.filterSkips && this.curr !== null && this.curr.constructor === Skip)\n    return this.curr\n  }\n}\n\n/**\n * @param {Uint8Array} update\n *\n */\nexport const logUpdate = update => logUpdateV2(update, UpdateDecoderV1)\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n *\n */\nexport const logUpdateV2 = (update, YDecoder = UpdateDecoderV2) => {\n  const structs = []\n  const updateDecoder = new YDecoder(decoding.createDecoder(update))\n  const lazyDecoder = new LazyStructReader(updateDecoder, false)\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    structs.push(curr)\n  }\n  logging.print('Structs: ', structs)\n  const ds = readDeleteSet(updateDecoder)\n  logging.print('DeleteSet: ', ds)\n}\n\n/**\n * @param {Uint8Array} update\n *\n */\nexport const decodeUpdate = (update) => decodeUpdateV2(update, UpdateDecoderV1)\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n *\n */\nexport const decodeUpdateV2 = (update, YDecoder = UpdateDecoderV2) => {\n  const structs = []\n  const updateDecoder = new YDecoder(decoding.createDecoder(update))\n  const lazyDecoder = new LazyStructReader(updateDecoder, false)\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    structs.push(curr)\n  }\n  return {\n    structs,\n    ds: readDeleteSet(updateDecoder)\n  }\n}\n\nexport class LazyStructWriter {\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  constructor (encoder) {\n    this.currClient = 0\n    this.startClock = 0\n    this.written = 0\n    this.encoder = encoder\n    /**\n     * We want to write operations lazily, but also we need to know beforehand how many operations we want to write for each client.\n     *\n     * This kind of meta-information (#clients, #structs-per-client-written) is written to the restEncoder.\n     *\n     * We fragment the restEncoder and store a slice of it per-client until we know how many clients there are.\n     * When we flush (toUint8Array) we write the restEncoder using the fragments and the meta-information.\n     *\n     * @type {Array<{ written: number, restEncoder: Uint8Array }>}\n     */\n    this.clientStructs = []\n  }\n}\n\n/**\n * @param {Array<Uint8Array>} updates\n * @return {Uint8Array}\n */\nexport const mergeUpdates = updates => mergeUpdatesV2(updates, UpdateDecoderV1, UpdateEncoderV1)\n\n/**\n * @param {Uint8Array} update\n * @param {typeof DSEncoderV1 | typeof DSEncoderV2} YEncoder\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} YDecoder\n * @return {Uint8Array}\n */\nexport const encodeStateVectorFromUpdateV2 = (update, YEncoder = DSEncoderV2, YDecoder = UpdateDecoderV2) => {\n  const encoder = new YEncoder()\n  const updateDecoder = new LazyStructReader(new YDecoder(decoding.createDecoder(update)), false)\n  let curr = updateDecoder.curr\n  if (curr !== null) {\n    let size = 0\n    let currClient = curr.id.client\n    let stopCounting = curr.id.clock !== 0 // must start at 0\n    let currClock = stopCounting ? 0 : curr.id.clock + curr.length\n    for (; curr !== null; curr = updateDecoder.next()) {\n      if (currClient !== curr.id.client) {\n        if (currClock !== 0) {\n          size++\n          // We found a new client\n          // write what we have to the encoder\n          encoding.writeVarUint(encoder.restEncoder, currClient)\n          encoding.writeVarUint(encoder.restEncoder, currClock)\n        }\n        currClient = curr.id.client\n        currClock = 0\n        stopCounting = curr.id.clock !== 0\n      }\n      // we ignore skips\n      if (curr.constructor === Skip) {\n        stopCounting = true\n      }\n      if (!stopCounting) {\n        currClock = curr.id.clock + curr.length\n      }\n    }\n    // write what we have\n    if (currClock !== 0) {\n      size++\n      encoding.writeVarUint(encoder.restEncoder, currClient)\n      encoding.writeVarUint(encoder.restEncoder, currClock)\n    }\n    // prepend the size of the state vector\n    const enc = encoding.createEncoder()\n    encoding.writeVarUint(enc, size)\n    encoding.writeBinaryEncoder(enc, encoder.restEncoder)\n    encoder.restEncoder = enc\n    return encoder.toUint8Array()\n  } else {\n    encoding.writeVarUint(encoder.restEncoder, 0)\n    return encoder.toUint8Array()\n  }\n}\n\n/**\n * @param {Uint8Array} update\n * @return {Uint8Array}\n */\nexport const encodeStateVectorFromUpdate = update => encodeStateVectorFromUpdateV2(update, DSEncoderV1, UpdateDecoderV1)\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} YDecoder\n * @return {{ from: Map<number,number>, to: Map<number,number> }}\n */\nexport const parseUpdateMetaV2 = (update, YDecoder = UpdateDecoderV2) => {\n  /**\n   * @type {Map<number, number>}\n   */\n  const from = new Map()\n  /**\n   * @type {Map<number, number>}\n   */\n  const to = new Map()\n  const updateDecoder = new LazyStructReader(new YDecoder(decoding.createDecoder(update)), false)\n  let curr = updateDecoder.curr\n  if (curr !== null) {\n    let currClient = curr.id.client\n    let currClock = curr.id.clock\n    // write the beginning to `from`\n    from.set(currClient, currClock)\n    for (; curr !== null; curr = updateDecoder.next()) {\n      if (currClient !== curr.id.client) {\n        // We found a new client\n        // write the end to `to`\n        to.set(currClient, currClock)\n        // write the beginning to `from`\n        from.set(curr.id.client, curr.id.clock)\n        // update currClient\n        currClient = curr.id.client\n      }\n      currClock = curr.id.clock + curr.length\n    }\n    // write the end to `to`\n    to.set(currClient, currClock)\n  }\n  return { from, to }\n}\n\n/**\n * @param {Uint8Array} update\n * @return {{ from: Map<number,number>, to: Map<number,number> }}\n */\nexport const parseUpdateMeta = update => parseUpdateMetaV2(update, UpdateDecoderV1)\n\n/**\n * This method is intended to slice any kind of struct and retrieve the right part.\n * It does not handle side-effects, so it should only be used by the lazy-encoder.\n *\n * @param {Item | GC | Skip} left\n * @param {number} diff\n * @return {Item | GC}\n */\nconst sliceStruct = (left, diff) => {\n  if (left.constructor === GC) {\n    const { client, clock } = left.id\n    return new GC(createID(client, clock + diff), left.length - diff)\n  } else if (left.constructor === Skip) {\n    const { client, clock } = left.id\n    return new Skip(createID(client, clock + diff), left.length - diff)\n  } else {\n    const leftItem = /** @type {Item} */ (left)\n    const { client, clock } = leftItem.id\n    return new Item(\n      createID(client, clock + diff),\n      null,\n      createID(client, clock + diff - 1),\n      null,\n      leftItem.rightOrigin,\n      leftItem.parent,\n      leftItem.parentSub,\n      leftItem.content.splice(diff)\n    )\n  }\n}\n\n/**\n *\n * This function works similarly to `readUpdateV2`.\n *\n * @param {Array<Uint8Array>} updates\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n * @param {typeof UpdateEncoderV1 | typeof UpdateEncoderV2} [YEncoder]\n * @return {Uint8Array}\n */\nexport const mergeUpdatesV2 = (updates, YDecoder = UpdateDecoderV2, YEncoder = UpdateEncoderV2) => {\n  if (updates.length === 1) {\n    return updates[0]\n  }\n  const updateDecoders = updates.map(update => new YDecoder(decoding.createDecoder(update)))\n  let lazyStructDecoders = updateDecoders.map(decoder => new LazyStructReader(decoder, true))\n\n  /**\n   * @todo we don't need offset because we always slice before\n   * @type {null | { struct: Item | GC | Skip, offset: number }}\n   */\n  let currWrite = null\n\n  const updateEncoder = new YEncoder()\n  // write structs lazily\n  const lazyStructEncoder = new LazyStructWriter(updateEncoder)\n\n  // Note: We need to ensure that all lazyStructDecoders are fully consumed\n  // Note: Should merge document updates whenever possible - even from different updates\n  // Note: Should handle that some operations cannot be applied yet ()\n\n  while (true) {\n    // Write higher clients first ⇒ sort by clientID & clock and remove decoders without content\n    lazyStructDecoders = lazyStructDecoders.filter(dec => dec.curr !== null)\n    lazyStructDecoders.sort(\n      /** @type {function(any,any):number} */ (dec1, dec2) => {\n        if (dec1.curr.id.client === dec2.curr.id.client) {\n          const clockDiff = dec1.curr.id.clock - dec2.curr.id.clock\n          if (clockDiff === 0) {\n            // @todo remove references to skip since the structDecoders must filter Skips.\n            return dec1.curr.constructor === dec2.curr.constructor\n              ? 0\n              : dec1.curr.constructor === Skip ? 1 : -1 // we are filtering skips anyway.\n          } else {\n            return clockDiff\n          }\n        } else {\n          return dec2.curr.id.client - dec1.curr.id.client\n        }\n      }\n    )\n    if (lazyStructDecoders.length === 0) {\n      break\n    }\n    const currDecoder = lazyStructDecoders[0]\n    // write from currDecoder until the next operation is from another client or if filler-struct\n    // then we need to reorder the decoders and find the next operation to write\n    const firstClient = /** @type {Item | GC} */ (currDecoder.curr).id.client\n\n    if (currWrite !== null) {\n      let curr = /** @type {Item | GC | null} */ (currDecoder.curr)\n      let iterated = false\n\n      // iterate until we find something that we haven't written already\n      // remember: first the high client-ids are written\n      while (curr !== null && curr.id.clock + curr.length <= currWrite.struct.id.clock + currWrite.struct.length && curr.id.client >= currWrite.struct.id.client) {\n        curr = currDecoder.next()\n        iterated = true\n      }\n      if (\n        curr === null || // current decoder is empty\n        curr.id.client !== firstClient || // check whether there is another decoder that has has updates from `firstClient`\n        (iterated && curr.id.clock > currWrite.struct.id.clock + currWrite.struct.length) // the above while loop was used and we are potentially missing updates\n      ) {\n        continue\n      }\n\n      if (firstClient !== currWrite.struct.id.client) {\n        writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset)\n        currWrite = { struct: curr, offset: 0 }\n        currDecoder.next()\n      } else {\n        if (currWrite.struct.id.clock + currWrite.struct.length < curr.id.clock) {\n          // @todo write currStruct & set currStruct = Skip(clock = currStruct.id.clock + currStruct.length, length = curr.id.clock - self.clock)\n          if (currWrite.struct.constructor === Skip) {\n            // extend existing skip\n            currWrite.struct.length = curr.id.clock + curr.length - currWrite.struct.id.clock\n          } else {\n            writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset)\n            const diff = curr.id.clock - currWrite.struct.id.clock - currWrite.struct.length\n            /**\n             * @type {Skip}\n             */\n            const struct = new Skip(createID(firstClient, currWrite.struct.id.clock + currWrite.struct.length), diff)\n            currWrite = { struct, offset: 0 }\n          }\n        } else { // if (currWrite.struct.id.clock + currWrite.struct.length >= curr.id.clock) {\n          const diff = currWrite.struct.id.clock + currWrite.struct.length - curr.id.clock\n          if (diff > 0) {\n            if (currWrite.struct.constructor === Skip) {\n              // prefer to slice Skip because the other struct might contain more information\n              currWrite.struct.length -= diff\n            } else {\n              curr = sliceStruct(curr, diff)\n            }\n          }\n          if (!currWrite.struct.mergeWith(/** @type {any} */ (curr))) {\n            writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset)\n            currWrite = { struct: curr, offset: 0 }\n            currDecoder.next()\n          }\n        }\n      }\n    } else {\n      currWrite = { struct: /** @type {Item | GC} */ (currDecoder.curr), offset: 0 }\n      currDecoder.next()\n    }\n    for (\n      let next = currDecoder.curr;\n      next !== null && next.id.client === firstClient && next.id.clock === currWrite.struct.id.clock + currWrite.struct.length && next.constructor !== Skip;\n      next = currDecoder.next()\n    ) {\n      writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset)\n      currWrite = { struct: next, offset: 0 }\n    }\n  }\n  if (currWrite !== null) {\n    writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset)\n    currWrite = null\n  }\n  finishLazyStructWriting(lazyStructEncoder)\n\n  const dss = updateDecoders.map(decoder => readDeleteSet(decoder))\n  const ds = mergeDeleteSets(dss)\n  writeDeleteSet(updateEncoder, ds)\n  return updateEncoder.toUint8Array()\n}\n\n/**\n * @param {Uint8Array} update\n * @param {Uint8Array} sv\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n * @param {typeof UpdateEncoderV1 | typeof UpdateEncoderV2} [YEncoder]\n */\nexport const diffUpdateV2 = (update, sv, YDecoder = UpdateDecoderV2, YEncoder = UpdateEncoderV2) => {\n  const state = decodeStateVector(sv)\n  const encoder = new YEncoder()\n  const lazyStructWriter = new LazyStructWriter(encoder)\n  const decoder = new YDecoder(decoding.createDecoder(update))\n  const reader = new LazyStructReader(decoder, false)\n  while (reader.curr) {\n    const curr = reader.curr\n    const currClient = curr.id.client\n    const svClock = state.get(currClient) || 0\n    if (reader.curr.constructor === Skip) {\n      // the first written struct shouldn't be a skip\n      reader.next()\n      continue\n    }\n    if (curr.id.clock + curr.length > svClock) {\n      writeStructToLazyStructWriter(lazyStructWriter, curr, math.max(svClock - curr.id.clock, 0))\n      reader.next()\n      while (reader.curr && reader.curr.id.client === currClient) {\n        writeStructToLazyStructWriter(lazyStructWriter, reader.curr, 0)\n        reader.next()\n      }\n    } else {\n      // read until something new comes up\n      while (reader.curr && reader.curr.id.client === currClient && reader.curr.id.clock + reader.curr.length <= svClock) {\n        reader.next()\n      }\n    }\n  }\n  finishLazyStructWriting(lazyStructWriter)\n  // write ds\n  const ds = readDeleteSet(decoder)\n  writeDeleteSet(encoder, ds)\n  return encoder.toUint8Array()\n}\n\n/**\n * @param {Uint8Array} update\n * @param {Uint8Array} sv\n */\nexport const diffUpdate = (update, sv) => diffUpdateV2(update, sv, UpdateDecoderV1, UpdateEncoderV1)\n\n/**\n * @param {LazyStructWriter} lazyWriter\n */\nconst flushLazyStructWriter = lazyWriter => {\n  if (lazyWriter.written > 0) {\n    lazyWriter.clientStructs.push({ written: lazyWriter.written, restEncoder: encoding.toUint8Array(lazyWriter.encoder.restEncoder) })\n    lazyWriter.encoder.restEncoder = encoding.createEncoder()\n    lazyWriter.written = 0\n  }\n}\n\n/**\n * @param {LazyStructWriter} lazyWriter\n * @param {Item | GC} struct\n * @param {number} offset\n */\nconst writeStructToLazyStructWriter = (lazyWriter, struct, offset) => {\n  // flush curr if we start another client\n  if (lazyWriter.written > 0 && lazyWriter.currClient !== struct.id.client) {\n    flushLazyStructWriter(lazyWriter)\n  }\n  if (lazyWriter.written === 0) {\n    lazyWriter.currClient = struct.id.client\n    // write next client\n    lazyWriter.encoder.writeClient(struct.id.client)\n    // write startClock\n    encoding.writeVarUint(lazyWriter.encoder.restEncoder, struct.id.clock + offset)\n  }\n  struct.write(lazyWriter.encoder, offset)\n  lazyWriter.written++\n}\n/**\n * Call this function when we collected all parts and want to\n * put all the parts together. After calling this method,\n * you can continue using the UpdateEncoder.\n *\n * @param {LazyStructWriter} lazyWriter\n */\nconst finishLazyStructWriting = (lazyWriter) => {\n  flushLazyStructWriter(lazyWriter)\n\n  // this is a fresh encoder because we called flushCurr\n  const restEncoder = lazyWriter.encoder.restEncoder\n\n  /**\n   * Now we put all the fragments together.\n   * This works similarly to `writeClientsStructs`\n   */\n\n  // write # states that were updated - i.e. the clients\n  encoding.writeVarUint(restEncoder, lazyWriter.clientStructs.length)\n\n  for (let i = 0; i < lazyWriter.clientStructs.length; i++) {\n    const partStructs = lazyWriter.clientStructs[i]\n    /**\n     * Works similarly to `writeStructs`\n     */\n    // write # encoded structs\n    encoding.writeVarUint(restEncoder, partStructs.written)\n    // write the rest of the fragment\n    encoding.writeUint8Array(restEncoder, partStructs.restEncoder)\n  }\n}\n\n/**\n * @param {Uint8Array} update\n * @param {function(Item|GC|Skip):Item|GC|Skip} blockTransformer\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} YDecoder\n * @param {typeof UpdateEncoderV2 | typeof UpdateEncoderV1 } YEncoder\n */\nexport const convertUpdateFormat = (update, blockTransformer, YDecoder, YEncoder) => {\n  const updateDecoder = new YDecoder(decoding.createDecoder(update))\n  const lazyDecoder = new LazyStructReader(updateDecoder, false)\n  const updateEncoder = new YEncoder()\n  const lazyWriter = new LazyStructWriter(updateEncoder)\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    writeStructToLazyStructWriter(lazyWriter, blockTransformer(curr), 0)\n  }\n  finishLazyStructWriting(lazyWriter)\n  const ds = readDeleteSet(updateDecoder)\n  writeDeleteSet(updateEncoder, ds)\n  return updateEncoder.toUint8Array()\n}\n\n/**\n * @typedef {Object} ObfuscatorOptions\n * @property {boolean} [ObfuscatorOptions.formatting=true]\n * @property {boolean} [ObfuscatorOptions.subdocs=true]\n * @property {boolean} [ObfuscatorOptions.yxml=true] Whether to obfuscate nodeName / hookName\n */\n\n/**\n * @param {ObfuscatorOptions} obfuscator\n */\nconst createObfuscator = ({ formatting = true, subdocs = true, yxml = true } = {}) => {\n  let i = 0\n  const mapKeyCache = map.create()\n  const nodeNameCache = map.create()\n  const formattingKeyCache = map.create()\n  const formattingValueCache = map.create()\n  formattingValueCache.set(null, null) // end of a formatting range should always be the end of a formatting range\n  /**\n   * @param {Item|GC|Skip} block\n   * @return {Item|GC|Skip}\n   */\n  return block => {\n    switch (block.constructor) {\n      case GC:\n      case Skip:\n        return block\n      case Item: {\n        const item = /** @type {Item} */ (block)\n        const content = item.content\n        switch (content.constructor) {\n          case ContentDeleted:\n            break\n          case ContentType: {\n            if (yxml) {\n              const type = /** @type {ContentType} */ (content).type\n              if (type instanceof YXmlElement) {\n                type.nodeName = map.setIfUndefined(nodeNameCache, type.nodeName, () => 'node-' + i)\n              }\n              if (type instanceof YXmlHook) {\n                type.hookName = map.setIfUndefined(nodeNameCache, type.hookName, () => 'hook-' + i)\n              }\n            }\n            break\n          }\n          case ContentAny: {\n            const c = /** @type {ContentAny} */ (content)\n            c.arr = c.arr.map(() => i)\n            break\n          }\n          case ContentBinary: {\n            const c = /** @type {ContentBinary} */ (content)\n            c.content = new Uint8Array([i])\n            break\n          }\n          case ContentDoc: {\n            const c = /** @type {ContentDoc} */ (content)\n            if (subdocs) {\n              c.opts = {}\n              c.doc.guid = i + ''\n            }\n            break\n          }\n          case ContentEmbed: {\n            const c = /** @type {ContentEmbed} */ (content)\n            c.embed = {}\n            break\n          }\n          case ContentFormat: {\n            const c = /** @type {ContentFormat} */ (content)\n            if (formatting) {\n              c.key = map.setIfUndefined(formattingKeyCache, c.key, () => i + '')\n              c.value = map.setIfUndefined(formattingValueCache, c.value, () => ({ i }))\n            }\n            break\n          }\n          case ContentJSON: {\n            const c = /** @type {ContentJSON} */ (content)\n            c.arr = c.arr.map(() => i)\n            break\n          }\n          case ContentString: {\n            const c = /** @type {ContentString} */ (content)\n            c.str = string.repeat((i % 10) + '', c.str.length)\n            break\n          }\n          default:\n            // unknown content type\n            error.unexpectedCase()\n        }\n        if (item.parentSub) {\n          item.parentSub = map.setIfUndefined(mapKeyCache, item.parentSub, () => i + '')\n        }\n        i++\n        return block\n      }\n      default:\n        // unknown block-type\n        error.unexpectedCase()\n    }\n  }\n}\n\n/**\n * This function obfuscates the content of a Yjs update. This is useful to share\n * buggy Yjs documents while significantly limiting the possibility that a\n * developer can on the user. Note that it might still be possible to deduce\n * some information by analyzing the \"structure\" of the document or by analyzing\n * the typing behavior using the CRDT-related metadata that is still kept fully\n * intact.\n *\n * @param {Uint8Array} update\n * @param {ObfuscatorOptions} [opts]\n */\nexport const obfuscateUpdate = (update, opts) => convertUpdateFormat(update, createObfuscator(opts), UpdateDecoderV1, UpdateEncoderV1)\n\n/**\n * @param {Uint8Array} update\n * @param {ObfuscatorOptions} [opts]\n */\nexport const obfuscateUpdateV2 = (update, opts) => convertUpdateFormat(update, createObfuscator(opts), UpdateDecoderV2, UpdateEncoderV2)\n\n/**\n * @param {Uint8Array} update\n */\nexport const convertUpdateFormatV1ToV2 = update => convertUpdateFormat(update, f.id, UpdateDecoderV1, UpdateEncoderV2)\n\n/**\n * @param {Uint8Array} update\n */\nexport const convertUpdateFormatV2ToV1 = update => convertUpdateFormat(update, f.id, UpdateDecoderV2, UpdateEncoderV1)\n", "\nimport {\n  isDeleted,\n  Item, AbstractType, Transaction, AbstractStruct // eslint-disable-line\n} from '../internals.js'\n\nimport * as set from 'lib0/set'\nimport * as array from 'lib0/array'\n\n/**\n * @template {AbstractType<any>} T\n * YEvent describes the changes on a YType.\n */\nexport class YEvent {\n  /**\n   * @param {T} target The changed type.\n   * @param {Transaction} transaction\n   */\n  constructor (target, transaction) {\n    /**\n     * The type on which this event was created on.\n     * @type {T}\n     */\n    this.target = target\n    /**\n     * The current target on which the observe callback is called.\n     * @type {AbstractType<any>}\n     */\n    this.currentTarget = target\n    /**\n     * The transaction that triggered this event.\n     * @type {Transaction}\n     */\n    this.transaction = transaction\n    /**\n     * @type {Object|null}\n     */\n    this._changes = null\n    /**\n     * @type {null | Map<string, { action: 'add' | 'update' | 'delete', oldValue: any, newValue: any }>}\n     */\n    this._keys = null\n    /**\n     * @type {null | Array<{ insert?: string | Array<any> | object | AbstractType<any>, retain?: number, delete?: number, attributes?: Object<string, any> }>}\n     */\n    this._delta = null\n    /**\n     * @type {Array<string|number>|null}\n     */\n    this._path = null\n  }\n\n  /**\n   * Computes the path from `y` to the changed type.\n   *\n   * @todo v14 should standardize on path: Array<{parent, index}> because that is easier to work with.\n   *\n   * The following property holds:\n   * @example\n   *   let type = y\n   *   event.path.forEach(dir => {\n   *     type = type.get(dir)\n   *   })\n   *   type === event.target // => true\n   */\n  get path () {\n    return this._path || (this._path = getPathTo(this.currentTarget, this.target))\n  }\n\n  /**\n   * Check if a struct is deleted by this event.\n   *\n   * In contrast to change.deleted, this method also returns true if the struct was added and then deleted.\n   *\n   * @param {AbstractStruct} struct\n   * @return {boolean}\n   */\n  deletes (struct) {\n    return isDeleted(this.transaction.deleteSet, struct.id)\n  }\n\n  /**\n   * @type {Map<string, { action: 'add' | 'update' | 'delete', oldValue: any, newValue: any }>}\n   */\n  get keys () {\n    if (this._keys === null) {\n      const keys = new Map()\n      const target = this.target\n      const changed = /** @type Set<string|null> */ (this.transaction.changed.get(target))\n      changed.forEach(key => {\n        if (key !== null) {\n          const item = /** @type {Item} */ (target._map.get(key))\n          /**\n           * @type {'delete' | 'add' | 'update'}\n           */\n          let action\n          let oldValue\n          if (this.adds(item)) {\n            let prev = item.left\n            while (prev !== null && this.adds(prev)) {\n              prev = prev.left\n            }\n            if (this.deletes(item)) {\n              if (prev !== null && this.deletes(prev)) {\n                action = 'delete'\n                oldValue = array.last(prev.content.getContent())\n              } else {\n                return\n              }\n            } else {\n              if (prev !== null && this.deletes(prev)) {\n                action = 'update'\n                oldValue = array.last(prev.content.getContent())\n              } else {\n                action = 'add'\n                oldValue = undefined\n              }\n            }\n          } else {\n            if (this.deletes(item)) {\n              action = 'delete'\n              oldValue = array.last(/** @type {Item} */ item.content.getContent())\n            } else {\n              return // nop\n            }\n          }\n          keys.set(key, { action, oldValue })\n        }\n      })\n      this._keys = keys\n    }\n    return this._keys\n  }\n\n  /**\n   * This is a computed property. Note that this can only be safely computed during the\n   * event call. Computing this property after other changes happened might result in\n   * unexpected behavior (incorrect computation of deltas). A safe way to collect changes\n   * is to store the `changes` or the `delta` object. Avoid storing the `transaction` object.\n   *\n   * @type {Array<{insert?: string | Array<any> | object | AbstractType<any>, retain?: number, delete?: number, attributes?: Object<string, any>}>}\n   */\n  get delta () {\n    return this.changes.delta\n  }\n\n  /**\n   * Check if a struct is added by this event.\n   *\n   * In contrast to change.deleted, this method also returns true if the struct was added and then deleted.\n   *\n   * @param {AbstractStruct} struct\n   * @return {boolean}\n   */\n  adds (struct) {\n    return struct.id.clock >= (this.transaction.beforeState.get(struct.id.client) || 0)\n  }\n\n  /**\n   * This is a computed property. Note that this can only be safely computed during the\n   * event call. Computing this property after other changes happened might result in\n   * unexpected behavior (incorrect computation of deltas). A safe way to collect changes\n   * is to store the `changes` or the `delta` object. Avoid storing the `transaction` object.\n   *\n   * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string, delete?:number, retain?:number}>}}\n   */\n  get changes () {\n    let changes = this._changes\n    if (changes === null) {\n      const target = this.target\n      const added = set.create()\n      const deleted = set.create()\n      /**\n       * @type {Array<{insert:Array<any>}|{delete:number}|{retain:number}>}\n       */\n      const delta = []\n      changes = {\n        added,\n        deleted,\n        delta,\n        keys: this.keys\n      }\n      const changed = /** @type Set<string|null> */ (this.transaction.changed.get(target))\n      if (changed.has(null)) {\n        /**\n         * @type {any}\n         */\n        let lastOp = null\n        const packOp = () => {\n          if (lastOp) {\n            delta.push(lastOp)\n          }\n        }\n        for (let item = target._start; item !== null; item = item.right) {\n          if (item.deleted) {\n            if (this.deletes(item) && !this.adds(item)) {\n              if (lastOp === null || lastOp.delete === undefined) {\n                packOp()\n                lastOp = { delete: 0 }\n              }\n              lastOp.delete += item.length\n              deleted.add(item)\n            } // else nop\n          } else {\n            if (this.adds(item)) {\n              if (lastOp === null || lastOp.insert === undefined) {\n                packOp()\n                lastOp = { insert: [] }\n              }\n              lastOp.insert = lastOp.insert.concat(item.content.getContent())\n              added.add(item)\n            } else {\n              if (lastOp === null || lastOp.retain === undefined) {\n                packOp()\n                lastOp = { retain: 0 }\n              }\n              lastOp.retain += item.length\n            }\n          }\n        }\n        if (lastOp !== null && lastOp.retain === undefined) {\n          packOp()\n        }\n      }\n      this._changes = changes\n    }\n    return /** @type {any} */ (changes)\n  }\n}\n\n/**\n * Compute the path from this type to the specified target.\n *\n * @example\n *   // `child` should be accessible via `type.get(path[0]).get(path[1])..`\n *   const path = type.getPathTo(child)\n *   // assuming `type instanceof YArray`\n *   console.log(path) // might look like => [2, 'key1']\n *   child === type.get(path[0]).get(path[1])\n *\n * @param {AbstractType<any>} parent\n * @param {AbstractType<any>} child target\n * @return {Array<string|number>} Path to the target\n *\n * @private\n * @function\n */\nconst getPathTo = (parent, child) => {\n  const path = []\n  while (child._item !== null && child !== parent) {\n    if (child._item.parentSub !== null) {\n      // parent is map-ish\n      path.unshift(child._item.parentSub)\n    } else {\n      // parent is array-ish\n      let i = 0\n      let c = /** @type {AbstractType<any>} */ (child._item.parent)._start\n      while (c !== child._item && c !== null) {\n        if (!c.deleted) {\n          i++\n        }\n        c = c.right\n      }\n      path.unshift(i)\n    }\n    child = /** @type {AbstractType<any>} */ (child._item.parent)\n  }\n  return path\n}\n", "\nimport {\n  removeEventHandlerListener,\n  callEventHandlerListeners,\n  addEventHandlerListener,\n  createEventHandler,\n  getState,\n  isVisible,\n  ContentType,\n  createID,\n  ContentAny,\n  ContentBinary,\n  getItemCleanStart,\n  ContentDoc, YText, YArray, UpdateEncoderV1, UpdateEncoderV2, Doc, Snapshot, Transaction, EventHandler, YEvent, Item, // eslint-disable-line\n} from '../internals.js'\n\nimport * as map from 'lib0/map'\nimport * as iterator from 'lib0/iterator'\nimport * as error from 'lib0/error'\nimport * as math from 'lib0/math'\n\nconst maxSearchMarker = 80\n\n/**\n * A unique timestamp that identifies each marker.\n *\n * Time is relative,.. this is more like an ever-increasing clock.\n *\n * @type {number}\n */\nlet globalSearchMarkerTimestamp = 0\n\nexport class ArraySearchMarker {\n  /**\n   * @param {Item} p\n   * @param {number} index\n   */\n  constructor (p, index) {\n    p.marker = true\n    this.p = p\n    this.index = index\n    this.timestamp = globalSearchMarkerTimestamp++\n  }\n}\n\n/**\n * @param {ArraySearchMarker} marker\n */\nconst refreshMarkerTimestamp = marker => { marker.timestamp = globalSearchMarkerTimestamp++ }\n\n/**\n * This is rather complex so this function is the only thing that should overwrite a marker\n *\n * @param {ArraySearchMarker} marker\n * @param {Item} p\n * @param {number} index\n */\nconst overwriteMarker = (marker, p, index) => {\n  marker.p.marker = false\n  marker.p = p\n  p.marker = true\n  marker.index = index\n  marker.timestamp = globalSearchMarkerTimestamp++\n}\n\n/**\n * @param {Array<ArraySearchMarker>} searchMarker\n * @param {Item} p\n * @param {number} index\n */\nconst markPosition = (searchMarker, p, index) => {\n  if (searchMarker.length >= maxSearchMarker) {\n    // override oldest marker (we don't want to create more objects)\n    const marker = searchMarker.reduce((a, b) => a.timestamp < b.timestamp ? a : b)\n    overwriteMarker(marker, p, index)\n    return marker\n  } else {\n    // create new marker\n    const pm = new ArraySearchMarker(p, index)\n    searchMarker.push(pm)\n    return pm\n  }\n}\n\n/**\n * Search marker help us to find positions in the associative array faster.\n *\n * They speed up the process of finding a position without much bookkeeping.\n *\n * A maximum of `maxSearchMarker` objects are created.\n *\n * This function always returns a refreshed marker (updated timestamp)\n *\n * @param {AbstractType<any>} yarray\n * @param {number} index\n */\nexport const findMarker = (yarray, index) => {\n  if (yarray._start === null || index === 0 || yarray._searchMarker === null) {\n    return null\n  }\n  const marker = yarray._searchMarker.length === 0 ? null : yarray._searchMarker.reduce((a, b) => math.abs(index - a.index) < math.abs(index - b.index) ? a : b)\n  let p = yarray._start\n  let pindex = 0\n  if (marker !== null) {\n    p = marker.p\n    pindex = marker.index\n    refreshMarkerTimestamp(marker) // we used it, we might need to use it again\n  }\n  // iterate to right if possible\n  while (p.right !== null && pindex < index) {\n    if (!p.deleted && p.countable) {\n      if (index < pindex + p.length) {\n        break\n      }\n      pindex += p.length\n    }\n    p = p.right\n  }\n  // iterate to left if necessary (might be that pindex > index)\n  while (p.left !== null && pindex > index) {\n    p = p.left\n    if (!p.deleted && p.countable) {\n      pindex -= p.length\n    }\n  }\n  // we want to make sure that p can't be merged with left, because that would screw up everything\n  // in that cas just return what we have (it is most likely the best marker anyway)\n  // iterate to left until p can't be merged with left\n  while (p.left !== null && p.left.id.client === p.id.client && p.left.id.clock + p.left.length === p.id.clock) {\n    p = p.left\n    if (!p.deleted && p.countable) {\n      pindex -= p.length\n    }\n  }\n\n  // @todo remove!\n  // assure position\n  // {\n  //   let start = yarray._start\n  //   let pos = 0\n  //   while (start !== p) {\n  //     if (!start.deleted && start.countable) {\n  //       pos += start.length\n  //     }\n  //     start = /** @type {Item} */ (start.right)\n  //   }\n  //   if (pos !== pindex) {\n  //     debugger\n  //     throw new Error('Gotcha position fail!')\n  //   }\n  // }\n  // if (marker) {\n  //   if (window.lengthes == null) {\n  //     window.lengthes = []\n  //     window.getLengthes = () => window.lengthes.sort((a, b) => a - b)\n  //   }\n  //   window.lengthes.push(marker.index - pindex)\n  //   console.log('distance', marker.index - pindex, 'len', p && p.parent.length)\n  // }\n  if (marker !== null && math.abs(marker.index - pindex) < /** @type {YText|YArray<any>} */ (p.parent).length / maxSearchMarker) {\n    // adjust existing marker\n    overwriteMarker(marker, p, pindex)\n    return marker\n  } else {\n    // create new marker\n    return markPosition(yarray._searchMarker, p, pindex)\n  }\n}\n\n/**\n * Update markers when a change happened.\n *\n * This should be called before doing a deletion!\n *\n * @param {Array<ArraySearchMarker>} searchMarker\n * @param {number} index\n * @param {number} len If insertion, len is positive. If deletion, len is negative.\n */\nexport const updateMarkerChanges = (searchMarker, index, len) => {\n  for (let i = searchMarker.length - 1; i >= 0; i--) {\n    const m = searchMarker[i]\n    if (len > 0) {\n      /**\n       * @type {Item|null}\n       */\n      let p = m.p\n      p.marker = false\n      // Ideally we just want to do a simple position comparison, but this will only work if\n      // search markers don't point to deleted items for formats.\n      // Iterate marker to prev undeleted countable position so we know what to do when updating a position\n      while (p && (p.deleted || !p.countable)) {\n        p = p.left\n        if (p && !p.deleted && p.countable) {\n          // adjust position. the loop should break now\n          m.index -= p.length\n        }\n      }\n      if (p === null || p.marker === true) {\n        // remove search marker if updated position is null or if position is already marked\n        searchMarker.splice(i, 1)\n        continue\n      }\n      m.p = p\n      p.marker = true\n    }\n    if (index < m.index || (len > 0 && index === m.index)) { // a simple index <= m.index check would actually suffice\n      m.index = math.max(index, m.index + len)\n    }\n  }\n}\n\n/**\n * Accumulate all (list) children of a type and return them as an Array.\n *\n * @param {AbstractType<any>} t\n * @return {Array<Item>}\n */\nexport const getTypeChildren = t => {\n  let s = t._start\n  const arr = []\n  while (s) {\n    arr.push(s)\n    s = s.right\n  }\n  return arr\n}\n\n/**\n * Call event listeners with an event. This will also add an event to all\n * parents (for `.observeDeep` handlers).\n *\n * @template EventType\n * @param {AbstractType<EventType>} type\n * @param {Transaction} transaction\n * @param {EventType} event\n */\nexport const callTypeObservers = (type, transaction, event) => {\n  const changedType = type\n  const changedParentTypes = transaction.changedParentTypes\n  while (true) {\n    // @ts-ignore\n    map.setIfUndefined(changedParentTypes, type, () => []).push(event)\n    if (type._item === null) {\n      break\n    }\n    type = /** @type {AbstractType<any>} */ (type._item.parent)\n  }\n  callEventHandlerListeners(changedType._eH, event, transaction)\n}\n\n/**\n * @template EventType\n * Abstract Yjs Type class\n */\nexport class AbstractType {\n  constructor () {\n    /**\n     * @type {Item|null}\n     */\n    this._item = null\n    /**\n     * @type {Map<string,Item>}\n     */\n    this._map = new Map()\n    /**\n     * @type {Item|null}\n     */\n    this._start = null\n    /**\n     * @type {Doc|null}\n     */\n    this.doc = null\n    this._length = 0\n    /**\n     * Event handlers\n     * @type {EventHandler<EventType,Transaction>}\n     */\n    this._eH = createEventHandler()\n    /**\n     * Deep event handlers\n     * @type {EventHandler<Array<YEvent<any>>,Transaction>}\n     */\n    this._dEH = createEventHandler()\n    /**\n     * @type {null | Array<ArraySearchMarker>}\n     */\n    this._searchMarker = null\n  }\n\n  /**\n   * @return {AbstractType<any>|null}\n   */\n  get parent () {\n    return this._item ? /** @type {AbstractType<any>} */ (this._item.parent) : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item|null} item\n   */\n  _integrate (y, item) {\n    this.doc = y\n    this._item = item\n  }\n\n  /**\n   * @return {AbstractType<EventType>}\n   */\n  _copy () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @return {AbstractType<EventType>}\n   */\n  clone () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} _encoder\n   */\n  _write (_encoder) { }\n\n  /**\n   * The first non-deleted item\n   */\n  get _first () {\n    let n = this._start\n    while (n !== null && n.deleted) {\n      n = n.right\n    }\n    return n\n  }\n\n  /**\n   * Creates YEvent and calls all type observers.\n   * Must be implemented by each type.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} _parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, _parentSubs) {\n    if (!transaction.local && this._searchMarker) {\n      this._searchMarker.length = 0\n    }\n  }\n\n  /**\n   * Observe all events that are created on this type.\n   *\n   * @param {function(EventType, Transaction):void} f Observer function\n   */\n  observe (f) {\n    addEventHandlerListener(this._eH, f)\n  }\n\n  /**\n   * Observe all events that are created by this type and its children.\n   *\n   * @param {function(Array<YEvent<any>>,Transaction):void} f Observer function\n   */\n  observeDeep (f) {\n    addEventHandlerListener(this._dEH, f)\n  }\n\n  /**\n   * Unregister an observer function.\n   *\n   * @param {function(EventType,Transaction):void} f Observer function\n   */\n  unobserve (f) {\n    removeEventHandlerListener(this._eH, f)\n  }\n\n  /**\n   * Unregister an observer function.\n   *\n   * @param {function(Array<YEvent<any>>,Transaction):void} f Observer function\n   */\n  unobserveDeep (f) {\n    removeEventHandlerListener(this._dEH, f)\n  }\n\n  /**\n   * @abstract\n   * @return {any}\n   */\n  toJSON () {}\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} start\n * @param {number} end\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nexport const typeListSlice = (type, start, end) => {\n  if (start < 0) {\n    start = type._length + start\n  }\n  if (end < 0) {\n    end = type._length + end\n  }\n  let len = end - start\n  const cs = []\n  let n = type._start\n  while (n !== null && len > 0) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent()\n      if (c.length <= start) {\n        start -= c.length\n      } else {\n        for (let i = start; i < c.length && len > 0; i++) {\n          cs.push(c[i])\n          len--\n        }\n        start = 0\n      }\n    }\n    n = n.right\n  }\n  return cs\n}\n\n/**\n * @param {AbstractType<any>} type\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nexport const typeListToArray = type => {\n  const cs = []\n  let n = type._start\n  while (n !== null) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent()\n      for (let i = 0; i < c.length; i++) {\n        cs.push(c[i])\n      }\n    }\n    n = n.right\n  }\n  return cs\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {Snapshot} snapshot\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nexport const typeListToArraySnapshot = (type, snapshot) => {\n  const cs = []\n  let n = type._start\n  while (n !== null) {\n    if (n.countable && isVisible(n, snapshot)) {\n      const c = n.content.getContent()\n      for (let i = 0; i < c.length; i++) {\n        cs.push(c[i])\n      }\n    }\n    n = n.right\n  }\n  return cs\n}\n\n/**\n * Executes a provided function on once on overy element of this YArray.\n *\n * @param {AbstractType<any>} type\n * @param {function(any,number,any):void} f A function to execute on every element of this YArray.\n *\n * @private\n * @function\n */\nexport const typeListForEach = (type, f) => {\n  let index = 0\n  let n = type._start\n  while (n !== null) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent()\n      for (let i = 0; i < c.length; i++) {\n        f(c[i], index++, type)\n      }\n    }\n    n = n.right\n  }\n}\n\n/**\n * @template C,R\n * @param {AbstractType<any>} type\n * @param {function(C,number,AbstractType<any>):R} f\n * @return {Array<R>}\n *\n * @private\n * @function\n */\nexport const typeListMap = (type, f) => {\n  /**\n   * @type {Array<any>}\n   */\n  const result = []\n  typeListForEach(type, (c, i) => {\n    result.push(f(c, i, type))\n  })\n  return result\n}\n\n/**\n * @param {AbstractType<any>} type\n * @return {IterableIterator<any>}\n *\n * @private\n * @function\n */\nexport const typeListCreateIterator = type => {\n  let n = type._start\n  /**\n   * @type {Array<any>|null}\n   */\n  let currentContent = null\n  let currentContentIndex = 0\n  return {\n    [Symbol.iterator] () {\n      return this\n    },\n    next: () => {\n      // find some content\n      if (currentContent === null) {\n        while (n !== null && n.deleted) {\n          n = n.right\n        }\n        // check if we reached the end, no need to check currentContent, because it does not exist\n        if (n === null) {\n          return {\n            done: true,\n            value: undefined\n          }\n        }\n        // we found n, so we can set currentContent\n        currentContent = n.content.getContent()\n        currentContentIndex = 0\n        n = n.right // we used the content of n, now iterate to next\n      }\n      const value = currentContent[currentContentIndex++]\n      // check if we need to empty currentContent\n      if (currentContent.length <= currentContentIndex) {\n        currentContent = null\n      }\n      return {\n        done: false,\n        value\n      }\n    }\n  }\n}\n\n/**\n * Executes a provided function on once on overy element of this YArray.\n * Operates on a snapshotted state of the document.\n *\n * @param {AbstractType<any>} type\n * @param {function(any,number,AbstractType<any>):void} f A function to execute on every element of this YArray.\n * @param {Snapshot} snapshot\n *\n * @private\n * @function\n */\nexport const typeListForEachSnapshot = (type, f, snapshot) => {\n  let index = 0\n  let n = type._start\n  while (n !== null) {\n    if (n.countable && isVisible(n, snapshot)) {\n      const c = n.content.getContent()\n      for (let i = 0; i < c.length; i++) {\n        f(c[i], index++, type)\n      }\n    }\n    n = n.right\n  }\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} index\n * @return {any}\n *\n * @private\n * @function\n */\nexport const typeListGet = (type, index) => {\n  const marker = findMarker(type, index)\n  let n = type._start\n  if (marker !== null) {\n    n = marker.p\n    index -= marker.index\n  }\n  for (; n !== null; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index < n.length) {\n        return n.content.getContent()[index]\n      }\n      index -= n.length\n    }\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {Item?} referenceItem\n * @param {Array<Object<string,any>|Array<any>|boolean|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nexport const typeListInsertGenericsAfter = (transaction, parent, referenceItem, content) => {\n  let left = referenceItem\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  const store = doc.store\n  const right = referenceItem === null ? parent._start : referenceItem.right\n  /**\n   * @type {Array<Object|Array<any>|number|null>}\n   */\n  let jsonContent = []\n  const packJsonContent = () => {\n    if (jsonContent.length > 0) {\n      left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentAny(jsonContent))\n      left.integrate(transaction, 0)\n      jsonContent = []\n    }\n  }\n  content.forEach(c => {\n    if (c === null) {\n      jsonContent.push(c)\n    } else {\n      switch (c.constructor) {\n        case Number:\n        case Object:\n        case Boolean:\n        case Array:\n        case String:\n          jsonContent.push(c)\n          break\n        default:\n          packJsonContent()\n          switch (c.constructor) {\n            case Uint8Array:\n            case ArrayBuffer:\n              left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentBinary(new Uint8Array(/** @type {Uint8Array} */ (c))))\n              left.integrate(transaction, 0)\n              break\n            case Doc:\n              left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentDoc(/** @type {Doc} */ (c)))\n              left.integrate(transaction, 0)\n              break\n            default:\n              if (c instanceof AbstractType) {\n                left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentType(c))\n                left.integrate(transaction, 0)\n              } else {\n                throw new Error('Unexpected content type in insert operation')\n              }\n          }\n      }\n    }\n  })\n  packJsonContent()\n}\n\nconst lengthExceeded = error.create('Length exceeded!')\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @param {Array<Object<string,any>|Array<any>|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nexport const typeListInsertGenerics = (transaction, parent, index, content) => {\n  if (index > parent._length) {\n    throw lengthExceeded\n  }\n  if (index === 0) {\n    if (parent._searchMarker) {\n      updateMarkerChanges(parent._searchMarker, index, content.length)\n    }\n    return typeListInsertGenericsAfter(transaction, parent, null, content)\n  }\n  const startIndex = index\n  const marker = findMarker(parent, index)\n  let n = parent._start\n  if (marker !== null) {\n    n = marker.p\n    index -= marker.index\n    // we need to iterate one to the left so that the algorithm works\n    if (index === 0) {\n      // @todo refactor this as it actually doesn't consider formats\n      n = n.prev // important! get the left undeleted item so that we can actually decrease index\n      index += (n && n.countable && !n.deleted) ? n.length : 0\n    }\n  }\n  for (; n !== null; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index <= n.length) {\n        if (index < n.length) {\n          // insert in-between\n          getItemCleanStart(transaction, createID(n.id.client, n.id.clock + index))\n        }\n        break\n      }\n      index -= n.length\n    }\n  }\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, startIndex, content.length)\n  }\n  return typeListInsertGenericsAfter(transaction, parent, n, content)\n}\n\n/**\n * Pushing content is special as we generally want to push after the last item. So we don't have to update\n * the serach marker.\n *\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {Array<Object<string,any>|Array<any>|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nexport const typeListPushGenerics = (transaction, parent, content) => {\n  // Use the marker with the highest index and iterate to the right.\n  const marker = (parent._searchMarker || []).reduce((maxMarker, currMarker) => currMarker.index > maxMarker.index ? currMarker : maxMarker, { index: 0, p: parent._start })\n  let n = marker.p\n  if (n) {\n    while (n.right) {\n      n = n.right\n    }\n  }\n  return typeListInsertGenericsAfter(transaction, parent, n, content)\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @param {number} length\n *\n * @private\n * @function\n */\nexport const typeListDelete = (transaction, parent, index, length) => {\n  if (length === 0) { return }\n  const startIndex = index\n  const startLength = length\n  const marker = findMarker(parent, index)\n  let n = parent._start\n  if (marker !== null) {\n    n = marker.p\n    index -= marker.index\n  }\n  // compute the first item to be deleted\n  for (; n !== null && index > 0; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index < n.length) {\n        getItemCleanStart(transaction, createID(n.id.client, n.id.clock + index))\n      }\n      index -= n.length\n    }\n  }\n  // delete all items until done\n  while (length > 0 && n !== null) {\n    if (!n.deleted) {\n      if (length < n.length) {\n        getItemCleanStart(transaction, createID(n.id.client, n.id.clock + length))\n      }\n      n.delete(transaction)\n      length -= n.length\n    }\n    n = n.right\n  }\n  if (length > 0) {\n    throw lengthExceeded\n  }\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, startIndex, -startLength + length /* in case we remove the above exception */)\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {string} key\n *\n * @private\n * @function\n */\nexport const typeMapDelete = (transaction, parent, key) => {\n  const c = parent._map.get(key)\n  if (c !== undefined) {\n    c.delete(transaction)\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @param {Object|number|null|Array<any>|string|Uint8Array|AbstractType<any>} value\n *\n * @private\n * @function\n */\nexport const typeMapSet = (transaction, parent, key, value) => {\n  const left = parent._map.get(key) || null\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  let content\n  if (value == null) {\n    content = new ContentAny([value])\n  } else {\n    switch (value.constructor) {\n      case Number:\n      case Object:\n      case Boolean:\n      case Array:\n      case String:\n        content = new ContentAny([value])\n        break\n      case Uint8Array:\n        content = new ContentBinary(/** @type {Uint8Array} */ (value))\n        break\n      case Doc:\n        content = new ContentDoc(/** @type {Doc} */ (value))\n        break\n      default:\n        if (value instanceof AbstractType) {\n          content = new ContentType(value)\n        } else {\n          throw new Error('Unexpected content type')\n        }\n    }\n  }\n  new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, null, null, parent, key, content).integrate(transaction, 0)\n}\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @return {Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined}\n *\n * @private\n * @function\n */\nexport const typeMapGet = (parent, key) => {\n  const val = parent._map.get(key)\n  return val !== undefined && !val.deleted ? val.content.getContent()[val.length - 1] : undefined\n}\n\n/**\n * @param {AbstractType<any>} parent\n * @return {Object<string,Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined>}\n *\n * @private\n * @function\n */\nexport const typeMapGetAll = (parent) => {\n  /**\n   * @type {Object<string,any>}\n   */\n  const res = {}\n  parent._map.forEach((value, key) => {\n    if (!value.deleted) {\n      res[key] = value.content.getContent()[value.length - 1]\n    }\n  })\n  return res\n}\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @return {boolean}\n *\n * @private\n * @function\n */\nexport const typeMapHas = (parent, key) => {\n  const val = parent._map.get(key)\n  return val !== undefined && !val.deleted\n}\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @param {Snapshot} snapshot\n * @return {Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined}\n *\n * @private\n * @function\n */\nexport const typeMapGetSnapshot = (parent, key, snapshot) => {\n  let v = parent._map.get(key) || null\n  while (v !== null && (!snapshot.sv.has(v.id.client) || v.id.clock >= (snapshot.sv.get(v.id.client) || 0))) {\n    v = v.left\n  }\n  return v !== null && isVisible(v, snapshot) ? v.content.getContent()[v.length - 1] : undefined\n}\n\n/**\n * @param {Map<string,Item>} map\n * @return {IterableIterator<Array<any>>}\n *\n * @private\n * @function\n */\nexport const createMapIterator = map => iterator.iteratorFilter(map.entries(), /** @param {any} entry */ entry => !entry[1].deleted)\n", "/**\n * @module YArray\n */\n\nimport {\n  YEvent,\n  AbstractType,\n  typeListGet,\n  typeListToArray,\n  typeListForEach,\n  typeListCreateIterator,\n  typeListInsertGenerics,\n  typeListPushGenerics,\n  typeListDelete,\n  typeListMap,\n  YArrayRefID,\n  callTypeObservers,\n  transact,\n  ArraySearchMarker, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Doc, Transaction, Item // eslint-disable-line\n} from '../internals.js'\nimport { typeListSlice } from './AbstractType.js'\n\n/**\n * Event that describes the changes on a YArray\n * @template T\n * @extends YEvent<YArray<T>>\n */\nexport class YArrayEvent extends YEvent {\n  /**\n   * @param {YArray<T>} yarray The changed type\n   * @param {Transaction} transaction The transaction object\n   */\n  constructor (yarray, transaction) {\n    super(yarray, transaction)\n    this._transaction = transaction\n  }\n}\n\n/**\n * A shared Array implementation.\n * @template T\n * @extends AbstractType<YArrayEvent<T>>\n * @implements {Iterable<T>}\n */\nexport class YArray extends AbstractType {\n  constructor () {\n    super()\n    /**\n     * @type {Array<any>?}\n     * @private\n     */\n    this._prelimContent = []\n    /**\n     * @type {Array<ArraySearchMarker>}\n     */\n    this._searchMarker = []\n  }\n\n  /**\n   * Construct a new YArray containing the specified items.\n   * @template {Object<string,any>|Array<any>|number|null|string|Uint8Array} T\n   * @param {Array<T>} items\n   * @return {YArray<T>}\n   */\n  static from (items) {\n    /**\n     * @type {YArray<T>}\n     */\n    const a = new YArray()\n    a.push(items)\n    return a\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    this.insert(0, /** @type {Array<any>} */ (this._prelimContent))\n    this._prelimContent = null\n  }\n\n  /**\n   * @return {YArray<T>}\n   */\n  _copy () {\n    return new YArray()\n  }\n\n  /**\n   * @return {YArray<T>}\n   */\n  clone () {\n    /**\n     * @type {YArray<T>}\n     */\n    const arr = new YArray()\n    arr.insert(0, this.toArray().map(el =>\n      el instanceof AbstractType ? /** @type {typeof el} */ (el.clone()) : el\n    ))\n    return arr\n  }\n\n  get length () {\n    return this._prelimContent === null ? this._length : this._prelimContent.length\n  }\n\n  /**\n   * Creates YArrayEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    super._callObserver(transaction, parentSubs)\n    callTypeObservers(this, transaction, new YArrayEvent(this, transaction))\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * Important: This function expects an array of content. Not just a content\n   * object. The reason for this \"weirdness\" is that inserting several elements\n   * is very efficient when it is done as a single operation.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  yarray.insert(0, ['a'])\n   *  // Insert numbers 1, 2 at position 1\n   *  yarray.insert(1, [1, 2])\n   *\n   * @param {number} index The index to insert content at.\n   * @param {Array<T>} content The array of content\n   */\n  insert (index, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListInsertGenerics(transaction, this, index, /** @type {any} */ (content))\n      })\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).splice(index, 0, ...content)\n    }\n  }\n\n  /**\n   * Appends content to this YArray.\n   *\n   * @param {Array<T>} content Array of content to append.\n   *\n   * @todo Use the following implementation in all types.\n   */\n  push (content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListPushGenerics(transaction, this, /** @type {any} */ (content))\n      })\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).push(...content)\n    }\n  }\n\n  /**\n   * Preppends content to this YArray.\n   *\n   * @param {Array<T>} content Array of content to preppend.\n   */\n  unshift (content) {\n    this.insert(0, content)\n  }\n\n  /**\n   * Deletes elements starting from an index.\n   *\n   * @param {number} index Index at which to start deleting elements\n   * @param {number} length The number of elements to remove. Defaults to 1.\n   */\n  delete (index, length = 1) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListDelete(transaction, this, index, length)\n      })\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).splice(index, length)\n    }\n  }\n\n  /**\n   * Returns the i-th element from a YArray.\n   *\n   * @param {number} index The index of the element to return from the YArray\n   * @return {T}\n   */\n  get (index) {\n    return typeListGet(this, index)\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @return {Array<T>}\n   */\n  toArray () {\n    return typeListToArray(this)\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {Array<T>}\n   */\n  slice (start = 0, end = this.length) {\n    return typeListSlice(this, start, end)\n  }\n\n  /**\n   * Transforms this Shared Type to a JSON object.\n   *\n   * @return {Array<any>}\n   */\n  toJSON () {\n    return this.map(c => c instanceof AbstractType ? c.toJSON() : c)\n  }\n\n  /**\n   * Returns an Array with the result of calling a provided function on every\n   * element of this YArray.\n   *\n   * @template M\n   * @param {function(T,number,YArray<T>):M} f Function that produces an element of the new Array\n   * @return {Array<M>} A new array with each element being the result of the\n   *                 callback function\n   */\n  map (f) {\n    return typeListMap(this, /** @type {any} */ (f))\n  }\n\n  /**\n   * Executes a provided function once on overy element of this YArray.\n   *\n   * @param {function(T,number,YArray<T>):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    typeListForEach(this, f)\n  }\n\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return typeListCreateIterator(this)\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YArrayRefID)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n *\n * @private\n * @function\n */\nexport const readYArray = _decoder => new YArray()\n", "\n/**\n * @module YMap\n */\n\nimport {\n  YEvent,\n  AbstractType,\n  typeMapDelete,\n  typeMapSet,\n  typeMapGet,\n  typeMapHas,\n  createMapIterator,\n  YMapRefID,\n  callTypeObservers,\n  transact,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Doc, Transaction, Item // eslint-disable-line\n} from '../internals.js'\n\nimport * as iterator from 'lib0/iterator'\n\n/**\n * @template T\n * @extends YEvent<YMap<T>>\n * Event that describes the changes on a YMap.\n */\nexport class YMapEvent extends YEvent {\n  /**\n   * @param {YMap<T>} ymap The YArray that changed.\n   * @param {Transaction} transaction\n   * @param {Set<any>} subs The keys that changed.\n   */\n  constructor (ymap, transaction, subs) {\n    super(ymap, transaction)\n    this.keysChanged = subs\n  }\n}\n\n/**\n * @template MapType\n * A shared Map implementation.\n *\n * @extends AbstractType<YMapEvent<MapType>>\n * @implements {Iterable<MapType>}\n */\nexport class YMap extends AbstractType {\n  /**\n   *\n   * @param {Iterable<readonly [string, any]>=} entries - an optional iterable to initialize the YMap\n   */\n  constructor (entries) {\n    super()\n    /**\n     * @type {Map<string,any>?}\n     * @private\n     */\n    this._prelimContent = null\n\n    if (entries === undefined) {\n      this._prelimContent = new Map()\n    } else {\n      this._prelimContent = new Map(entries)\n    }\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    ;/** @type {Map<string, any>} */ (this._prelimContent).forEach((value, key) => {\n      this.set(key, value)\n    })\n    this._prelimContent = null\n  }\n\n  /**\n   * @return {YMap<MapType>}\n   */\n  _copy () {\n    return new YMap()\n  }\n\n  /**\n   * @return {YMap<MapType>}\n   */\n  clone () {\n    /**\n     * @type {YMap<MapType>}\n     */\n    const map = new YMap()\n    this.forEach((value, key) => {\n      map.set(key, value instanceof AbstractType ? /** @type {typeof value} */ (value.clone()) : value)\n    })\n    return map\n  }\n\n  /**\n   * Creates YMapEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    callTypeObservers(this, transaction, new YMapEvent(this, transaction, parentSubs))\n  }\n\n  /**\n   * Transforms this Shared Type to a JSON object.\n   *\n   * @return {Object<string,any>}\n   */\n  toJSON () {\n    /**\n     * @type {Object<string,MapType>}\n     */\n    const map = {}\n    this._map.forEach((item, key) => {\n      if (!item.deleted) {\n        const v = item.content.getContent()[item.length - 1]\n        map[key] = v instanceof AbstractType ? v.toJSON() : v\n      }\n    })\n    return map\n  }\n\n  /**\n   * Returns the size of the YMap (count of key/value pairs)\n   *\n   * @return {number}\n   */\n  get size () {\n    return [...createMapIterator(this._map)].length\n  }\n\n  /**\n   * Returns the keys for each element in the YMap Type.\n   *\n   * @return {IterableIterator<string>}\n   */\n  keys () {\n    return iterator.iteratorMap(createMapIterator(this._map), /** @param {any} v */ v => v[0])\n  }\n\n  /**\n   * Returns the values for each element in the YMap Type.\n   *\n   * @return {IterableIterator<any>}\n   */\n  values () {\n    return iterator.iteratorMap(createMapIterator(this._map), /** @param {any} v */ v => v[1].content.getContent()[v[1].length - 1])\n  }\n\n  /**\n   * Returns an Iterator of [key, value] pairs\n   *\n   * @return {IterableIterator<any>}\n   */\n  entries () {\n    return iterator.iteratorMap(createMapIterator(this._map), /** @param {any} v */ v => [v[0], v[1].content.getContent()[v[1].length - 1]])\n  }\n\n  /**\n   * Executes a provided function on once on every key-value pair.\n   *\n   * @param {function(MapType,string,YMap<MapType>):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    this._map.forEach((item, key) => {\n      if (!item.deleted) {\n        f(item.content.getContent()[item.length - 1], key, this)\n      }\n    })\n  }\n\n  /**\n   * Returns an Iterator of [key, value] pairs\n   *\n   * @return {IterableIterator<any>}\n   */\n  [Symbol.iterator] () {\n    return this.entries()\n  }\n\n  /**\n   * Remove a specified element from this YMap.\n   *\n   * @param {string} key The key of the element to remove.\n   */\n  delete (key) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, key)\n      })\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).delete(key)\n    }\n  }\n\n  /**\n   * Adds or updates an element with a specified key and value.\n   * @template {MapType} VAL\n   *\n   * @param {string} key The key of the element to add to this YMap\n   * @param {VAL} value The value of the element to add\n   * @return {VAL}\n   */\n  set (key, value) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, key, /** @type {any} */ (value))\n      })\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).set(key, value)\n    }\n    return value\n  }\n\n  /**\n   * Returns a specified element from this YMap.\n   *\n   * @param {string} key\n   * @return {MapType|undefined}\n   */\n  get (key) {\n    return /** @type {any} */ (typeMapGet(this, key))\n  }\n\n  /**\n   * Returns a boolean indicating whether the specified key exists or not.\n   *\n   * @param {string} key The key to test.\n   * @return {boolean}\n   */\n  has (key) {\n    return typeMapHas(this, key)\n  }\n\n  /**\n   * Removes all elements from this YMap.\n   */\n  clear () {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        this.forEach(function (_value, key, map) {\n          typeMapDelete(transaction, map, key)\n        })\n      })\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).clear()\n    }\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YMapRefID)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n *\n * @private\n * @function\n */\nexport const readYMap = _decoder => new YMap()\n", "\n/**\n * @module YText\n */\n\nimport {\n  YEvent,\n  AbstractType,\n  getItemCleanStart,\n  getState,\n  isVisible,\n  createID,\n  YTextRefID,\n  callTypeObservers,\n  transact,\n  ContentEmbed,\n  GC,\n  ContentFormat,\n  ContentString,\n  splitSnapshotAffectedStructs,\n  iterateDeletedStructs,\n  iterateStructs,\n  findMarker,\n  typeMapDelete,\n  typeMapSet,\n  typeMapGet,\n  typeMapGetAll,\n  updateMarkerChanges,\n  ContentType,\n  ArraySearchMarker, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, ID, Doc, Item, Snapshot, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as object from 'lib0/object'\nimport * as map from 'lib0/map'\nimport * as error from 'lib0/error'\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nconst equalAttrs = (a, b) => a === b || (typeof a === 'object' && typeof b === 'object' && a && b && object.equalFlat(a, b))\n\nexport class ItemTextListPosition {\n  /**\n   * @param {Item|null} left\n   * @param {Item|null} right\n   * @param {number} index\n   * @param {Map<string,any>} currentAttributes\n   */\n  constructor (left, right, index, currentAttributes) {\n    this.left = left\n    this.right = right\n    this.index = index\n    this.currentAttributes = currentAttributes\n  }\n\n  /**\n   * Only call this if you know that this.right is defined\n   */\n  forward () {\n    if (this.right === null) {\n      error.unexpectedCase()\n    }\n    switch (this.right.content.constructor) {\n      case ContentFormat:\n        if (!this.right.deleted) {\n          updateCurrentAttributes(this.currentAttributes, /** @type {ContentFormat} */ (this.right.content))\n        }\n        break\n      default:\n        if (!this.right.deleted) {\n          this.index += this.right.length\n        }\n        break\n    }\n    this.left = this.right\n    this.right = this.right.right\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {ItemTextListPosition} pos\n * @param {number} count steps to move forward\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst findNextPosition = (transaction, pos, count) => {\n  while (pos.right !== null && count > 0) {\n    switch (pos.right.content.constructor) {\n      case ContentFormat:\n        if (!pos.right.deleted) {\n          updateCurrentAttributes(pos.currentAttributes, /** @type {ContentFormat} */ (pos.right.content))\n        }\n        break\n      default:\n        if (!pos.right.deleted) {\n          if (count < pos.right.length) {\n            // split right\n            getItemCleanStart(transaction, createID(pos.right.id.client, pos.right.id.clock + count))\n          }\n          pos.index += pos.right.length\n          count -= pos.right.length\n        }\n        break\n    }\n    pos.left = pos.right\n    pos.right = pos.right.right\n    // pos.forward() - we don't forward because that would halve the performance because we already do the checks above\n  }\n  return pos\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst findPosition = (transaction, parent, index) => {\n  const currentAttributes = new Map()\n  const marker = findMarker(parent, index)\n  if (marker) {\n    const pos = new ItemTextListPosition(marker.p.left, marker.p, marker.index, currentAttributes)\n    return findNextPosition(transaction, pos, index - marker.index)\n  } else {\n    const pos = new ItemTextListPosition(null, parent._start, 0, currentAttributes)\n    return findNextPosition(transaction, pos, index)\n  }\n}\n\n/**\n * Negate applied formats\n *\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {Map<string,any>} negatedAttributes\n *\n * @private\n * @function\n */\nconst insertNegatedAttributes = (transaction, parent, currPos, negatedAttributes) => {\n  // check if we really need to remove attributes\n  while (\n    currPos.right !== null && (\n      currPos.right.deleted === true || (\n        currPos.right.content.constructor === ContentFormat &&\n        equalAttrs(negatedAttributes.get(/** @type {ContentFormat} */ (currPos.right.content).key), /** @type {ContentFormat} */ (currPos.right.content).value)\n      )\n    )\n  ) {\n    if (!currPos.right.deleted) {\n      negatedAttributes.delete(/** @type {ContentFormat} */ (currPos.right.content).key)\n    }\n    currPos.forward()\n  }\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  negatedAttributes.forEach((val, key) => {\n    const left = currPos.left\n    const right = currPos.right\n    const nextFormat = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentFormat(key, val))\n    nextFormat.integrate(transaction, 0)\n    currPos.right = nextFormat\n    currPos.forward()\n  })\n}\n\n/**\n * @param {Map<string,any>} currentAttributes\n * @param {ContentFormat} format\n *\n * @private\n * @function\n */\nconst updateCurrentAttributes = (currentAttributes, format) => {\n  const { key, value } = format\n  if (value === null) {\n    currentAttributes.delete(key)\n  } else {\n    currentAttributes.set(key, value)\n  }\n}\n\n/**\n * @param {ItemTextListPosition} currPos\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n */\nconst minimizeAttributeChanges = (currPos, attributes) => {\n  // go right while attributes[right.key] === right.value (or right is deleted)\n  while (true) {\n    if (currPos.right === null) {\n      break\n    } else if (currPos.right.deleted || (currPos.right.content.constructor === ContentFormat && equalAttrs(attributes[(/** @type {ContentFormat} */ (currPos.right.content)).key] || null, /** @type {ContentFormat} */ (currPos.right.content).value))) {\n      //\n    } else {\n      break\n    }\n    currPos.forward()\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {Object<string,any>} attributes\n * @return {Map<string,any>}\n *\n * @private\n * @function\n **/\nconst insertAttributes = (transaction, parent, currPos, attributes) => {\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  const negatedAttributes = new Map()\n  // insert format-start items\n  for (const key in attributes) {\n    const val = attributes[key]\n    const currentVal = currPos.currentAttributes.get(key) || null\n    if (!equalAttrs(currentVal, val)) {\n      // save negated attribute (set null if currentVal undefined)\n      negatedAttributes.set(key, currentVal)\n      const { left, right } = currPos\n      currPos.right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentFormat(key, val))\n      currPos.right.integrate(transaction, 0)\n      currPos.forward()\n    }\n  }\n  return negatedAttributes\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {string|object|AbstractType<any>} text\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n **/\nconst insertText = (transaction, parent, currPos, text, attributes) => {\n  currPos.currentAttributes.forEach((_val, key) => {\n    if (attributes[key] === undefined) {\n      attributes[key] = null\n    }\n  })\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  minimizeAttributeChanges(currPos, attributes)\n  const negatedAttributes = insertAttributes(transaction, parent, currPos, attributes)\n  // insert content\n  const content = text.constructor === String ? new ContentString(/** @type {string} */ (text)) : (text instanceof AbstractType ? new ContentType(text) : new ContentEmbed(text))\n  let { left, right, index } = currPos\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, currPos.index, content.getLength())\n  }\n  right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, content)\n  right.integrate(transaction, 0)\n  currPos.right = right\n  currPos.index = index\n  currPos.forward()\n  insertNegatedAttributes(transaction, parent, currPos, negatedAttributes)\n}\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {number} length\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n */\nconst formatText = (transaction, parent, currPos, length, attributes) => {\n  const doc = transaction.doc\n  const ownClientId = doc.clientID\n  minimizeAttributeChanges(currPos, attributes)\n  const negatedAttributes = insertAttributes(transaction, parent, currPos, attributes)\n  // iterate until first non-format or null is found\n  // delete all formats with attributes[format.key] != null\n  // also check the attributes after the first non-format as we do not want to insert redundant negated attributes there\n  // eslint-disable-next-line no-labels\n  iterationLoop: while (\n    currPos.right !== null &&\n    (length > 0 ||\n      (\n        negatedAttributes.size > 0 &&\n        (currPos.right.deleted || currPos.right.content.constructor === ContentFormat)\n      )\n    )\n  ) {\n    if (!currPos.right.deleted) {\n      switch (currPos.right.content.constructor) {\n        case ContentFormat: {\n          const { key, value } = /** @type {ContentFormat} */ (currPos.right.content)\n          const attr = attributes[key]\n          if (attr !== undefined) {\n            if (equalAttrs(attr, value)) {\n              negatedAttributes.delete(key)\n            } else {\n              if (length === 0) {\n                // no need to further extend negatedAttributes\n                // eslint-disable-next-line no-labels\n                break iterationLoop\n              }\n              negatedAttributes.set(key, value)\n            }\n            currPos.right.delete(transaction)\n          } else {\n            currPos.currentAttributes.set(key, value)\n          }\n          break\n        }\n        default:\n          if (length < currPos.right.length) {\n            getItemCleanStart(transaction, createID(currPos.right.id.client, currPos.right.id.clock + length))\n          }\n          length -= currPos.right.length\n          break\n      }\n    }\n    currPos.forward()\n  }\n  // Quill just assumes that the editor starts with a newline and that it always\n  // ends with a newline. We only insert that newline when a new newline is\n  // inserted - i.e when length is bigger than type.length\n  if (length > 0) {\n    let newlines = ''\n    for (; length > 0; length--) {\n      newlines += '\\n'\n    }\n    currPos.right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), currPos.left, currPos.left && currPos.left.lastId, currPos.right, currPos.right && currPos.right.id, parent, null, new ContentString(newlines))\n    currPos.right.integrate(transaction, 0)\n    currPos.forward()\n  }\n  insertNegatedAttributes(transaction, parent, currPos, negatedAttributes)\n}\n\n/**\n * Call this function after string content has been deleted in order to\n * clean up formatting Items.\n *\n * @param {Transaction} transaction\n * @param {Item} start\n * @param {Item|null} curr exclusive end, automatically iterates to the next Content Item\n * @param {Map<string,any>} startAttributes\n * @param {Map<string,any>} currAttributes\n * @return {number} The amount of formatting Items deleted.\n *\n * @function\n */\nconst cleanupFormattingGap = (transaction, start, curr, startAttributes, currAttributes) => {\n  /**\n   * @type {Item|null}\n   */\n  let end = start\n  /**\n   * @type {Map<string,ContentFormat>}\n   */\n  const endFormats = map.create()\n  while (end && (!end.countable || end.deleted)) {\n    if (!end.deleted && end.content.constructor === ContentFormat) {\n      const cf = /** @type {ContentFormat} */ (end.content)\n      endFormats.set(cf.key, cf)\n    }\n    end = end.right\n  }\n  let cleanups = 0\n  let reachedCurr = false\n  while (start !== end) {\n    if (curr === start) {\n      reachedCurr = true\n    }\n    if (!start.deleted) {\n      const content = start.content\n      switch (content.constructor) {\n        case ContentFormat: {\n          const { key, value } = /** @type {ContentFormat} */ (content)\n          const startAttrValue = startAttributes.get(key) || null\n          if (endFormats.get(key) !== content || startAttrValue === value) {\n            // Either this format is overwritten or it is not necessary because the attribute already existed.\n            start.delete(transaction)\n            cleanups++\n            if (!reachedCurr && (currAttributes.get(key) || null) === value && startAttrValue !== value) {\n              if (startAttrValue === null) {\n                currAttributes.delete(key)\n              } else {\n                currAttributes.set(key, startAttrValue)\n              }\n            }\n          }\n          if (!reachedCurr && !start.deleted) {\n            updateCurrentAttributes(currAttributes, /** @type {ContentFormat} */ (content))\n          }\n          break\n        }\n      }\n    }\n    start = /** @type {Item} */ (start.right)\n  }\n  return cleanups\n}\n\n/**\n * @param {Transaction} transaction\n * @param {Item | null} item\n */\nconst cleanupContextlessFormattingGap = (transaction, item) => {\n  // iterate until item.right is null or content\n  while (item && item.right && (item.right.deleted || !item.right.countable)) {\n    item = item.right\n  }\n  const attrs = new Set()\n  // iterate back until a content item is found\n  while (item && (item.deleted || !item.countable)) {\n    if (!item.deleted && item.content.constructor === ContentFormat) {\n      const key = /** @type {ContentFormat} */ (item.content).key\n      if (attrs.has(key)) {\n        item.delete(transaction)\n      } else {\n        attrs.add(key)\n      }\n    }\n    item = item.left\n  }\n}\n\n/**\n * This function is experimental and subject to change / be removed.\n *\n * Ideally, we don't need this function at all. Formatting attributes should be cleaned up\n * automatically after each change. This function iterates twice over the complete YText type\n * and removes unnecessary formatting attributes. This is also helpful for testing.\n *\n * This function won't be exported anymore as soon as there is confidence that the YText type works as intended.\n *\n * @param {YText} type\n * @return {number} How many formatting attributes have been cleaned up.\n */\nexport const cleanupYTextFormatting = type => {\n  let res = 0\n  transact(/** @type {Doc} */ (type.doc), transaction => {\n    let start = /** @type {Item} */ (type._start)\n    let end = type._start\n    let startAttributes = map.create()\n    const currentAttributes = map.copy(startAttributes)\n    while (end) {\n      if (end.deleted === false) {\n        switch (end.content.constructor) {\n          case ContentFormat:\n            updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (end.content))\n            break\n          default:\n            res += cleanupFormattingGap(transaction, start, end, startAttributes, currentAttributes)\n            startAttributes = map.copy(currentAttributes)\n            start = end\n            break\n        }\n      }\n      end = end.right\n    }\n  })\n  return res\n}\n\n/**\n * This will be called by the transction once the event handlers are called to potentially cleanup\n * formatting attributes.\n *\n * @param {Transaction} transaction\n */\nexport const cleanupYTextAfterTransaction = transaction => {\n  /**\n   * @type {Set<YText>}\n   */\n  const needFullCleanup = new Set()\n  // check if another formatting item was inserted\n  const doc = transaction.doc\n  for (const [client, afterClock] of transaction.afterState.entries()) {\n    const clock = transaction.beforeState.get(client) || 0\n    if (afterClock === clock) {\n      continue\n    }\n    iterateStructs(transaction, /** @type {Array<Item|GC>} */ (doc.store.clients.get(client)), clock, afterClock, item => {\n      if (\n        !item.deleted && /** @type {Item} */ (item).content.constructor === ContentFormat && item.constructor !== GC\n      ) {\n        needFullCleanup.add(/** @type {any} */ (item).parent)\n      }\n    })\n  }\n  // cleanup in a new transaction\n  transact(doc, (t) => {\n    iterateDeletedStructs(transaction, transaction.deleteSet, item => {\n      if (item instanceof GC || !(/** @type {YText} */ (item.parent)._hasFormatting) || needFullCleanup.has(/** @type {YText} */ (item.parent))) {\n        return\n      }\n      const parent = /** @type {YText} */ (item.parent)\n      if (item.content.constructor === ContentFormat) {\n        needFullCleanup.add(parent)\n      } else {\n        // If no formatting attribute was inserted or deleted, we can make due with contextless\n        // formatting cleanups.\n        // Contextless: it is not necessary to compute currentAttributes for the affected position.\n        cleanupContextlessFormattingGap(t, item)\n      }\n    })\n    // If a formatting item was inserted, we simply clean the whole type.\n    // We need to compute currentAttributes for the current position anyway.\n    for (const yText of needFullCleanup) {\n      cleanupYTextFormatting(yText)\n    }\n  })\n}\n\n/**\n * @param {Transaction} transaction\n * @param {ItemTextListPosition} currPos\n * @param {number} length\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst deleteText = (transaction, currPos, length) => {\n  const startLength = length\n  const startAttrs = map.copy(currPos.currentAttributes)\n  const start = currPos.right\n  while (length > 0 && currPos.right !== null) {\n    if (currPos.right.deleted === false) {\n      switch (currPos.right.content.constructor) {\n        case ContentType:\n        case ContentEmbed:\n        case ContentString:\n          if (length < currPos.right.length) {\n            getItemCleanStart(transaction, createID(currPos.right.id.client, currPos.right.id.clock + length))\n          }\n          length -= currPos.right.length\n          currPos.right.delete(transaction)\n          break\n      }\n    }\n    currPos.forward()\n  }\n  if (start) {\n    cleanupFormattingGap(transaction, start, currPos.right, startAttrs, currPos.currentAttributes)\n  }\n  const parent = /** @type {AbstractType<any>} */ (/** @type {Item} */ (currPos.left || currPos.right).parent)\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, currPos.index, -startLength + length)\n  }\n  return currPos\n}\n\n/**\n * The Quill Delta format represents changes on a text document with\n * formatting information. For mor information visit {@link https://quilljs.com/docs/delta/|Quill Delta}\n *\n * @example\n *   {\n *     ops: [\n *       { insert: 'Gandalf', attributes: { bold: true } },\n *       { insert: ' the ' },\n *       { insert: 'Grey', attributes: { color: '#cccccc' } }\n *     ]\n *   }\n *\n */\n\n/**\n  * Attributes that can be assigned to a selection of text.\n  *\n  * @example\n  *   {\n  *     bold: true,\n  *     font-size: '40px'\n  *   }\n  *\n  * @typedef {Object} TextAttributes\n  */\n\n/**\n * @extends YEvent<YText>\n * Event that describes the changes on a YText type.\n */\nexport class YTextEvent extends YEvent {\n  /**\n   * @param {YText} ytext\n   * @param {Transaction} transaction\n   * @param {Set<any>} subs The keys that changed\n   */\n  constructor (ytext, transaction, subs) {\n    super(ytext, transaction)\n    /**\n     * Whether the children changed.\n     * @type {Boolean}\n     * @private\n     */\n    this.childListChanged = false\n    /**\n     * Set of all changed attributes.\n     * @type {Set<string>}\n     */\n    this.keysChanged = new Set()\n    subs.forEach((sub) => {\n      if (sub === null) {\n        this.childListChanged = true\n      } else {\n        this.keysChanged.add(sub)\n      }\n    })\n  }\n\n  /**\n   * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string, delete?:number, retain?:number}>}}\n   */\n  get changes () {\n    if (this._changes === null) {\n      /**\n       * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string|AbstractType<any>|object, delete?:number, retain?:number}>}}\n       */\n      const changes = {\n        keys: this.keys,\n        delta: this.delta,\n        added: new Set(),\n        deleted: new Set()\n      }\n      this._changes = changes\n    }\n    return /** @type {any} */ (this._changes)\n  }\n\n  /**\n   * Compute the changes in the delta format.\n   * A {@link https://quilljs.com/docs/delta/|Quill Delta}) that represents the changes on the document.\n   *\n   * @type {Array<{insert?:string|object|AbstractType<any>, delete?:number, retain?:number, attributes?: Object<string,any>}>}\n   *\n   * @public\n   */\n  get delta () {\n    if (this._delta === null) {\n      const y = /** @type {Doc} */ (this.target.doc)\n      /**\n       * @type {Array<{insert?:string|object|AbstractType<any>, delete?:number, retain?:number, attributes?: Object<string,any>}>}\n       */\n      const delta = []\n      transact(y, transaction => {\n        const currentAttributes = new Map() // saves all current attributes for insert\n        const oldAttributes = new Map()\n        let item = this.target._start\n        /**\n         * @type {string?}\n         */\n        let action = null\n        /**\n         * @type {Object<string,any>}\n         */\n        const attributes = {} // counts added or removed new attributes for retain\n        /**\n         * @type {string|object}\n         */\n        let insert = ''\n        let retain = 0\n        let deleteLen = 0\n        const addOp = () => {\n          if (action !== null) {\n            /**\n             * @type {any}\n             */\n            let op = null\n            switch (action) {\n              case 'delete':\n                if (deleteLen > 0) {\n                  op = { delete: deleteLen }\n                }\n                deleteLen = 0\n                break\n              case 'insert':\n                if (typeof insert === 'object' || insert.length > 0) {\n                  op = { insert }\n                  if (currentAttributes.size > 0) {\n                    op.attributes = {}\n                    currentAttributes.forEach((value, key) => {\n                      if (value !== null) {\n                        op.attributes[key] = value\n                      }\n                    })\n                  }\n                }\n                insert = ''\n                break\n              case 'retain':\n                if (retain > 0) {\n                  op = { retain }\n                  if (!object.isEmpty(attributes)) {\n                    op.attributes = object.assign({}, attributes)\n                  }\n                }\n                retain = 0\n                break\n            }\n            if (op) delta.push(op)\n            action = null\n          }\n        }\n        while (item !== null) {\n          switch (item.content.constructor) {\n            case ContentType:\n            case ContentEmbed:\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  addOp()\n                  action = 'insert'\n                  insert = item.content.getContent()[0]\n                  addOp()\n                }\n              } else if (this.deletes(item)) {\n                if (action !== 'delete') {\n                  addOp()\n                  action = 'delete'\n                }\n                deleteLen += 1\n              } else if (!item.deleted) {\n                if (action !== 'retain') {\n                  addOp()\n                  action = 'retain'\n                }\n                retain += 1\n              }\n              break\n            case ContentString:\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  if (action !== 'insert') {\n                    addOp()\n                    action = 'insert'\n                  }\n                  insert += /** @type {ContentString} */ (item.content).str\n                }\n              } else if (this.deletes(item)) {\n                if (action !== 'delete') {\n                  addOp()\n                  action = 'delete'\n                }\n                deleteLen += item.length\n              } else if (!item.deleted) {\n                if (action !== 'retain') {\n                  addOp()\n                  action = 'retain'\n                }\n                retain += item.length\n              }\n              break\n            case ContentFormat: {\n              const { key, value } = /** @type {ContentFormat} */ (item.content)\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  const curVal = currentAttributes.get(key) || null\n                  if (!equalAttrs(curVal, value)) {\n                    if (action === 'retain') {\n                      addOp()\n                    }\n                    if (equalAttrs(value, (oldAttributes.get(key) || null))) {\n                      delete attributes[key]\n                    } else {\n                      attributes[key] = value\n                    }\n                  } else if (value !== null) {\n                    item.delete(transaction)\n                  }\n                }\n              } else if (this.deletes(item)) {\n                oldAttributes.set(key, value)\n                const curVal = currentAttributes.get(key) || null\n                if (!equalAttrs(curVal, value)) {\n                  if (action === 'retain') {\n                    addOp()\n                  }\n                  attributes[key] = curVal\n                }\n              } else if (!item.deleted) {\n                oldAttributes.set(key, value)\n                const attr = attributes[key]\n                if (attr !== undefined) {\n                  if (!equalAttrs(attr, value)) {\n                    if (action === 'retain') {\n                      addOp()\n                    }\n                    if (value === null) {\n                      delete attributes[key]\n                    } else {\n                      attributes[key] = value\n                    }\n                  } else if (attr !== null) { // this will be cleaned up automatically by the contextless cleanup function\n                    item.delete(transaction)\n                  }\n                }\n              }\n              if (!item.deleted) {\n                if (action === 'insert') {\n                  addOp()\n                }\n                updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (item.content))\n              }\n              break\n            }\n          }\n          item = item.right\n        }\n        addOp()\n        while (delta.length > 0) {\n          const lastOp = delta[delta.length - 1]\n          if (lastOp.retain !== undefined && lastOp.attributes === undefined) {\n            // retain delta's if they don't assign attributes\n            delta.pop()\n          } else {\n            break\n          }\n        }\n      })\n      this._delta = delta\n    }\n    return /** @type {any} */ (this._delta)\n  }\n}\n\n/**\n * Type that represents text with formatting information.\n *\n * This type replaces y-richtext as this implementation is able to handle\n * block formats (format information on a paragraph), embeds (complex elements\n * like pictures and videos), and text formats (**bold**, *italic*).\n *\n * @extends AbstractType<YTextEvent>\n */\nexport class YText extends AbstractType {\n  /**\n   * @param {String} [string] The initial value of the YText.\n   */\n  constructor (string) {\n    super()\n    /**\n     * Array of pending operations on this type\n     * @type {Array<function():void>?}\n     */\n    this._pending = string !== undefined ? [() => this.insert(0, string)] : []\n    /**\n     * @type {Array<ArraySearchMarker>|null}\n     */\n    this._searchMarker = []\n    /**\n     * Whether this YText contains formatting attributes.\n     * This flag is updated when a formatting item is integrated (see ContentFormat.integrate)\n     */\n    this._hasFormatting = false\n  }\n\n  /**\n   * Number of characters of this text type.\n   *\n   * @type {number}\n   */\n  get length () {\n    return this._length\n  }\n\n  /**\n   * @param {Doc} y\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    try {\n      /** @type {Array<function>} */ (this._pending).forEach(f => f())\n    } catch (e) {\n      console.error(e)\n    }\n    this._pending = null\n  }\n\n  _copy () {\n    return new YText()\n  }\n\n  /**\n   * @return {YText}\n   */\n  clone () {\n    const text = new YText()\n    text.applyDelta(this.toDelta())\n    return text\n  }\n\n  /**\n   * Creates YTextEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    super._callObserver(transaction, parentSubs)\n    const event = new YTextEvent(this, transaction, parentSubs)\n    callTypeObservers(this, transaction, event)\n    // If a remote change happened, we try to cleanup potential formatting duplicates.\n    if (!transaction.local && this._hasFormatting) {\n      transaction._needFormattingCleanup = true\n    }\n  }\n\n  /**\n   * Returns the unformatted string representation of this YText type.\n   *\n   * @public\n   */\n  toString () {\n    let str = ''\n    /**\n     * @type {Item|null}\n     */\n    let n = this._start\n    while (n !== null) {\n      if (!n.deleted && n.countable && n.content.constructor === ContentString) {\n        str += /** @type {ContentString} */ (n.content).str\n      }\n      n = n.right\n    }\n    return str\n  }\n\n  /**\n   * Returns the unformatted string representation of this YText type.\n   *\n   * @return {string}\n   * @public\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * Apply a {@link Delta} on this shared YText type.\n   *\n   * @param {any} delta The changes to apply on this element.\n   * @param {object}  opts\n   * @param {boolean} [opts.sanitize] Sanitize input delta. Removes ending newlines if set to true.\n   *\n   *\n   * @public\n   */\n  applyDelta (delta, { sanitize = true } = {}) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        const currPos = new ItemTextListPosition(null, this._start, 0, new Map())\n        for (let i = 0; i < delta.length; i++) {\n          const op = delta[i]\n          if (op.insert !== undefined) {\n            // Quill assumes that the content starts with an empty paragraph.\n            // Yjs/Y.Text assumes that it starts empty. We always hide that\n            // there is a newline at the end of the content.\n            // If we omit this step, clients will see a different number of\n            // paragraphs, but nothing bad will happen.\n            const ins = (!sanitize && typeof op.insert === 'string' && i === delta.length - 1 && currPos.right === null && op.insert.slice(-1) === '\\n') ? op.insert.slice(0, -1) : op.insert\n            if (typeof ins !== 'string' || ins.length > 0) {\n              insertText(transaction, this, currPos, ins, op.attributes || {})\n            }\n          } else if (op.retain !== undefined) {\n            formatText(transaction, this, currPos, op.retain, op.attributes || {})\n          } else if (op.delete !== undefined) {\n            deleteText(transaction, currPos, op.delete)\n          }\n        }\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.applyDelta(delta))\n    }\n  }\n\n  /**\n   * Returns the Delta representation of this YText type.\n   *\n   * @param {Snapshot} [snapshot]\n   * @param {Snapshot} [prevSnapshot]\n   * @param {function('removed' | 'added', ID):any} [computeYChange]\n   * @return {any} The Delta representation of this type.\n   *\n   * @public\n   */\n  toDelta (snapshot, prevSnapshot, computeYChange) {\n    /**\n     * @type{Array<any>}\n     */\n    const ops = []\n    const currentAttributes = new Map()\n    const doc = /** @type {Doc} */ (this.doc)\n    let str = ''\n    let n = this._start\n    function packStr () {\n      if (str.length > 0) {\n        // pack str with attributes to ops\n        /**\n         * @type {Object<string,any>}\n         */\n        const attributes = {}\n        let addAttributes = false\n        currentAttributes.forEach((value, key) => {\n          addAttributes = true\n          attributes[key] = value\n        })\n        /**\n         * @type {Object<string,any>}\n         */\n        const op = { insert: str }\n        if (addAttributes) {\n          op.attributes = attributes\n        }\n        ops.push(op)\n        str = ''\n      }\n    }\n    const computeDelta = () => {\n      while (n !== null) {\n        if (isVisible(n, snapshot) || (prevSnapshot !== undefined && isVisible(n, prevSnapshot))) {\n          switch (n.content.constructor) {\n            case ContentString: {\n              const cur = currentAttributes.get('ychange')\n              if (snapshot !== undefined && !isVisible(n, snapshot)) {\n                if (cur === undefined || cur.user !== n.id.client || cur.type !== 'removed') {\n                  packStr()\n                  currentAttributes.set('ychange', computeYChange ? computeYChange('removed', n.id) : { type: 'removed' })\n                }\n              } else if (prevSnapshot !== undefined && !isVisible(n, prevSnapshot)) {\n                if (cur === undefined || cur.user !== n.id.client || cur.type !== 'added') {\n                  packStr()\n                  currentAttributes.set('ychange', computeYChange ? computeYChange('added', n.id) : { type: 'added' })\n                }\n              } else if (cur !== undefined) {\n                packStr()\n                currentAttributes.delete('ychange')\n              }\n              str += /** @type {ContentString} */ (n.content).str\n              break\n            }\n            case ContentType:\n            case ContentEmbed: {\n              packStr()\n              /**\n               * @type {Object<string,any>}\n               */\n              const op = {\n                insert: n.content.getContent()[0]\n              }\n              if (currentAttributes.size > 0) {\n                const attrs = /** @type {Object<string,any>} */ ({})\n                op.attributes = attrs\n                currentAttributes.forEach((value, key) => {\n                  attrs[key] = value\n                })\n              }\n              ops.push(op)\n              break\n            }\n            case ContentFormat:\n              if (isVisible(n, snapshot)) {\n                packStr()\n                updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (n.content))\n              }\n              break\n          }\n        }\n        n = n.right\n      }\n      packStr()\n    }\n    if (snapshot || prevSnapshot) {\n      // snapshots are merged again after the transaction, so we need to keep the\n      // transaction alive until we are done\n      transact(doc, transaction => {\n        if (snapshot) {\n          splitSnapshotAffectedStructs(transaction, snapshot)\n        }\n        if (prevSnapshot) {\n          splitSnapshotAffectedStructs(transaction, prevSnapshot)\n        }\n        computeDelta()\n      }, 'cleanup')\n    } else {\n      computeDelta()\n    }\n    return ops\n  }\n\n  /**\n   * Insert text at a given index.\n   *\n   * @param {number} index The index at which to start inserting.\n   * @param {String} text The text to insert at the specified position.\n   * @param {TextAttributes} [attributes] Optionally define some formatting\n   *                                    information to apply on the inserted\n   *                                    Text.\n   * @public\n   */\n  insert (index, text, attributes) {\n    if (text.length <= 0) {\n      return\n    }\n    const y = this.doc\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index)\n        if (!attributes) {\n          attributes = {}\n          // @ts-ignore\n          pos.currentAttributes.forEach((v, k) => { attributes[k] = v })\n        }\n        insertText(transaction, this, pos, text, attributes)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.insert(index, text, attributes))\n    }\n  }\n\n  /**\n   * Inserts an embed at a index.\n   *\n   * @param {number} index The index to insert the embed at.\n   * @param {Object | AbstractType<any>} embed The Object that represents the embed.\n   * @param {TextAttributes} attributes Attribute information to apply on the\n   *                                    embed\n   *\n   * @public\n   */\n  insertEmbed (index, embed, attributes = {}) {\n    const y = this.doc\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index)\n        insertText(transaction, this, pos, embed, attributes)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.insertEmbed(index, embed, attributes))\n    }\n  }\n\n  /**\n   * Deletes text starting from an index.\n   *\n   * @param {number} index Index at which to start deleting.\n   * @param {number} length The number of characters to remove. Defaults to 1.\n   *\n   * @public\n   */\n  delete (index, length) {\n    if (length === 0) {\n      return\n    }\n    const y = this.doc\n    if (y !== null) {\n      transact(y, transaction => {\n        deleteText(transaction, findPosition(transaction, this, index), length)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.delete(index, length))\n    }\n  }\n\n  /**\n   * Assigns properties to a range of text.\n   *\n   * @param {number} index The position where to start formatting.\n   * @param {number} length The amount of characters to assign properties to.\n   * @param {TextAttributes} attributes Attribute information to apply on the\n   *                                    text.\n   *\n   * @public\n   */\n  format (index, length, attributes) {\n    if (length === 0) {\n      return\n    }\n    const y = this.doc\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index)\n        if (pos.right === null) {\n          return\n        }\n        formatText(transaction, this, pos, length, attributes)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.format(index, length, attributes))\n    }\n  }\n\n  /**\n   * Removes an attribute.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that is to be removed.\n   *\n   * @public\n   */\n  removeAttribute (attributeName) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, attributeName)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.removeAttribute(attributeName))\n    }\n  }\n\n  /**\n   * Sets or updates an attribute.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that is to be set.\n   * @param {any} attributeValue The attribute value that is to be set.\n   *\n   * @public\n   */\n  setAttribute (attributeName, attributeValue) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, attributeName, attributeValue)\n      })\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.setAttribute(attributeName, attributeValue))\n    }\n  }\n\n  /**\n   * Returns an attribute value that belongs to the attribute name.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that identifies the\n   *                               queried value.\n   * @return {any} The queried attribute value.\n   *\n   * @public\n   */\n  getAttribute (attributeName) {\n    return /** @type {any} */ (typeMapGet(this, attributeName))\n  }\n\n  /**\n   * Returns all attribute name/value pairs in a JSON Object.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @return {Object<string, any>} A JSON Object that describes the attributes.\n   *\n   * @public\n   */\n  getAttributes () {\n    return typeMapGetAll(this)\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YTextRefID)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n * @return {YText}\n *\n * @private\n * @function\n */\nexport const readYText = _decoder => new YText()\n", "/**\n * @module YXml\n */\n\nimport {\n  YXmlEvent,\n  YXmlElement,\n  AbstractType,\n  typeListMap,\n  typeListForEach,\n  typeListInsertGenerics,\n  typeListInsertGenericsAfter,\n  typeListDelete,\n  typeListToArray,\n  YXmlFragmentRefID,\n  callTypeObservers,\n  transact,\n  typeListGet,\n  typeListSlice,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Doc, ContentType, Transaction, Item, YXmlText, YXmlHook // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\nimport * as array from 'lib0/array'\n\n/**\n * Define the elements to which a set of CSS queries apply.\n * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors|CSS_Selectors}\n *\n * @example\n *   query = '.classSelector'\n *   query = 'nodeSelector'\n *   query = '#idSelector'\n *\n * @typedef {string} CSS_Selector\n */\n\n/**\n * Dom filter function.\n *\n * @callback domFilter\n * @param {string} nodeName The nodeName of the element\n * @param {Map} attributes The map of attributes.\n * @return {boolean} Whether to include the Dom node in the YXmlElement.\n */\n\n/**\n * Represents a subset of the nodes of a YXmlElement / YXmlFragment and a\n * position within them.\n *\n * Can be created with {@link YXmlFragment#createTreeWalker}\n *\n * @public\n * @implements {Iterable<YXmlElement|YXmlText|YXmlElement|YXmlHook>}\n */\nexport class YXmlTreeWalker {\n  /**\n   * @param {YXmlFragment | YXmlElement} root\n   * @param {function(AbstractType<any>):boolean} [f]\n   */\n  constructor (root, f = () => true) {\n    this._filter = f\n    this._root = root\n    /**\n     * @type {Item}\n     */\n    this._currentNode = /** @type {Item} */ (root._start)\n    this._firstCall = true\n  }\n\n  [Symbol.iterator] () {\n    return this\n  }\n\n  /**\n   * Get the next node.\n   *\n   * @return {IteratorResult<YXmlElement|YXmlText|YXmlHook>} The next node.\n   *\n   * @public\n   */\n  next () {\n    /**\n     * @type {Item|null}\n     */\n    let n = this._currentNode\n    let type = n && n.content && /** @type {any} */ (n.content).type\n    if (n !== null && (!this._firstCall || n.deleted || !this._filter(type))) { // if first call, we check if we can use the first item\n      do {\n        type = /** @type {any} */ (n.content).type\n        if (!n.deleted && (type.constructor === YXmlElement || type.constructor === YXmlFragment) && type._start !== null) {\n          // walk down in the tree\n          n = type._start\n        } else {\n          // walk right or up in the tree\n          while (n !== null) {\n            if (n.right !== null) {\n              n = n.right\n              break\n            } else if (n.parent === this._root) {\n              n = null\n            } else {\n              n = /** @type {AbstractType<any>} */ (n.parent)._item\n            }\n          }\n        }\n      } while (n !== null && (n.deleted || !this._filter(/** @type {ContentType} */ (n.content).type)))\n    }\n    this._firstCall = false\n    if (n === null) {\n      // @ts-ignore\n      return { value: undefined, done: true }\n    }\n    this._currentNode = n\n    return { value: /** @type {any} */ (n.content).type, done: false }\n  }\n}\n\n/**\n * Represents a list of {@link YXmlElement}.and {@link YXmlText} types.\n * A YxmlFragment is similar to a {@link YXmlElement}, but it does not have a\n * nodeName and it does not have attributes. Though it can be bound to a DOM\n * element - in this case the attributes and the nodeName are not shared.\n *\n * @public\n * @extends AbstractType<YXmlEvent>\n */\nexport class YXmlFragment extends AbstractType {\n  constructor () {\n    super()\n    /**\n     * @type {Array<any>|null}\n     */\n    this._prelimContent = []\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get firstChild () {\n    const first = this._first\n    return first ? first.content.getContent()[0] : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    this.insert(0, /** @type {Array<any>} */ (this._prelimContent))\n    this._prelimContent = null\n  }\n\n  _copy () {\n    return new YXmlFragment()\n  }\n\n  /**\n   * @return {YXmlFragment}\n   */\n  clone () {\n    const el = new YXmlFragment()\n    // @ts-ignore\n    el.insert(0, this.toArray().map(item => item instanceof AbstractType ? item.clone() : item))\n    return el\n  }\n\n  get length () {\n    return this._prelimContent === null ? this._length : this._prelimContent.length\n  }\n\n  /**\n   * Create a subtree of childNodes.\n   *\n   * @example\n   * const walker = elem.createTreeWalker(dom => dom.nodeName === 'div')\n   * for (let node in walker) {\n   *   // `node` is a div node\n   *   nop(node)\n   * }\n   *\n   * @param {function(AbstractType<any>):boolean} filter Function that is called on each child element and\n   *                          returns a Boolean indicating whether the child\n   *                          is to be included in the subtree.\n   * @return {YXmlTreeWalker} A subtree and a position within it.\n   *\n   * @public\n   */\n  createTreeWalker (filter) {\n    return new YXmlTreeWalker(this, filter)\n  }\n\n  /**\n   * Returns the first YXmlElement that matches the query.\n   * Similar to DOM's {@link querySelector}.\n   *\n   * Query support:\n   *   - tagname\n   * TODO:\n   *   - id\n   *   - attribute\n   *\n   * @param {CSS_Selector} query The query on the children.\n   * @return {YXmlElement|YXmlText|YXmlHook|null} The first element that matches the query or null.\n   *\n   * @public\n   */\n  querySelector (query) {\n    query = query.toUpperCase()\n    // @ts-ignore\n    const iterator = new YXmlTreeWalker(this, element => element.nodeName && element.nodeName.toUpperCase() === query)\n    const next = iterator.next()\n    if (next.done) {\n      return null\n    } else {\n      return next.value\n    }\n  }\n\n  /**\n   * Returns all YXmlElements that match the query.\n   * Similar to Dom's {@link querySelectorAll}.\n   *\n   * @todo Does not yet support all queries. Currently only query by tagName.\n   *\n   * @param {CSS_Selector} query The query on the children\n   * @return {Array<YXmlElement|YXmlText|YXmlHook|null>} The elements that match this query.\n   *\n   * @public\n   */\n  querySelectorAll (query) {\n    query = query.toUpperCase()\n    // @ts-ignore\n    return array.from(new YXmlTreeWalker(this, element => element.nodeName && element.nodeName.toUpperCase() === query))\n  }\n\n  /**\n   * Creates YXmlEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    callTypeObservers(this, transaction, new YXmlEvent(this, parentSubs, transaction))\n  }\n\n  /**\n   * Get the string representation of all the children of this YXmlFragment.\n   *\n   * @return {string} The string representation of all children.\n   */\n  toString () {\n    return typeListMap(this, xml => xml.toString()).join('')\n  }\n\n  /**\n   * @return {string}\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks={}] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Node} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const fragment = _document.createDocumentFragment()\n    if (binding !== undefined) {\n      binding._createAssociation(fragment, this)\n    }\n    typeListForEach(this, xmlType => {\n      fragment.insertBefore(xmlType.toDOM(_document, hooks, binding), null)\n    })\n    return fragment\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  xml.insert(0, [new Y.XmlText('text')])\n   *\n   * @param {number} index The index to insert content at\n   * @param {Array<YXmlElement|YXmlText>} content The array of content\n   */\n  insert (index, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListInsertGenerics(transaction, this, index, content)\n      })\n    } else {\n      // @ts-ignore _prelimContent is defined because this is not yet integrated\n      this._prelimContent.splice(index, 0, ...content)\n    }\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  xml.insert(0, [new Y.XmlText('text')])\n   *\n   * @param {null|Item|YXmlElement|YXmlText} ref The index to insert content at\n   * @param {Array<YXmlElement|YXmlText>} content The array of content\n   */\n  insertAfter (ref, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        const refItem = (ref && ref instanceof AbstractType) ? ref._item : ref\n        typeListInsertGenericsAfter(transaction, this, refItem, content)\n      })\n    } else {\n      const pc = /** @type {Array<any>} */ (this._prelimContent)\n      const index = ref === null ? 0 : pc.findIndex(el => el === ref) + 1\n      if (index === 0 && ref !== null) {\n        throw error.create('Reference item not found')\n      }\n      pc.splice(index, 0, ...content)\n    }\n  }\n\n  /**\n   * Deletes elements starting from an index.\n   *\n   * @param {number} index Index at which to start deleting elements\n   * @param {number} [length=1] The number of elements to remove. Defaults to 1.\n   */\n  delete (index, length = 1) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListDelete(transaction, this, index, length)\n      })\n    } else {\n      // @ts-ignore _prelimContent is defined because this is not yet integrated\n      this._prelimContent.splice(index, length)\n    }\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @return {Array<YXmlElement|YXmlText|YXmlHook>}\n   */\n  toArray () {\n    return typeListToArray(this)\n  }\n\n  /**\n   * Appends content to this YArray.\n   *\n   * @param {Array<YXmlElement|YXmlText>} content Array of content to append.\n   */\n  push (content) {\n    this.insert(this.length, content)\n  }\n\n  /**\n   * Preppends content to this YArray.\n   *\n   * @param {Array<YXmlElement|YXmlText>} content Array of content to preppend.\n   */\n  unshift (content) {\n    this.insert(0, content)\n  }\n\n  /**\n   * Returns the i-th element from a YArray.\n   *\n   * @param {number} index The index of the element to return from the YArray\n   * @return {YXmlElement|YXmlText}\n   */\n  get (index) {\n    return typeListGet(this, index)\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {Array<YXmlElement|YXmlText>}\n   */\n  slice (start = 0, end = this.length) {\n    return typeListSlice(this, start, end)\n  }\n\n  /**\n   * Executes a provided function on once on overy child element.\n   *\n   * @param {function(YXmlElement|YXmlText,number, typeof self):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    typeListForEach(this, f)\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlFragmentRefID)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n * @return {YXmlFragment}\n *\n * @private\n * @function\n */\nexport const readYXmlFragment = _decoder => new YXmlFragment()\n", "import * as object from 'lib0/object'\n\nimport {\n  YXmlFragment,\n  transact,\n  typeMapDelete,\n  typeMapHas,\n  typeMapSet,\n  typeMapGet,\n  typeMapGetAll,\n  typeListForEach,\n  YXmlElementRefID,\n  YXmlText, ContentType, AbstractType, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Doc, Item // eslint-disable-line\n} from '../internals.js'\n\n/**\n * @typedef {Object|number|null|Array<any>|string|Uint8Array|AbstractType<any>} ValueTypes\n */\n\n/**\n * An YXmlElement imitates the behavior of a\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}.\n *\n * * An YXmlElement has attributes (key value pairs)\n * * An YXmlElement has childElements that must inherit from YXmlElement\n *\n * @template {{ [key: string]: ValueTypes }} [KV={ [key: string]: string }]\n */\nexport class YXmlElement extends YXmlFragment {\n  constructor (nodeName = 'UNDEFINED') {\n    super()\n    this.nodeName = nodeName\n    /**\n     * @type {Map<string, any>|null}\n     */\n    this._prelimAttrs = new Map()\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get nextSibling () {\n    const n = this._item ? this._item.next : null\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get prevSibling () {\n    const n = this._item ? this._item.prev : null\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    ;(/** @type {Map<string, any>} */ (this._prelimAttrs)).forEach((value, key) => {\n      this.setAttribute(key, value)\n    })\n    this._prelimAttrs = null\n  }\n\n  /**\n   * Creates an Item with the same effect as this Item (without position effect)\n   *\n   * @return {YXmlElement}\n   */\n  _copy () {\n    return new YXmlElement(this.nodeName)\n  }\n\n  /**\n   * @return {YXmlElement<KV>}\n   */\n  clone () {\n    /**\n     * @type {YXmlElement<KV>}\n     */\n    const el = new YXmlElement(this.nodeName)\n    const attrs = this.getAttributes()\n    object.forEach(attrs, (value, key) => {\n      if (typeof value === 'string') {\n        el.setAttribute(key, value)\n      }\n    })\n    // @ts-ignore\n    el.insert(0, this.toArray().map(item => item instanceof AbstractType ? item.clone() : item))\n    return el\n  }\n\n  /**\n   * Returns the XML serialization of this YXmlElement.\n   * The attributes are ordered by attribute-name, so you can easily use this\n   * method to compare YXmlElements\n   *\n   * @return {string} The string representation of this type.\n   *\n   * @public\n   */\n  toString () {\n    const attrs = this.getAttributes()\n    const stringBuilder = []\n    const keys = []\n    for (const key in attrs) {\n      keys.push(key)\n    }\n    keys.sort()\n    const keysLen = keys.length\n    for (let i = 0; i < keysLen; i++) {\n      const key = keys[i]\n      stringBuilder.push(key + '=\"' + attrs[key] + '\"')\n    }\n    const nodeName = this.nodeName.toLocaleLowerCase()\n    const attrsString = stringBuilder.length > 0 ? ' ' + stringBuilder.join(' ') : ''\n    return `<${nodeName}${attrsString}>${super.toString()}</${nodeName}>`\n  }\n\n  /**\n   * Removes an attribute from this YXmlElement.\n   *\n   * @param {string} attributeName The attribute name that is to be removed.\n   *\n   * @public\n   */\n  removeAttribute (attributeName) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, attributeName)\n      })\n    } else {\n      /** @type {Map<string,any>} */ (this._prelimAttrs).delete(attributeName)\n    }\n  }\n\n  /**\n   * Sets or updates an attribute.\n   *\n   * @template {keyof KV & string} KEY\n   *\n   * @param {KEY} attributeName The attribute name that is to be set.\n   * @param {KV[KEY]} attributeValue The attribute value that is to be set.\n   *\n   * @public\n   */\n  setAttribute (attributeName, attributeValue) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, attributeName, attributeValue)\n      })\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimAttrs).set(attributeName, attributeValue)\n    }\n  }\n\n  /**\n   * Returns an attribute value that belongs to the attribute name.\n   *\n   * @template {keyof KV & string} KEY\n   *\n   * @param {KEY} attributeName The attribute name that identifies the\n   *                               queried value.\n   * @return {KV[KEY]|undefined} The queried attribute value.\n   *\n   * @public\n   */\n  getAttribute (attributeName) {\n    return /** @type {any} */ (typeMapGet(this, attributeName))\n  }\n\n  /**\n   * Returns whether an attribute exists\n   *\n   * @param {string} attributeName The attribute name to check for existence.\n   * @return {boolean} whether the attribute exists.\n   *\n   * @public\n   */\n  hasAttribute (attributeName) {\n    return /** @type {any} */ (typeMapHas(this, attributeName))\n  }\n\n  /**\n   * Returns all attribute name/value pairs in a JSON Object.\n   *\n   * @return {{ [Key in Extract<keyof KV,string>]?: KV[Key]}} A JSON Object that describes the attributes.\n   *\n   * @public\n   */\n  getAttributes () {\n    return /** @type {any} */ (typeMapGetAll(this))\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks={}] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Node} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const dom = _document.createElement(this.nodeName)\n    const attrs = this.getAttributes()\n    for (const key in attrs) {\n      const value = attrs[key]\n      if (typeof value === 'string') {\n        dom.setAttribute(key, value)\n      }\n    }\n    typeListForEach(this, yxml => {\n      dom.appendChild(yxml.toDOM(_document, hooks, binding))\n    })\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this)\n    }\n    return dom\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlElementRefID)\n    encoder.writeKey(this.nodeName)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlElement}\n *\n * @function\n */\nexport const readYXmlElement = decoder => new YXmlElement(decoder.readKey())\n", "\nimport {\n  YEvent,\n  YXmlText, YXmlElement, YXmlFragment, Transaction // eslint-disable-line\n} from '../internals.js'\n\n/**\n * @extends YEvent<YXmlElement|YXmlText|YXmlFragment>\n * An Event that describes changes on a YXml Element or Yxml Fragment\n */\nexport class YXmlEvent extends YEvent {\n  /**\n   * @param {YXmlElement|YXmlText|YXmlFragment} target The target on which the event is created.\n   * @param {Set<string|null>} subs The set of changed attributes. `null` is included if the\n   *                   child list changed.\n   * @param {Transaction} transaction The transaction instance with wich the\n   *                                  change was created.\n   */\n  constructor (target, subs, transaction) {\n    super(target, transaction)\n    /**\n     * Whether the children changed.\n     * @type {Boolean}\n     * @private\n     */\n    this.childListChanged = false\n    /**\n     * Set of all changed attributes.\n     * @type {Set<string>}\n     */\n    this.attributesChanged = new Set()\n    subs.forEach((sub) => {\n      if (sub === null) {\n        this.childListChanged = true\n      } else {\n        this.attributesChanged.add(sub)\n      }\n    })\n  }\n}\n", "\nimport {\n  YMap,\n  YXmlHookRefID,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2 // eslint-disable-line\n} from '../internals.js'\n\n/**\n * You can manage binding to a custom type with YXmlHook.\n *\n * @extends {YMap<any>}\n */\nexport class YXmlHook extends YMap {\n  /**\n   * @param {string} hookName nodeName of the Dom Node.\n   */\n  constructor (hookName) {\n    super()\n    /**\n     * @type {string}\n     */\n    this.hookName = hookName\n  }\n\n  /**\n   * Creates an Item with the same effect as this Item (without position effect)\n   */\n  _copy () {\n    return new YXmlHook(this.hookName)\n  }\n\n  /**\n   * @return {YXmlHook}\n   */\n  clone () {\n    const el = new YXmlHook(this.hookName)\n    this.forEach((value, key) => {\n      el.set(key, value)\n    })\n    return el\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object.<string, any>} [hooks] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type\n   * @return {Element} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const hook = hooks[this.hookName]\n    let dom\n    if (hook !== undefined) {\n      dom = hook.createDom(this)\n    } else {\n      dom = document.createElement(this.hookName)\n    }\n    dom.setAttribute('data-yjs-hook', this.hookName)\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this)\n    }\n    return dom\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlHookRefID)\n    encoder.writeKey(this.hookName)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlHook}\n *\n * @private\n * @function\n */\nexport const readYXmlHook = decoder =>\n  new YXmlHook(decoder.readKey())\n", "\nimport {\n  YText,\n  YXmlTextRefID,\n  ContentType, YXmlElement, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, // eslint-disable-line\n} from '../internals.js'\n\n/**\n * Represents text in a Dom Element. In the future this type will also handle\n * simple formatting information like bold and italic.\n */\nexport class YXmlText extends YText {\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get nextSibling () {\n    const n = this._item ? this._item.next : null\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get prevSibling () {\n    const n = this._item ? this._item.prev : null\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  _copy () {\n    return new YXmlText()\n  }\n\n  /**\n   * @return {YXmlText}\n   */\n  clone () {\n    const text = new YXmlText()\n    text.applyDelta(this.toDelta())\n    return text\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlText.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Text} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks, binding) {\n    const dom = _document.createTextNode(this.toString())\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this)\n    }\n    return dom\n  }\n\n  toString () {\n    // @ts-ignore\n    return this.toDelta().map(delta => {\n      const nestedNodes = []\n      for (const nodeName in delta.attributes) {\n        const attrs = []\n        for (const key in delta.attributes[nodeName]) {\n          attrs.push({ key, value: delta.attributes[nodeName][key] })\n        }\n        // sort attributes to get a unique order\n        attrs.sort((a, b) => a.key < b.key ? -1 : 1)\n        nestedNodes.push({ nodeName, attrs })\n      }\n      // sort node order to get a unique order\n      nestedNodes.sort((a, b) => a.nodeName < b.nodeName ? -1 : 1)\n      // now convert to dom string\n      let str = ''\n      for (let i = 0; i < nestedNodes.length; i++) {\n        const node = nestedNodes[i]\n        str += `<${node.nodeName}`\n        for (let j = 0; j < node.attrs.length; j++) {\n          const attr = node.attrs[j]\n          str += ` ${attr.key}=\"${attr.value}\"`\n        }\n        str += '>'\n      }\n      str += delta.insert\n      for (let i = nestedNodes.length - 1; i >= 0; i--) {\n        str += `</${nestedNodes[i].nodeName}>`\n      }\n      return str\n    }).join('')\n  }\n\n  /**\n   * @return {string}\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlTextRefID)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlText}\n *\n * @private\n * @function\n */\nexport const readYXmlText = decoder => new YXmlText()\n", "\nimport {\n  UpdateEncoderV1, UpdateEncoderV2, ID, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\nexport class AbstractStruct {\n  /**\n   * @param {ID} id\n   * @param {number} length\n   */\n  constructor (id, length) {\n    this.id = id\n    this.length = length\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get deleted () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * Merge this struct with the item to the right.\n   * This method is already assuming that `this.id.clock + this.length === this.id.clock`.\n   * Also this method does *not* remove right from StructStore!\n   * @param {AbstractStruct} right\n   * @return {boolean} wether this merged with right\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   * @param {number} offset\n   * @param {number} encodingRef\n   */\n  write (encoder, offset, encodingRef) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    throw error.methodUnimplemented()\n  }\n}\n", "\nimport {\n  AbstractStruct,\n  addStruct,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Transaction, ID // eslint-disable-line\n} from '../internals.js'\n\nexport const structGCRefNumber = 0\n\n/**\n * @private\n */\nexport class GC extends AbstractStruct {\n  get deleted () {\n    return true\n  }\n\n  delete () {}\n\n  /**\n   * @param {GC} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (this.constructor !== right.constructor) {\n      return false\n    }\n    this.length += right.length\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    if (offset > 0) {\n      this.id.clock += offset\n      this.length -= offset\n    }\n    addStruct(transaction.doc.store, this)\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeInfo(structGCRefNumber)\n    encoder.writeLen(this.length - offset)\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    return null\n  }\n}\n", "import {\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Item, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\nexport class ContentBinary {\n  /**\n   * @param {Uint8Array} content\n   */\n  constructor (content) {\n    this.content = content\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.content]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentBinary}\n   */\n  copy () {\n    return new ContentBinary(this.content)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentBinary}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentBinary} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeBuf(this.content)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 3\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2 } decoder\n * @return {ContentBinary}\n */\nexport const readContentBinary = decoder => new ContentBinary(decoder.readBuf())\n", "\nimport {\n  addToDeleteSet,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Item, Transaction // eslint-disable-line\n} from '../internals.js'\n\nexport class ContentDeleted {\n  /**\n   * @param {number} len\n   */\n  constructor (len) {\n    this.len = len\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.len\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return []\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return false\n  }\n\n  /**\n   * @return {ContentDeleted}\n   */\n  copy () {\n    return new ContentDeleted(this.len)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentDeleted}\n   */\n  splice (offset) {\n    const right = new ContentDeleted(this.len - offset)\n    this.len = offset\n    return right\n  }\n\n  /**\n   * @param {ContentDeleted} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.len += right.len\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    addToDeleteSet(transaction.deleteSet, item.id.client, item.id.clock, this.len)\n    item.markDeleted()\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeLen(this.len - offset)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 1\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2 } decoder\n * @return {ContentDeleted}\n */\nexport const readContentDeleted = decoder => new ContentDeleted(decoder.readLen())\n", "\nimport {\n  Doc, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Transaction, Item // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\n/**\n * @param {string} guid\n * @param {Object<string, any>} opts\n */\nconst createDocFromOpts = (guid, opts) => new Doc({ guid, ...opts, shouldLoad: opts.shouldLoad || opts.autoLoad || false })\n\n/**\n * @private\n */\nexport class ContentDoc {\n  /**\n   * @param {Doc} doc\n   */\n  constructor (doc) {\n    if (doc._item) {\n      console.error('This document was already integrated as a sub-document. You should create a second instance instead with the same guid.')\n    }\n    /**\n     * @type {Doc}\n     */\n    this.doc = doc\n    /**\n     * @type {any}\n     */\n    const opts = {}\n    this.opts = opts\n    if (!doc.gc) {\n      opts.gc = false\n    }\n    if (doc.autoLoad) {\n      opts.autoLoad = true\n    }\n    if (doc.meta !== null) {\n      opts.meta = doc.meta\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.doc]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentDoc}\n   */\n  copy () {\n    return new ContentDoc(createDocFromOpts(this.doc.guid, this.opts))\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentDoc}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentDoc} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    // this needs to be reflected in doc.destroy as well\n    this.doc._item = item\n    transaction.subdocsAdded.add(this.doc)\n    if (this.doc.shouldLoad) {\n      transaction.subdocsLoaded.add(this.doc)\n    }\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    if (transaction.subdocsAdded.has(this.doc)) {\n      transaction.subdocsAdded.delete(this.doc)\n    } else {\n      transaction.subdocsRemoved.add(this.doc)\n    }\n  }\n\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) { }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeString(this.doc.guid)\n    encoder.writeAny(this.opts)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 9\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentDoc}\n */\nexport const readContentDoc = decoder => new ContentDoc(createDocFromOpts(decoder.readString(), decoder.readAny()))\n", "\nimport {\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Item, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\n/**\n * @private\n */\nexport class ContentEmbed {\n  /**\n   * @param {Object} embed\n   */\n  constructor (embed) {\n    this.embed = embed\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.embed]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentEmbed}\n   */\n  copy () {\n    return new ContentEmbed(this.embed)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentEmbed}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentEmbed} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeJSON(this.embed)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 5\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentEmbed}\n */\nexport const readContentEmbed = decoder => new ContentEmbed(decoder.readJSON())\n", "\nimport {\n  YText, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Item, StructStore, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\n/**\n * @private\n */\nexport class ContentFormat {\n  /**\n   * @param {string} key\n   * @param {Object} value\n   */\n  constructor (key, value) {\n    this.key = key\n    this.value = value\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return []\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return false\n  }\n\n  /**\n   * @return {ContentFormat}\n   */\n  copy () {\n    return new ContentFormat(this.key, this.value)\n  }\n\n  /**\n   * @param {number} _offset\n   * @return {ContentFormat}\n   */\n  splice (_offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentFormat} _right\n   * @return {boolean}\n   */\n  mergeWith (_right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} _transaction\n   * @param {Item} item\n   */\n  integrate (_transaction, item) {\n    // @todo searchmarker are currently unsupported for rich text documents\n    const p = /** @type {YText} */ (item.parent)\n    p._searchMarker = null\n    p._hasFormatting = true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeKey(this.key)\n    encoder.writeJSON(this.value)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 6\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentFormat}\n */\nexport const readContentFormat = decoder => new ContentFormat(decoder.readKey(), decoder.readJSON())\n", "import {\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Transaction, Item, StructStore // eslint-disable-line\n} from '../internals.js'\n\n/**\n * @private\n */\nexport class ContentJSON {\n  /**\n   * @param {Array<any>} arr\n   */\n  constructor (arr) {\n    /**\n     * @type {Array<any>}\n     */\n    this.arr = arr\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.arr.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.arr\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentJSON}\n   */\n  copy () {\n    return new ContentJSON(this.arr)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentJSON}\n   */\n  splice (offset) {\n    const right = new ContentJSON(this.arr.slice(offset))\n    this.arr = this.arr.slice(0, offset)\n    return right\n  }\n\n  /**\n   * @param {ContentJSON} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.arr = this.arr.concat(right.arr)\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const len = this.arr.length\n    encoder.writeLen(len - offset)\n    for (let i = offset; i < len; i++) {\n      const c = this.arr[i]\n      encoder.writeString(c === undefined ? 'undefined' : JSON.stringify(c))\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 2\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentJSON}\n */\nexport const readContentJSON = decoder => {\n  const len = decoder.readLen()\n  const cs = []\n  for (let i = 0; i < len; i++) {\n    const c = decoder.readString()\n    if (c === 'undefined') {\n      cs.push(undefined)\n    } else {\n      cs.push(JSON.parse(c))\n    }\n  }\n  return new ContentJSON(cs)\n}\n", "import {\n  UpdateEncoderV1, UpdateEncoderV2, UpdateDecoderV1, UpdateDecoderV2, Transaction, Item, StructStore // eslint-disable-line\n} from '../internals.js'\n\nexport class ContentAny {\n  /**\n   * @param {Array<any>} arr\n   */\n  constructor (arr) {\n    /**\n     * @type {Array<any>}\n     */\n    this.arr = arr\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.arr.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.arr\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentAny}\n   */\n  copy () {\n    return new ContentAny(this.arr)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentAny}\n   */\n  splice (offset) {\n    const right = new ContentAny(this.arr.slice(offset))\n    this.arr = this.arr.slice(0, offset)\n    return right\n  }\n\n  /**\n   * @param {ContentAny} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.arr = this.arr.concat(right.arr)\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const len = this.arr.length\n    encoder.writeLen(len - offset)\n    for (let i = offset; i < len; i++) {\n      const c = this.arr[i]\n      encoder.writeAny(c)\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 8\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentAny}\n */\nexport const readContentAny = decoder => {\n  const len = decoder.readLen()\n  const cs = []\n  for (let i = 0; i < len; i++) {\n    cs.push(decoder.readAny())\n  }\n  return new ContentAny(cs)\n}\n", "import {\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, Transaction, Item, StructStore // eslint-disable-line\n} from '../internals.js'\n\n/**\n * @private\n */\nexport class ContentString {\n  /**\n   * @param {string} str\n   */\n  constructor (str) {\n    /**\n     * @type {string}\n     */\n    this.str = str\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.str.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.str.split('')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentString}\n   */\n  copy () {\n    return new ContentString(this.str)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentString}\n   */\n  splice (offset) {\n    const right = new ContentString(this.str.slice(offset))\n    this.str = this.str.slice(0, offset)\n\n    // Prevent encoding invalid documents because of splitting of surrogate pairs: https://github.com/yjs/yjs/issues/248\n    const firstCharCode = this.str.charCodeAt(offset - 1)\n    if (firstCharCode >= 0xD800 && firstCharCode <= 0xDBFF) {\n      // Last character of the left split is the start of a surrogate utf16/ucs2 pair.\n      // We don't support splitting of surrogate pairs because this may lead to invalid documents.\n      // Replace the invalid character with a unicode replacement character (� / U+FFFD)\n      this.str = this.str.slice(0, offset - 1) + '�'\n      // replace right as well\n      right.str = '�' + right.str.slice(1)\n    }\n    return right\n  }\n\n  /**\n   * @param {ContentString} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.str += right.str\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeString(offset === 0 ? this.str : this.str.slice(offset))\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 4\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentString}\n */\nexport const readContentString = decoder => new ContentString(decoder.readString())\n", "\nimport {\n  readYArray,\n  readYMap,\n  readYText,\n  readYXmlElement,\n  readYXmlFragment,\n  readYXmlHook,\n  readYXmlText,\n  UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, StructStore, Transaction, Item, YEvent, AbstractType // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\n\n/**\n * @type {Array<function(UpdateDecoderV1 | UpdateDecoderV2):AbstractType<any>>}\n * @private\n */\nexport const typeRefs = [\n  readYArray,\n  readYMap,\n  readYText,\n  readYXmlElement,\n  readYXmlFragment,\n  readYXmlHook,\n  readYXmlText\n]\n\nexport const YArrayRefID = 0\nexport const YMapRefID = 1\nexport const YTextRefID = 2\nexport const YXmlElementRefID = 3\nexport const YXmlFragmentRefID = 4\nexport const YXmlHookRefID = 5\nexport const YXmlTextRefID = 6\n\n/**\n * @private\n */\nexport class ContentType {\n  /**\n   * @param {AbstractType<any>} type\n   */\n  constructor (type) {\n    /**\n     * @type {AbstractType<any>}\n     */\n    this.type = type\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.type]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentType}\n   */\n  copy () {\n    return new ContentType(this.type._copy())\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentType}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentType} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    this.type._integrate(transaction.doc, item)\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    let item = this.type._start\n    while (item !== null) {\n      if (!item.deleted) {\n        item.delete(transaction)\n      } else {\n        // This will be gc'd later and we want to merge it if possible\n        // We try to merge all deleted items after each transaction,\n        // but we have no knowledge about that this needs to be merged\n        // since it is not in transaction.ds. Hence we add it to transaction._mergeStructs\n        transaction._mergeStructs.push(item)\n      }\n      item = item.right\n    }\n    this.type._map.forEach(item => {\n      if (!item.deleted) {\n        item.delete(transaction)\n      } else {\n        // same as above\n        transaction._mergeStructs.push(item)\n      }\n    })\n    transaction.changed.delete(this.type)\n  }\n\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {\n    let item = this.type._start\n    while (item !== null) {\n      item.gc(store, true)\n      item = item.right\n    }\n    this.type._start = null\n    this.type._map.forEach(/** @param {Item | null} item */ (item) => {\n      while (item !== null) {\n        item.gc(store, true)\n        item = item.left\n      }\n    })\n    this.type._map = new Map()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    this.type._write(encoder)\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 7\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentType}\n */\nexport const readContentType = decoder => new ContentType(typeRefs[decoder.readTypeRef()](decoder))\n", "\nimport {\n  GC,\n  getState,\n  AbstractStruct,\n  replaceStruct,\n  addStruct,\n  addToDeleteSet,\n  findRootTypeKey,\n  compareIDs,\n  getItem,\n  getItemCleanEnd,\n  getItemCleanStart,\n  readContentDeleted,\n  readContentBinary,\n  readContentJSON,\n  readContentAny,\n  readContentString,\n  readContentEmbed,\n  readContentDoc,\n  createID,\n  readContentFormat,\n  readContentType,\n  addChangedTypeToTransaction,\n  isDeleted,\n  StackItem, DeleteSet, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, ContentType, ContentDeleted, StructStore, ID, AbstractType, Transaction // eslint-disable-line\n} from '../internals.js'\n\nimport * as error from 'lib0/error'\nimport * as binary from 'lib0/binary'\nimport * as array from 'lib0/array'\n\n/**\n * @todo This should return several items\n *\n * @param {StructStore} store\n * @param {ID} id\n * @return {{item:Item, diff:number}}\n */\nexport const followRedone = (store, id) => {\n  /**\n   * @type {ID|null}\n   */\n  let nextID = id\n  let diff = 0\n  let item\n  do {\n    if (diff > 0) {\n      nextID = createID(nextID.client, nextID.clock + diff)\n    }\n    item = getItem(store, nextID)\n    diff = nextID.clock - item.id.clock\n    nextID = item.redone\n  } while (nextID !== null && item instanceof Item)\n  return {\n    item, diff\n  }\n}\n\n/**\n * Make sure that neither item nor any of its parents is ever deleted.\n *\n * This property does not persist when storing it into a database or when\n * sending it to other peers\n *\n * @param {Item|null} item\n * @param {boolean} keep\n */\nexport const keepItem = (item, keep) => {\n  while (item !== null && item.keep !== keep) {\n    item.keep = keep\n    item = /** @type {AbstractType<any>} */ (item.parent)._item\n  }\n}\n\n/**\n * Split leftItem into two items\n * @param {Transaction} transaction\n * @param {Item} leftItem\n * @param {number} diff\n * @return {Item}\n *\n * @function\n * @private\n */\nexport const splitItem = (transaction, leftItem, diff) => {\n  // create rightItem\n  const { client, clock } = leftItem.id\n  const rightItem = new Item(\n    createID(client, clock + diff),\n    leftItem,\n    createID(client, clock + diff - 1),\n    leftItem.right,\n    leftItem.rightOrigin,\n    leftItem.parent,\n    leftItem.parentSub,\n    leftItem.content.splice(diff)\n  )\n  if (leftItem.deleted) {\n    rightItem.markDeleted()\n  }\n  if (leftItem.keep) {\n    rightItem.keep = true\n  }\n  if (leftItem.redone !== null) {\n    rightItem.redone = createID(leftItem.redone.client, leftItem.redone.clock + diff)\n  }\n  // update left (do not set leftItem.rightOrigin as it will lead to problems when syncing)\n  leftItem.right = rightItem\n  // update right\n  if (rightItem.right !== null) {\n    rightItem.right.left = rightItem\n  }\n  // right is more specific.\n  transaction._mergeStructs.push(rightItem)\n  // update parent._map\n  if (rightItem.parentSub !== null && rightItem.right === null) {\n    /** @type {AbstractType<any>} */ (rightItem.parent)._map.set(rightItem.parentSub, rightItem)\n  }\n  leftItem.length = diff\n  return rightItem\n}\n\n/**\n * @param {Array<StackItem>} stack\n * @param {ID} id\n */\nconst isDeletedByUndoStack = (stack, id) => array.some(stack, /** @param {StackItem} s */ s => isDeleted(s.deletions, id))\n\n/**\n * Redoes the effect of this operation.\n *\n * @param {Transaction} transaction The Yjs instance.\n * @param {Item} item\n * @param {Set<Item>} redoitems\n * @param {DeleteSet} itemsToDelete\n * @param {boolean} ignoreRemoteMapChanges\n * @param {import('../utils/UndoManager.js').UndoManager} um\n *\n * @return {Item|null}\n *\n * @private\n */\nexport const redoItem = (transaction, item, redoitems, itemsToDelete, ignoreRemoteMapChanges, um) => {\n  const doc = transaction.doc\n  const store = doc.store\n  const ownClientID = doc.clientID\n  const redone = item.redone\n  if (redone !== null) {\n    return getItemCleanStart(transaction, redone)\n  }\n  let parentItem = /** @type {AbstractType<any>} */ (item.parent)._item\n  /**\n   * @type {Item|null}\n   */\n  let left = null\n  /**\n   * @type {Item|null}\n   */\n  let right\n  // make sure that parent is redone\n  if (parentItem !== null && parentItem.deleted === true) {\n    // try to undo parent if it will be undone anyway\n    if (parentItem.redone === null && (!redoitems.has(parentItem) || redoItem(transaction, parentItem, redoitems, itemsToDelete, ignoreRemoteMapChanges, um) === null)) {\n      return null\n    }\n    while (parentItem.redone !== null) {\n      parentItem = getItemCleanStart(transaction, parentItem.redone)\n    }\n  }\n  const parentType = parentItem === null ? /** @type {AbstractType<any>} */ (item.parent) : /** @type {ContentType} */ (parentItem.content).type\n\n  if (item.parentSub === null) {\n    // Is an array item. Insert at the old position\n    left = item.left\n    right = item\n    // find next cloned_redo items\n    while (left !== null) {\n      /**\n       * @type {Item|null}\n       */\n      let leftTrace = left\n      // trace redone until parent matches\n      while (leftTrace !== null && /** @type {AbstractType<any>} */ (leftTrace.parent)._item !== parentItem) {\n        leftTrace = leftTrace.redone === null ? null : getItemCleanStart(transaction, leftTrace.redone)\n      }\n      if (leftTrace !== null && /** @type {AbstractType<any>} */ (leftTrace.parent)._item === parentItem) {\n        left = leftTrace\n        break\n      }\n      left = left.left\n    }\n    while (right !== null) {\n      /**\n       * @type {Item|null}\n       */\n      let rightTrace = right\n      // trace redone until parent matches\n      while (rightTrace !== null && /** @type {AbstractType<any>} */ (rightTrace.parent)._item !== parentItem) {\n        rightTrace = rightTrace.redone === null ? null : getItemCleanStart(transaction, rightTrace.redone)\n      }\n      if (rightTrace !== null && /** @type {AbstractType<any>} */ (rightTrace.parent)._item === parentItem) {\n        right = rightTrace\n        break\n      }\n      right = right.right\n    }\n  } else {\n    right = null\n    if (item.right && !ignoreRemoteMapChanges) {\n      left = item\n      // Iterate right while right is in itemsToDelete\n      // If it is intended to delete right while item is redone, we can expect that item should replace right.\n      while (left !== null && left.right !== null && (left.right.redone || isDeleted(itemsToDelete, left.right.id) || isDeletedByUndoStack(um.undoStack, left.right.id) || isDeletedByUndoStack(um.redoStack, left.right.id))) {\n        left = left.right\n        // follow redone\n        while (left.redone) left = getItemCleanStart(transaction, left.redone)\n      }\n      if (left && left.right !== null) {\n        // It is not possible to redo this item because it conflicts with a\n        // change from another client\n        return null\n      }\n    } else {\n      left = parentType._map.get(item.parentSub) || null\n    }\n  }\n  const nextClock = getState(store, ownClientID)\n  const nextId = createID(ownClientID, nextClock)\n  const redoneItem = new Item(\n    nextId,\n    left, left && left.lastId,\n    right, right && right.id,\n    parentType,\n    item.parentSub,\n    item.content.copy()\n  )\n  item.redone = nextId\n  keepItem(redoneItem, true)\n  redoneItem.integrate(transaction, 0)\n  return redoneItem\n}\n\n/**\n * Abstract class that represents any content.\n */\nexport class Item extends AbstractStruct {\n  /**\n   * @param {ID} id\n   * @param {Item | null} left\n   * @param {ID | null} origin\n   * @param {Item | null} right\n   * @param {ID | null} rightOrigin\n   * @param {AbstractType<any>|ID|null} parent Is a type if integrated, is null if it is possible to copy parent from left or right, is ID before integration to search for it.\n   * @param {string | null} parentSub\n   * @param {AbstractContent} content\n   */\n  constructor (id, left, origin, right, rightOrigin, parent, parentSub, content) {\n    super(id, content.getLength())\n    /**\n     * The item that was originally to the left of this item.\n     * @type {ID | null}\n     */\n    this.origin = origin\n    /**\n     * The item that is currently to the left of this item.\n     * @type {Item | null}\n     */\n    this.left = left\n    /**\n     * The item that is currently to the right of this item.\n     * @type {Item | null}\n     */\n    this.right = right\n    /**\n     * The item that was originally to the right of this item.\n     * @type {ID | null}\n     */\n    this.rightOrigin = rightOrigin\n    /**\n     * @type {AbstractType<any>|ID|null}\n     */\n    this.parent = parent\n    /**\n     * If the parent refers to this item with some kind of key (e.g. YMap, the\n     * key is specified here. The key is then used to refer to the list in which\n     * to insert this item. If `parentSub = null` type._start is the list in\n     * which to insert to. Otherwise it is `parent._map`.\n     * @type {String | null}\n     */\n    this.parentSub = parentSub\n    /**\n     * If this type's effect is redone this type refers to the type that undid\n     * this operation.\n     * @type {ID | null}\n     */\n    this.redone = null\n    /**\n     * @type {AbstractContent}\n     */\n    this.content = content\n    /**\n     * bit1: keep\n     * bit2: countable\n     * bit3: deleted\n     * bit4: mark - mark node as fast-search-marker\n     * @type {number} byte\n     */\n    this.info = this.content.isCountable() ? binary.BIT2 : 0\n  }\n\n  /**\n   * This is used to mark the item as an indexed fast-search marker\n   *\n   * @type {boolean}\n   */\n  set marker (isMarked) {\n    if (((this.info & binary.BIT4) > 0) !== isMarked) {\n      this.info ^= binary.BIT4\n    }\n  }\n\n  get marker () {\n    return (this.info & binary.BIT4) > 0\n  }\n\n  /**\n   * If true, do not garbage collect this Item.\n   */\n  get keep () {\n    return (this.info & binary.BIT1) > 0\n  }\n\n  set keep (doKeep) {\n    if (this.keep !== doKeep) {\n      this.info ^= binary.BIT1\n    }\n  }\n\n  get countable () {\n    return (this.info & binary.BIT2) > 0\n  }\n\n  /**\n   * Whether this item was deleted or not.\n   * @type {Boolean}\n   */\n  get deleted () {\n    return (this.info & binary.BIT3) > 0\n  }\n\n  set deleted (doDelete) {\n    if (this.deleted !== doDelete) {\n      this.info ^= binary.BIT3\n    }\n  }\n\n  markDeleted () {\n    this.info |= binary.BIT3\n  }\n\n  /**\n   * Return the creator clientID of the missing op or define missing items and return null.\n   *\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    if (this.origin && this.origin.client !== this.id.client && this.origin.clock >= getState(store, this.origin.client)) {\n      return this.origin.client\n    }\n    if (this.rightOrigin && this.rightOrigin.client !== this.id.client && this.rightOrigin.clock >= getState(store, this.rightOrigin.client)) {\n      return this.rightOrigin.client\n    }\n    if (this.parent && this.parent.constructor === ID && this.id.client !== this.parent.client && this.parent.clock >= getState(store, this.parent.client)) {\n      return this.parent.client\n    }\n\n    // We have all missing ids, now find the items\n\n    if (this.origin) {\n      this.left = getItemCleanEnd(transaction, store, this.origin)\n      this.origin = this.left.lastId\n    }\n    if (this.rightOrigin) {\n      this.right = getItemCleanStart(transaction, this.rightOrigin)\n      this.rightOrigin = this.right.id\n    }\n    if ((this.left && this.left.constructor === GC) || (this.right && this.right.constructor === GC)) {\n      this.parent = null\n    }\n    // only set parent if this shouldn't be garbage collected\n    if (!this.parent) {\n      if (this.left && this.left.constructor === Item) {\n        this.parent = this.left.parent\n        this.parentSub = this.left.parentSub\n      }\n      if (this.right && this.right.constructor === Item) {\n        this.parent = this.right.parent\n        this.parentSub = this.right.parentSub\n      }\n    } else if (this.parent.constructor === ID) {\n      const parentItem = getItem(store, this.parent)\n      if (parentItem.constructor === GC) {\n        this.parent = null\n      } else {\n        this.parent = /** @type {ContentType} */ (parentItem.content).type\n      }\n    }\n    return null\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    if (offset > 0) {\n      this.id.clock += offset\n      this.left = getItemCleanEnd(transaction, transaction.doc.store, createID(this.id.client, this.id.clock - 1))\n      this.origin = this.left.lastId\n      this.content = this.content.splice(offset)\n      this.length -= offset\n    }\n\n    if (this.parent) {\n      if ((!this.left && (!this.right || this.right.left !== null)) || (this.left && this.left.right !== this.right)) {\n        /**\n         * @type {Item|null}\n         */\n        let left = this.left\n\n        /**\n         * @type {Item|null}\n         */\n        let o\n        // set o to the first conflicting item\n        if (left !== null) {\n          o = left.right\n        } else if (this.parentSub !== null) {\n          o = /** @type {AbstractType<any>} */ (this.parent)._map.get(this.parentSub) || null\n          while (o !== null && o.left !== null) {\n            o = o.left\n          }\n        } else {\n          o = /** @type {AbstractType<any>} */ (this.parent)._start\n        }\n        // TODO: use something like DeleteSet here (a tree implementation would be best)\n        // @todo use global set definitions\n        /**\n         * @type {Set<Item>}\n         */\n        const conflictingItems = new Set()\n        /**\n         * @type {Set<Item>}\n         */\n        const itemsBeforeOrigin = new Set()\n        // Let c in conflictingItems, b in itemsBeforeOrigin\n        // ***{origin}bbbb{this}{c,b}{c,b}{o}***\n        // Note that conflictingItems is a subset of itemsBeforeOrigin\n        while (o !== null && o !== this.right) {\n          itemsBeforeOrigin.add(o)\n          conflictingItems.add(o)\n          if (compareIDs(this.origin, o.origin)) {\n            // case 1\n            if (o.id.client < this.id.client) {\n              left = o\n              conflictingItems.clear()\n            } else if (compareIDs(this.rightOrigin, o.rightOrigin)) {\n              // this and o are conflicting and point to the same integration points. The id decides which item comes first.\n              // Since this is to the left of o, we can break here\n              break\n            } // else, o might be integrated before an item that this conflicts with. If so, we will find it in the next iterations\n          } else if (o.origin !== null && itemsBeforeOrigin.has(getItem(transaction.doc.store, o.origin))) { // use getItem instead of getItemCleanEnd because we don't want / need to split items.\n            // case 2\n            if (!conflictingItems.has(getItem(transaction.doc.store, o.origin))) {\n              left = o\n              conflictingItems.clear()\n            }\n          } else {\n            break\n          }\n          o = o.right\n        }\n        this.left = left\n      }\n      // reconnect left/right + update parent map/start if necessary\n      if (this.left !== null) {\n        const right = this.left.right\n        this.right = right\n        this.left.right = this\n      } else {\n        let r\n        if (this.parentSub !== null) {\n          r = /** @type {AbstractType<any>} */ (this.parent)._map.get(this.parentSub) || null\n          while (r !== null && r.left !== null) {\n            r = r.left\n          }\n        } else {\n          r = /** @type {AbstractType<any>} */ (this.parent)._start\n          ;/** @type {AbstractType<any>} */ (this.parent)._start = this\n        }\n        this.right = r\n      }\n      if (this.right !== null) {\n        this.right.left = this\n      } else if (this.parentSub !== null) {\n        // set as current parent value if right === null and this is parentSub\n        /** @type {AbstractType<any>} */ (this.parent)._map.set(this.parentSub, this)\n        if (this.left !== null) {\n          // this is the current attribute value of parent. delete right\n          this.left.delete(transaction)\n        }\n      }\n      // adjust length of parent\n      if (this.parentSub === null && this.countable && !this.deleted) {\n        /** @type {AbstractType<any>} */ (this.parent)._length += this.length\n      }\n      addStruct(transaction.doc.store, this)\n      this.content.integrate(transaction, this)\n      // add parent to transaction.changed\n      addChangedTypeToTransaction(transaction, /** @type {AbstractType<any>} */ (this.parent), this.parentSub)\n      if ((/** @type {AbstractType<any>} */ (this.parent)._item !== null && /** @type {AbstractType<any>} */ (this.parent)._item.deleted) || (this.parentSub !== null && this.right !== null)) {\n        // delete if parent is deleted or if this is not the current attribute value of parent\n        this.delete(transaction)\n      }\n    } else {\n      // parent is not defined. Integrate GC struct instead\n      new GC(this.id, this.length).integrate(transaction, 0)\n    }\n  }\n\n  /**\n   * Returns the next non-deleted item\n   */\n  get next () {\n    let n = this.right\n    while (n !== null && n.deleted) {\n      n = n.right\n    }\n    return n\n  }\n\n  /**\n   * Returns the previous non-deleted item\n   */\n  get prev () {\n    let n = this.left\n    while (n !== null && n.deleted) {\n      n = n.left\n    }\n    return n\n  }\n\n  /**\n   * Computes the last content address of this Item.\n   */\n  get lastId () {\n    // allocating ids is pretty costly because of the amount of ids created, so we try to reuse whenever possible\n    return this.length === 1 ? this.id : createID(this.id.client, this.id.clock + this.length - 1)\n  }\n\n  /**\n   * Try to merge two items\n   *\n   * @param {Item} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (\n      this.constructor === right.constructor &&\n      compareIDs(right.origin, this.lastId) &&\n      this.right === right &&\n      compareIDs(this.rightOrigin, right.rightOrigin) &&\n      this.id.client === right.id.client &&\n      this.id.clock + this.length === right.id.clock &&\n      this.deleted === right.deleted &&\n      this.redone === null &&\n      right.redone === null &&\n      this.content.constructor === right.content.constructor &&\n      this.content.mergeWith(right.content)\n    ) {\n      const searchMarker = /** @type {AbstractType<any>} */ (this.parent)._searchMarker\n      if (searchMarker) {\n        searchMarker.forEach(marker => {\n          if (marker.p === right) {\n            // right is going to be \"forgotten\" so we need to update the marker\n            marker.p = this\n            // adjust marker index\n            if (!this.deleted && this.countable) {\n              marker.index -= this.length\n            }\n          }\n        })\n      }\n      if (right.keep) {\n        this.keep = true\n      }\n      this.right = right.right\n      if (this.right !== null) {\n        this.right.left = this\n      }\n      this.length += right.length\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Mark this Item as deleted.\n   *\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    if (!this.deleted) {\n      const parent = /** @type {AbstractType<any>} */ (this.parent)\n      // adjust the length of parent\n      if (this.countable && this.parentSub === null) {\n        parent._length -= this.length\n      }\n      this.markDeleted()\n      addToDeleteSet(transaction.deleteSet, this.id.client, this.id.clock, this.length)\n      addChangedTypeToTransaction(transaction, parent, this.parentSub)\n      this.content.delete(transaction)\n    }\n  }\n\n  /**\n   * @param {StructStore} store\n   * @param {boolean} parentGCd\n   */\n  gc (store, parentGCd) {\n    if (!this.deleted) {\n      throw error.unexpectedCase()\n    }\n    this.content.gc(store)\n    if (parentGCd) {\n      replaceStruct(store, this, new GC(this.id, this.length))\n    } else {\n      this.content = new ContentDeleted(this.length)\n    }\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const origin = offset > 0 ? createID(this.id.client, this.id.clock + offset - 1) : this.origin\n    const rightOrigin = this.rightOrigin\n    const parentSub = this.parentSub\n    const info = (this.content.getRef() & binary.BITS5) |\n      (origin === null ? 0 : binary.BIT8) | // origin is defined\n      (rightOrigin === null ? 0 : binary.BIT7) | // right origin is defined\n      (parentSub === null ? 0 : binary.BIT6) // parentSub is non-null\n    encoder.writeInfo(info)\n    if (origin !== null) {\n      encoder.writeLeftID(origin)\n    }\n    if (rightOrigin !== null) {\n      encoder.writeRightID(rightOrigin)\n    }\n    if (origin === null && rightOrigin === null) {\n      const parent = /** @type {AbstractType<any>} */ (this.parent)\n      if (parent._item !== undefined) {\n        const parentItem = parent._item\n        if (parentItem === null) {\n          // parent type on y._map\n          // find the correct key\n          const ykey = findRootTypeKey(parent)\n          encoder.writeParentInfo(true) // write parentYKey\n          encoder.writeString(ykey)\n        } else {\n          encoder.writeParentInfo(false) // write parent id\n          encoder.writeLeftID(parentItem.id)\n        }\n      } else if (parent.constructor === String) { // this edge case was added by differential updates\n        encoder.writeParentInfo(true) // write parentYKey\n        encoder.writeString(parent)\n      } else if (parent.constructor === ID) {\n        encoder.writeParentInfo(false) // write parent id\n        encoder.writeLeftID(parent)\n      } else {\n        error.unexpectedCase()\n      }\n      if (parentSub !== null) {\n        encoder.writeString(parentSub)\n      }\n    }\n    this.content.write(encoder, offset)\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @param {number} info\n */\nexport const readItemContent = (decoder, info) => contentRefs[info & binary.BITS5](decoder)\n\n/**\n * A lookup map for reading Item content.\n *\n * @type {Array<function(UpdateDecoderV1 | UpdateDecoderV2):AbstractContent>}\n */\nexport const contentRefs = [\n  () => { error.unexpectedCase() }, // GC is not ItemContent\n  readContentDeleted, // 1\n  readContentJSON, // 2\n  readContentBinary, // 3\n  readContentString, // 4\n  readContentEmbed, // 5\n  readContentFormat, // 6\n  readContentType, // 7\n  readContentAny, // 8\n  readContentDoc, // 9\n  () => { error.unexpectedCase() } // 10 - Skip is not ItemContent\n]\n\n/**\n * Do not implement this class!\n */\nexport class AbstractContent {\n  /**\n   * @return {number}\n   */\n  getLength () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * Should return false if this Item is some kind of meta information\n   * (e.g. format information).\n   *\n   * * Whether this Item should be addressable via `yarray.get(i)`\n   * * Whether this Item should be counted when computing yarray.length\n   *\n   * @return {boolean}\n   */\n  isCountable () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @return {AbstractContent}\n   */\n  copy () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {number} _offset\n   * @return {AbstractContent}\n   */\n  splice (_offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {AbstractContent} _right\n   * @return {boolean}\n   */\n  mergeWith (_right) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {Transaction} _transaction\n   * @param {Item} _item\n   */\n  integrate (_transaction, _item) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {Transaction} _transaction\n   */\n  delete (_transaction) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {StructStore} _store\n   */\n  gc (_store) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} _encoder\n   * @param {number} _offset\n   */\n  write (_encoder, _offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    throw error.methodUnimplemented()\n  }\n}\n", "\nimport {\n  AbstractStruct,\n  UpdateEncoderV1, UpdateEncoderV2, StructStore, Transaction, ID // eslint-disable-line\n} from '../internals.js'\nimport * as error from 'lib0/error'\nimport * as encoding from 'lib0/encoding'\n\nexport const structSkipRefNumber = 10\n\n/**\n * @private\n */\nexport class Skip extends AbstractStruct {\n  get deleted () {\n    return true\n  }\n\n  delete () {}\n\n  /**\n   * @param {Skip} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (this.constructor !== right.constructor) {\n      return false\n    }\n    this.length += right.length\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    // skip structs cannot be integrated\n    error.unexpectedCase()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeInfo(structSkipRefNumber)\n    // write as VarUint because Skips can't make use of predictable length-encoding\n    encoding.writeVarUint(encoder.restEncoder, this.length - offset)\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    return null\n  }\n}\n", "/** eslint-env browser */\n\nexport {\n  Doc,\n  Transaction,\n  YArray as Array,\n  YMap as Map,\n  YText as Text,\n  YXmlText as XmlText,\n  YXmlHook as XmlHook,\n  YXmlElement as XmlElement,\n  YXmlFragment as XmlFragment,\n  YXmlEvent,\n  YMapEvent,\n  YArrayEvent,\n  YTextEvent,\n  YEvent,\n  Item,\n  AbstractStruct,\n  GC,\n  ContentBinary,\n  ContentDeleted,\n  ContentEmbed,\n  ContentFormat,\n  ContentJSON,\n  ContentAny,\n  ContentString,\n  ContentType,\n  AbstractType,\n  getTypeChildren,\n  createRelativePositionFromTypeIndex,\n  createRelativePositionFromJSON,\n  createAbsolutePositionFromRelativePosition,\n  compareRelativePositions,\n  AbsolutePosition,\n  RelativePosition,\n  ID,\n  createID,\n  compareIDs,\n  getState,\n  Snapshot,\n  createSnapshot,\n  createDeleteSet,\n  createDeleteSetFromStructStore,\n  cleanupYTextFormatting,\n  snapshot,\n  emptySnapshot,\n  findRootTypeKey,\n  findIndexSS,\n  getItem,\n  typeListToArraySnapshot,\n  typeMapGetSnapshot,\n  createDocFromSnapshot,\n  iterateDeletedStructs,\n  applyUpdate,\n  applyUpdateV2,\n  readUpdate,\n  readUpdateV2,\n  encodeStateAsUpdate,\n  encodeStateAsUpdateV2,\n  encodeStateVector,\n  UndoManager,\n  decodeSnapshot,\n  encodeSnapshot,\n  decodeSnapshotV2,\n  encodeSnapshotV2,\n  decodeStateVector,\n  logUpdate,\n  logUpdateV2,\n  decodeUpdate,\n  decodeUpdateV2,\n  relativePositionToJSON,\n  isDeleted,\n  isParentOf,\n  equalSnapshots,\n  PermanentUserData, // @TODO experimental\n  tryGc,\n  transact,\n  AbstractConnector,\n  logType,\n  mergeUpdates,\n  mergeUpdatesV2,\n  parseUpdateMeta,\n  parseUpdateMetaV2,\n  encodeStateVectorFromUpdate,\n  encodeStateVectorFromUpdateV2,\n  encodeRelativePosition,\n  decodeRelativePosition,\n  diffUpdate,\n  diffUpdateV2,\n  convertUpdateFormatV1ToV2,\n  convertUpdateFormatV2ToV1,\n  obfuscateUpdate,\n  obfuscateUpdateV2,\n  UpdateEncoderV1,\n  equalDeleteSets,\n  snapshotContainsUpdate\n} from './internals.js'\n\nconst glo = /** @type {any} */ (typeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof window !== 'undefined'\n    ? window\n    // @ts-ignore\n    : typeof global !== 'undefined' ? global : {})\n\nconst importIdentifier = '__ $YJS$ __'\n\nif (glo[importIdentifier] === true) {\n  /**\n   * Dear reader of this message. Please take this seriously.\n   *\n   * If you see this message, make sure that you only import one version of Yjs. In many cases,\n   * your package manager installs two versions of Yjs that are used by different packages within your project.\n   * Another reason for this message is that some parts of your project use the commonjs version of Yjs\n   * and others use the EcmaScript version of Yjs.\n   *\n   * This often leads to issues that are hard to debug. We often need to perform constructor checks,\n   * e.g. `struct instanceof GC`. If you imported different versions of Yjs, it is impossible for us to\n   * do the constructor checks anymore - which might break the CRDT algorithm.\n   *\n   * https://github.com/yjs/yjs/issues/438\n   */\n  console.error('Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438')\n}\nglo[importIdentifier] = true\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { BaseTextAttributes, DeltaInsert } from '@blocksuite/virgo';\nimport * as Y from 'yjs';\n\nexport interface OptionalAttributes {\n  attributes?: {\n    [key: string]: any;\n  };\n}\nexport type DeltaOperation = {\n  insert?: string;\n  delete?: number;\n  retain?: number;\n} & OptionalAttributes;\n\nexport class Text {\n  private _yText: Y.Text;\n\n  // TODO toggle transact by options\n  private _shouldTransact = true;\n\n  constructor(input?: Y.Text | string) {\n    if (typeof input === 'string') {\n      this._yText = new Y.Text(input);\n    } else if (input instanceof Y.Text) {\n      this._yText = input;\n    } else {\n      this._yText = new Y.Text();\n    }\n  }\n\n  static fromDelta(delta: DeltaOperation[]) {\n    const result = new Y.Text();\n    result.applyDelta(delta);\n    return new Text(result);\n  }\n\n  get length() {\n    return this._yText.length;\n  }\n\n  get yText() {\n    return this._yText;\n  }\n\n  private _transact(callback: () => void) {\n    if (this._shouldTransact) {\n      const doc = this._yText.doc;\n      if (!doc) {\n        throw new Error(\n          'Failed to transact text! yText is not attached to a doc'\n        );\n      }\n      doc.transact(() => {\n        callback();\n      }, doc.clientID);\n    } else {\n      callback();\n    }\n  }\n\n  clone() {\n    return new Text(this._yText.clone());\n  }\n\n  /**\n   * NOTE: The string included in [index, index + length) will be deleted.\n   *\n   * Here are three cases for point position(index + length):\n   * [{insert: 'abc', ...}, {insert: 'def', ...}, {insert: 'ghi', ...}]\n   * 1. abc|de|fghi\n   *    left: [{insert: 'abc', ...}]\n   *    right: [{insert: 'f', ...}, {insert: 'ghi', ...}]\n   * 2. abc|def|ghi\n   *    left: [{insert: 'abc', ...}]\n   *    right: [{insert: 'ghi', ...}]\n   * 3. abc|defg|hi\n   *    left: [{insert: 'abc', ...}]\n   *    right: [{insert: 'hi', ...}]\n   */\n  split(index: number, length = 0): Text {\n    if (index < 0 || length < 0 || index + length > this._yText.length) {\n      throw new Error(\n        'Failed to split text! Index or length out of range, index: ' +\n          index +\n          ', length: ' +\n          length +\n          ', text length: ' +\n          this._yText.length\n      );\n    }\n    const deltas = this._yText.toDelta();\n    if (!(deltas instanceof Array)) {\n      throw new Error(\n        'This text cannot be split because we failed to get the deltas of it.'\n      );\n    }\n    let tmpIndex = 0;\n    const rightDeltas: DeltaInsert[] = [];\n    for (let i = 0; i < deltas.length; i++) {\n      const insert = deltas[i].insert;\n      if (typeof insert === 'string') {\n        if (tmpIndex + insert.length >= index + length) {\n          const insertRight = insert.slice(index + length - tmpIndex);\n          rightDeltas.push({\n            insert: insertRight,\n            attributes: deltas[i].attributes,\n          });\n          rightDeltas.push(...deltas.slice(i + 1));\n          break;\n        }\n        tmpIndex += insert.length;\n      } else {\n        throw new Error(\n          'This text cannot be split because it contains non-string insert.'\n        );\n      }\n    }\n\n    this.delete(index, this.length - index);\n    const rightYText = new Y.Text();\n    rightYText.applyDelta(rightDeltas);\n    const rightText = new Text(rightYText);\n\n    return rightText;\n  }\n\n  insert(content: string, index: number, attributes?: Record<string, unknown>) {\n    if (!content.length) {\n      return;\n    }\n    if (index < 0 || index > this._yText.length) {\n      throw new Error(\n        'Failed to insert text! Index or length out of range, index: ' +\n          index +\n          ', length: ' +\n          length +\n          ', text length: ' +\n          this._yText.length\n      );\n    }\n    this._transact(() => {\n      this._yText.insert(index, content, attributes);\n    });\n  }\n\n  /**\n   * @deprecated Use {@link insert} or {@link applyDelta} instead.\n   */\n  insertList(insertTexts: DeltaOperation[], index: number) {\n    if (!insertTexts.length) {\n      return;\n    }\n    this._transact(() => {\n      for (let i = insertTexts.length - 1; i >= 0; i--) {\n        this._yText.insert(\n          index,\n          (insertTexts[i].insert as string) || '',\n          // eslint-disable-next-line @typescript-eslint/ban-types\n          insertTexts[i].attributes as Object | undefined\n        );\n      }\n    });\n  }\n\n  join(other: Text) {\n    if (!other.toDelta().length) {\n      return;\n    }\n    this._transact(() => {\n      const yOther = other._yText;\n      const delta: DeltaOperation[] = yOther.toDelta();\n      delta.unshift({ retain: this._yText.length });\n      this._yText.applyDelta(delta);\n    });\n  }\n\n  format(index: number, length: number, format: any) {\n    if (length === 0) {\n      return;\n    }\n    if (index < 0 || length < 0 || index + length > this._yText.length) {\n      throw new Error(\n        'Failed to format text! Index or length out of range, index: ' +\n          index +\n          ', length: ' +\n          length +\n          ', text length: ' +\n          this._yText.length\n      );\n    }\n    this._transact(() => {\n      this._yText.format(index, length, format);\n    });\n  }\n\n  delete(index: number, length: number) {\n    if (length === 0) {\n      return;\n    }\n    if (index < 0 || length < 0 || index + length > this._yText.length) {\n      throw new Error(\n        'Failed to delete text! Index or length out of range, index: ' +\n          index +\n          ', length: ' +\n          length +\n          ', text length: ' +\n          this._yText.length\n      );\n    }\n    this._transact(() => {\n      this._yText.delete(index, length);\n    });\n  }\n\n  replace(\n    index: number,\n    length: number,\n    content: string,\n    attributes?: BaseTextAttributes\n  ) {\n    if (index < 0 || length < 0 || index + length > this._yText.length) {\n      throw new Error(\n        'Failed to replace text! The length of the text is' +\n          this._yText.length +\n          ', but you are trying to replace from' +\n          index +\n          'to' +\n          index +\n          length\n      );\n    }\n    this._transact(() => {\n      this._yText.delete(index, length);\n      this._yText.insert(index, content, attributes);\n    });\n  }\n\n  clear() {\n    if (!this._yText.length) {\n      return;\n    }\n    this._transact(() => {\n      this._yText.delete(0, this._yText.length);\n    });\n  }\n\n  applyDelta(delta: DeltaOperation[]) {\n    this._transact(() => {\n      this._yText?.applyDelta(delta);\n    });\n  }\n\n  toDelta(): DeltaOperation[] {\n    return this._yText?.toDelta() || [];\n  }\n\n  sliceToDelta(begin: number, end?: number): DeltaOperation[] {\n    const result: DeltaOperation[] = [];\n    if (end && begin >= end) {\n      return result;\n    }\n\n    const delta = this.toDelta();\n    if (begin < 1 && !end) {\n      return delta;\n    }\n\n    if (delta && delta instanceof Array) {\n      let charNum = 0;\n      for (let i = 0; i < delta.length; i++) {\n        const content = delta[i];\n        let contentText: string = content.insert || '';\n        const contentLen = contentText.length;\n\n        const isLastOp = end && charNum + contentLen > end;\n        const isFirstOp = charNum + contentLen > begin && result.length === 0;\n        if (isFirstOp && isLastOp) {\n          contentText = contentText.slice(begin - charNum, end - charNum);\n          result.push({\n            ...content,\n            insert: contentText,\n          });\n          break;\n        } else if (isFirstOp || isLastOp) {\n          contentText = isLastOp\n            ? contentText.slice(0, end - charNum)\n            : contentText.slice(begin - charNum);\n\n          result.push({\n            ...content,\n            insert: contentText,\n          });\n        } else {\n          result.length > 0 && result.push(content);\n        }\n\n        if (end && charNum + contentLen > end) {\n          break;\n        }\n\n        charNum = charNum + contentLen;\n      }\n    }\n    return result;\n  }\n\n  toString() {\n    return this._yText?.toString() || '';\n  }\n}\n", "import { Slot } from '@blocksuite/global/utils';\nimport type * as Y from 'yjs';\nimport { z } from 'zod';\n\nimport { Text } from './text-adapter.js';\nimport type { Page } from './workspace/index.js';\nimport type { YBlock } from './workspace/page.js';\n\nconst FlavourSchema = z.string();\nconst ElementTagSchema = z.object({\n  _$litStatic$: z.string(),\n  r: z.symbol(),\n});\nconst ParentSchema = z.array(z.string()).optional();\nconst ContentSchema = z.array(z.string()).optional();\nconst role = ['root', 'hub', 'content'] as const;\nconst RoleSchema = z.enum(role);\n\nexport type RoleType = (typeof role)[number];\n\nexport interface InternalPrimitives {\n  Text: (input?: Y.Text | string) => Text;\n}\n\nexport const internalPrimitives: InternalPrimitives = Object.freeze({\n  Text: (input: Y.Text | string = '') => new Text(input),\n});\n\nexport const BlockSchema = z.object({\n  version: z.number(),\n  model: z.object({\n    role: RoleSchema,\n    flavour: FlavourSchema,\n    tag: ElementTagSchema,\n    parent: ParentSchema,\n    children: ContentSchema,\n    props: z\n      .function()\n      .args(z.custom<InternalPrimitives>())\n      .returns(z.record(z.any()))\n      .optional(),\n    toModel: z.function().args().returns(z.custom<BaseBlockModel>()).optional(),\n  }),\n});\n\nexport type BlockSchemaType = z.infer<typeof BlockSchema>;\n\nexport type PropsSetter<Props> = (props: Props) => Partial<Props>;\nexport type PropsGetter<Props> = (\n  internalPrimitives: InternalPrimitives\n) => Props;\n\n// ported from lit\ninterface StaticValue {\n  _$litStatic$: string;\n  r: symbol;\n}\n\nexport type SchemaToModel<\n  Schema extends {\n    model: {\n      props: PropsGetter<object>;\n      flavour: string;\n    };\n  }\n> = BaseBlockModel &\n  ReturnType<Schema['model']['props']> & {\n    flavour: Schema['model']['flavour'];\n  };\n\nexport function defineBlockSchema<\n  Flavour extends string,\n  Role extends RoleType,\n  Props extends object,\n  Ext extends Record<string, unknown>,\n  Metadata extends Readonly<{\n    version: number;\n    role: Role;\n    tag: StaticValue;\n    parent?: string[];\n    children?: string[];\n  }>,\n  Model extends BaseBlockModel<Props>\n>(options: {\n  flavour: Flavour;\n  metadata: Metadata;\n  props?: (internalPrimitives: InternalPrimitives) => Props;\n  toModel?: () => Model;\n}): {\n  version: number;\n  model: {\n    role: Role;\n    props: PropsGetter<Props>;\n    flavour: Flavour;\n  } & Metadata;\n};\n\nexport function defineBlockSchema({\n  flavour,\n  props,\n  metadata,\n  toModel,\n}: {\n  flavour: string;\n  metadata: {\n    version: number;\n    role: RoleType;\n    tag: StaticValue;\n    parent?: string[];\n    children?: string[];\n  };\n  props?: (internalPrimitives: InternalPrimitives) => Record<string, unknown>;\n  toModel?: () => BaseBlockModel;\n}): BlockSchemaType {\n  const schema = {\n    version: metadata.version,\n    model: {\n      tag: metadata.tag,\n      role: metadata.role,\n      parent: metadata.parent,\n      children: metadata.children,\n      flavour,\n      props,\n      toModel,\n    },\n  } satisfies z.infer<typeof BlockSchema>;\n  BlockSchema.parse(schema);\n  return schema;\n}\n\nfunction MagicProps(): {\n  new <Props>(): Props;\n} {\n  // @ts-ignore\n  return class {};\n}\n\n// @ts-ignore\nexport class BaseBlockModel<\n  Props extends object = object\n> extends MagicProps()<Props> {\n  static version: number;\n  flavour!: string;\n  tag!: StaticValue;\n  role!: RoleType;\n  page!: Page;\n  id!: string;\n  yBlock!: YBlock;\n\n  propsUpdated = new Slot();\n  childrenUpdated = new Slot();\n  childMap = new Map<string, number>();\n\n  children: BaseBlockModel[] = [];\n\n  // TODO: remove these\n  type?: string;\n  text?: Text;\n  sourceId?: string;\n\n  isEmpty() {\n    return this.children.length === 0;\n  }\n\n  firstChild(): BaseBlockModel | null {\n    return this.children[0] || null;\n  }\n\n  lastChild(): BaseBlockModel | null {\n    if (!this.children.length) {\n      return this;\n    }\n    return this.children[this.children.length - 1].lastChild();\n  }\n\n  lastItem(): BaseBlockModel | null {\n    if (!this.children.length) {\n      return this;\n    }\n    return this.children[this.children.length - 1];\n  }\n\n  dispose() {\n    this.propsUpdated.dispose();\n    this.childrenUpdated.dispose();\n  }\n\n  onCreated() {\n    // Empty by default\n  }\n}\n", "import type { BlobStorage } from './types.js';\n\nexport const createMemoryStorage = (): BlobStorage => {\n  const memoryStorage = new Map<string, Blob>();\n  return {\n    crud: {\n      get: async (key: string) => {\n        return memoryStorage.get(key) ?? null;\n      },\n      set: async (key: string, value: Blob) => {\n        memoryStorage.set(key, value);\n        return key;\n      },\n      delete: async (key: string) => {\n        memoryStorage.delete(key);\n      },\n      list: async () => {\n        return [...memoryStorage.keys()];\n      },\n    },\n  };\n};\n", "import * as ws from 'lib0/websocket'\nimport * as map from 'lib0/map'\nimport * as error from 'lib0/error'\nimport * as random from 'lib0/random'\nimport * as encoding from 'lib0/encoding'\nimport * as decoding from 'lib0/decoding'\nimport { Observable } from 'lib0/observable'\nimport * as logging from 'lib0/logging'\nimport * as promise from 'lib0/promise'\nimport * as bc from 'lib0/broadcastchannel'\nimport * as buffer from 'lib0/buffer'\nimport * as math from 'lib0/math'\nimport { createMutex } from 'lib0/mutex'\n\nimport * as Y from 'yjs' // eslint-disable-line\nimport Peer from 'simple-peer/simplepeer.min.js'\n\nimport * as syncProtocol from 'y-protocols/sync'\nimport * as awarenessProtocol from 'y-protocols/awareness'\n\nimport * as cryptoutils from './crypto.js'\n\nconst log = logging.createModuleLogger('y-webrtc')\n\nconst messageSync = 0\nconst messageQueryAwareness = 3\nconst messageAwareness = 1\nconst messageBcPeerId = 4\n\n/**\n * @type {Map<string, SignalingConn>}\n */\nconst signalingConns = new Map()\n\n/**\n * @type {Map<string,Room>}\n */\nconst rooms = new Map()\n\n/**\n * @param {Room} room\n */\nconst checkIsSynced = room => {\n  let synced = true\n  room.webrtcConns.forEach(peer => {\n    if (!peer.synced) {\n      synced = false\n    }\n  })\n  if ((!synced && room.synced) || (synced && !room.synced)) {\n    room.synced = synced\n    room.provider.emit('synced', [{ synced }])\n    log('synced ', logging.BOLD, room.name, logging.UNBOLD, ' with all peers')\n  }\n}\n\n/**\n * @param {Room} room\n * @param {Uint8Array} buf\n * @param {function} syncedCallback\n * @return {encoding.Encoder?}\n */\nconst readMessage = (room, buf, syncedCallback) => {\n  const decoder = decoding.createDecoder(buf)\n  const encoder = encoding.createEncoder()\n  const messageType = decoding.readVarUint(decoder)\n  if (room === undefined) {\n    return null\n  }\n  const awareness = room.awareness\n  const doc = room.doc\n  let sendReply = false\n  switch (messageType) {\n    case messageSync: {\n      encoding.writeVarUint(encoder, messageSync)\n      const syncMessageType = syncProtocol.readSyncMessage(decoder, encoder, doc, room)\n      if (syncMessageType === syncProtocol.messageYjsSyncStep2 && !room.synced) {\n        syncedCallback()\n      }\n      if (syncMessageType === syncProtocol.messageYjsSyncStep1) {\n        sendReply = true\n      }\n      break\n    }\n    case messageQueryAwareness:\n      encoding.writeVarUint(encoder, messageAwareness)\n      encoding.writeVarUint8Array(encoder, awarenessProtocol.encodeAwarenessUpdate(awareness, Array.from(awareness.getStates().keys())))\n      sendReply = true\n      break\n    case messageAwareness:\n      awarenessProtocol.applyAwarenessUpdate(awareness, decoding.readVarUint8Array(decoder), room)\n      break\n    case messageBcPeerId: {\n      const add = decoding.readUint8(decoder) === 1\n      const peerName = decoding.readVarString(decoder)\n      if (peerName !== room.peerId && ((room.bcConns.has(peerName) && !add) || (!room.bcConns.has(peerName) && add))) {\n        const removed = []\n        const added = []\n        if (add) {\n          room.bcConns.add(peerName)\n          added.push(peerName)\n        } else {\n          room.bcConns.delete(peerName)\n          removed.push(peerName)\n        }\n        room.provider.emit('peers', [{\n          added,\n          removed,\n          webrtcPeers: Array.from(room.webrtcConns.keys()),\n          bcPeers: Array.from(room.bcConns)\n        }])\n        broadcastBcPeerId(room)\n      }\n      break\n    }\n    default:\n      console.error('Unable to compute message')\n      return encoder\n  }\n  if (!sendReply) {\n    // nothing has been written, no answer created\n    return null\n  }\n  return encoder\n}\n\n/**\n * @param {WebrtcConn} peerConn\n * @param {Uint8Array} buf\n * @return {encoding.Encoder?}\n */\nconst readPeerMessage = (peerConn, buf) => {\n  const room = peerConn.room\n  log('received message from ', logging.BOLD, peerConn.remotePeerId, logging.GREY, ' (', room.name, ')', logging.UNBOLD, logging.UNCOLOR)\n  return readMessage(room, buf, () => {\n    peerConn.synced = true\n    log('synced ', logging.BOLD, room.name, logging.UNBOLD, ' with ', logging.BOLD, peerConn.remotePeerId)\n    checkIsSynced(room)\n  })\n}\n\n/**\n * @param {WebrtcConn} webrtcConn\n * @param {encoding.Encoder} encoder\n */\nconst sendWebrtcConn = (webrtcConn, encoder) => {\n  log('send message to ', logging.BOLD, webrtcConn.remotePeerId, logging.UNBOLD, logging.GREY, ' (', webrtcConn.room.name, ')', logging.UNCOLOR)\n  try {\n    webrtcConn.peer.send(encoding.toUint8Array(encoder))\n  } catch (e) {}\n}\n\n/**\n * @param {Room} room\n * @param {Uint8Array} m\n */\nconst broadcastWebrtcConn = (room, m) => {\n  log('broadcast message in ', logging.BOLD, room.name, logging.UNBOLD)\n  room.webrtcConns.forEach(conn => {\n    try {\n      conn.peer.send(m)\n    } catch (e) {}\n  })\n}\n\nexport class WebrtcConn {\n  /**\n   * @param {SignalingConn} signalingConn\n   * @param {boolean} initiator\n   * @param {string} remotePeerId\n   * @param {Room} room\n   */\n  constructor (signalingConn, initiator, remotePeerId, room) {\n    log('establishing connection to ', logging.BOLD, remotePeerId)\n    this.room = room\n    this.remotePeerId = remotePeerId\n    this.closed = false\n    this.connected = false\n    this.synced = false\n    /**\n     * @type {any}\n     */\n    this.peer = new Peer({ initiator, ...room.provider.peerOpts })\n    this.peer.on('signal', signal => {\n      publishSignalingMessage(signalingConn, room, { to: remotePeerId, from: room.peerId, type: 'signal', signal })\n    })\n    this.peer.on('connect', () => {\n      log('connected to ', logging.BOLD, remotePeerId)\n      this.connected = true\n      // send sync step 1\n      const provider = room.provider\n      const doc = provider.doc\n      const awareness = room.awareness\n      const encoder = encoding.createEncoder()\n      encoding.writeVarUint(encoder, messageSync)\n      syncProtocol.writeSyncStep1(encoder, doc)\n      sendWebrtcConn(this, encoder)\n      const awarenessStates = awareness.getStates()\n      if (awarenessStates.size > 0) {\n        const encoder = encoding.createEncoder()\n        encoding.writeVarUint(encoder, messageAwareness)\n        encoding.writeVarUint8Array(encoder, awarenessProtocol.encodeAwarenessUpdate(awareness, Array.from(awarenessStates.keys())))\n        sendWebrtcConn(this, encoder)\n      }\n    })\n    this.peer.on('close', () => {\n      this.connected = false\n      this.closed = true\n      if (room.webrtcConns.has(this.remotePeerId)) {\n        room.webrtcConns.delete(this.remotePeerId)\n        room.provider.emit('peers', [{\n          removed: [this.remotePeerId],\n          added: [],\n          webrtcPeers: Array.from(room.webrtcConns.keys()),\n          bcPeers: Array.from(room.bcConns)\n        }])\n      }\n      checkIsSynced(room)\n      this.peer.destroy()\n      log('closed connection to ', logging.BOLD, remotePeerId)\n      announceSignalingInfo(room)\n    })\n    this.peer.on('error', err => {\n      log('Error in connection to ', logging.BOLD, remotePeerId, ': ', err)\n      announceSignalingInfo(room)\n    })\n    this.peer.on('data', data => {\n      const answer = readPeerMessage(this, data)\n      if (answer !== null) {\n        sendWebrtcConn(this, answer)\n      }\n    })\n  }\n\n  destroy () {\n    this.peer.destroy()\n  }\n}\n\n/**\n * @param {Room} room\n * @param {Uint8Array} m\n */\nconst broadcastBcMessage = (room, m) => cryptoutils.encrypt(m, room.key).then(data =>\n  room.mux(() =>\n    bc.publish(room.name, data)\n  )\n)\n\n/**\n * @param {Room} room\n * @param {Uint8Array} m\n */\nconst broadcastRoomMessage = (room, m) => {\n  if (room.bcconnected) {\n    broadcastBcMessage(room, m)\n  }\n  broadcastWebrtcConn(room, m)\n}\n\n/**\n * @param {Room} room\n */\nconst announceSignalingInfo = room => {\n  signalingConns.forEach(conn => {\n    // only subcribe if connection is established, otherwise the conn automatically subscribes to all rooms\n    if (conn.connected) {\n      conn.send({ type: 'subscribe', topics: [room.name] })\n      if (room.webrtcConns.size < room.provider.maxConns) {\n        publishSignalingMessage(conn, room, { type: 'announce', from: room.peerId })\n      }\n    }\n  })\n}\n\n/**\n * @param {Room} room\n */\nconst broadcastBcPeerId = room => {\n  if (room.provider.filterBcConns) {\n    // broadcast peerId via broadcastchannel\n    const encoderPeerIdBc = encoding.createEncoder()\n    encoding.writeVarUint(encoderPeerIdBc, messageBcPeerId)\n    encoding.writeUint8(encoderPeerIdBc, 1)\n    encoding.writeVarString(encoderPeerIdBc, room.peerId)\n    broadcastBcMessage(room, encoding.toUint8Array(encoderPeerIdBc))\n  }\n}\n\nexport class Room {\n  /**\n   * @param {Y.Doc} doc\n   * @param {WebrtcProvider} provider\n   * @param {string} name\n   * @param {CryptoKey|null} key\n   */\n  constructor (doc, provider, name, key) {\n    /**\n     * Do not assume that peerId is unique. This is only meant for sending signaling messages.\n     *\n     * @type {string}\n     */\n    this.peerId = random.uuidv4()\n    this.doc = doc\n    /**\n     * @type {awarenessProtocol.Awareness}\n     */\n    this.awareness = provider.awareness\n    this.provider = provider\n    this.synced = false\n    this.name = name\n    // @todo make key secret by scoping\n    this.key = key\n    /**\n     * @type {Map<string, WebrtcConn>}\n     */\n    this.webrtcConns = new Map()\n    /**\n     * @type {Set<string>}\n     */\n    this.bcConns = new Set()\n    this.mux = createMutex()\n    this.bcconnected = false\n    /**\n     * @param {ArrayBuffer} data\n     */\n    this._bcSubscriber = data =>\n      cryptoutils.decrypt(new Uint8Array(data), key).then(m =>\n        this.mux(() => {\n          const reply = readMessage(this, m, () => {})\n          if (reply) {\n            broadcastBcMessage(this, encoding.toUint8Array(reply))\n          }\n        })\n      )\n    /**\n     * Listens to Yjs updates and sends them to remote peers\n     *\n     * @param {Uint8Array} update\n     * @param {any} origin\n     */\n    this._docUpdateHandler = (update, origin) => {\n      const encoder = encoding.createEncoder()\n      encoding.writeVarUint(encoder, messageSync)\n      syncProtocol.writeUpdate(encoder, update)\n      broadcastRoomMessage(this, encoding.toUint8Array(encoder))\n    }\n    /**\n     * Listens to Awareness updates and sends them to remote peers\n     *\n     * @param {any} changed\n     * @param {any} origin\n     */\n    this._awarenessUpdateHandler = ({ added, updated, removed }, origin) => {\n      const changedClients = added.concat(updated).concat(removed)\n      const encoderAwareness = encoding.createEncoder()\n      encoding.writeVarUint(encoderAwareness, messageAwareness)\n      encoding.writeVarUint8Array(encoderAwareness, awarenessProtocol.encodeAwarenessUpdate(this.awareness, changedClients))\n      broadcastRoomMessage(this, encoding.toUint8Array(encoderAwareness))\n    }\n\n    this._beforeUnloadHandler = () => {\n      awarenessProtocol.removeAwarenessStates(this.awareness, [doc.clientID], 'window unload')\n      rooms.forEach(room => {\n        room.disconnect()\n      })\n    }\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('beforeunload', this._beforeUnloadHandler)\n    } else if (typeof process !== 'undefined') {\n      process.on('exit', this._beforeUnloadHandler)\n    }\n  }\n\n  connect () {\n    this.doc.on('update', this._docUpdateHandler)\n    this.awareness.on('update', this._awarenessUpdateHandler)\n    // signal through all available signaling connections\n    announceSignalingInfo(this)\n    const roomName = this.name\n    bc.subscribe(roomName, this._bcSubscriber)\n    this.bcconnected = true\n    // broadcast peerId via broadcastchannel\n    broadcastBcPeerId(this)\n    // write sync step 1\n    const encoderSync = encoding.createEncoder()\n    encoding.writeVarUint(encoderSync, messageSync)\n    syncProtocol.writeSyncStep1(encoderSync, this.doc)\n    broadcastBcMessage(this, encoding.toUint8Array(encoderSync))\n    // broadcast local state\n    const encoderState = encoding.createEncoder()\n    encoding.writeVarUint(encoderState, messageSync)\n    syncProtocol.writeSyncStep2(encoderState, this.doc)\n    broadcastBcMessage(this, encoding.toUint8Array(encoderState))\n    // write queryAwareness\n    const encoderAwarenessQuery = encoding.createEncoder()\n    encoding.writeVarUint(encoderAwarenessQuery, messageQueryAwareness)\n    broadcastBcMessage(this, encoding.toUint8Array(encoderAwarenessQuery))\n    // broadcast local awareness state\n    const encoderAwarenessState = encoding.createEncoder()\n    encoding.writeVarUint(encoderAwarenessState, messageAwareness)\n    encoding.writeVarUint8Array(encoderAwarenessState, awarenessProtocol.encodeAwarenessUpdate(this.awareness, [this.doc.clientID]))\n    broadcastBcMessage(this, encoding.toUint8Array(encoderAwarenessState))\n  }\n\n  disconnect () {\n    // signal through all available signaling connections\n    signalingConns.forEach(conn => {\n      if (conn.connected) {\n        conn.send({ type: 'unsubscribe', topics: [this.name] })\n      }\n    })\n    awarenessProtocol.removeAwarenessStates(this.awareness, [this.doc.clientID], 'disconnect')\n    // broadcast peerId removal via broadcastchannel\n    const encoderPeerIdBc = encoding.createEncoder()\n    encoding.writeVarUint(encoderPeerIdBc, messageBcPeerId)\n    encoding.writeUint8(encoderPeerIdBc, 0) // remove peerId from other bc peers\n    encoding.writeVarString(encoderPeerIdBc, this.peerId)\n    broadcastBcMessage(this, encoding.toUint8Array(encoderPeerIdBc))\n\n    bc.unsubscribe(this.name, this._bcSubscriber)\n    this.bcconnected = false\n    this.doc.off('update', this._docUpdateHandler)\n    this.awareness.off('update', this._awarenessUpdateHandler)\n    this.webrtcConns.forEach(conn => conn.destroy())\n  }\n\n  destroy () {\n    this.disconnect()\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('beforeunload', this._beforeUnloadHandler)\n    } else if (typeof process !== 'undefined') {\n      process.off('exit', this._beforeUnloadHandler)\n    }\n  }\n}\n\n/**\n * @param {Y.Doc} doc\n * @param {WebrtcProvider} provider\n * @param {string} name\n * @param {CryptoKey|null} key\n * @return {Room}\n */\nconst openRoom = (doc, provider, name, key) => {\n  // there must only be one room\n  if (rooms.has(name)) {\n    throw error.create(`A Yjs Doc connected to room \"${name}\" already exists!`)\n  }\n  const room = new Room(doc, provider, name, key)\n  rooms.set(name, /** @type {Room} */ (room))\n  return room\n}\n\n/**\n * @param {SignalingConn} conn\n * @param {Room} room\n * @param {any} data\n */\nconst publishSignalingMessage = (conn, room, data) => {\n  if (room.key) {\n    cryptoutils.encryptJson(data, room.key).then(data => {\n      conn.send({ type: 'publish', topic: room.name, data: buffer.toBase64(data) })\n    })\n  } else {\n    conn.send({ type: 'publish', topic: room.name, data })\n  }\n}\n\nexport class SignalingConn extends ws.WebsocketClient {\n  constructor (url) {\n    super(url)\n    /**\n     * @type {Set<WebrtcProvider>}\n     */\n    this.providers = new Set()\n    this.on('connect', () => {\n      log(`connected (${url})`)\n      const topics = Array.from(rooms.keys())\n      this.send({ type: 'subscribe', topics })\n      rooms.forEach(room =>\n        publishSignalingMessage(this, room, { type: 'announce', from: room.peerId })\n      )\n    })\n    this.on('message', m => {\n      switch (m.type) {\n        case 'publish': {\n          const roomName = m.topic\n          const room = rooms.get(roomName)\n          if (room == null || typeof roomName !== 'string') {\n            return\n          }\n          const execMessage = data => {\n            const webrtcConns = room.webrtcConns\n            const peerId = room.peerId\n            if (data == null || data.from === peerId || (data.to !== undefined && data.to !== peerId) || room.bcConns.has(data.from)) {\n              // ignore messages that are not addressed to this conn, or from clients that are connected via broadcastchannel\n              return\n            }\n            const emitPeerChange = webrtcConns.has(data.from)\n              ? () => {}\n              : () =>\n                room.provider.emit('peers', [{\n                  removed: [],\n                  added: [data.from],\n                  webrtcPeers: Array.from(room.webrtcConns.keys()),\n                  bcPeers: Array.from(room.bcConns)\n                }])\n            switch (data.type) {\n              case 'announce':\n                if (webrtcConns.size < room.provider.maxConns) {\n                  map.setIfUndefined(webrtcConns, data.from, () => new WebrtcConn(this, true, data.from, room))\n                  emitPeerChange()\n                }\n                break\n              case 'signal':\n                if (data.to === peerId) {\n                  map.setIfUndefined(webrtcConns, data.from, () => new WebrtcConn(this, false, data.from, room)).peer.signal(data.signal)\n                  emitPeerChange()\n                }\n                break\n            }\n          }\n          if (room.key) {\n            if (typeof m.data === 'string') {\n              cryptoutils.decryptJson(buffer.fromBase64(m.data), room.key).then(execMessage)\n            }\n          } else {\n            execMessage(m.data)\n          }\n        }\n      }\n    })\n    this.on('disconnect', () => log(`disconnect (${url})`))\n  }\n}\n\n/**\n * @typedef {Object} ProviderOptions\n * @property {Array<string>} [signaling]\n * @property {string} [password]\n * @property {awarenessProtocol.Awareness} [awareness]\n * @property {number} [maxConns]\n * @property {boolean} [filterBcConns]\n * @property {any} [peerOpts]\n */\n\n/**\n * @extends Observable<string>\n */\nexport class WebrtcProvider extends Observable {\n  /**\n   * @param {string} roomName\n   * @param {Y.Doc} doc\n   * @param {ProviderOptions?} opts\n   */\n  constructor (\n    roomName,\n    doc,\n    {\n      signaling = ['wss://y-webrtc-eu.fly.dev'],\n      password = null,\n      awareness = new awarenessProtocol.Awareness(doc),\n      maxConns = 20 + math.floor(random.rand() * 15), // the random factor reduces the chance that n clients form a cluster\n      filterBcConns = true,\n      peerOpts = {} // simple-peer options. See https://github.com/feross/simple-peer#peer--new-peeropts\n    } = {}\n  ) {\n    super()\n    this.roomName = roomName\n    this.doc = doc\n    this.filterBcConns = filterBcConns\n    /**\n     * @type {awarenessProtocol.Awareness}\n     */\n    this.awareness = awareness\n    this.shouldConnect = false\n    this.signalingUrls = signaling\n    this.signalingConns = []\n    this.maxConns = maxConns\n    this.peerOpts = peerOpts\n    /**\n     * @type {PromiseLike<CryptoKey | null>}\n     */\n    this.key = password ? cryptoutils.deriveKey(password, roomName) : /** @type {PromiseLike<null>} */ (promise.resolve(null))\n    /**\n     * @type {Room|null}\n     */\n    this.room = null\n    this.key.then(key => {\n      this.room = openRoom(doc, this, roomName, key)\n      if (this.shouldConnect) {\n        this.room.connect()\n      } else {\n        this.room.disconnect()\n      }\n    })\n    this.connect()\n    this.destroy = this.destroy.bind(this)\n    doc.on('destroy', this.destroy)\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get connected () {\n    return this.room !== null && this.shouldConnect\n  }\n\n  connect () {\n    this.shouldConnect = true\n    this.signalingUrls.forEach(url => {\n      const signalingConn = map.setIfUndefined(signalingConns, url, () => new SignalingConn(url))\n      this.signalingConns.push(signalingConn)\n      signalingConn.providers.add(this)\n    })\n    if (this.room) {\n      this.room.connect()\n    }\n  }\n\n  disconnect () {\n    this.shouldConnect = false\n    this.signalingConns.forEach(conn => {\n      conn.providers.delete(this)\n      if (conn.providers.size === 0) {\n        conn.destroy()\n        signalingConns.delete(conn.url)\n      }\n    })\n    if (this.room) {\n      this.room.disconnect()\n    }\n  }\n\n  destroy () {\n    this.doc.off('destroy', this.destroy)\n    // need to wait for key before deleting room\n    this.key.then(() => {\n      /** @type {Room} */ (this.room).destroy()\n      rooms.delete(this.roomName)\n    })\n    super.destroy()\n  }\n}\n", "/**\n * @module awareness-protocol\n */\n\nimport * as encoding from 'lib0/encoding'\nimport * as decoding from 'lib0/decoding'\nimport * as time from 'lib0/time'\nimport * as math from 'lib0/math'\nimport { Observable } from 'lib0/observable'\nimport * as f from 'lib0/function'\nimport * as Y from 'yjs' // eslint-disable-line\n\nexport const outdatedTimeout = 30000\n\n/**\n * @typedef {Object} MetaClientState\n * @property {number} MetaClientState.clock\n * @property {number} MetaClientState.lastUpdated unix timestamp\n */\n\n/**\n * The Awareness class implements a simple shared state protocol that can be used for non-persistent data like awareness information\n * (cursor, username, status, ..). Each client can update its own local state and listen to state changes of\n * remote clients. Every client may set a state of a remote peer to `null` to mark the client as offline.\n *\n * Each client is identified by a unique client id (something we borrow from `doc.clientID`). A client can override\n * its own state by propagating a message with an increasing timestamp (`clock`). If such a message is received, it is\n * applied if the known state of that client is older than the new state (`clock < newClock`). If a client thinks that\n * a remote client is offline, it may propagate a message with\n * `{ clock: currentClientClock, state: null, client: remoteClient }`. If such a\n * message is received, and the known clock of that client equals the received clock, it will override the state with `null`.\n *\n * Before a client disconnects, it should propagate a `null` state with an updated clock.\n *\n * Awareness states must be updated every 30 seconds. Otherwise the Awareness instance will delete the client state.\n *\n * @extends {Observable<string>}\n */\nexport class Awareness extends Observable {\n  /**\n   * @param {Y.Doc} doc\n   */\n  constructor (doc) {\n    super()\n    this.doc = doc\n    /**\n     * @type {number}\n     */\n    this.clientID = doc.clientID\n    /**\n     * Maps from client id to client state\n     * @type {Map<number, Object<string, any>>}\n     */\n    this.states = new Map()\n    /**\n     * @type {Map<number, MetaClientState>}\n     */\n    this.meta = new Map()\n    this._checkInterval = /** @type {any} */ (setInterval(() => {\n      const now = time.getUnixTime()\n      if (this.getLocalState() !== null && (outdatedTimeout / 2 <= now - /** @type {{lastUpdated:number}} */ (this.meta.get(this.clientID)).lastUpdated)) {\n        // renew local clock\n        this.setLocalState(this.getLocalState())\n      }\n      /**\n       * @type {Array<number>}\n       */\n      const remove = []\n      this.meta.forEach((meta, clientid) => {\n        if (clientid !== this.clientID && outdatedTimeout <= now - meta.lastUpdated && this.states.has(clientid)) {\n          remove.push(clientid)\n        }\n      })\n      if (remove.length > 0) {\n        removeAwarenessStates(this, remove, 'timeout')\n      }\n    }, math.floor(outdatedTimeout / 10)))\n    doc.on('destroy', () => {\n      this.destroy()\n    })\n    this.setLocalState({})\n  }\n\n  destroy () {\n    this.emit('destroy', [this])\n    this.setLocalState(null)\n    super.destroy()\n    clearInterval(this._checkInterval)\n  }\n\n  /**\n   * @return {Object<string,any>|null}\n   */\n  getLocalState () {\n    return this.states.get(this.clientID) || null\n  }\n\n  /**\n   * @param {Object<string,any>|null} state\n   */\n  setLocalState (state) {\n    const clientID = this.clientID\n    const currLocalMeta = this.meta.get(clientID)\n    const clock = currLocalMeta === undefined ? 0 : currLocalMeta.clock + 1\n    const prevState = this.states.get(clientID)\n    if (state === null) {\n      this.states.delete(clientID)\n    } else {\n      this.states.set(clientID, state)\n    }\n    this.meta.set(clientID, {\n      clock,\n      lastUpdated: time.getUnixTime()\n    })\n    const added = []\n    const updated = []\n    const filteredUpdated = []\n    const removed = []\n    if (state === null) {\n      removed.push(clientID)\n    } else if (prevState == null) {\n      if (state != null) {\n        added.push(clientID)\n      }\n    } else {\n      updated.push(clientID)\n      if (!f.equalityDeep(prevState, state)) {\n        filteredUpdated.push(clientID)\n      }\n    }\n    if (added.length > 0 || filteredUpdated.length > 0 || removed.length > 0) {\n      this.emit('change', [{ added, updated: filteredUpdated, removed }, 'local'])\n    }\n    this.emit('update', [{ added, updated, removed }, 'local'])\n  }\n\n  /**\n   * @param {string} field\n   * @param {any} value\n   */\n  setLocalStateField (field, value) {\n    const state = this.getLocalState()\n    if (state !== null) {\n      this.setLocalState({\n        ...state,\n        [field]: value\n      })\n    }\n  }\n\n  /**\n   * @return {Map<number,Object<string,any>>}\n   */\n  getStates () {\n    return this.states\n  }\n}\n\n/**\n * Mark (remote) clients as inactive and remove them from the list of active peers.\n * This change will be propagated to remote clients.\n *\n * @param {Awareness} awareness\n * @param {Array<number>} clients\n * @param {any} origin\n */\nexport const removeAwarenessStates = (awareness, clients, origin) => {\n  const removed = []\n  for (let i = 0; i < clients.length; i++) {\n    const clientID = clients[i]\n    if (awareness.states.has(clientID)) {\n      awareness.states.delete(clientID)\n      if (clientID === awareness.clientID) {\n        const curMeta = /** @type {MetaClientState} */ (awareness.meta.get(clientID))\n        awareness.meta.set(clientID, {\n          clock: curMeta.clock + 1,\n          lastUpdated: time.getUnixTime()\n        })\n      }\n      removed.push(clientID)\n    }\n  }\n  if (removed.length > 0) {\n    awareness.emit('change', [{ added: [], updated: [], removed }, origin])\n    awareness.emit('update', [{ added: [], updated: [], removed }, origin])\n  }\n}\n\n/**\n * @param {Awareness} awareness\n * @param {Array<number>} clients\n * @return {Uint8Array}\n */\nexport const encodeAwarenessUpdate = (awareness, clients, states = awareness.states) => {\n  const len = clients.length\n  const encoder = encoding.createEncoder()\n  encoding.writeVarUint(encoder, len)\n  for (let i = 0; i < len; i++) {\n    const clientID = clients[i]\n    const state = states.get(clientID) || null\n    const clock = /** @type {MetaClientState} */ (awareness.meta.get(clientID)).clock\n    encoding.writeVarUint(encoder, clientID)\n    encoding.writeVarUint(encoder, clock)\n    encoding.writeVarString(encoder, JSON.stringify(state))\n  }\n  return encoding.toUint8Array(encoder)\n}\n\n/**\n * Modify the content of an awareness update before re-encoding it to an awareness update.\n *\n * This might be useful when you have a central server that wants to ensure that clients\n * cant hijack somebody elses identity.\n *\n * @param {Uint8Array} update\n * @param {function(any):any} modify\n * @return {Uint8Array}\n */\nexport const modifyAwarenessUpdate = (update, modify) => {\n  const decoder = decoding.createDecoder(update)\n  const encoder = encoding.createEncoder()\n  const len = decoding.readVarUint(decoder)\n  encoding.writeVarUint(encoder, len)\n  for (let i = 0; i < len; i++) {\n    const clientID = decoding.readVarUint(decoder)\n    const clock = decoding.readVarUint(decoder)\n    const state = JSON.parse(decoding.readVarString(decoder))\n    const modifiedState = modify(state)\n    encoding.writeVarUint(encoder, clientID)\n    encoding.writeVarUint(encoder, clock)\n    encoding.writeVarString(encoder, JSON.stringify(modifiedState))\n  }\n  return encoding.toUint8Array(encoder)\n}\n\n/**\n * @param {Awareness} awareness\n * @param {Uint8Array} update\n * @param {any} origin This will be added to the emitted change event\n */\nexport const applyAwarenessUpdate = (awareness, update, origin) => {\n  const decoder = decoding.createDecoder(update)\n  const timestamp = time.getUnixTime()\n  const added = []\n  const updated = []\n  const filteredUpdated = []\n  const removed = []\n  const len = decoding.readVarUint(decoder)\n  for (let i = 0; i < len; i++) {\n    const clientID = decoding.readVarUint(decoder)\n    let clock = decoding.readVarUint(decoder)\n    const state = JSON.parse(decoding.readVarString(decoder))\n    const clientMeta = awareness.meta.get(clientID)\n    const prevState = awareness.states.get(clientID)\n    const currClock = clientMeta === undefined ? 0 : clientMeta.clock\n    if (currClock < clock || (currClock === clock && state === null && awareness.states.has(clientID))) {\n      if (state === null) {\n        // never let a remote client remove this local state\n        if (clientID === awareness.clientID && awareness.getLocalState() != null) {\n          // remote client removed the local state. Do not remote state. Broadcast a message indicating\n          // that this client still exists by increasing the clock\n          clock++\n        } else {\n          awareness.states.delete(clientID)\n        }\n      } else {\n        awareness.states.set(clientID, state)\n      }\n      awareness.meta.set(clientID, {\n        clock,\n        lastUpdated: timestamp\n      })\n      if (clientMeta === undefined && state !== null) {\n        added.push(clientID)\n      } else if (clientMeta !== undefined && state === null) {\n        removed.push(clientID)\n      } else if (state !== null) {\n        if (!f.equalityDeep(state, prevState)) {\n          filteredUpdated.push(clientID)\n        }\n        updated.push(clientID)\n      }\n    }\n  }\n  if (added.length > 0 || filteredUpdated.length > 0 || removed.length > 0) {\n    awareness.emit('change', [{\n      added, updated: filteredUpdated, removed\n    }, origin])\n  }\n  if (added.length > 0 || updated.length > 0 || removed.length > 0) {\n    awareness.emit('update', [{\n      added, updated, removed\n    }, origin])\n  }\n}\n", "import { isWeb, Slot } from '@blocksuite/global/utils';\nimport type { Awareness } from 'y-protocols/awareness';\n// @ts-ignore\nimport { Room, WebrtcProvider } from 'y-webrtc';\nimport type * as Y from 'yjs';\n\nimport type { DocProvider } from './index.js';\n\n// When using playground from blocksuite repo, t./idb-provider.js \"serve\" script in \"@blocksuite/store\" package.\n// We use our own sync server because a local service for sync makes everything much faster for dev.\nconst LOCAL_SIGNALING = ['ws://localhost:4444'];\n\nconst DEFAULT_SIGNALING = [\n  // Default config from yjs (but these are kinda slow by comparison to self host sync ~100ms-+1000ms latency observed).\n  // This slowness is also avoided in order to improve test reliability in CI.\n  'wss://y-webrtc-signaling-us.herokuapp.com',\n  'wss://y-webrtc-signaling-eu.herokuapp.com',\n];\n\nconst isLocalhost =\n  isWeb &&\n  (window.location.hostname === 'localhost' ||\n    window.location.hostname === '127.0.0.1');\nconst signaling = isLocalhost ? LOCAL_SIGNALING : DEFAULT_SIGNALING;\n\nexport class DebugDocProvider extends WebrtcProvider implements DocProvider {\n  private readonly _doc: Y.Doc;\n  public remoteUpdateSlot = new Slot<unknown>();\n  constructor(id: string, doc: Y.Doc, options?: { awareness?: Awareness }) {\n    super(id, doc, {\n      awareness: options?.awareness,\n      signaling,\n    });\n    this._doc = doc;\n  }\n\n  private _handleRemoteUpdate = (update: unknown, origin: unknown) => {\n    if (origin instanceof Room) {\n      this.remoteUpdateSlot.emit(update);\n    }\n  };\n\n  connect = () => {\n    super.connect();\n    this._doc.on('update', this._handleRemoteUpdate);\n  };\n\n  disconnect = () => {\n    super.disconnect();\n    this._doc.off('update', this._handleRemoteUpdate);\n  };\n\n  public clearData() {\n    // Do nothing for now\n    return Promise.resolve();\n  }\n}\n", "import type * as Y from 'yjs';\n\nimport type { AwarenessStore, UserRange } from './awareness.js';\nimport type { BlockSuiteDoc } from './yjs/index.js';\n\nexport interface StackItem {\n  meta: Map<'cursor-location', UserRange | undefined>;\n  type: 'undo' | 'redo';\n}\n\nexport class Space<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  State extends Record<string, unknown> = Record<string, any>\n> {\n  /** unprefixed id */\n  readonly id: string;\n  readonly doc: BlockSuiteDoc;\n  readonly awarenessStore: AwarenessStore;\n\n  /**\n   * @internal Used for convenient access to the underlying Yjs map,\n   * can be used interchangeably with ySpace\n   */\n  protected readonly _proxy: State;\n  /**\n   * @internal The actual underlying Yjs map\n   */\n  protected readonly _ySpace: Y.Map<State[keyof State]>;\n\n  constructor(id: string, doc: BlockSuiteDoc, awarenessStore: AwarenessStore) {\n    this.id = id;\n    this.doc = doc;\n    this.awarenessStore = awarenessStore;\n    const prefixedId = this.id.startsWith('space:') ? this.id : this.prefixedId;\n    this._ySpace = this.doc.getMap(prefixedId);\n    this._proxy = this.doc.getMapProxy<string, State>(prefixedId);\n  }\n\n  get prefixedId() {\n    return `space:${this.id}`;\n  }\n\n  /**\n   * If `shouldTransact` is `false`, the transaction will not be push to the history stack.\n   */\n  transact(fn: () => void, shouldTransact = true) {\n    this.doc.transact(fn, shouldTransact ? this.doc.clientID : undefined);\n  }\n}\n", "import { merge } from 'merge';\nimport { Awareness } from 'y-protocols/awareness.js';\n\nimport { AwarenessStore, type RawAwarenessState } from './awareness.js';\nimport type { BlobStorage } from './persistence/blob/types.js';\nimport type {\n  DocProvider,\n  DocProviderConstructor,\n} from './persistence/doc/index.js';\nimport type { Space } from './space.js';\nimport type { IdGenerator } from './utils/id-generator.js';\nimport {\n  createAutoIncrementIdGenerator,\n  createAutoIncrementIdGeneratorByClientId,\n  nanoid,\n  uuidv4,\n} from './utils/id-generator.js';\nimport { serializeYDoc, yDocToJSXNode } from './utils/jsx.js';\nimport { BlockSuiteDoc } from './yjs/index.js';\n\nexport interface SerializedStore {\n  [key: string]: {\n    [key: string]: unknown;\n  };\n}\n\nexport enum Generator {\n  /**\n   * Default mode, generator for the unpredictable id\n   */\n  NanoID = 'nanoID',\n\n  UUIDv4 = 'uuidV4',\n  /**\n   * This generator is trying to fix the real-time collaboration on debug mode.\n   * This will make generator predictable and won't make conflict\n   * @link https://docs.yjs.dev/api/faq#i-get-a-new-clientid-for-every-session-is-there-a-way-to-make-it-static-for-a-peer-accessing-the-doc\n   */\n  AutoIncrementByClientId = 'autoIncrementByClientId',\n  /**\n   * **Warning**: This generator mode will crash the collaborative feature\n   *  if multiple clients are adding new blocks.\n   * Use this mode only if you know what you're doing.\n   */\n  AutoIncrement = 'autoIncrement',\n}\n\n/**\n * @example\n *  const workspace = new Workspace({\n *    isSSR: typeof window === 'undefined'\n *  })\n */\nexport interface SSROptions {\n  isSSR?: boolean;\n}\n\n// TODO Support ReadableStream\nexport type InlineSuggestionProvider = (context: {\n  title: string;\n  text: string;\n  abortSignal: AbortSignal;\n}) => string | Promise<string>; // | Promise<ReadableStream<string>>;\n\nexport interface StoreOptions<\n  Flags extends Record<string, unknown> = BlockSuiteFlags\n> extends SSROptions {\n  id: string;\n  providers?: DocProviderConstructor[];\n  awareness?: Awareness<RawAwarenessState<Flags>>;\n  idGenerator?: Generator;\n  defaultFlags?: Partial<Flags>;\n  blobStorages?: ((id: string) => BlobStorage)[];\n}\n\nconst flagsPreset = {\n  enable_set_remote_flag: true,\n  enable_drag_handle: true,\n  enable_block_hub: true,\n  enable_surface: true,\n  enable_edgeless_toolbar: true,\n  enable_slash_menu: true,\n\n  enable_database: false,\n  enable_toggle_block: false,\n  enable_block_selection_format_bar: true,\n  enable_linked_page: false,\n  enable_bookmark_operation: false,\n\n  readonly: {},\n} satisfies BlockSuiteFlags;\n\nexport class Store {\n  readonly id: string;\n  readonly doc: BlockSuiteDoc;\n  readonly providers: DocProvider[] = [];\n  readonly spaces = new Map<string, Space>();\n  readonly awarenessStore: AwarenessStore;\n  readonly idGenerator: IdGenerator;\n\n  // TODO: The user cursor should be spread by the spaceId in awareness\n  constructor(\n    {\n      id,\n      providers = [],\n      awareness,\n      idGenerator,\n      defaultFlags,\n    }: StoreOptions = { id: nanoid() }\n  ) {\n    this.id = id;\n    this.doc = new BlockSuiteDoc({ guid: id });\n    this.awarenessStore = new AwarenessStore(\n      this,\n      awareness ?? new Awareness<RawAwarenessState>(this.doc),\n      merge(true, flagsPreset, defaultFlags)\n    );\n\n    switch (idGenerator) {\n      case Generator.AutoIncrement: {\n        this.idGenerator = createAutoIncrementIdGenerator();\n        break;\n      }\n      case Generator.AutoIncrementByClientId: {\n        this.idGenerator = createAutoIncrementIdGeneratorByClientId(\n          this.doc.clientID\n        );\n        break;\n      }\n      case Generator.UUIDv4: {\n        this.idGenerator = uuidv4;\n        break;\n      }\n      case Generator.NanoID:\n      default: {\n        this.idGenerator = nanoid;\n        break;\n      }\n    }\n\n    this.providers = providers.map(\n      ProviderConstructor =>\n        new ProviderConstructor(id, this.doc, {\n          awareness: this.awarenessStore.awareness,\n        })\n    );\n  }\n  addSpace(space: Space) {\n    this.spaces.set(space.prefixedId, space);\n  }\n\n  removeSpace(space: Space) {\n    this.spaces.delete(space.prefixedId);\n  }\n\n  /**\n   * @internal Only for testing, 'page0' should be replaced by props 'spaceId'\n   */\n  exportJSX(pageId: string, blockId?: string) {\n    const json = serializeYDoc(this.doc) as unknown as SerializedStore;\n    const prefixedPageId = pageId.startsWith('space:')\n      ? pageId\n      : `space:${pageId}`;\n    const pageJson = json[prefixedPageId];\n    if (!pageJson) {\n      throw new Error(`Page ${pageId} doesn't exist`);\n    }\n    if (!blockId) {\n      const pageBlockId = Object.keys(pageJson).at(0);\n      if (!pageBlockId) {\n        return null;\n      }\n      blockId = pageBlockId;\n    }\n    if (!pageJson[blockId]) {\n      return null;\n    }\n    return yDocToJSXNode(pageJson, blockId);\n  }\n}\n", "import * as Y from 'yjs';\n\nimport type { PrefixedBlockProps } from '../workspace/page.js';\n\ntype DocRecord = {\n  [id: string]: PrefixedBlockProps & {\n    'sys:children'?: string[];\n  };\n};\n\nexport interface JSXElement {\n  // Ad-hoc for `ReactTestComponent` identify.\n  // Use ReactTestComponent serializer prevent snapshot be be wrapped in a string, which cases \" to be escaped.\n  // See https://github.com/facebook/jest/blob/f1263368cc85c3f8b70eaba534ddf593392c44f3/packages/pretty-format/src/plugins/ReactTestComponent.ts#L78-L79\n  $$typeof: symbol | 0xea71357;\n  type: string;\n  props: { 'prop:text'?: string | JSXElement } & Record<string, unknown>;\n  children?: null | (JSXElement | string | number)[];\n}\n\n// Ad-hoc for `ReactTestComponent` identify.\n// See https://github.com/facebook/jest/blob/f1263368cc85c3f8b70eaba534ddf593392c44f3/packages/pretty-format/src/plugins/ReactTestComponent.ts#L26-L29\nconst testSymbol = Symbol.for('react.test.json');\n\nfunction isValidRecord(data: unknown): data is DocRecord {\n  if (typeof data !== 'object' || data === null) {\n    return false;\n  }\n  // TODO enhance this check\n  return true;\n}\n\nconst IGNORED_PROPS = [\n  'sys:id',\n  'sys:flavour',\n  'sys:children',\n  'prop:xywh',\n  'prop:cells',\n];\n\nexport function yDocToJSXNode(\n  serializedDoc: Record<string, unknown>,\n  nodeId: string\n): JSXElement {\n  if (!isValidRecord(serializedDoc)) {\n    throw new Error('Failed to parse doc record! Invalid data.');\n  }\n  const node = serializedDoc[nodeId];\n  if (!node) {\n    throw new Error(\n      `Failed to parse doc record! Node not found! id: ${nodeId}.`\n    );\n  }\n  // TODO maybe need set PascalCase\n  const flavour = node['sys:flavour'];\n  // TODO maybe need check children recursively nested\n  const children = node['sys:children'];\n  const props = Object.fromEntries(\n    Object.entries(node).filter(([key]) => !IGNORED_PROPS.includes(key))\n  );\n\n  if ('prop:text' in props && props['prop:text'] instanceof Array) {\n    props['prop:text'] = parseDelta(props['prop:text'] as DeltaText);\n  }\n\n  if ('prop:title' in props && props['prop:title'] instanceof Array) {\n    props['prop:title'] = parseDelta(props['prop:title'] as DeltaText);\n  }\n\n  if ('prop:columns' in props && props['prop:columns'] instanceof Array) {\n    props['prop:columns'] = `Array [${props['prop:columns'].length}]`;\n  }\n\n  return {\n    $$typeof: testSymbol,\n    type: flavour,\n    props,\n    children: children?.map(id => yDocToJSXNode(serializedDoc, id)) ?? [],\n  };\n}\n\nexport function serializeYDoc(doc: Y.Doc) {\n  const json: Record<string, unknown> = {};\n  doc.share.forEach((value, key) => {\n    if (value instanceof Y.Map) {\n      json[key] = serializeYMap(value);\n    } else {\n      json[key] = value.toJSON();\n    }\n  });\n  return json;\n}\n\nfunction serializeYMap(map: Y.Map<unknown>) {\n  const json: Record<string, unknown> = {};\n  map.forEach((value, key) => {\n    if (value instanceof Y.Map) {\n      json[key] = serializeYMap(value);\n    } else if (value instanceof Y.Text) {\n      json[key] = serializeYText(value);\n    } else if (value instanceof Y.Array) {\n      json[key] = value.toArray();\n    } else if (value instanceof Y.AbstractType) {\n      json[key] = value.toJSON();\n    } else {\n      json[key] = value;\n    }\n  });\n  return json;\n}\n\ntype DeltaText = {\n  insert: string;\n  attributes?: { [format: string]: unknown };\n}[];\n\nfunction serializeYText(text: Y.Text): DeltaText {\n  const delta = text.toDelta();\n  return delta;\n}\n\nfunction parseDelta(text: DeltaText) {\n  if (!text.length) {\n    return undefined;\n  }\n  if (text.length === 1 && !text[0].attributes) {\n    // just plain text\n    return text[0].insert;\n  }\n  return {\n    // The `Symbol.for('react.fragment')` will render as `<React.Fragment>`\n    // so we use a empty string to render it as `<>`.\n    // But it will empty children ad `< />`\n    // so we return `undefined` directly if not delta text.\n    $$typeof: testSymbol, // Symbol.for('react.element'),\n    type: '', // Symbol.for('react.fragment'),\n    props: {},\n    children: text?.map(({ insert, attributes }) => ({\n      $$typeof: testSymbol,\n      type: 'text',\n      props: {\n        // Not place at `children` to avoid the trailing whitespace be trim by formatter.\n        insert,\n        ...attributes,\n      },\n    })),\n  };\n}\n", "import { Array as YArray, Map as YMap, Text as YText } from 'yjs';\n\nexport type Native2Y<T> = T extends Record<string, infer U>\n  ? YMap<U>\n  : T extends Array<infer U>\n  ? YArray<U>\n  : T;\n\nexport function isPureObject(value: unknown): value is object {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    !Array.isArray(value) &&\n    !(value instanceof YMap) &&\n    !(value instanceof YArray) &&\n    !(value instanceof YText)\n  );\n}\n\nexport function native2Y<T>(value: T, deep: boolean): Native2Y<T> {\n  if (Array.isArray(value)) {\n    const yArray: YArray<unknown> = new YArray<unknown>();\n    const result = value.map(item => {\n      return deep ? native2Y(item, deep) : item;\n    });\n    yArray.insert(0, result);\n\n    return yArray as Native2Y<T>;\n  }\n  if (isPureObject(value)) {\n    const yMap = new YMap<unknown>();\n    Object.entries(value).forEach(([key, value]) => {\n      yMap.set(key, deep ? native2Y(value, deep) : value);\n    });\n\n    return yMap as Native2Y<T>;\n  }\n\n  return value as Native2Y<T>;\n}\n\nexport function toPlainValue(v: unknown): unknown {\n  if (v instanceof YMap) {\n    const obj: Record<string, unknown> = {};\n    v.forEach((value, key) => {\n      obj[key] = toPlainValue(value);\n    });\n\n    return obj;\n  }\n  if (v instanceof YArray) {\n    return v.toArray().map(x => toPlainValue(x));\n  }\n  return v;\n}\n\nexport type UnRecord = Record<string, unknown>;\n", "import type { Array as YArray } from 'yjs';\n\nimport type { ProxyConfig } from './config.js';\nimport { toPlainValue } from './utils.js';\n\nexport function subscribeYArray(\n  arr: unknown[],\n  yArray: YArray<unknown>,\n  config: ProxyConfig\n): void {\n  const { deep = false } = config;\n  yArray.observe(event => {\n    if (event.changes.keys.size === 0) {\n      // skip empty event\n      return;\n    }\n    let retain = 0;\n    event.changes.delta.forEach(change => {\n      if (change.retain) {\n        retain += change.retain;\n      }\n      if (change.delete) {\n        arr.splice(retain, change.delete);\n      }\n      if (change.insert) {\n        if (Array.isArray(change.insert)) {\n          const value = deep ? change.insert.map(toPlainValue) : change.insert;\n          arr.splice(retain, 0, ...value);\n        } else {\n          arr.splice(\n            retain,\n            0,\n            deep ? toPlainValue(change.insert) : change.insert\n          );\n        }\n        retain += change.insert.length;\n      }\n    });\n  });\n}\n", "import color from 'ansi-colors';\n\nimport { assertEquals, assertExists } from './utils.js';\n\nlet enabled = false;\nlet showStack = false;\n\nexport const removeStackHeader = (stack: unknown) =>\n  String(stack).replace(/^.+\\n.+\\n/, '');\n\nexport const debugLog = function (\n  info: {\n    arguments: unknown[];\n    callerIdx: number;\n  } = { arguments: [], callerIdx: 1 }\n): void {\n  if (!enabled) {\n    return;\n  }\n  const { callerIdx } = info;\n  const error = new Error();\n  const stackInfo = removeStackHeader(error.stack).split('\\n');\n  const upperStackInfo = stackInfo.slice(1).join('\\n');\n  const message = stackInfo[callerIdx].trim();\n  // For example, the message is:\n  // at handleBlockEndEnter (http://localhost:5173/@fs/Users/username/blocksuite/packages/blocks/src/__internal__/rich-text/rich-text-operations.ts?t=1674485091790:41:44)\n  // method will match `handleBlockEndEnter`\n  // subsystem will match `blocks`\n  const method = /at\\s(\\S*)(?=\\s)/.exec(message)?.[1] ?? message;\n  const subsystem = /\\/packages\\/([a-z]+)/.exec(message)?.[1] ?? 'unknown';\n  console.log(\n    `[packages/${color.blue(subsystem)}] ${color.magenta(\n      method\n    )}(${info.arguments.map(() => '%o').join(', ')})\\n`,\n    ...info.arguments,\n    showStack ? upperStackInfo : ''\n  );\n};\n\nconst whitelist = new Set<string>();\nconst all = new Set<string>();\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AnyFunction = (...args: any[]) => any;\n\nexport const debug = (tag: string) => {\n  all.add(tag);\n  return (\n    target: object,\n    name: string,\n    descriptor: TypedPropertyDescriptor<AnyFunction>\n  ) => {\n    const original = descriptor.value;\n    assertExists(original);\n    assertEquals(typeof original, 'function');\n    descriptor.value = function debugWrapper(\n      this: unknown,\n      ...args: unknown[]\n    ) {\n      if (tag ? whitelist.has(tag) : true) {\n        debugLog({\n          arguments: args,\n          callerIdx: 2,\n        });\n      }\n      return original.apply(this, args);\n    };\n    return descriptor;\n  };\n};\n\nexport function configDebugLog(verbose: boolean) {\n  showStack = verbose;\n}\n\nexport function enableDebugLog(tags?: string | string[]) {\n  color.enabled = true;\n  enabled = true;\n  if (Array.isArray(tags)) {\n    tags.forEach(tag => whitelist.add(tag));\n  } else if (tags) {\n    whitelist.add(tags);\n  } else {\n    [...all.values()].forEach(tag => whitelist.add(tag));\n  }\n}\n\nexport function disableDebuglog(tag?: string) {\n  if (tag) {\n    whitelist.delete(tag);\n  } else {\n    whitelist.clear();\n  }\n}\n", "import type { Map as YMap } from 'yjs';\n\nimport type { ProxyConfig } from './config.js';\nimport type { UnRecord } from './utils.js';\nimport { toPlainValue } from './utils.js';\n\nexport function subscribeYMap(\n  object: UnRecord,\n  yMap: YMap<unknown>,\n  config: ProxyConfig\n): void {\n  const { deep = false } = config;\n  yMap.observe(event => {\n    if (event.changes.keys.size === 0) {\n      // skip empty event\n      return;\n    }\n    event.keysChanged.forEach(key => {\n      const type = event.changes.keys.get(key);\n      if (!type) {\n        console.error('impossible event', event);\n        return;\n      }\n      if (type.action === 'delete') {\n        delete object[key];\n      } else if (type.action === 'add' || type.action === 'update') {\n        object[key] = deep ? toPlainValue(yMap.get(key)) : yMap.get(key);\n      }\n    });\n  });\n}\n", "import { Array as YArray, Map as YMap } from 'yjs';\n\nimport { subscribeYArray } from './array.js';\nimport type { ProxyConfig } from './config.js';\nimport { subscribeYMap } from './map.js';\nimport type { UnRecord } from './utils.js';\nimport { isPureObject, native2Y } from './utils.js';\n\nexport function initialize(\n  array: unknown[],\n  yArray: YArray<unknown>,\n  config: ProxyConfig\n): void;\nexport function initialize(\n  object: UnRecord,\n  yMap: YMap<unknown>,\n  config: ProxyConfig\n): void;\nexport function initialize(\n  target: unknown[] | UnRecord,\n  yAbstract: YArray<unknown> | YMap<unknown>,\n  config: ProxyConfig\n): void;\nexport function initialize(\n  target: unknown[] | UnRecord,\n  yAbstract: YArray<unknown> | YMap<unknown>,\n  config: ProxyConfig\n): void {\n  const { deep } = config;\n  if (!(yAbstract instanceof YArray || yAbstract instanceof YMap)) {\n    return;\n  }\n  yAbstract.forEach((value, key) => {\n    const result =\n      deep && (value instanceof YMap || value instanceof YArray)\n        ? createYProxy(value, config)\n        : value;\n\n    (target as Record<string, unknown>)[key] = result;\n  });\n}\n\nexport function createYProxy<Data>(\n  yAbstract: YArray<unknown> | YMap<unknown>,\n  config: ProxyConfig = {}\n): Data {\n  if (yAbstract instanceof YArray) {\n    return createYArrayProxy(yAbstract, config) as Data;\n  }\n  if (yAbstract instanceof YMap) {\n    return createYMapProxy(yAbstract, config) as Data;\n  }\n\n  throw new TypeError();\n}\n\nexport function createYMapProxy<Data extends Record<string, unknown>>(\n  yMap: YMap<unknown>,\n  config: ProxyConfig = {}\n): Data {\n  const { readonly = false, deep = false } = config;\n  const object = {} as Data;\n  if (!(yMap instanceof YMap)) {\n    throw new TypeError();\n  }\n  initialize(object, yMap, config);\n  subscribeYMap(object, yMap, config);\n  return new Proxy(object, {\n    has: (target, p) => {\n      return Reflect.has(target, p);\n    },\n    set: (target, p, value, receiver) => {\n      if (readonly) {\n        throw new Error('Modify data is not allowed');\n      }\n\n      if (typeof p !== 'string') {\n        throw new Error('key cannot be a symbol');\n      }\n\n      if (deep && (isPureObject(value) || Array.isArray(value))) {\n        const _y = native2Y(value as Record<string, unknown> | unknown[], deep);\n        yMap.set(p, _y);\n        const _value = createYProxy(_y, config);\n\n        return Reflect.set(target, p, _value, receiver);\n      }\n\n      yMap.set(p, value);\n      return Reflect.set(target, p, value, receiver);\n    },\n    get: (target, p, receiver) => {\n      return Reflect.get(target, p, receiver);\n    },\n    deleteProperty(target: Data, p: string | symbol): boolean {\n      if (readonly) {\n        throw new Error('Modify data is not allowed');\n      }\n\n      if (typeof p !== 'string') {\n        throw new Error('key cannot be a symbol');\n      }\n\n      yMap.delete(p);\n      return Reflect.deleteProperty(target, p);\n    },\n  });\n}\n\nexport function createYArrayProxy<T = unknown>(\n  yArray: YArray<unknown>,\n  config: ProxyConfig = {}\n): T[] {\n  const { readonly = false, deep = false } = config;\n  const array: T[] = [];\n  if (!(yArray instanceof YArray)) {\n    throw new TypeError();\n  }\n  initialize(array, yArray as YArray<unknown>, config);\n  subscribeYArray(array, yArray, config);\n  return new Proxy(array, {\n    has: (target, p) => {\n      return Reflect.has(target, p);\n    },\n    set: (target, p, value, receiver) => {\n      if (readonly) {\n        throw new Error('Modify data is not allowed');\n      }\n\n      if (typeof p !== 'string') {\n        throw new Error('key cannot be a symbol');\n      }\n\n      const index = Number(p);\n      if (Number.isNaN(index)) {\n        return Reflect.set(target, p, value, receiver);\n      }\n\n      const apply = (value: unknown) => {\n        if (index < yArray.length) {\n          yArray.delete(index, 1);\n        }\n        yArray.insert(index, [value]);\n      };\n\n      if (deep && (isPureObject(value) || Array.isArray(value))) {\n        const y = native2Y(value as Record<string, unknown> | unknown[], deep);\n        apply(y);\n        const _value = createYProxy(y, config);\n        return Reflect.set(target, p, _value, receiver);\n      }\n\n      apply(value);\n      return Reflect.set(target, p, value, receiver);\n    },\n    get: (target, p, receiver) => {\n      return Reflect.get(target, p, receiver);\n    },\n    deleteProperty(target: T[], p: string | symbol): boolean {\n      if (readonly) {\n        throw new Error('Modify data is not allowed');\n      }\n\n      if (typeof p !== 'string') {\n        throw new Error('key cannot be a symbol');\n      }\n\n      const index = Number(p);\n      if (!Number.isNaN(index)) {\n        yArray.delete(index, 1);\n      }\n      return Reflect.deleteProperty(target, p);\n    },\n  });\n}\n", "import { debug } from '@blocksuite/global/debug';\nimport type { Transaction } from 'yjs';\nimport * as Y from 'yjs';\n\nimport type { ProxyConfig } from './config.js';\nimport { createYArrayProxy, createYMapProxy } from './proxy.js';\n\nexport type BlockSuiteDocAllowedValue =\n  | Record<string, unknown>\n  | unknown[]\n  | Y.Text;\nexport type BlockSuiteDocData = Record<string, BlockSuiteDocAllowedValue>;\n\nexport class BlockSuiteDoc<\n  Data extends BlockSuiteDocData = BlockSuiteDocData\n> extends Y.Doc {\n  getMapProxy<\n    Key extends keyof Data & string,\n    Value extends Record<string, unknown> = Data[Key] extends Record<\n      string,\n      unknown\n    >\n      ? Data[Key]\n      : never\n  >(key: Key, config: ProxyConfig = {}): Value {\n    const map = super.getMap(key);\n    return createYMapProxy(map, config);\n  }\n\n  getArrayProxy<\n    Key extends keyof Data & string,\n    Value extends unknown[] = Data[Key] extends unknown[] ? Data[Key] : never\n  >(key: Key, config: ProxyConfig = {}): Value {\n    const array = super.getArray(key);\n    return createYArrayProxy(array, config) as Value;\n  }\n\n  @debug('transact')\n  override transact<T>(f: (arg0: Transaction) => T, origin?: number) {\n    return super.transact(f, origin);\n  }\n}\n", "import type { BlockModels } from '@blocksuite/global/types';\nimport { isPrimitive, matchFlavours, SYS_KEYS } from '@blocksuite/global/utils';\nimport { fromBase64, toBase64 } from 'lib0/buffer.js';\nimport * as Y from 'yjs';\nimport type { z } from 'zod';\n\nimport type { BaseBlockModel, BlockSchema } from '../base.js';\nimport { internalPrimitives } from '../base.js';\nimport { Text } from '../text-adapter.js';\nimport type { Workspace } from '../workspace/index.js';\nimport type {\n  BlockProps,\n  PrefixedBlockProps,\n  YBlock,\n  YBlocks,\n} from '../workspace/page.js';\nimport type { Page } from '../workspace/page.js';\nimport { createYProxy, isPureObject } from '../yjs/index.js';\nimport { native2Y } from '../yjs/utils.js';\n\nexport function assertValidChildren(\n  yBlocks: YBlocks,\n  props: Partial<BlockProps>\n) {\n  if (!Array.isArray(props.children)) return;\n\n  props.children.forEach(child => {\n    if (!yBlocks.has(child.id)) {\n      throw new Error('Invalid child id: ' + child.id);\n    }\n  });\n}\n\nexport function initInternalProps(yBlock: YBlock, props: Partial<BlockProps>) {\n  yBlock.set('sys:id', props.id);\n  yBlock.set('sys:flavour', props.flavour);\n\n  const yChildren = new Y.Array();\n  yBlock.set('sys:children', yChildren);\n  if (Array.isArray(props.children)) {\n    props.children.forEach(child => yChildren.push([child.id]));\n  }\n}\n\nexport function syncBlockProps(\n  schema: z.infer<typeof BlockSchema>,\n  yBlock: YBlock,\n  props: Partial<BlockProps>,\n  ignoredKeys: Set<string>\n) {\n  const propSchema = schema.model.props?.(internalPrimitives) ?? {};\n  Object.entries(props).forEach(([key, value]) => {\n    if (SYS_KEYS.has(key) || ignoredKeys.has(key)) return;\n\n    const isText = propSchema[key] instanceof Text;\n    if (isText) {\n      if (value instanceof Text) {\n        yBlock.set(`prop:${key}`, value.yText);\n      } else {\n        // When copying the database, the value of title is a string\n        yBlock.set(`prop:${key}`, new Y.Text(value));\n      }\n      return;\n    }\n\n    if (\n      !isPrimitive(value) &&\n      !Array.isArray(value) &&\n      typeof value !== 'object'\n    ) {\n      throw new Error('Only top level primitives are supported for now');\n    }\n\n    // https://github.com/toeverything/blocksuite/issues/2939\n    //TODO: elements property should not be handled differently\n    const isSurface = schema.model.flavour === 'affine:surface';\n    if (value !== undefined) {\n      if (Array.isArray(value) || isPureObject(value)) {\n        if (isSurface && key === 'elements') {\n          const elementsMap = new Y.Map();\n          for (const element of Object.values(value)) {\n            elementsMap.set(element.id, native2Y(element, false));\n          }\n          yBlock.set(key, elementsMap);\n        } else {\n          yBlock.set(`prop:${key}`, native2Y(value, true));\n        }\n      } else {\n        yBlock.set(`prop:${key}`, value);\n      }\n    }\n  });\n\n  // set default value\n  Object.entries(propSchema).forEach(([key, value]) => {\n    if (!yBlock.has(`prop:${key}`) || yBlock.get(`prop:${key}`) === undefined) {\n      if (value instanceof Text) {\n        yBlock.set(`prop:${key}`, value.yText);\n      } else if (Array.isArray(value) || isPureObject(value)) {\n        yBlock.set(`prop:${key}`, native2Y(value, true));\n      } else {\n        yBlock.set(`prop:${key}`, value);\n      }\n    }\n  });\n}\n\nexport function toBlockProps(yBlock: YBlock): Partial<BlockProps> {\n  const prefixedProps = yBlock.toJSON() as PrefixedBlockProps;\n  const props: Partial<BlockProps> = {};\n  Object.keys(prefixedProps).forEach(key => {\n    if (prefixedProps[key]) {\n      props[key.replace('sys:', '')] = prefixedProps[key];\n    }\n  });\n\n  Object.keys(prefixedProps).forEach(prefixedKey => {\n    if (SYS_KEYS.has(prefixedKey)) return;\n\n    const key = prefixedKey.replace('prop:', '');\n    const realValue = yBlock.get(prefixedKey);\n    if (realValue instanceof Y.Map) {\n      const value = createYProxy(realValue, {\n        deep: true,\n      });\n      props[key] = value;\n    } else if (realValue instanceof Y.Array) {\n      const value = createYProxy(realValue, {\n        deep: true,\n      });\n      props[key] = value;\n    } else {\n      props[key] = prefixedProps[prefixedKey];\n    }\n  });\n\n  return props;\n}\n\nexport function encodeWorkspaceAsYjsUpdateV2(workspace: Workspace): string {\n  return toBase64(Y.encodeStateAsUpdateV2(workspace.doc));\n}\n\nexport function applyYjsUpdateV2(workspace: Workspace, update: string): void {\n  Y.applyUpdateV2(workspace.doc, fromBase64(update));\n}\n\nexport function isInsideBlockByFlavour(\n  page: Page,\n  block: BaseBlockModel | string,\n  flavour: keyof BlockModels\n): boolean {\n  const parent = page.getParent(block);\n  if (parent === null) {\n    return false;\n  } else if (matchFlavours(parent, [flavour])) {\n    return true;\n  }\n  return isInsideBlockByFlavour(page, parent, flavour);\n}\n", "export enum ErrorCode {\n  MIGRATION_ERROR = 100,\n  SCHEMA_VALIDATE_ERROR,\n}\n", "import { ErrorCode } from './code.js';\n\nexport const kInternalError = Symbol('internal_error');\n\nexport abstract class BlockSuiteError extends Error {\n  [kInternalError] = true;\n\n  code: ErrorCode;\n\n  constructor(code: ErrorCode, message: string) {\n    super(message);\n    this.code = code;\n  }\n}\n\nexport class MigrationError extends BlockSuiteError {\n  constructor(description: string) {\n    super(\n      ErrorCode.MIGRATION_ERROR,\n      `Migration ${description} error. Please report to https://github.com/toeverything/blocksuite/issues`\n    );\n  }\n}\n\nexport class SchemaValidateError extends BlockSuiteError {\n  constructor(flavour: string, message: string) {\n    super(\n      ErrorCode.SCHEMA_VALIDATE_ERROR,\n      `Invalid schema for ${flavour}: ${message}`\n    );\n  }\n}\n", "import { MigrationError } from '@blocksuite/global/error';\nimport * as Y from 'yjs';\n\nimport { uuidv4 } from '../utils/id-generator.js';\nimport { initInternalProps } from '../utils/utils.js';\nimport type { YBlock } from './page.js';\n\ninterface Migration {\n  desc: string;\n  condition: (doc: Y.Doc) => boolean;\n  migrate: (doc: Y.Doc) => void;\n}\n\n// New migration should be added to the end of this list\nconst migrations: Migration[] = [\n  {\n    desc: 'convert affine:group to affine:frame',\n    condition: doc => {\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      if (!yVersions) return false;\n\n      return yVersions.get('affine:group') === 1;\n    },\n    migrate: doc => {\n      // @ts-ignore\n      const pageIds = doc\n        .getMap('space:meta')\n        .get('pages')\n        .map((a: Y.Map<unknown>) => a.get('id')) as string[];\n\n      for (const pageId of pageIds) {\n        const spaceId = `space:${pageId}`;\n        const yBlocks = doc.getMap(spaceId);\n        // @ts-ignore\n        yBlocks.forEach((yBlock: Y.Map<unknown>) => {\n          if (yBlock.get('sys:flavour') === 'affine:group') {\n            yBlock.set('sys:flavour', 'affine:frame');\n          }\n        });\n      }\n\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      yVersions.delete('affine:group');\n      yVersions.set('affine:frame', 1);\n    },\n  },\n  {\n    desc: 'add affine:surface',\n    condition: doc => {\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      if (!yVersions) return false;\n      return yVersions.get('affine:shape') === 1;\n    },\n    migrate: doc => {\n      // @ts-ignore\n      const pageIds = doc\n        .getMap('space:meta')\n        .get('pages')\n        .map((a: Y.Map<unknown>) => a.get('id')) as string[];\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      yVersions.delete('affine:shape');\n      yVersions.set('affine:surface', 1);\n\n      for (const pageId of pageIds) {\n        const spaceId = `space:${pageId}`;\n        const yBlocks = doc.getMap(spaceId);\n        const yBlock = new Y.Map() as YBlock;\n        const id = uuidv4();\n        initInternalProps(yBlock, {\n          id,\n          flavour: 'affine:surface',\n        });\n        yBlocks.set(id, yBlock);\n        // @ts-ignore\n        yBlocks.forEach((yBlock: Y.Map<unknown>, id) => {\n          if (yBlock.get('sys:flavour') === 'affine:shape') {\n            yBlocks.delete(id);\n          }\n        });\n      }\n    },\n  },\n  {\n    desc: 'update affine:page title type from string to Text',\n    condition: doc => {\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      if (!yVersions) return false;\n\n      const pageVersion = yVersions.get('affine:page');\n      if (!pageVersion) {\n        throw new MigrationError('affine:page version not found');\n      }\n      return pageVersion < 2;\n    },\n    migrate: doc => {\n      // @ts-ignore\n      const pageIds = doc\n        .getMap('space:meta')\n        .get('pages')\n        .map((a: Y.Map<unknown>) => a.get('id')) as string[];\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      yVersions.delete('affine:page');\n      yVersions.set('affine:page', 2);\n\n      for (const pageId of pageIds) {\n        const spaceId = `space:${pageId}`;\n        const yBlocks = doc.getMap(spaceId);\n\n        for (const yBlock of yBlocks.values()) {\n          if (yBlock.get('sys:flavour') === 'affine:page') {\n            const title = yBlock.get('prop:title') as string;\n            const yTitle = new Y.Text(title);\n            yBlock.set('prop:title', yTitle);\n            break;\n          }\n        }\n      }\n    },\n  },\n  {\n    desc: 'add seed property in surface element',\n    condition: doc => {\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      if (!yVersions) return false;\n\n      const surfaceVersion = yVersions.get('affine:surface');\n      if (!surfaceVersion) {\n        throw new MigrationError('affine:surface version not found');\n      }\n      return surfaceVersion < 2;\n    },\n    migrate: doc => {\n      // @ts-ignore\n      const pageIds = doc\n        .getMap('space:meta')\n        .get('pages')\n        .map((a: Y.Map<unknown>) => a.get('id')) as string[];\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      yVersions.set('affine:surface', 2);\n\n      for (const pageId of pageIds) {\n        const spaceId = `space:${pageId}`;\n        const yBlocks = doc.getMap(spaceId);\n\n        for (const yBlock of yBlocks.values()) {\n          if (yBlock.get('sys:flavour') === 'affine:surface') {\n            const elements = yBlock.get('elements') as Y.Map<Y.Map<unknown>>;\n            if (!elements) break;\n\n            for (const element of elements.values()) {\n              if (!element.get('seed')) {\n                element.set('seed', Math.floor(Math.random() * 2 ** 31));\n              }\n            }\n            break;\n          }\n        }\n      }\n    },\n  },\n  {\n    desc: 'move surface block into children of page block',\n    condition: doc => {\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      if (!yVersions) return false;\n\n      const surfaceVersion = yVersions.get('affine:surface');\n      if (!surfaceVersion) {\n        throw new MigrationError('affine:surface version not found');\n      }\n      return surfaceVersion < 3;\n    },\n    migrate: doc => {\n      // @ts-ignore\n      const pageIds = doc\n        .getMap('space:meta')\n        .get('pages')\n        .map((a: Y.Map<unknown>) => a.get('id')) as string[];\n      const yVersions = doc\n        .getMap('space:meta')\n        .get('versions') as Y.Map<number>;\n      yVersions.set('affine:surface', 3);\n\n      let pageBlock: Y.Map<unknown> | undefined;\n      let surfaceId: string | undefined;\n\n      pageIds.forEach(pageId => {\n        const spaceId = `space:${pageId}`;\n        const yBlocks = doc.getMap(spaceId);\n\n        Array.from(yBlocks.entries()).forEach(([yId, yBlock]) => {\n          if (yBlock.get('sys:flavour') === 'affine:page') {\n            pageBlock = yBlock;\n          }\n          if (yBlock.get('sys:flavour') === 'affine:surface') {\n            surfaceId = yId;\n          }\n        });\n      });\n\n      if (!pageBlock || !surfaceId) {\n        return;\n      }\n\n      const yChildren = pageBlock.get('sys:children') as Y.Array<string>;\n\n      if (yChildren.toArray().includes(surfaceId)) {\n        return;\n      }\n\n      yChildren.insert(0, [surfaceId]);\n    },\n  },\n];\n\nexport function tryMigrate(doc: Y.Doc) {\n  for (const migration of migrations) {\n    try {\n      if (migration.condition(doc)) {\n        migration.migrate(doc);\n      }\n    } catch (err) {\n      console.error(err);\n      throw new MigrationError(migration.desc);\n    }\n  }\n}\n", "import type { SerializedBlock } from '@blocksuite/blocks';\nimport { debug } from '@blocksuite/global/debug';\nimport { assertExists, Slot } from '@blocksuite/global/utils';\nimport { uuidv4 } from 'lib0/random.js';\nimport * as Y from 'yjs';\n\nimport type { AwarenessStore } from '../awareness.js';\nimport { BaseBlockModel, internalPrimitives } from '../base.js';\nimport { Space, type StackItem } from '../space.js';\nimport { Text } from '../text-adapter.js';\nimport type { IdGenerator } from '../utils/id-generator.js';\nimport {\n  assertValidChildren,\n  initInternalProps,\n  syncBlockProps,\n  toBlockProps,\n} from '../utils/utils.js';\nimport type { BlockSuiteDoc } from '../yjs/index.js';\nimport { createYProxy } from '../yjs/index.js';\nimport type { PageMeta } from './meta.js';\nimport { tryMigrate } from './migrations.js';\nimport type { Workspace } from './workspace.js';\n\nexport type YBlock = Y.Map<unknown>;\nexport type YBlocks = Y.Map<YBlock>;\n\n/** JSON-serializable properties of a block */\nexport type BlockProps = {\n  id: string;\n  flavour: string;\n  text?: Text;\n  children?: BaseBlockModel[];\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [index: string]: any;\n};\n\nexport type PrefixedBlockProps = Record<string, unknown> & {\n  'sys:id': string;\n  'sys:flavour': string;\n};\n\nconst isWeb = typeof window !== 'undefined';\n\nfunction createChildMap(yChildIds: Y.Array<string>) {\n  return new Map(yChildIds.map((child, index) => [child, index]));\n}\n\ntype FlatBlockMap = {\n  [key: string]: YBlock;\n};\n\ntype PageOptions = {\n  id: string;\n  workspace: Workspace;\n  doc: BlockSuiteDoc;\n  awarenessStore: AwarenessStore;\n  idGenerator?: IdGenerator;\n};\n\nexport class Page extends Space<FlatBlockMap> {\n  private readonly _workspace: Workspace;\n  private readonly _idGenerator: IdGenerator;\n  private _history!: Y.UndoManager;\n  private _root: BaseBlockModel | null = null;\n  private _blockMap = new Map<string, BaseBlockModel>();\n  private _synced = false;\n  private _shouldTransact = true;\n\n  // TODO use schema\n  private _ignoredKeys = new Set<string>(Object.keys(new BaseBlockModel()));\n\n  readonly slots = {\n    historyUpdated: new Slot(),\n    rootAdded: new Slot<BaseBlockModel>(),\n    rootDeleted: new Slot<string | string[]>(),\n    textUpdated: new Slot<Y.YTextEvent>(),\n    yUpdated: new Slot(),\n    onYEvent: new Slot<{\n      event: Y.YEvent<YBlock | Y.Text | Y.Array<unknown>>;\n    }>(),\n    blockUpdated: new Slot<{\n      type: 'add' | 'delete' | 'update';\n      id: string;\n    }>(),\n    copied: new Slot(),\n    pasted: new Slot<SerializedBlock[]>(),\n  };\n\n  constructor({\n    id,\n    workspace,\n    doc,\n    awarenessStore,\n    idGenerator = uuidv4,\n  }: PageOptions) {\n    super(id, doc, awarenessStore);\n    this._workspace = workspace;\n    this._idGenerator = idGenerator;\n  }\n\n  get readonly() {\n    return this.awarenessStore.isReadonly(this);\n  }\n\n  get history() {\n    return this._history;\n  }\n\n  get workspace() {\n    return this._workspace;\n  }\n\n  get schema() {\n    return this._workspace.schema;\n  }\n\n  get meta() {\n    return this.workspace.meta.getPageMeta(this.id) as PageMeta;\n  }\n\n  get blobs() {\n    return this.workspace.blobs;\n  }\n\n  /** key-value store of blocks */\n  private get _yBlocks(): YBlocks {\n    return this._ySpace;\n  }\n\n  get root() {\n    return this._root;\n  }\n\n  getYBlockById(id: string) {\n    return this._yBlocks.get(id);\n  }\n\n  get isEmpty() {\n    return this._yBlocks.size === 0;\n  }\n\n  get canUndo() {\n    if (this.readonly) {\n      return false;\n    }\n    return this._history.canUndo();\n  }\n\n  get canRedo() {\n    if (this.readonly) {\n      return false;\n    }\n    return this._history.canRedo();\n  }\n\n  get YText() {\n    return Y.Text;\n  }\n\n  get YMap() {\n    return Y.Map;\n  }\n\n  get Text() {\n    return Text;\n  }\n\n  withoutTransact(callback: () => void) {\n    this._shouldTransact = false;\n    callback();\n    this._shouldTransact = true;\n  }\n\n  override transact(\n    fn: () => void,\n    shouldTransact: boolean = this._shouldTransact\n  ) {\n    super.transact(fn, shouldTransact);\n  }\n\n  undo() {\n    if (this.readonly) {\n      console.error('cannot modify data in readonly mode');\n      return;\n    }\n    this._history.undo();\n  }\n\n  redo() {\n    if (this.readonly) {\n      console.error('cannot modify data in readonly mode');\n      return;\n    }\n    this._history.redo();\n  }\n\n  /** Capture current operations to undo stack synchronously. */\n  captureSync() {\n    this._history.stopCapturing();\n  }\n\n  resetHistory() {\n    this._history.clear();\n  }\n\n  generateId() {\n    return this._idGenerator();\n  }\n\n  getBlockById(id: string) {\n    return this._blockMap.get(id) ?? null;\n  }\n\n  getBlockByFlavour(blockFlavour: string) {\n    return [...this._blockMap.values()].filter(\n      ({ flavour }) => flavour === blockFlavour\n    );\n  }\n\n  hasFlavour(flavour: string) {\n    return this.getBlockByFlavour(flavour).length > 0;\n  }\n\n  getParent(target: BaseBlockModel | string): BaseBlockModel | null {\n    const root = this._root;\n    const targetId = typeof target === 'string' ? target : target.id;\n    if (!root || root.id === targetId) return null;\n\n    const findParent = (parentId: string): BaseBlockModel | null => {\n      const parentModel = this._blockMap.get(parentId);\n      if (!parentModel) return null;\n\n      for (const [childId] of parentModel.childMap) {\n        if (childId === targetId) return parentModel;\n\n        const parent = findParent(childId);\n        if (parent !== null) return parent;\n      }\n\n      return null;\n    };\n\n    const parent = findParent(root.id);\n    if (parent !== null) return parent;\n\n    return null;\n  }\n\n  getPreviousSibling(block: BaseBlockModel) {\n    const parent = this.getParent(block);\n    if (!parent) {\n      return null;\n    }\n    const index = parent.children.indexOf(block);\n    if (index === -1) {\n      throw new Error(\n        \"Failed to getPreviousSiblings! Block not found in parent's children\"\n      );\n    }\n    return parent.children[index - 1] ?? null;\n  }\n\n  getPreviousSiblings(block: BaseBlockModel) {\n    const parent = this.getParent(block);\n    if (!parent) {\n      return [];\n    }\n    const index = parent.children.indexOf(block);\n    if (index === -1) {\n      throw new Error(\n        \"Failed to getPreviousSiblings! Block not found in parent's children\"\n      );\n    }\n    return parent.children.slice(0, index);\n  }\n\n  getNextSibling(block: BaseBlockModel) {\n    const parent = this.getParent(block);\n    if (!parent) {\n      return null;\n    }\n    const index = parent.children.indexOf(block);\n    if (index === -1) {\n      throw new Error(\n        \"Failed to getPreviousSiblings! Block not found in parent's children\"\n      );\n    }\n    return parent.children[index + 1] ?? null;\n  }\n\n  getNextSiblings(block: BaseBlockModel) {\n    const parent = this.getParent(block);\n    if (!parent) {\n      return [];\n    }\n    const index = parent.children.indexOf(block);\n    if (index === -1) {\n      throw new Error(\n        \"Failed to getNextSiblings! Block not found in parent's children\"\n      );\n    }\n    return parent.children.slice(index + 1);\n  }\n\n  getSchemaByFlavour(flavour: string) {\n    return this.schema.flavourSchemaMap.get(flavour);\n  }\n\n  getInitialPropsByFlavour(flavour: string) {\n    const schema = this.schema.flavourSchemaMap.get(flavour);\n    assertExists(schema);\n    return schema.model.props?.(internalPrimitives) ?? {};\n  }\n\n  @debug('CRUD')\n  addBlocks(\n    blocks: Array<{\n      flavour: string;\n      blockProps?: Partial<BlockProps & Omit<BlockProps, 'flavour' | 'id'>>;\n    }>,\n    parent?: BaseBlockModel | string | null,\n    parentIndex?: number\n  ): string[] {\n    const ids: string[] = [];\n    blocks.forEach(block => {\n      const id = this.addBlock(\n        block.flavour,\n        block.blockProps ?? {},\n        parent,\n        parentIndex\n      );\n      ids.push(id);\n      typeof parentIndex === 'number' && parentIndex++;\n    });\n\n    return ids;\n  }\n\n  @debug('CRUD')\n  addBlock(\n    flavour: string,\n    blockProps: Partial<BlockProps & Omit<BlockProps, 'flavour'>> = {},\n    parent?: BaseBlockModel | string | null,\n    parentIndex?: number\n  ): string {\n    if (this.readonly) {\n      throw new Error('cannot modify data in readonly mode');\n    }\n    if (!flavour) {\n      throw new Error('Block props must contain flavour');\n    }\n    if (\n      !this.awarenessStore.getFlag('enable_database') &&\n      flavour === 'affine:database'\n    ) {\n      throw new Error('database is not enabled');\n    }\n    const parentModel =\n      typeof parent === 'string' ? this.getBlockById(parent) : parent;\n\n    this.schema.validate(\n      flavour,\n      parentModel?.flavour,\n      blockProps.children?.map(child => child.flavour)\n    );\n\n    const clonedProps: Partial<BlockProps> = { flavour, ...blockProps };\n    const id = blockProps.id ?? this._idGenerator();\n    clonedProps.id = id;\n\n    this.transact(() => {\n      const yBlock = new Y.Map() as YBlock;\n      // set the yBlock at the very beginning, otherwise yBlock will be always empty\n      this._yBlocks.set(id, yBlock);\n\n      assertValidChildren(this._yBlocks, clonedProps);\n      const schema = this.getSchemaByFlavour(flavour);\n      assertExists(schema);\n      initInternalProps(yBlock, clonedProps);\n\n      syncBlockProps(schema, yBlock, clonedProps, this._ignoredKeys);\n\n      const parentModel =\n        typeof parent === 'string' ? this._blockMap.get(parent) : parent;\n\n      const parentId = parentModel?.id ?? this._root?.id;\n\n      if (parentId) {\n        const yParent = this._yBlocks.get(parentId) as YBlock;\n        const yChildren = yParent.get('sys:children') as Y.Array<string>;\n        const index = parentIndex ?? yChildren.length;\n        yChildren.insert(index, [id]);\n      }\n    });\n\n    this.slots.blockUpdated.emit({ type: 'add', id });\n\n    return id;\n  }\n\n  private _populateParentChildrenMap(\n    blocksToMove: BaseBlockModel[],\n    childBlocksPerParent: Map<BaseBlockModel, BaseBlockModel[]>,\n    newParent: BaseBlockModel\n  ) {\n    blocksToMove.forEach(block => {\n      const parentBlock = this.getParent(block);\n\n      if (!parentBlock) {\n        throw new Error(\"Can't find parent block for the current block\");\n      }\n\n      this.schema.validate(block.flavour, newParent.flavour);\n\n      const childrenBlocksOfCurrentParent =\n        childBlocksPerParent.get(parentBlock);\n      if (childrenBlocksOfCurrentParent) {\n        if (\n          this.getNextSibling(\n            childrenBlocksOfCurrentParent[\n              childrenBlocksOfCurrentParent.length - 1\n            ]\n          ) !== block\n        ) {\n          throw new Error(\n            'The blocks to move are not contiguous under their parent'\n          );\n        }\n        childrenBlocksOfCurrentParent.push(block);\n      } else {\n        childBlocksPerParent.set(parentBlock, [block]);\n      }\n    });\n  }\n\n  private _repositionBlocks(\n    childBlocksPerParent: Map<BaseBlockModel, BaseBlockModel[]>,\n    targetParentChildren: Y.Array<string>,\n    targetSibling: BaseBlockModel | null,\n    shouldInsertBeforeSibling: boolean,\n    insertionOffset: number\n  ) {\n    for (const [parentBlock, blocksToMove] of childBlocksPerParent) {\n      const sourceParentBlock = this._yBlocks.get(parentBlock.id) as YBlock;\n      const sourceParentChildren = sourceParentBlock.get(\n        'sys:children'\n      ) as Y.Array<string>;\n\n      // Get the IDs of blocks to move\n      const idsOfBlocksToMove = blocksToMove.map(({ id }) => id);\n\n      // Remove the blocks from their current parent\n      const startIndex = sourceParentChildren\n        .toArray()\n        .findIndex(id => id === idsOfBlocksToMove[0]);\n      sourceParentChildren.delete(startIndex, idsOfBlocksToMove.length);\n\n      // Determine the index at which to insert blocks in the new parent\n      let insertIndex = 0;\n      if (targetSibling) {\n        insertIndex = targetParentChildren\n          .toArray()\n          .findIndex(id => id === targetSibling.id);\n      }\n\n      // Insert the blocks at the correct position under their new parent\n      if (shouldInsertBeforeSibling) {\n        targetParentChildren.insert(insertIndex, idsOfBlocksToMove);\n      } else {\n        targetParentChildren.insert(\n          insertIndex + insertionOffset,\n          idsOfBlocksToMove\n        );\n        insertionOffset += idsOfBlocksToMove.length;\n      }\n    }\n  }\n\n  // Moves blocks to a new parent. Optionally inserts blocks before a given sibling.\n  @debug('CRUD')\n  moveBlocks(\n    blocksToMove: BaseBlockModel[],\n    newParent: BaseBlockModel,\n    targetSibling: BaseBlockModel | null = null,\n    shouldInsertBeforeSibling = true\n  ) {\n    if (this.readonly) {\n      console.error('Cannot modify data in read-only mode');\n      return;\n    }\n\n    if (!newParent) {\n      throw new Error(\"Can't find new parent block\");\n    }\n\n    // A map to store parent block and their respective child blocks\n    const childBlocksPerParent = new Map<BaseBlockModel, BaseBlockModel[]>();\n\n    this._populateParentChildrenMap(\n      blocksToMove,\n      childBlocksPerParent,\n      newParent\n    );\n\n    this.transact(() => {\n      const targetParentBlock = this._yBlocks.get(newParent.id) as YBlock;\n      const targetParentChildren = targetParentBlock.get(\n        'sys:children'\n      ) as Y.Array<string>;\n\n      // To be used for insertion after the target sibling\n      const insertionOffset = 1;\n\n      // Reposition blocks under their new parent\n      this._repositionBlocks(\n        childBlocksPerParent,\n        targetParentChildren,\n        targetSibling,\n        shouldInsertBeforeSibling,\n        insertionOffset\n      );\n    });\n\n    // Emit event to indicate that the children of these blocks have been updated\n    Array.from(childBlocksPerParent.keys()).forEach(parent =>\n      parent.childrenUpdated.emit()\n    );\n\n    newParent.childrenUpdated.emit();\n  }\n\n  @debug('CRUD')\n  updateBlock<T extends Partial<BlockProps>>(model: BaseBlockModel, props: T) {\n    if (this.readonly) {\n      console.error('cannot modify data in readonly mode');\n      return;\n    }\n\n    const parent = this.getParent(model);\n    this.schema.validate(\n      model.flavour,\n      parent?.flavour,\n      props.children?.map(child => child.flavour)\n    );\n\n    const yBlock = this._yBlocks.get(model.id);\n    assertExists(yBlock);\n\n    this.transact(() => {\n      // TODO diff children changes\n      // All child nodes will be deleted in the current behavior, then added again.\n      // Through diff children changes, the experience can be improved.\n      if (props.children) {\n        const yChildren = new Y.Array<string>();\n        yChildren.insert(\n          0,\n          props.children.map(child => child.id)\n        );\n        yBlock.set('sys:children', yChildren);\n      }\n\n      const schema = this.schema.flavourSchemaMap.get(model.flavour);\n      assertExists(schema);\n      syncBlockProps(schema, yBlock, props, this._ignoredKeys);\n    });\n\n    model.propsUpdated.emit();\n\n    this.slots.blockUpdated.emit({\n      type: 'update',\n      id: model.id,\n    });\n  }\n\n  addSiblingBlocks(\n    targetModel: BaseBlockModel,\n    props: Array<Partial<BaseBlockModel>>,\n    place: 'after' | 'before' = 'after'\n  ): string[] {\n    const parent = this.getParent(targetModel);\n    assertExists(parent);\n\n    const targetIndex =\n      parent.children.findIndex(({ id }) => id === targetModel.id) ?? 0;\n    const insertIndex = place === 'before' ? targetIndex : targetIndex + 1;\n\n    if (props.length > 1) {\n      const blocks: Array<{\n        flavour: string;\n        blockProps: Partial<BlockProps & Omit<BlockProps, 'id' | 'flavour'>>;\n      }> = [];\n      props.forEach(prop => {\n        const { flavour, ...blockProps } = prop;\n        assertExists(flavour);\n        blocks.push({ flavour, blockProps });\n      });\n      return this.addBlocks(blocks, parent.id, insertIndex);\n    } else {\n      assertExists(props[0].flavour);\n      const { flavour, ...blockProps } = props[0];\n      const id = this.addBlock(flavour, blockProps, parent.id, insertIndex);\n      return [id];\n    }\n  }\n\n  @debug('CRUD')\n  deleteBlock(\n    model: BaseBlockModel,\n    options: {\n      bringChildrenTo: 'parent' | BaseBlockModel | false;\n    } = {\n      bringChildrenTo: false,\n    }\n  ) {\n    if (this.readonly) {\n      console.error('cannot modify data in readonly mode');\n      return;\n    }\n    const parent = this.getParent(model);\n    const index = parent?.children.indexOf(model) ?? -1;\n    const { bringChildrenTo } = options;\n    if (index > -1) {\n      parent?.children.splice(parent.children.indexOf(model), 1);\n    }\n    if (bringChildrenTo === 'parent' && parent) {\n      model.children.forEach(child => {\n        this.schema.validate(child.flavour, parent.flavour);\n      });\n      parent.children.unshift(...model.children);\n    } else if (bringChildrenTo instanceof BaseBlockModel) {\n      model.children.forEach(child => {\n        this.schema.validate(child.flavour, bringChildrenTo.flavour);\n      });\n      // When bring children to parent, insert children to the original position of model\n      if (bringChildrenTo === parent && index > -1) {\n        parent.children.splice(index, 0, ...model.children);\n      } else {\n        bringChildrenTo.children.push(...model.children);\n      }\n    }\n    this._blockMap.delete(model.id);\n\n    model.propsUpdated.emit();\n\n    this.transact(() => {\n      this._yBlocks.delete(model.id);\n      const children = model.children.map(model => model.id);\n      model.dispose();\n\n      if (parent) {\n        const yParent = this._yBlocks.get(parent.id) as YBlock;\n        const yChildren = yParent.get('sys:children') as Y.Array<string>;\n\n        if (index > -1) {\n          yChildren.delete(index, 1);\n        }\n        if (options.bringChildrenTo === 'parent') {\n          yChildren.unshift(children);\n        } else if (options.bringChildrenTo instanceof BaseBlockModel) {\n          this.updateBlock(options.bringChildrenTo, {\n            children: options.bringChildrenTo.children,\n          });\n        }\n      }\n    });\n\n    this.slots.blockUpdated.emit({ type: 'delete', id: model.id });\n  }\n\n  trySyncFromExistingDoc() {\n    if (this._synced) {\n      throw new Error('Cannot sync from existing doc more than once');\n    }\n\n    if ((this.workspace.meta.pages?.length ?? 0) <= 1) {\n      tryMigrate(this.doc);\n      this._handleVersion();\n    }\n\n    this._initYBlocks();\n\n    const visited = new Set<string>();\n\n    this._yBlocks.forEach((_, id) => {\n      if (visited.has(id)) return;\n      visited.add(id);\n      this._handleYBlockAdd(visited, id);\n    });\n\n    this._synced = true;\n  }\n\n  dispose() {\n    this.slots.historyUpdated.dispose();\n    this.slots.rootAdded.dispose();\n    this.slots.rootDeleted.dispose();\n    this.slots.textUpdated.dispose();\n    this.slots.yUpdated.dispose();\n    this.slots.blockUpdated.dispose();\n    this.slots.onYEvent.dispose();\n\n    this._yBlocks.unobserveDeep(this._handleYEvents);\n    this._yBlocks.clear();\n  }\n\n  private _initYBlocks() {\n    const { _yBlocks } = this;\n    // Consider if we need to expose the ability to temporarily unobserve this._yBlocks.\n    // \"unobserve\" is potentially necessary to make sure we don't create\n    // an infinite loop when sync to remote then back to client.\n    // `action(a) -> YDoc' -> YEvents(a) -> YRemoteDoc' -> YEvents(a) -> YDoc'' -> ...`\n    // We could unobserve in order to short circuit by ignoring the sync of remote\n    // events we actually generated locally.\n    // _yBlocks.unobserveDeep(this._handleYEvents);\n    _yBlocks.observeDeep(this._handleYEvents);\n\n    this._history = new Y.UndoManager([_yBlocks], {\n      trackedOrigins: new Set([this.doc.clientID]),\n      doc: this.doc,\n    });\n\n    this._history.on('stack-cleared', this._historyObserver);\n    this._history.on('stack-item-added', this._historyAddObserver);\n    this._history.on('stack-item-popped', this._historyPopObserver);\n    this._history.on('stack-item-updated', this._historyObserver);\n  }\n\n  private _getYBlock(id: string): YBlock {\n    const yBlock = this._yBlocks.get(id) as YBlock | undefined;\n    if (!yBlock) {\n      throw new Error(`Block with id ${id} does not exist`);\n    }\n    return yBlock;\n  }\n\n  private _historyAddObserver = (event: { stackItem: StackItem }) => {\n    if (isWeb) {\n      event.stackItem.meta.set(\n        'cursor-location',\n        this.awarenessStore.getLocalRange(this)\n      );\n    }\n\n    this._historyObserver();\n  };\n\n  private _historyPopObserver = (event: { stackItem: StackItem }) => {\n    const range = event.stackItem.meta.get('cursor-location');\n    if (!range) {\n      return;\n    }\n\n    this.awarenessStore.setLocalRange(this, range);\n    this._historyObserver();\n  };\n\n  private _historyObserver = () => {\n    this.slots.historyUpdated.emit();\n  };\n\n  private _createBlockModel(\n    props: Omit<BlockProps, 'children'>,\n    block: YBlock\n  ) {\n    const schema = this.schema.flavourSchemaMap.get(props.flavour);\n    if (!schema) {\n      throw new Error(`Block flavour ${props.flavour} is not registered`);\n    } else if (!props.id) {\n      throw new Error('Block id is not defined');\n    }\n    const blockModel = schema.model.toModel\n      ? schema.model.toModel()\n      : new BaseBlockModel();\n\n    blockModel.id = props.id;\n    const modelProps = schema.model.props?.(internalPrimitives) ?? {};\n    Object.entries(modelProps).forEach(([key, value]) => {\n      // @ts-ignore\n      blockModel[key] =\n        value instanceof Text\n          ? new Text(block.get(`prop:${key}`) as Y.Text)\n          : props[key] ?? value;\n    });\n    blockModel.page = this;\n    blockModel.yBlock = block;\n    blockModel.flavour = schema.model.flavour;\n    blockModel.role = schema.model.role;\n    blockModel.tag = schema.model.tag;\n\n    blockModel.onCreated();\n\n    return blockModel;\n  }\n\n  private _handleYBlockAdd(visited: Set<string>, id: string) {\n    const yBlock = this._getYBlock(id);\n\n    const props = toBlockProps(yBlock);\n    const model = this._createBlockModel({ ...props, id }, yBlock);\n    this._blockMap.set(id, model);\n\n    const yChildren = yBlock.get('sys:children');\n    if (yChildren instanceof Y.Array) {\n      model.childMap = createChildMap(yChildren);\n\n      yChildren.forEach((id: string) => {\n        const index = model.childMap.get(id);\n        if (Number.isInteger(index)) {\n          const hasChild = this._blockMap.has(id);\n\n          if (!hasChild) {\n            visited.add(id);\n            this._handleYBlockAdd(visited, id);\n          }\n\n          model.children[index as number] = this._blockMap.get(\n            id\n          ) as BaseBlockModel;\n        }\n      });\n    }\n\n    if (model.role === 'root') {\n      this._root = model;\n      this.slots.rootAdded.emit(this._root);\n      this.workspace.slots.pageAdded.emit(this.id);\n      return;\n    }\n\n    const parent = this.getParent(model);\n    const index = parent?.childMap.get(model.id);\n    if (parent && index !== undefined) {\n      parent.children[index] = model;\n      parent.childrenUpdated.emit();\n    }\n  }\n\n  private _handleYBlockDelete(id: string) {\n    const model = this._blockMap.get(id);\n    if (model === this._root) {\n      this.slots.rootDeleted.emit(id);\n    } else {\n      // TODO dispatch model delete event\n    }\n    this._blockMap.delete(id);\n  }\n\n  private _handleYBlockUpdate(event: Y.YMapEvent<unknown>) {\n    const id = event.target.get('sys:id') as string;\n    const model = this.getBlockById(id);\n    if (!model) return;\n\n    const props: Partial<BlockProps> = {};\n    let hasPropsUpdate = false;\n    let hasChildrenUpdate = false;\n    for (const key of event.keysChanged) {\n      // TODO use schema\n      if (key === 'prop:text') continue;\n      // Update children\n      if (key === 'sys:children') {\n        hasChildrenUpdate = true;\n        const yChildren = event.target.get('sys:children');\n        if (!(yChildren instanceof Y.Array)) {\n          console.error(\n            'Failed to update block children!, sys:children is not an Y array',\n            event,\n            yChildren\n          );\n          continue;\n        }\n        model.childMap = createChildMap(yChildren);\n        model.children = yChildren.map(\n          id => this._blockMap.get(id) as BaseBlockModel\n        );\n        continue;\n      }\n      const value = event.target.get(key);\n      hasPropsUpdate = true;\n      if (value instanceof Y.Map || value instanceof Y.Array) {\n        props[key.replace('prop:', '')] = createYProxy(value, {\n          deep: true,\n        });\n      } else {\n        props[key.replace('prop:', '')] = value;\n      }\n    }\n\n    if (hasPropsUpdate) {\n      Object.assign(model, props);\n      model.propsUpdated.emit();\n    }\n    hasChildrenUpdate && model.childrenUpdated.emit();\n  }\n\n  private _handleYEvent(event: Y.YEvent<YBlock | Y.Text | Y.Array<unknown>>) {\n    // event on top-level block store\n    if (event.target === this._yBlocks) {\n      const visited = new Set<string>();\n\n      event.keys.forEach((value, id) => {\n        if (value.action === 'add') {\n          // Here the key is the id of the blocks.\n          // Generally, the key that appears earlier corresponds to the block added earlier,\n          // and it won't refer to subsequent keys.\n          // However, when redo the operation that adds multiple blocks at once,\n          // the earlier block may have children pointing to subsequent blocks.\n          // In this case, although the yjs-side state is correct, the BlockModel instance may not exist yet.\n          // Therefore, at this point we synchronize the referenced block first,\n          // then mark it in `visited` so that they can be skipped.\n          if (visited.has(id)) return;\n          visited.add(id);\n\n          this._handleYBlockAdd(visited, id);\n        } else if (value.action === 'delete') {\n          this._handleYBlockDelete(id);\n        } else {\n          // fires when undoing delete-and-add operation on a block\n          // console.warn('update action on top-level block store', event);\n        }\n      });\n    }\n    // event on single block\n    else if (event.target.parent === this._yBlocks) {\n      if (event instanceof Y.YTextEvent) {\n        this.slots.textUpdated.emit(event);\n      } else if (event instanceof Y.YMapEvent) {\n        this._handleYBlockUpdate(event);\n      }\n    }\n    // event on block field\n    else if (\n      event.target.parent instanceof Y.Map &&\n      event.target.parent.has('sys:id')\n    ) {\n      if (event instanceof Y.YArrayEvent) {\n        const id = event.target.parent.get('sys:id') as string;\n        const model = this._blockMap.get(id);\n        if (!model) {\n          throw new Error(`Block with id ${id} does not exist`);\n        }\n\n        const key = event.path[event.path.length - 1];\n        if (key === 'sys:children') {\n          const childIds = event.target.toArray();\n          model.children = childIds.map(\n            id => this._blockMap.get(id) as BaseBlockModel\n          );\n          model.childMap = createChildMap(event.target);\n          model.childrenUpdated.emit();\n        }\n      }\n    }\n\n    this.slots.onYEvent.emit({ event });\n  }\n\n  // Handle all the events that happen at _any_ level (potentially deep inside the structure).\n  // So, we apply a listener at the top level for the flat structure of the current\n  // page/space container.\n  private _handleYEvents = (events: Y.YEvent<YBlock | Y.Text>[]) => {\n    for (const event of events) {\n      this._handleYEvent(event);\n    }\n    this.slots.yUpdated.emit();\n  };\n\n  private _handleVersion() {\n    // Initialization from empty yDoc, indicating that the document is new.\n    if (this._yBlocks.size === 0) {\n      this.workspace.meta.writeVersion(this.workspace);\n    }\n    // Initialization from existing yDoc, indicating that the document is loaded from storage.\n    else {\n      this.workspace.meta.validateVersion(this.workspace);\n    }\n  }\n}\n", "import { Buffer } from 'buffer';\n\nexport async function sha(input: ArrayBuffer): Promise<string> {\n  const hash = await crypto.subtle.digest('SHA-256', input);\n  const buffer = Buffer.from(hash);\n\n  return buffer.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n", "import {\n  assertExists,\n  diffArray,\n  DisposableGroup,\n  Slot,\n} from '@blocksuite/global/utils';\nimport type { BaseTextAttributes } from '@blocksuite/virgo/index';\nimport type { DeltaInsert } from '@blocksuite/virgo/types';\nimport { Text } from 'yjs';\n\nimport type { DeltaOperation } from '../../text-adapter.js';\nimport type { Workspace } from '../workspace.js';\nimport type { BlockIndexer, IndexBlockEvent } from './base.js';\n\ntype PageId = string;\ntype BlockId = string;\ntype LinkedNode = {\n  type: 'LinkedPage' | 'Subpage';\n  pageId: PageId;\n  blockId: BlockId;\n};\n/**\n * Please sync type with {@link AffineTextAttributes} manually\n */\ntype TextDelta = DeltaInsert<\n  BaseTextAttributes & { reference: Omit<LinkedNode, 'blockId'> }\n>;\n\nexport type IndexUpdatedEvent =\n  | {\n      action: 'delete';\n      pageId: PageId;\n      blockId?: BlockId;\n    }\n  | {\n      action: 'add' | 'update';\n      pageId: PageId;\n      blockId: BlockId;\n    };\n\n/**\n * Please sync type with {@link AffineTextAttributes} manually\n */\nfunction isSubpageDelta(delta: DeltaOperation, pageId: PageId) {\n  return (\n    delta.attributes &&\n    delta.attributes.reference &&\n    delta.attributes.reference.type === 'Subpage' &&\n    delta.attributes.reference.pageId === pageId\n  );\n}\n\nexport class BacklinkIndexer {\n  private _linkIndexMap: Record<PageId, Record<BlockId, LinkedNode[]>> = {};\n  private _disposables = new DisposableGroup();\n  public slots = {\n    /**\n     * Note: sys:children update will not trigger event\n     */\n    indexUpdated: new Slot<IndexUpdatedEvent>(),\n  };\n\n  constructor(blockIndexer: BlockIndexer) {\n    this._disposables.add(\n      blockIndexer.slots.refreshIndex.on(() => this._onRefreshIndex())\n    );\n\n    this._disposables.add(\n      blockIndexer.slots.pageRemoved.on(pageId => this._onPageRemoved(pageId))\n    );\n\n    this._disposables.add(\n      blockIndexer.slots.blockUpdated.on(e => this._onBlockUpdated(e))\n    );\n\n    this.slots.indexUpdated.on(() => {\n      this._backlinkIndexMapCache = null;\n    });\n  }\n\n  // TODO use inverted index\n  private _backlinkIndexMapCache: Record<PageId, LinkedNode[]> | null = null;\n  /**\n   * Get the list of backlinks for a given page\n   */\n  public getBacklink(targetPageId: PageId) {\n    if (this._backlinkIndexMapCache) {\n      return this._backlinkIndexMapCache[targetPageId] ?? [];\n    }\n    const backlinkIndexMapCache: Record<PageId, LinkedNode[]> = {};\n    for (const [fromPageId, blockMap] of Object.entries(this._linkIndexMap)) {\n      for (const [fromBlockId, links] of Object.entries(blockMap)) {\n        links\n          // .filter(link => link.pageId === targetPageId)\n          .forEach(({ pageId, type }) => {\n            if (!(pageId in backlinkIndexMapCache)) {\n              backlinkIndexMapCache[pageId] = [];\n            }\n            backlinkIndexMapCache[pageId].push({\n              pageId: fromPageId,\n              blockId: fromBlockId,\n              type,\n            });\n          });\n      }\n    }\n    this._backlinkIndexMapCache = backlinkIndexMapCache;\n    return this._backlinkIndexMapCache[targetPageId] ?? [];\n  }\n\n  /**\n   * Returns all valid subpage nodes in the given page.\n   *\n   * Note: this method will ignore invalid subpage nodes.\n   *\n   * @example\n   * ```ts\n   * const subpages = workspace.indexer.backlink\n   *   .getSubpageNodes(pageId)\n   *   .map(node => node.pageId);\n   * ```\n   */\n  public getSubpageNodes(pageId: PageId) {\n    if (!(pageId in this._linkIndexMap)) {\n      // page not found\n      return [];\n    }\n    return (\n      Object.values(this._linkIndexMap[pageId])\n        .flat()\n        .filter(link => link.type === 'Subpage')\n        // ignore invalid subpage nodes\n        .filter(link => this.getParentPage(link.pageId) === pageId)\n    );\n  }\n\n  public getParentPage(pageId: string) {\n    const parentPage = this.getBacklink(pageId)\n      .filter(node => node.type === 'Subpage')\n      .map(node => node.pageId);\n    if (!parentPage.length) {\n      return null;\n    }\n    if (parentPage.length > 1) {\n      console.error('Unexpected multiple parent page', parentPage, pageId);\n    }\n    return parentPage[0];\n  }\n\n  /**\n   * Delete the specified subpage nodes from the workspace.\n   */\n  public removeSubpageNode(workspace: Workspace, subpageId: PageId) {\n    const backlinks = this.getBacklink(subpageId);\n    const subpageNodes = backlinks.filter(link => link.type === 'Subpage');\n    if (subpageNodes.length > 1) {\n      console.warn('Unexpected subpage node count', subpageId, subpageNodes);\n    }\n\n    subpageNodes.forEach(({ pageId, blockId }) => {\n      const page = workspace.getPage(pageId);\n      if (!page) {\n        console.warn(\n          'Failed to remove subpage node from page! page not found!'\n        );\n        return;\n      }\n      const block = page.getBlockById(blockId);\n      if (!block) {\n        console.warn(\n          block,\n          'Failed to remove subpage node from page! block not found! pageId: ' +\n            `${page.id}, blockId: ${blockId}`\n        );\n        return;\n      }\n      const text = block.text;\n      assertExists(text);\n\n      page.transact(() => {\n        let accIdx = 0;\n        text.toDelta().forEach(delta => {\n          const deltaLen = delta.insert?.length ?? 0;\n          if (isSubpageDelta(delta, subpageId)) {\n            text.format(accIdx, deltaLen, { reference: null });\n          }\n          accIdx += deltaLen ?? 0;\n        });\n      }, false);\n    });\n  }\n\n  private _onRefreshIndex() {\n    this._linkIndexMap = {};\n  }\n\n  private _onPageRemoved(pageId: PageId) {\n    if (!this._linkIndexMap[pageId]) {\n      return;\n    }\n    this._linkIndexMap[pageId] = {};\n    this.slots.indexUpdated.emit({ action: 'delete', pageId });\n  }\n\n  private _onBlockUpdated({ action, pageId, block, blockId }: IndexBlockEvent) {\n    switch (action) {\n      case 'add':\n      case 'update': {\n        const text = block.get('prop:text');\n        if (!(text instanceof Text)) {\n          if (text) {\n            console.warn('Unexpected prop:text type', text);\n          }\n          return;\n        }\n        const deltas: TextDelta[] = text.toDelta();\n        this._indexDelta({ action, pageId, blockId, deltas });\n        return;\n      }\n      case 'delete': {\n        this._removeIndex(pageId, blockId);\n        break;\n      }\n    }\n  }\n\n  private _indexDelta({\n    action,\n    pageId,\n    blockId,\n    deltas,\n  }: {\n    action: IndexBlockEvent['action'];\n    pageId: PageId;\n    blockId: BlockId;\n    deltas: TextDelta[];\n  }) {\n    const links = deltas\n      .filter(delta => delta.attributes && delta.attributes.reference)\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      .map(delta => ({ ...delta.attributes!.reference!, blockId }));\n\n    const before = this._linkIndexMap[pageId]?.[blockId] ?? [];\n    const diff = diffArray(before, links);\n    if (!diff.changed) return;\n\n    this._linkIndexMap[pageId] = {\n      ...this._linkIndexMap[pageId],\n      [blockId]: links,\n    };\n    this.slots.indexUpdated.emit({ action, pageId, blockId });\n  }\n\n  private _removeIndex(pageId: PageId, blockId: BlockId) {\n    if (!this._linkIndexMap[pageId] || !this._linkIndexMap[pageId][blockId]) {\n      return;\n    }\n    const previousLink = this._linkIndexMap[pageId][blockId];\n    delete this._linkIndexMap[pageId][blockId];\n    if (previousLink.length) {\n      this.slots.indexUpdated.emit({\n        action: 'delete',\n        pageId,\n        blockId,\n      });\n    }\n  }\n\n  dispose() {\n    this._disposables.dispose();\n  }\n}\n", "import { assertExists, DisposableGroup, Slot } from '@blocksuite/global/utils';\nimport type * as Y from 'yjs';\nimport { YArrayEvent, YMapEvent, YTextEvent } from 'yjs';\n\nimport type { BlockSuiteDoc, BlockSuiteDocData } from '../../yjs/index.js';\nimport type { YBlock } from '../page.js';\n\ntype PageId = string;\n\nexport type IndexBlockEvent =\n  | {\n      pageId: PageId;\n      blockId: string;\n      action: 'add' | 'update';\n      block: YBlock;\n    }\n  | {\n      pageId: PageId;\n      blockId: string;\n      action: 'delete';\n      block?: undefined;\n    };\n\nexport class BlockIndexer {\n  private readonly _doc: Y.Doc;\n  private readonly _workspaceSlots: {\n    pageAdded: Slot<string>;\n    pageRemoved: Slot<string>;\n  };\n  private _disposables = new DisposableGroup();\n\n  public slots = {\n    pageRemoved: new Slot<PageId>(),\n    /**\n     * Note: sys:children update will not trigger event\n     */\n    blockUpdated: new Slot<IndexBlockEvent>(),\n    refreshIndex: new Slot(),\n  };\n\n  constructor(\n    doc: BlockSuiteDoc<BlockSuiteDocData>,\n    {\n      immediately = false,\n      slots,\n    }: {\n      readonly slots: {\n        pageAdded: Slot<string>;\n        pageRemoved: Slot<string>;\n      };\n      immediately?: boolean;\n    }\n  ) {\n    this._doc = doc;\n    this._workspaceSlots = slots;\n\n    if (immediately) {\n      this._initIndex();\n      return;\n    }\n    // lazy init\n    if ('requestIdleCallback' in globalThis) {\n      requestIdleCallback(() => {\n        this._initIndex();\n      });\n      return;\n    }\n    // fallback to setTimeout\n    setTimeout(() => {\n      this._initIndex();\n    }, 0);\n  }\n\n  private _initIndex() {\n    const doc = this._doc;\n    const share = doc.share;\n    if (!share.has('space:meta')) {\n      throw new Error(\"Failed to initialize indexer: 'space:meta' not found\");\n    }\n\n    let disposeMap: Record<string, (() => void) | null> = {};\n    this._disposables.add(() => {\n      Object.values(disposeMap).forEach(fn => fn?.());\n      disposeMap = {};\n    });\n\n    Array.from(doc.share.keys())\n      // filter out 'space:meta'\n      .filter(pageId => pageId !== 'space:meta')\n      .map(pageId =>\n        pageId.startsWith('space:') ? pageId.slice('space:'.length) : pageId\n      )\n      .map(pageId => ({ pageId, page: this._getPage(pageId) }))\n      .forEach(({ pageId, page }) => {\n        assertExists(page, `Failed to find page '${pageId}'`);\n        if (disposeMap[pageId]) {\n          console.warn(\n            `Duplicated pageAdded event! ${pageId} already observed`,\n            disposeMap\n          );\n          return;\n        }\n        const dispose = this._indexPage(pageId, page);\n        disposeMap[pageId] = dispose;\n      });\n\n    this._workspaceSlots.pageAdded.on(pageId => {\n      const page = this._getPage(pageId);\n      assertExists(page, `Failed to find page '${pageId}'`);\n      if (disposeMap[pageId]) {\n        // It's possible because the `pageAdded` event is emitted once a new block is added to the page\n        return;\n      }\n      const dispose = this._indexPage(pageId, page);\n      disposeMap[pageId] = dispose;\n    });\n    this._workspaceSlots.pageRemoved.on(pageId => {\n      disposeMap[pageId]?.();\n      disposeMap[pageId] = null;\n      this.slots.pageRemoved.emit(pageId);\n    });\n  }\n\n  private _indexPage(pageId: string, yPage: Y.Map<YBlock>) {\n    yPage.forEach((block, blockId) => {\n      this._indexBlock({ action: 'add', pageId, blockId, block });\n    });\n\n    const observer = (\n      events: Y.YEvent<Y.AbstractType<unknown>>[],\n      transaction: Y.Transaction\n    ) => this._yPageObserver(events, transaction, { pageId, yPage });\n\n    yPage.observeDeep(observer);\n    return () => {\n      yPage.unobserveDeep(observer);\n    };\n  }\n\n  private _indexBlock(indexEvent: IndexBlockEvent) {\n    this.slots.blockUpdated.emit(indexEvent);\n  }\n\n  private _yPageObserver = (\n    events: Y.YEvent<Y.AbstractType<unknown>>[],\n    transaction: Y.Transaction,\n    { pageId, yPage }: { pageId: PageId; yPage: Y.Map<YBlock> }\n  ) => {\n    events.forEach(e => {\n      if (e instanceof YArrayEvent) {\n        // sys:children\n        return;\n      }\n\n      if (e instanceof YMapEvent) {\n        if (e.target !== e.currentTarget) {\n          // add 'elements' to 'affine:surface' or add 'prop:xywh' to 'affine:frame'\n          if (e.keysChanged.has('prop:text')) {\n            // update block text by `page.updateBlock(paragraph, { text: new page.Text() })` API\n            const blockId = e.path[0] as string;\n            const block = yPage.get(blockId);\n            assertExists(block);\n            this._indexBlock({\n              action: 'update',\n              pageId,\n              blockId,\n              block,\n            });\n          }\n          return;\n        }\n\n        Array.from(e.changes.keys.entries()).forEach(\n          ([blockId, { action }]) => {\n            if (action === 'delete') {\n              this._indexBlock({\n                action,\n                pageId,\n                blockId,\n              });\n              return;\n            }\n            // add or update\n            const block = yPage.get(blockId);\n            assertExists(block);\n            this._indexBlock({\n              action,\n              pageId,\n              blockId,\n              block,\n            });\n          }\n        );\n        return;\n      }\n      if (e instanceof YTextEvent) {\n        const blockId = e.path[0];\n        if (!blockId || typeof blockId !== 'string') {\n          throw new Error('Failed to update index! Unexpected YText Event!');\n        }\n        const block = yPage.get(blockId);\n        assertExists(block);\n        this._indexBlock({\n          action: 'update',\n          pageId,\n          blockId,\n          block,\n        });\n        return;\n      }\n    });\n  };\n\n  private _getPage(pageId: PageId): Y.Map<YBlock> | undefined {\n    if (pageId.startsWith('space:')) {\n      console.warn('Unexpected page prefix', pageId);\n    }\n    pageId = `space:${pageId}`;\n    return this._doc.getMap(pageId);\n  }\n\n  refreshIndex() {\n    this.slots.refreshIndex.emit();\n    this._initIndex();\n  }\n\n  dispose() {\n    this._disposables.dispose();\n  }\n}\n", "import type { DocumentSearchOptions } from 'flexsearch';\nimport FlexSearch from 'flexsearch';\nimport type { Doc, Map as YMap } from 'yjs';\nimport { Text as YText } from 'yjs';\n\nimport type { YBlock } from '../page.js';\n\nconst DocumentIndexer = FlexSearch.Document;\nconst Index = FlexSearch.Index;\n\nexport type QueryContent = string | Partial<DocumentSearchOptions<boolean>>;\n\ntype SearchResult = { id: string; doc: { space: string } };\ntype SearchResults = { field: string; result: SearchResult[] };\n\nfunction tokenize(locale: string) {\n  const tokenizer = Intl?.Segmenter;\n  if (tokenizer) {\n    // extract the latin encoder inside flexsearch\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const latinIndexer: any = new Index({ charset: 'latin:advanced' });\n    const latinEncoder = latinIndexer.encode.bind(latinIndexer);\n    // check latin characters\n    const latinChecker = /^[\\p{Script=Latin}\\p{Mark}\\d]+$/u;\n\n    const segmenter = new tokenizer([locale], { granularity: 'word' });\n    return (text: string) => {\n      const latinChars: string[] = [];\n      const cjkChars = Array.from(segmenter.segment(text))\n        .filter(s => {\n          if (s.isWordLike) {\n            if (!latinChecker.test(s.segment)) {\n              return true;\n            }\n            latinChars.push(s.segment);\n          }\n          return false;\n        })\n        .map(s => s.segment);\n\n      return [...cjkChars, ...latinEncoder(latinChars.join(' '))];\n    };\n  }\n  return (text: string) => {\n    // eslint-disable-next-line no-control-regex\n    return text.replace(/[\\x00-\\x7F]/g, '').split('');\n  };\n}\n\nexport type IndexMeta = Readonly<{\n  content: string;\n  reference?: string;\n  space: string;\n  tags: string[];\n}>;\n\nexport class SearchIndexer {\n  private readonly _doc: Doc;\n  private readonly _indexer: FlexSearch.Document<IndexMeta, string[]>;\n\n  constructor(\n    doc: Doc,\n    // locale string based on https://www.w3.org/International/articles/bcp47/\n    locale = 'en-US'\n  ) {\n    this._doc = doc;\n    this._indexer = new DocumentIndexer<IndexMeta, string[]>({\n      document: {\n        id: 'id',\n        index: ['content', 'reference', 'space'],\n        tag: 'tags',\n        store: ['space'],\n      },\n      encode: tokenize(locale),\n      tokenize: 'forward',\n      context: true,\n    });\n\n    Array.from(doc.share.keys())\n      .filter(pageId => pageId !== 'space:meta')\n      .map(k => [k, this._getPage(k)] as const)\n      .forEach(([pageId, page]) => this._handlePageIndexing(pageId, page));\n  }\n\n  // TODO: remove this method, observe page meta instead\n  onPageCreated(pageId: string) {\n    this._handlePageIndexing(pageId, this._getPage(pageId));\n  }\n\n  search(query: QueryContent) {\n    return new Map(\n      this._search(query).flatMap(({ result }) =>\n        result.map(r => [r.id, r.doc.space])\n      )\n    );\n  }\n\n  private _search(query: QueryContent): SearchResults[] {\n    if (typeof query === 'object') {\n      return this._indexer.search({\n        ...query,\n        enrich: true,\n      }) as unknown as SearchResults[];\n    } else {\n      return this._indexer.search(query, {\n        enrich: true,\n      }) as unknown as SearchResults[];\n    }\n  }\n\n  private _handlePageIndexing(pageId: string, page?: YMap<YBlock>) {\n    if (page) {\n      page.forEach((_, key) => {\n        this._refreshIndex(pageId, key, 'add', page.get(key));\n      });\n\n      page.observeDeep(events => {\n        const keys = events.flatMap(e => {\n          // eslint-disable-next-line no-bitwise\n          if ((e.path?.length | 0) > 0) {\n            return [[e.path[0], 'update'] as [string, 'update']];\n          }\n          return Array.from(e.changes.keys.entries()).map(\n            ([k, { action }]) => [k, action] as [string, typeof action]\n          );\n        });\n\n        if (keys.length) {\n          keys.forEach(([key, action]) => {\n            this._refreshIndex(pageId, key, action, page.get(key));\n          });\n        }\n      });\n    }\n  }\n\n  private _refreshIndex(\n    page: string,\n    id: string,\n    action: 'add' | 'update' | 'delete',\n    block?: YBlock\n  ) {\n    switch (action) {\n      case 'add':\n      case 'update': {\n        if (block) {\n          const content = this._toContent(\n            block.get('prop:title') || block.get('prop:text')\n          );\n          if (content) {\n            this._indexer.add(id, {\n              content,\n              space: page,\n              tags: [page],\n            });\n          }\n        }\n\n        break;\n      }\n      case 'delete': {\n        this._indexer.remove(id);\n        break;\n      }\n    }\n  }\n\n  private _toContent(obj: unknown) {\n    if (obj) {\n      if (typeof obj === 'string') {\n        return obj;\n      } else if (obj instanceof YText) {\n        return obj.toJSON();\n      }\n    }\n    return undefined;\n  }\n\n  private _getPage(key: string): YMap<YBlock> | undefined {\n    try {\n      if (!key.startsWith('space:')) {\n        key = `space:${key}`;\n      }\n      return this._doc.getMap(key);\n    } catch (_) {\n      return undefined;\n    }\n  }\n}\n", "import { assertExists, Slot } from '@blocksuite/global/utils';\nimport * as Y from 'yjs';\n\nimport type { AwarenessStore } from '../awareness.js';\nimport { Space } from '../space.js';\nimport { type InlineSuggestionProvider, type StoreOptions } from '../store.js';\nimport type { BlockSuiteDoc } from '../yjs/index.js';\nimport type { Workspace } from './workspace.js';\n\nexport type WorkspaceOptions = {\n  experimentalInlineSuggestionProvider?: InlineSuggestionProvider;\n} & StoreOptions;\n\nexport interface PageMeta {\n  id: string;\n  title: string;\n  createDate: number;\n  /**\n   * Note: YOU SHOULD NOT UPDATE THIS FIELD MANUALLY.\n   * @deprecated\n   */\n  subpageIds: string[];\n  // please use `declare module '@blocksuite/store'` to extend this interface\n}\n\ntype WorkspaceMetaState = {\n  pages?: Y.Array<unknown>;\n  versions?: Y.Map<unknown>;\n  name?: string;\n  avatar?: string;\n};\n\nexport class WorkspaceMeta extends Space<WorkspaceMetaState> {\n  private _prevPages = new Set<string>();\n  pageMetaAdded = new Slot<string>();\n  pageMetaRemoved = new Slot<string>();\n  pageMetasUpdated = new Slot();\n  commonFieldsUpdated = new Slot();\n\n  constructor(id: string, doc: BlockSuiteDoc, awarenessStore: AwarenessStore) {\n    super(id, doc, awarenessStore);\n    this._ySpace.observeDeep(this._handleWorkspaceMetaEvents);\n  }\n\n  get pages() {\n    return this._proxy.pages;\n  }\n\n  get name() {\n    return this._proxy.name;\n  }\n\n  get avatar() {\n    return this._proxy.avatar;\n  }\n\n  setName(name: string) {\n    this.doc.transact(() => {\n      this._proxy.name = name;\n    });\n  }\n\n  setAvatar(avatar: string) {\n    this.doc.transact(() => {\n      this._proxy.avatar = avatar;\n    });\n  }\n\n  get pageMetas() {\n    return (this._proxy.pages?.toJSON() as PageMeta[]) ?? ([] as PageMeta[]);\n  }\n\n  getPageMeta(id: string) {\n    return this.pageMetas.find(page => page.id === id);\n  }\n\n  addPageMeta(page: PageMeta, index?: number) {\n    this.doc.transact(() => {\n      const pages: Y.Array<unknown> = this.pages ?? new Y.Array();\n      const yPage = this._transformObjectToYMap(page);\n      if (index === undefined) {\n        pages.push([yPage]);\n      } else {\n        pages.insert(index, [yPage]);\n      }\n      if (!this.pages) {\n        this._ySpace.set('pages', pages);\n      }\n    });\n  }\n\n  /**\n   * @internal Use {@link Workspace.setPageMeta} instead\n   */\n  setPageMeta(id: string, props: Partial<PageMeta>) {\n    const pages = (this.pages?.toJSON() as PageMeta[]) ?? [];\n    const index = pages.findIndex((page: PageMeta) => id === page.id);\n\n    this.doc.transact(() => {\n      if (!this.pages) {\n        this._ySpace.set('pages', new Y.Array());\n      }\n      if (index === -1) return;\n      assertExists(this.pages);\n\n      const yPage = this.pages.get(index) as Y.Map<unknown>;\n      Object.entries(props).forEach(([key, value]) => {\n        yPage.set(key, value);\n      });\n    });\n  }\n\n  /**\n   * Adjust the index of a page inside the pageMetss list\n   *\n   * @deprecated\n   */\n  shiftPageMeta(pageId: string, newIndex: number) {\n    const pageMetas = (this.pages ?? new Y.Array()).toJSON() as PageMeta[];\n    const index = pageMetas.findIndex((page: PageMeta) => pageId === page.id);\n\n    if (index === -1) return;\n\n    const yPage = this._transformObjectToYMap(pageMetas[index]);\n\n    this.doc.transact(() => {\n      assertExists(this.pages);\n      this.pages.delete(index, 1);\n      if (newIndex > this.pages.length) {\n        this.pages.push([yPage]);\n      } else {\n        this.pages.insert(newIndex, [yPage]);\n      }\n    });\n  }\n\n  removePageMeta(id: string) {\n    // you cannot delete a page if there's no page\n    assertExists(this.pages);\n    const pageMetas = this.pages.toJSON() as PageMeta[];\n    const index = pageMetas.findIndex((page: PageMeta) => id === page.id);\n    if (index === -1) {\n      return;\n    }\n    this.doc.transact(() => {\n      assertExists(this.pages);\n      this.pages.delete(index, 1);\n    });\n  }\n\n  /**\n   * @internal Only for page initialization\n   */\n  writeVersion(workspace: Workspace) {\n    let versions = this._proxy.versions;\n    if (!versions) {\n      versions = new Y.Map<unknown>();\n      workspace.schema.flavourSchemaMap.forEach((schema, flavour) => {\n        (versions as Y.Map<unknown>).set(flavour, schema.version);\n      });\n      this._ySpace.set('versions', versions);\n      return;\n    } else {\n      console.error(`Workspace versions already set.`);\n    }\n  }\n\n  /**\n   * @internal Only for page initialization\n   */\n  validateVersion(workspace: Workspace) {\n    const versions = this._proxy.versions?.toJSON();\n    if (!versions) {\n      throw new Error(\n        'Invalid workspace data, versions data is missing. Please make sure the data is valid'\n      );\n    }\n    const dataFlavours = Object.keys(versions);\n    // TODO: emit data validation error slots\n    if (dataFlavours.length === 0) {\n      throw new Error(\n        'Invalid workspace data, missing versions field. Please make sure the data is valid.'\n      );\n    }\n\n    dataFlavours.forEach(dataFlavour => {\n      const dataVersion = versions[dataFlavour] as number;\n      const editorVersion =\n        workspace.schema.flavourSchemaMap.get(dataFlavour)?.version;\n      if (!editorVersion) {\n        throw new Error(\n          `Editor missing ${dataFlavour} flavour. Please make sure this block flavour is registered.`\n        );\n      } else if (dataVersion > editorVersion) {\n        throw new Error(\n          `Editor doesn't support ${dataFlavour}@${dataVersion}. Please upgrade the editor.`\n        );\n      } else if (dataVersion < editorVersion) {\n        throw new Error(\n          `In workspace data, the block flavour ${dataFlavour}@${dataVersion} is outdated. Please downgrade the editor or try data migration.`\n        );\n      }\n    });\n  }\n\n  private _handlePageMetaEvent() {\n    const { pageMetas, _prevPages } = this;\n\n    pageMetas.forEach(pageMeta => {\n      // newly added space can't be found\n      // unless explicitly getMap after meta updated\n      this.doc.getMap('space:' + pageMeta.id);\n\n      if (!_prevPages.has(pageMeta.id)) {\n        this.pageMetaAdded.emit(pageMeta.id);\n      }\n    });\n\n    _prevPages.forEach(prevPageId => {\n      const isRemoved = !pageMetas.find(p => p.id === prevPageId);\n      if (isRemoved) {\n        this.pageMetaRemoved.emit(prevPageId);\n      }\n    });\n\n    _prevPages.clear();\n    pageMetas.forEach(page => _prevPages.add(page.id));\n\n    this.pageMetasUpdated.emit();\n  }\n\n  private _handleCommonFieldsEvent() {\n    this.commonFieldsUpdated.emit();\n  }\n\n  private _handleWorkspaceMetaEvents = (\n    events: Y.YEvent<Y.Array<unknown> | Y.Text | Y.Map<unknown>>[]\n  ) => {\n    events.forEach(e => {\n      const hasKey = (k: string) =>\n        e.target === this._ySpace && e.changes.keys.has(k);\n\n      if (\n        e.target === this.pages ||\n        e.target.parent === this.pages ||\n        hasKey('pages')\n      ) {\n        this._handlePageMetaEvent();\n      }\n\n      if (hasKey('name') || hasKey('avatar')) {\n        this._handleCommonFieldsEvent();\n      }\n    });\n  };\n\n  private _transformObjectToYMap<T extends object>(obj: T): Y.Map<T[keyof T]> {\n    const yMap: Y.Map<T[keyof T]> = new Y.Map();\n    Object.entries(obj).forEach(([key, value]) => {\n      yMap.set(key, value as T[keyof T]);\n    });\n    return yMap;\n  }\n}\n", "import expand from 'brace-expansion'\nimport { assertValidPattern } from './assert-valid-pattern.js'\nimport { AST, ExtglobType } from './ast.js'\nimport { escape } from './escape.js'\nimport { unescape } from './unescape.js'\n\ntype Platform =\n  | 'aix'\n  | 'android'\n  | 'darwin'\n  | 'freebsd'\n  | 'haiku'\n  | 'linux'\n  | 'openbsd'\n  | 'sunos'\n  | 'win32'\n  | 'cygwin'\n  | 'netbsd'\n\nexport interface MinimatchOptions {\n  nobrace?: boolean\n  nocomment?: boolean\n  nonegate?: boolean\n  debug?: boolean\n  noglobstar?: boolean\n  noext?: boolean\n  nonull?: boolean\n  windowsPathsNoEscape?: boolean\n  allowWindowsEscape?: boolean\n  partial?: boolean\n  dot?: boolean\n  nocase?: boolean\n  nocaseMagicOnly?: boolean\n  magicalBraces?: boolean\n  matchBase?: boolean\n  flipNegate?: boolean\n  preserveMultipleSlashes?: boolean\n  optimizationLevel?: number\n  platform?: Platform\n  windowsNoMagicRoot?: boolean\n}\n\nexport const minimatch = (\n  p: string,\n  pattern: string,\n  options: MinimatchOptions = {}\n) => {\n  assertValidPattern(pattern)\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  return new Minimatch(pattern, options).match(p)\n}\n\n// Optimized checking for the most common glob patterns.\nconst starDotExtRE = /^\\*+([^+@!?\\*\\[\\(]*)$/\nconst starDotExtTest = (ext: string) => (f: string) =>\n  !f.startsWith('.') && f.endsWith(ext)\nconst starDotExtTestDot = (ext: string) => (f: string) => f.endsWith(ext)\nconst starDotExtTestNocase = (ext: string) => {\n  ext = ext.toLowerCase()\n  return (f: string) => !f.startsWith('.') && f.toLowerCase().endsWith(ext)\n}\nconst starDotExtTestNocaseDot = (ext: string) => {\n  ext = ext.toLowerCase()\n  return (f: string) => f.toLowerCase().endsWith(ext)\n}\nconst starDotStarRE = /^\\*+\\.\\*+$/\nconst starDotStarTest = (f: string) => !f.startsWith('.') && f.includes('.')\nconst starDotStarTestDot = (f: string) =>\n  f !== '.' && f !== '..' && f.includes('.')\nconst dotStarRE = /^\\.\\*+$/\nconst dotStarTest = (f: string) => f !== '.' && f !== '..' && f.startsWith('.')\nconst starRE = /^\\*+$/\nconst starTest = (f: string) => f.length !== 0 && !f.startsWith('.')\nconst starTestDot = (f: string) => f.length !== 0 && f !== '.' && f !== '..'\nconst qmarksRE = /^\\?+([^+@!?\\*\\[\\(]*)?$/\nconst qmarksTestNocase = ([$0, ext = '']: RegExpMatchArray) => {\n  const noext = qmarksTestNoExt([$0])\n  if (!ext) return noext\n  ext = ext.toLowerCase()\n  return (f: string) => noext(f) && f.toLowerCase().endsWith(ext)\n}\nconst qmarksTestNocaseDot = ([$0, ext = '']: RegExpMatchArray) => {\n  const noext = qmarksTestNoExtDot([$0])\n  if (!ext) return noext\n  ext = ext.toLowerCase()\n  return (f: string) => noext(f) && f.toLowerCase().endsWith(ext)\n}\nconst qmarksTestDot = ([$0, ext = '']: RegExpMatchArray) => {\n  const noext = qmarksTestNoExtDot([$0])\n  return !ext ? noext : (f: string) => noext(f) && f.endsWith(ext)\n}\nconst qmarksTest = ([$0, ext = '']: RegExpMatchArray) => {\n  const noext = qmarksTestNoExt([$0])\n  return !ext ? noext : (f: string) => noext(f) && f.endsWith(ext)\n}\nconst qmarksTestNoExt = ([$0]: RegExpMatchArray) => {\n  const len = $0.length\n  return (f: string) => f.length === len && !f.startsWith('.')\n}\nconst qmarksTestNoExtDot = ([$0]: RegExpMatchArray) => {\n  const len = $0.length\n  return (f: string) => f.length === len && f !== '.' && f !== '..'\n}\n\n/* c8 ignore start */\nconst defaultPlatform: Platform = (\n  typeof process === 'object' && process\n    ? (typeof process.env === 'object' &&\n        process.env &&\n        process.env.__MINIMATCH_TESTING_PLATFORM__) ||\n      process.platform\n    : 'posix'\n) as Platform\ntype Sep = '\\\\' | '/'\nconst path: { [k: string]: { sep: Sep } } = {\n  win32: { sep: '\\\\' },\n  posix: { sep: '/' },\n}\n/* c8 ignore stop */\n\nexport const sep = defaultPlatform === 'win32' ? path.win32.sep : path.posix.sep\nminimatch.sep = sep\n\nexport const GLOBSTAR = Symbol('globstar **')\nminimatch.GLOBSTAR = GLOBSTAR\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]'\n\n// * => any number of characters\nconst star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\/|^)\\\\.).)*?'\n\nexport const filter =\n  (pattern: string, options: MinimatchOptions = {}) =>\n  (p: string) =>\n    minimatch(p, pattern, options)\nminimatch.filter = filter\n\nconst ext = (a: MinimatchOptions, b: MinimatchOptions = {}) =>\n  Object.assign({}, a, b)\n\nexport const defaults = (def: MinimatchOptions): typeof minimatch => {\n  if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n    return minimatch\n  }\n\n  const orig = minimatch\n\n  const m = (p: string, pattern: string, options: MinimatchOptions = {}) =>\n    orig(p, pattern, ext(def, options))\n\n  return Object.assign(m, {\n    Minimatch: class Minimatch extends orig.Minimatch {\n      constructor(pattern: string, options: MinimatchOptions = {}) {\n        super(pattern, ext(def, options))\n      }\n      static defaults(options: MinimatchOptions) {\n        return orig.defaults(ext(def, options)).Minimatch\n      }\n    },\n\n    AST: class AST extends orig.AST {\n      /* c8 ignore start */\n      constructor(\n        type: ExtglobType | null,\n        parent?: AST,\n        options: MinimatchOptions = {}\n      ) {\n        super(type, parent, ext(def, options))\n      }\n      /* c8 ignore stop */\n\n      static fromGlob(pattern: string, options: MinimatchOptions = {}) {\n        return orig.AST.fromGlob(pattern, ext(def, options))\n      }\n    },\n\n    unescape: (\n      s: string,\n      options: Pick<MinimatchOptions, 'windowsPathsNoEscape'> = {}\n    ) => orig.unescape(s, ext(def, options)),\n\n    escape: (\n      s: string,\n      options: Pick<MinimatchOptions, 'windowsPathsNoEscape'> = {}\n    ) => orig.escape(s, ext(def, options)),\n\n    filter: (pattern: string, options: MinimatchOptions = {}) =>\n      orig.filter(pattern, ext(def, options)),\n\n    defaults: (options: MinimatchOptions) => orig.defaults(ext(def, options)),\n\n    makeRe: (pattern: string, options: MinimatchOptions = {}) =>\n      orig.makeRe(pattern, ext(def, options)),\n\n    braceExpand: (pattern: string, options: MinimatchOptions = {}) =>\n      orig.braceExpand(pattern, ext(def, options)),\n\n    match: (list: string[], pattern: string, options: MinimatchOptions = {}) =>\n      orig.match(list, pattern, ext(def, options)),\n\n    sep: orig.sep,\n    GLOBSTAR: GLOBSTAR as typeof GLOBSTAR,\n  })\n}\nminimatch.defaults = defaults\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nexport const braceExpand = (\n  pattern: string,\n  options: MinimatchOptions = {}\n) => {\n  assertValidPattern(pattern)\n\n  // Thanks to Yeting Li <https://github.com/yetingli> for\n  // improving this regexp to avoid a ReDOS vulnerability.\n  if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\nminimatch.braceExpand = braceExpand\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\n\nexport const makeRe = (pattern: string, options: MinimatchOptions = {}) =>\n  new Minimatch(pattern, options).makeRe()\nminimatch.makeRe = makeRe\n\nexport const match = (\n  list: string[],\n  pattern: string,\n  options: MinimatchOptions = {}\n) => {\n  const mm = new Minimatch(pattern, options)\n  list = list.filter(f => mm.match(f))\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\nminimatch.match = match\n\n// replace stuff like \\* with *\nconst globMagic = /[?*]|[+@!]\\(.*?\\)|\\[|\\]/\nconst regExpEscape = (s: string) =>\n  s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n\nexport type MMRegExp = RegExp & {\n  _src?: string\n  _glob?: string\n}\n\nexport type ParseReturnFiltered = string | MMRegExp | typeof GLOBSTAR\nexport type ParseReturn = ParseReturnFiltered | false\n\nexport class Minimatch {\n  options: MinimatchOptions\n  set: ParseReturnFiltered[][]\n  pattern: string\n\n  windowsPathsNoEscape: boolean\n  nonegate: boolean\n  negate: boolean\n  comment: boolean\n  empty: boolean\n  preserveMultipleSlashes: boolean\n  partial: boolean\n  globSet: string[]\n  globParts: string[][]\n  nocase: boolean\n\n  isWindows: boolean\n  platform: Platform\n  windowsNoMagicRoot: boolean\n\n  regexp: false | null | MMRegExp\n  constructor(pattern: string, options: MinimatchOptions = {}) {\n    assertValidPattern(pattern)\n\n    options = options || {}\n    this.options = options\n    this.pattern = pattern\n    this.platform = options.platform || defaultPlatform\n    this.isWindows = this.platform === 'win32'\n    this.windowsPathsNoEscape =\n      !!options.windowsPathsNoEscape || options.allowWindowsEscape === false\n    if (this.windowsPathsNoEscape) {\n      this.pattern = this.pattern.replace(/\\\\/g, '/')\n    }\n    this.preserveMultipleSlashes = !!options.preserveMultipleSlashes\n    this.regexp = null\n    this.negate = false\n    this.nonegate = !!options.nonegate\n    this.comment = false\n    this.empty = false\n    this.partial = !!options.partial\n    this.nocase = !!this.options.nocase\n    this.windowsNoMagicRoot =\n      options.windowsNoMagicRoot !== undefined\n        ? options.windowsNoMagicRoot\n        : !!(this.isWindows && this.nocase)\n\n    this.globSet = []\n    this.globParts = []\n    this.set = []\n\n    // make the set of regexps etc.\n    this.make()\n  }\n\n  hasMagic(): boolean {\n    if (this.options.magicalBraces && this.set.length > 1) {\n      return true\n    }\n    for (const pattern of this.set) {\n      for (const part of pattern) {\n        if (typeof part !== 'string') return true\n      }\n    }\n    return false\n  }\n\n  debug(..._: any[]) {}\n\n  make() {\n    const pattern = this.pattern\n    const options = this.options\n\n    // empty patterns and comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n      this.comment = true\n      return\n    }\n\n    if (!pattern) {\n      this.empty = true\n      return\n    }\n\n    // step 1: figure out negation, etc.\n    this.parseNegate()\n\n    // step 2: expand braces\n    this.globSet = [...new Set(this.braceExpand())]\n\n    if (options.debug) {\n      this.debug = (...args: any[]) => console.error(...args)\n    }\n\n    this.debug(this.pattern, this.globSet)\n\n    // step 3: now we have a set, so turn each one into a series of\n    // path-portion matching patterns.\n    // These will be regexps, except in the case of \"**\", which is\n    // set to the GLOBSTAR object for globstar behavior,\n    // and will not contain any / characters\n    //\n    // First, we preprocess to make the glob pattern sets a bit simpler\n    // and deduped.  There are some perf-killing patterns that can cause\n    // problems with a glob walk, but we can simplify them down a bit.\n    const rawGlobParts = this.globSet.map(s => this.slashSplit(s))\n    this.globParts = this.preprocess(rawGlobParts)\n    this.debug(this.pattern, this.globParts)\n\n    // glob --> regexps\n    let set = this.globParts.map((s, _, __) => {\n      if (this.isWindows && this.windowsNoMagicRoot) {\n        // check if it's a drive or unc path.\n        const isUNC =\n          s[0] === '' &&\n          s[1] === '' &&\n          (s[2] === '?' || !globMagic.test(s[2])) &&\n          !globMagic.test(s[3])\n        const isDrive = /^[a-z]:/i.test(s[0])\n        if (isUNC) {\n          return [...s.slice(0, 4), ...s.slice(4).map(ss => this.parse(ss))]\n        } else if (isDrive) {\n          return [s[0], ...s.slice(1).map(ss => this.parse(ss))]\n        }\n      }\n      return s.map(ss => this.parse(ss))\n    })\n\n    this.debug(this.pattern, set)\n\n    // filter out everything that didn't compile properly.\n    this.set = set.filter(\n      s => s.indexOf(false) === -1\n    ) as ParseReturnFiltered[][]\n\n    // do not treat the ? in UNC paths as magic\n    if (this.isWindows) {\n      for (let i = 0; i < this.set.length; i++) {\n        const p = this.set[i]\n        if (\n          p[0] === '' &&\n          p[1] === '' &&\n          this.globParts[i][2] === '?' &&\n          typeof p[3] === 'string' &&\n          /^[a-z]:$/i.test(p[3])\n        ) {\n          p[2] = '?'\n        }\n      }\n    }\n\n    this.debug(this.pattern, this.set)\n  }\n\n  // various transforms to equivalent pattern sets that are\n  // faster to process in a filesystem walk.  The goal is to\n  // eliminate what we can, and push all ** patterns as far\n  // to the right as possible, even if it increases the number\n  // of patterns that we have to process.\n  preprocess(globParts: string[][]) {\n    // if we're not in globstar mode, then turn all ** into *\n    if (this.options.noglobstar) {\n      for (let i = 0; i < globParts.length; i++) {\n        for (let j = 0; j < globParts[i].length; j++) {\n          if (globParts[i][j] === '**') {\n            globParts[i][j] = '*'\n          }\n        }\n      }\n    }\n\n    const { optimizationLevel = 1 } = this.options\n\n    if (optimizationLevel >= 2) {\n      // aggressive optimization for the purpose of fs walking\n      globParts = this.firstPhasePreProcess(globParts)\n      globParts = this.secondPhasePreProcess(globParts)\n    } else if (optimizationLevel >= 1) {\n      // just basic optimizations to remove some .. parts\n      globParts = this.levelOneOptimize(globParts)\n    } else {\n      globParts = this.adjascentGlobstarOptimize(globParts)\n    }\n\n    return globParts\n  }\n\n  // just get rid of adjascent ** portions\n  adjascentGlobstarOptimize(globParts: string[][]) {\n    return globParts.map(parts => {\n      let gs: number = -1\n      while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n        let i = gs\n        while (parts[i + 1] === '**') {\n          i++\n        }\n        if (i !== gs) {\n          parts.splice(gs, i - gs)\n        }\n      }\n      return parts\n    })\n  }\n\n  // get rid of adjascent ** and resolve .. portions\n  levelOneOptimize(globParts: string[][]) {\n    return globParts.map(parts => {\n      parts = parts.reduce((set: string[], part) => {\n        const prev = set[set.length - 1]\n        if (part === '**' && prev === '**') {\n          return set\n        }\n        if (part === '..') {\n          if (prev && prev !== '..' && prev !== '.' && prev !== '**') {\n            set.pop()\n            return set\n          }\n        }\n        set.push(part)\n        return set\n      }, [])\n      return parts.length === 0 ? [''] : parts\n    })\n  }\n\n  levelTwoFileOptimize(parts: string | string[]) {\n    if (!Array.isArray(parts)) {\n      parts = this.slashSplit(parts)\n    }\n    let didSomething: boolean = false\n    do {\n      didSomething = false\n      // <pre>/<e>/<rest> -> <pre>/<rest>\n      if (!this.preserveMultipleSlashes) {\n        for (let i = 1; i < parts.length - 1; i++) {\n          const p = parts[i]\n          // don't squeeze out UNC patterns\n          if (i === 1 && p === '' && parts[0] === '') continue\n          if (p === '.' || p === '') {\n            didSomething = true\n            parts.splice(i, 1)\n            i--\n          }\n        }\n        if (\n          parts[0] === '.' &&\n          parts.length === 2 &&\n          (parts[1] === '.' || parts[1] === '')\n        ) {\n          didSomething = true\n          parts.pop()\n        }\n      }\n\n      // <pre>/<p>/../<rest> -> <pre>/<rest>\n      let dd: number = 0\n      while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n        const p = parts[dd - 1]\n        if (p && p !== '.' && p !== '..' && p !== '**') {\n          didSomething = true\n          parts.splice(dd - 1, 2)\n          dd -= 2\n        }\n      }\n    } while (didSomething)\n    return parts.length === 0 ? [''] : parts\n  }\n\n  // First phase: single-pattern processing\n  // <pre> is 1 or more portions\n  // <rest> is 1 or more portions\n  // <p> is any portion other than ., .., '', or **\n  // <e> is . or ''\n  //\n  // **/.. is *brutal* for filesystem walking performance, because\n  // it effectively resets the recursive walk each time it occurs,\n  // and ** cannot be reduced out by a .. pattern part like a regexp\n  // or most strings (other than .., ., and '') can be.\n  //\n  // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n  // <pre>/<e>/<rest> -> <pre>/<rest>\n  // <pre>/<p>/../<rest> -> <pre>/<rest>\n  // **/**/<rest> -> **/<rest>\n  //\n  // **/*/<rest> -> */**/<rest> <== not valid because ** doesn't follow\n  // this WOULD be allowed if ** did follow symlinks, or * didn't\n  firstPhasePreProcess(globParts: string[][]) {\n    let didSomething = false\n    do {\n      didSomething = false\n      // <pre>/**/../<p>/<p>/<rest> -> {<pre>/../<p>/<p>/<rest>,<pre>/**/<p>/<p>/<rest>}\n      for (let parts of globParts) {\n        let gs: number = -1\n        while (-1 !== (gs = parts.indexOf('**', gs + 1))) {\n          let gss: number = gs\n          while (parts[gss + 1] === '**') {\n            // <pre>/**/**/<rest> -> <pre>/**/<rest>\n            gss++\n          }\n          // eg, if gs is 2 and gss is 4, that means we have 3 **\n          // parts, and can remove 2 of them.\n          if (gss > gs) {\n            parts.splice(gs + 1, gss - gs)\n          }\n\n          let next = parts[gs + 1]\n          const p = parts[gs + 2]\n          const p2 = parts[gs + 3]\n          if (next !== '..') continue\n          if (\n            !p ||\n            p === '.' ||\n            p === '..' ||\n            !p2 ||\n            p2 === '.' ||\n            p2 === '..'\n          ) {\n            continue\n          }\n          didSomething = true\n          // edit parts in place, and push the new one\n          parts.splice(gs, 1)\n          const other = parts.slice(0)\n          other[gs] = '**'\n          globParts.push(other)\n          gs--\n        }\n\n        // <pre>/<e>/<rest> -> <pre>/<rest>\n        if (!this.preserveMultipleSlashes) {\n          for (let i = 1; i < parts.length - 1; i++) {\n            const p = parts[i]\n            // don't squeeze out UNC patterns\n            if (i === 1 && p === '' && parts[0] === '') continue\n            if (p === '.' || p === '') {\n              didSomething = true\n              parts.splice(i, 1)\n              i--\n            }\n          }\n          if (\n            parts[0] === '.' &&\n            parts.length === 2 &&\n            (parts[1] === '.' || parts[1] === '')\n          ) {\n            didSomething = true\n            parts.pop()\n          }\n        }\n\n        // <pre>/<p>/../<rest> -> <pre>/<rest>\n        let dd: number = 0\n        while (-1 !== (dd = parts.indexOf('..', dd + 1))) {\n          const p = parts[dd - 1]\n          if (p && p !== '.' && p !== '..' && p !== '**') {\n            didSomething = true\n            const needDot = dd === 1 && parts[dd + 1] === '**'\n            const splin = needDot ? ['.'] : []\n            parts.splice(dd - 1, 2, ...splin)\n            if (parts.length === 0) parts.push('')\n            dd -= 2\n          }\n        }\n      }\n    } while (didSomething)\n\n    return globParts\n  }\n\n  // second phase: multi-pattern dedupes\n  // {<pre>/*/<rest>,<pre>/<p>/<rest>} -> <pre>/*/<rest>\n  // {<pre>/<rest>,<pre>/<rest>} -> <pre>/<rest>\n  // {<pre>/**/<rest>,<pre>/<rest>} -> <pre>/**/<rest>\n  //\n  // {<pre>/**/<rest>,<pre>/**/<p>/<rest>} -> <pre>/**/<rest>\n  // ^-- not valid because ** doens't follow symlinks\n  secondPhasePreProcess(globParts: string[][]): string[][] {\n    for (let i = 0; i < globParts.length - 1; i++) {\n      for (let j = i + 1; j < globParts.length; j++) {\n        const matched = this.partsMatch(\n          globParts[i],\n          globParts[j],\n          !this.preserveMultipleSlashes\n        )\n        if (!matched) continue\n        globParts[i] = matched\n        globParts[j] = []\n      }\n    }\n    return globParts.filter(gs => gs.length)\n  }\n\n  partsMatch(\n    a: string[],\n    b: string[],\n    emptyGSMatch: boolean = false\n  ): false | string[] {\n    let ai = 0\n    let bi = 0\n    let result: string[] = []\n    let which: string = ''\n    while (ai < a.length && bi < b.length) {\n      if (a[ai] === b[bi]) {\n        result.push(which === 'b' ? b[bi] : a[ai])\n        ai++\n        bi++\n      } else if (emptyGSMatch && a[ai] === '**' && b[bi] === a[ai + 1]) {\n        result.push(a[ai])\n        ai++\n      } else if (emptyGSMatch && b[bi] === '**' && a[ai] === b[bi + 1]) {\n        result.push(b[bi])\n        bi++\n      } else if (\n        a[ai] === '*' &&\n        b[bi] &&\n        (this.options.dot || !b[bi].startsWith('.')) &&\n        b[bi] !== '**'\n      ) {\n        if (which === 'b') return false\n        which = 'a'\n        result.push(a[ai])\n        ai++\n        bi++\n      } else if (\n        b[bi] === '*' &&\n        a[ai] &&\n        (this.options.dot || !a[ai].startsWith('.')) &&\n        a[ai] !== '**'\n      ) {\n        if (which === 'a') return false\n        which = 'b'\n        result.push(b[bi])\n        ai++\n        bi++\n      } else {\n        return false\n      }\n    }\n    // if we fall out of the loop, it means they two are identical\n    // as long as their lengths match\n    return a.length === b.length && result\n  }\n\n  parseNegate() {\n    if (this.nonegate) return\n\n    const pattern = this.pattern\n    let negate = false\n    let negateOffset = 0\n\n    for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n      negate = !negate\n      negateOffset++\n    }\n\n    if (negateOffset) this.pattern = pattern.slice(negateOffset)\n    this.negate = negate\n  }\n\n  // set partial to true to test if, for example,\n  // \"/a/b\" matches the start of \"/*/b/*/d\"\n  // Partial means, if you run out of file before you run\n  // out of pattern, then that's fine, as long as all\n  // the parts match.\n  matchOne(file: string[], pattern: ParseReturn[], partial: boolean = false) {\n    const options = this.options\n\n    // UNC paths like //?/X:/... can match X:/... and vice versa\n    // Drive letters in absolute drive or unc paths are always compared\n    // case-insensitively.\n    if (this.isWindows) {\n      const fileDrive = typeof file[0] === 'string' && /^[a-z]:$/i.test(file[0])\n      const fileUNC =\n        !fileDrive &&\n        file[0] === '' &&\n        file[1] === '' &&\n        file[2] === '?' &&\n        /^[a-z]:$/i.test(file[3])\n\n      const patternDrive =\n        typeof pattern[0] === 'string' && /^[a-z]:$/i.test(pattern[0])\n      const patternUNC =\n        !patternDrive &&\n        pattern[0] === '' &&\n        pattern[1] === '' &&\n        pattern[2] === '?' &&\n        typeof pattern[3] === 'string' &&\n        /^[a-z]:$/i.test(pattern[3])\n\n      const fdi = fileUNC ? 3 : fileDrive ? 0 : undefined\n      const pdi = patternUNC ? 3 : patternDrive ? 0 : undefined\n      if (typeof fdi === 'number' && typeof pdi === 'number') {\n        const [fd, pd]: [string, string] = [file[fdi], pattern[pdi] as string]\n        if (fd.toLowerCase() === pd.toLowerCase()) {\n          pattern[pdi] = fd\n          if (pdi > fdi) {\n            pattern = pattern.slice( pdi)\n          } else if (fdi > pdi) {\n            file = file.slice(fdi)\n          }\n        }\n      }\n    }\n\n    // resolve and reduce . and .. portions in the file as well.\n    // dont' need to do the second phase, because it's only one string[]\n    const { optimizationLevel = 1 } = this.options\n    if (optimizationLevel >= 2) {\n      file = this.levelTwoFileOptimize(file)\n    }\n\n    this.debug('matchOne', this, { file, pattern })\n    this.debug('matchOne', file.length, pattern.length)\n\n    for (\n      var fi = 0, pi = 0, fl = file.length, pl = pattern.length;\n      fi < fl && pi < pl;\n      fi++, pi++\n    ) {\n      this.debug('matchOne loop')\n      var p = pattern[pi]\n      var f = file[fi]\n\n      this.debug(pattern, p, f)\n\n      // should be impossible.\n      // some invalid regexp stuff in the set.\n      /* c8 ignore start */\n      if (p === false) {\n        return false\n      }\n      /* c8 ignore stop */\n\n      if (p === GLOBSTAR) {\n        this.debug('GLOBSTAR', [pattern, p, f])\n\n        // \"**\"\n        // a/**/b/**/c would match the following:\n        // a/b/x/y/z/c\n        // a/x/y/z/b/c\n        // a/b/x/b/x/c\n        // a/b/c\n        // To do this, take the rest of the pattern after\n        // the **, and see if it would match the file remainder.\n        // If so, return success.\n        // If not, the ** \"swallows\" a segment, and try again.\n        // This is recursively awful.\n        //\n        // a/**/b/**/c matching a/b/x/y/z/c\n        // - a matches a\n        // - doublestar\n        //   - matchOne(b/x/y/z/c, b/**/c)\n        //     - b matches b\n        //     - doublestar\n        //       - matchOne(x/y/z/c, c) -> no\n        //       - matchOne(y/z/c, c) -> no\n        //       - matchOne(z/c, c) -> no\n        //       - matchOne(c, c) yes, hit\n        var fr = fi\n        var pr = pi + 1\n        if (pr === pl) {\n          this.debug('** at the end')\n          // a ** at the end will just swallow the rest.\n          // We have found a match.\n          // however, it will not swallow /.x, unless\n          // options.dot is set.\n          // . and .. are *never* matched by **, for explosively\n          // exponential reasons.\n          for (; fi < fl; fi++) {\n            if (\n              file[fi] === '.' ||\n              file[fi] === '..' ||\n              (!options.dot && file[fi].charAt(0) === '.')\n            )\n              return false\n          }\n          return true\n        }\n\n        // ok, let's see if we can swallow whatever we can.\n        while (fr < fl) {\n          var swallowee = file[fr]\n\n          this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n          // XXX remove this slice.  Just pass the start index.\n          if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n            this.debug('globstar found match!', fr, fl, swallowee)\n            // found a match.\n            return true\n          } else {\n            // can't swallow \".\" or \"..\" ever.\n            // can only swallow \".foo\" when explicitly asked.\n            if (\n              swallowee === '.' ||\n              swallowee === '..' ||\n              (!options.dot && swallowee.charAt(0) === '.')\n            ) {\n              this.debug('dot detected!', file, fr, pattern, pr)\n              break\n            }\n\n            // ** swallows a segment, and continue.\n            this.debug('globstar swallow a segment, and continue')\n            fr++\n          }\n        }\n\n        // no match was found.\n        // However, in partial mode, we can't say this is necessarily over.\n        /* c8 ignore start */\n        if (partial) {\n          // ran out of file\n          this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n          if (fr === fl) {\n            return true\n          }\n        }\n        /* c8 ignore stop */\n        return false\n      }\n\n      // something other than **\n      // non-magic patterns just have to match exactly\n      // patterns with magic have been turned into regexps.\n      let hit: boolean\n      if (typeof p === 'string') {\n        hit = f === p\n        this.debug('string match', p, f, hit)\n      } else {\n        hit = p.test(f)\n        this.debug('pattern match', p, f, hit)\n      }\n\n      if (!hit) return false\n    }\n\n    // Note: ending in / means that we'll get a final \"\"\n    // at the end of the pattern.  This can only match a\n    // corresponding \"\" at the end of the file.\n    // If the file ends in /, then it can only match a\n    // a pattern that ends in /, unless the pattern just\n    // doesn't have any more for it. But, a/b/ should *not*\n    // match \"a/b/*\", even though \"\" matches against the\n    // [^/]*? pattern, except in partial mode, where it might\n    // simply not be reached yet.\n    // However, a/b/ should still satisfy a/*\n\n    // now either we fell off the end of the pattern, or we're done.\n    if (fi === fl && pi === pl) {\n      // ran out of pattern and filename at the same time.\n      // an exact hit!\n      return true\n    } else if (fi === fl) {\n      // ran out of file, but still had pattern left.\n      // this is ok if we're doing the match as part of\n      // a glob fs traversal.\n      return partial\n    } else if (pi === pl) {\n      // ran out of pattern, still have file left.\n      // this is only acceptable if we're on the very last\n      // empty segment of a file with a trailing slash.\n      // a/* should match a/b/\n      return fi === fl - 1 && file[fi] === ''\n\n      /* c8 ignore start */\n    } else {\n      // should be unreachable.\n      throw new Error('wtf?')\n    }\n    /* c8 ignore stop */\n  }\n\n  braceExpand() {\n    return braceExpand(this.pattern, this.options)\n  }\n\n  parse(pattern: string): ParseReturn {\n    assertValidPattern(pattern)\n\n    const options = this.options\n\n    // shortcuts\n    if (pattern === '**') return GLOBSTAR\n    if (pattern === '') return ''\n\n    // far and away, the most common glob pattern parts are\n    // *, *.*, and *.<ext>  Add a fast check method for those.\n    let m: RegExpMatchArray | null\n    let fastTest: null | ((f: string) => boolean) = null\n    if ((m = pattern.match(starRE))) {\n      fastTest = options.dot ? starTestDot : starTest\n    } else if ((m = pattern.match(starDotExtRE))) {\n      fastTest = (\n        options.nocase\n          ? options.dot\n            ? starDotExtTestNocaseDot\n            : starDotExtTestNocase\n          : options.dot\n          ? starDotExtTestDot\n          : starDotExtTest\n      )(m[1])\n    } else if ((m = pattern.match(qmarksRE))) {\n      fastTest = (\n        options.nocase\n          ? options.dot\n            ? qmarksTestNocaseDot\n            : qmarksTestNocase\n          : options.dot\n          ? qmarksTestDot\n          : qmarksTest\n      )(m)\n    } else if ((m = pattern.match(starDotStarRE))) {\n      fastTest = options.dot ? starDotStarTestDot : starDotStarTest\n    } else if ((m = pattern.match(dotStarRE))) {\n      fastTest = dotStarTest\n    }\n\n    const re = AST.fromGlob(pattern, this.options).toMMPattern()\n    return fastTest ? Object.assign(re, { test: fastTest }) : re\n  }\n\n  makeRe() {\n    if (this.regexp || this.regexp === false) return this.regexp\n\n    // at this point, this.set is a 2d array of partial\n    // pattern strings, or \"**\".\n    //\n    // It's better to use .match().  This function shouldn't\n    // be used, really, but it's pretty convenient sometimes,\n    // when you just want to work with a regex.\n    const set = this.set\n\n    if (!set.length) {\n      this.regexp = false\n      return this.regexp\n    }\n    const options = this.options\n\n    const twoStar = options.noglobstar\n      ? star\n      : options.dot\n      ? twoStarDot\n      : twoStarNoDot\n    const flags = new Set(options.nocase ? ['i'] : [])\n\n    // regexpify non-globstar patterns\n    // if ** is only item, then we just do one twoStar\n    // if ** is first, and there are more, prepend (\\/|twoStar\\/)? to next\n    // if ** is last, append (\\/twoStar|) to previous\n    // if ** is in the middle, append (\\/|\\/twoStar\\/) to previous\n    // then filter out GLOBSTAR symbols\n    let re = set\n      .map(pattern => {\n        const pp: (string | typeof GLOBSTAR)[] = pattern.map(p => {\n          if (p instanceof RegExp) {\n            for (const f of p.flags.split('')) flags.add(f)\n          }\n          return typeof p === 'string'\n            ? regExpEscape(p)\n            : p === GLOBSTAR\n            ? GLOBSTAR\n            : p._src\n        }) as (string | typeof GLOBSTAR)[]\n        pp.forEach((p, i) => {\n          const next = pp[i + 1]\n          const prev = pp[i - 1]\n          if (p !== GLOBSTAR || prev === GLOBSTAR) {\n            return\n          }\n          if (prev === undefined) {\n            if (next !== undefined && next !== GLOBSTAR) {\n              pp[i + 1] = '(?:\\\\/|' + twoStar + '\\\\/)?' + next\n            } else {\n              pp[i] = twoStar\n            }\n          } else if (next === undefined) {\n            pp[i - 1] = prev + '(?:\\\\/|' + twoStar + ')?'\n          } else if (next !== GLOBSTAR) {\n            pp[i - 1] = prev + '(?:\\\\/|\\\\/' + twoStar + '\\\\/)' + next\n            pp[i + 1] = GLOBSTAR\n          }\n        })\n        return pp.filter(p => p !== GLOBSTAR).join('/')\n      })\n      .join('|')\n\n    // need to wrap in parens if we had more than one thing with |,\n    // otherwise only the first will be anchored to ^ and the last to $\n    const [open, close] = set.length > 1 ? ['(?:', ')'] : ['', '']\n    // must match entire pattern\n    // ending in a * or ** will make it less strict.\n    re = '^' + open + re + close + '$'\n\n    // can match anything, as long as it's not this.\n    if (this.negate) re = '^(?!' + re + ').+$'\n\n    try {\n      this.regexp = new RegExp(re, [...flags].join(''))\n      /* c8 ignore start */\n    } catch (ex) {\n      // should be impossible\n      this.regexp = false\n    }\n    /* c8 ignore stop */\n    return this.regexp\n  }\n\n  slashSplit(p: string) {\n    // if p starts with // on windows, we preserve that\n    // so that UNC paths aren't broken.  Otherwise, any number of\n    // / characters are coalesced into one, unless\n    // preserveMultipleSlashes is set to true.\n    if (this.preserveMultipleSlashes) {\n      return p.split('/')\n    } else if (this.isWindows && /^\\/\\/[^\\/]+/.test(p)) {\n      // add an extra '' for the one we lose\n      return ['', ...p.split(/\\/+/)]\n    } else {\n      return p.split(/\\/+/)\n    }\n  }\n\n  match(f: string, partial = this.partial) {\n    this.debug('match', f, this.pattern)\n    // short-circuit in the case of busted things.\n    // comments, etc.\n    if (this.comment) {\n      return false\n    }\n    if (this.empty) {\n      return f === ''\n    }\n\n    if (f === '/' && partial) {\n      return true\n    }\n\n    const options = this.options\n\n    // windows: need to use /, not \\\n    if (this.isWindows) {\n      f = f.split('\\\\').join('/')\n    }\n\n    // treat the test path as a set of pathparts.\n    const ff = this.slashSplit(f)\n    this.debug(this.pattern, 'split', ff)\n\n    // just ONE of the pattern sets in this.set needs to match\n    // in order for it to be valid.  If negating, then just one\n    // match means that we have failed.\n    // Either way, return on the first hit.\n\n    const set = this.set\n    this.debug(this.pattern, 'set', set)\n\n    // Find the basename of the path by looking for the last non-empty segment\n    let filename: string = ff[ff.length - 1]\n    if (!filename) {\n      for (let i = ff.length - 2; !filename && i >= 0; i--) {\n        filename = ff[i]\n      }\n    }\n\n    for (let i = 0; i < set.length; i++) {\n      const pattern = set[i]\n      let file = ff\n      if (options.matchBase && pattern.length === 1) {\n        file = [filename]\n      }\n      const hit = this.matchOne(file, pattern, partial)\n      if (hit) {\n        if (options.flipNegate) {\n          return true\n        }\n        return !this.negate\n      }\n    }\n\n    // didn't get any hits.  this is success if it's a negative\n    // pattern, failure otherwise.\n    if (options.flipNegate) {\n      return false\n    }\n    return this.negate\n  }\n\n  static defaults(def: MinimatchOptions) {\n    return minimatch.defaults(def).Minimatch\n  }\n}\n/* c8 ignore start */\nexport { AST } from './ast.js'\nexport { escape } from './escape.js'\nexport { unescape } from './unescape.js'\n/* c8 ignore stop */\nminimatch.AST = AST\nminimatch.Minimatch = Minimatch\nminimatch.escape = escape\nminimatch.unescape = unescape\n", "const MAX_PATTERN_LENGTH = 1024 * 64\nexport const assertValidPattern: (pattern: any) => void = (\n  pattern: any\n): asserts pattern is string => {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('invalid pattern')\n  }\n\n  if (pattern.length > MAX_PATTERN_LENGTH) {\n    throw new TypeError('pattern is too long')\n  }\n}\n", "// translate the various posix character classes into unicode properties\n// this works across all unicode locales\n\n// { <posix class>: [<translation>, /u flag required, negated]\nconst posixClasses: { [k: string]: [e: string, u: boolean, n?: boolean] } = {\n  '[:alnum:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}', true],\n  '[:alpha:]': ['\\\\p{L}\\\\p{Nl}', true],\n  '[:ascii:]': ['\\\\x' + '00-\\\\x' + '7f', false],\n  '[:blank:]': ['\\\\p{Zs}\\\\t', true],\n  '[:cntrl:]': ['\\\\p{Cc}', true],\n  '[:digit:]': ['\\\\p{Nd}', true],\n  '[:graph:]': ['\\\\p{Z}\\\\p{C}', true, true],\n  '[:lower:]': ['\\\\p{Ll}', true],\n  '[:print:]': ['\\\\p{C}', true],\n  '[:punct:]': ['\\\\p{P}', true],\n  '[:space:]': ['\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f', true],\n  '[:upper:]': ['\\\\p{Lu}', true],\n  '[:word:]': ['\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}', true],\n  '[:xdigit:]': ['A-Fa-f0-9', false],\n}\n\n// only need to escape a few things inside of brace expressions\n// escapes: [ \\ ] -\nconst braceEscape = (s: string) => s.replace(/[[\\]\\\\-]/g, '\\\\$&')\n// escape all regexp magic characters\nconst regexpEscape = (s: string) =>\n  s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n\n// everything has already been escaped, we just have to join\nconst rangesToString = (ranges: string[]): string => ranges.join('')\n\nexport type ParseClassResult = [\n  src: string,\n  uFlag: boolean,\n  consumed: number,\n  hasMagic: boolean\n]\n\n// takes a glob string at a posix brace expression, and returns\n// an equivalent regular expression source, and boolean indicating\n// whether the /u flag needs to be applied, and the number of chars\n// consumed to parse the character class.\n// This also removes out of order ranges, and returns ($.) if the\n// entire class just no good.\nexport const parseClass = (\n  glob: string,\n  position: number\n): ParseClassResult => {\n  const pos = position\n  /* c8 ignore start */\n  if (glob.charAt(pos) !== '[') {\n    throw new Error('not in a brace expression')\n  }\n  /* c8 ignore stop */\n  const ranges: string[] = []\n  const negs: string[] = []\n\n  let i = pos + 1\n  let sawStart = false\n  let uflag = false\n  let escaping = false\n  let negate = false\n  let endPos = pos\n  let rangeStart = ''\n  WHILE: while (i < glob.length) {\n    const c = glob.charAt(i)\n    if ((c === '!' || c === '^') && i === pos + 1) {\n      negate = true\n      i++\n      continue\n    }\n\n    if (c === ']' && sawStart && !escaping) {\n      endPos = i + 1\n      break\n    }\n\n    sawStart = true\n    if (c === '\\\\') {\n      if (!escaping) {\n        escaping = true\n        i++\n        continue\n      }\n      // escaped \\ char, fall through and treat like normal char\n    }\n    if (c === '[' && !escaping) {\n      // either a posix class, a collation equivalent, or just a [\n      for (const [cls, [unip, u, neg]] of Object.entries(posixClasses)) {\n        if (glob.startsWith(cls, i)) {\n          // invalid, [a-[] is fine, but not [a-[:alpha]]\n          if (rangeStart) {\n            return ['$.', false, glob.length - pos, true]\n          }\n          i += cls.length\n          if (neg) negs.push(unip)\n          else ranges.push(unip)\n          uflag = uflag || u\n          continue WHILE\n        }\n      }\n    }\n\n    // now it's just a normal character, effectively\n    escaping = false\n    if (rangeStart) {\n      // throw this range away if it's not valid, but others\n      // can still match.\n      if (c > rangeStart) {\n        ranges.push(braceEscape(rangeStart) + '-' + braceEscape(c))\n      } else if (c === rangeStart) {\n        ranges.push(braceEscape(c))\n      }\n      rangeStart = ''\n      i++\n      continue\n    }\n\n    // now might be the start of a range.\n    // can be either c-d or c-] or c<more...>] or c] at this point\n    if (glob.startsWith('-]', i + 1)) {\n      ranges.push(braceEscape(c + '-'))\n      i += 2\n      continue\n    }\n    if (glob.startsWith('-', i + 1)) {\n      rangeStart = c\n      i += 2\n      continue\n    }\n\n    // not the start of a range, just a single character\n    ranges.push(braceEscape(c))\n    i++\n  }\n\n  if (endPos < i) {\n    // didn't see the end of the class, not a valid class,\n    // but might still be valid as a literal match.\n    return ['', false, 0, false]\n  }\n\n  // if we got no ranges and no negates, then we have a range that\n  // cannot possibly match anything, and that poisons the whole glob\n  if (!ranges.length && !negs.length) {\n    return ['$.', false, glob.length - pos, true]\n  }\n\n  // if we got one positive range, and it's a single character, then that's\n  // not actually a magic pattern, it's just that one literal character.\n  // we should not treat that as \"magic\", we should just return the literal\n  // character. [_] is a perfectly valid way to escape glob magic chars.\n  if (\n    negs.length === 0 &&\n    ranges.length === 1 &&\n    /^\\\\?.$/.test(ranges[0]) &&\n    !negate\n  ) {\n    const r = ranges[0].length === 2 ? ranges[0].slice(-1) : ranges[0]\n    return [regexpEscape(r), false, endPos - pos, false]\n  }\n\n  const sranges = '[' + (negate ? '^' : '') + rangesToString(ranges) + ']'\n  const snegs = '[' + (negate ? '' : '^') + rangesToString(negs) + ']'\n  const comb =\n    ranges.length && negs.length\n      ? '(' + sranges + '|' + snegs + ')'\n      : ranges.length\n      ? sranges\n      : snegs\n\n  return [comb, uflag, endPos - pos, true]\n}\n", "import { MinimatchOptions } from './index.js'\n/**\n * Un-escape a string that has been escaped with {@link escape}.\n *\n * If the {@link windowsPathsNoEscape} option is used, then square-brace\n * escapes are removed, but not backslash escapes.  For example, it will turn\n * the string `'[*]'` into `*`, but it will not turn `'\\\\*'` into `'*'`,\n * becuase `\\` is a path separator in `windowsPathsNoEscape` mode.\n *\n * When `windowsPathsNoEscape` is not set, then both brace escapes and\n * backslash escapes are removed.\n *\n * Slashes (and backslashes in `windowsPathsNoEscape` mode) cannot be escaped\n * or unescaped.\n */\nexport const unescape = (\n  s: string,\n  {\n    windowsPathsNoEscape = false,\n  }: Pick<MinimatchOptions, 'windowsPathsNoEscape'> = {}\n) => {\n  return windowsPathsNoEscape\n    ? s.replace(/\\[([^\\/\\\\])\\]/g, '$1')\n    : s.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g, '$1$2').replace(/\\\\([^\\/])/g, '$1')\n}\n", "// parse a single path portion\n\nimport { parseClass } from './brace-expressions.js'\nimport { MinimatchOptions, MMRegExp } from './index.js'\nimport { unescape } from './unescape.js'\n\n// classes [] are handled by the parseClass method\n// for positive extglobs, we sub-parse the contents, and combine,\n// with the appropriate regexp close.\n// for negative extglobs, we sub-parse the contents, but then\n// have to include the rest of the pattern, then the parent, etc.,\n// as the thing that cannot be because RegExp negative lookaheads\n// are different from globs.\n//\n// So for example:\n// a@(i|w!(x|y)z|j)b => ^a(i|w((!?(x|y)zb).*)z|j)b$\n//   1   2 3   4 5 6      1   2    3   46      5 6\n//\n// Assembling the extglob requires not just the negated patterns themselves,\n// but also anything following the negative patterns up to the boundary\n// of the current pattern, plus anything following in the parent pattern.\n//\n//\n// So, first, we parse the string into an AST of extglobs, without turning\n// anything into regexps yet.\n//\n// ['a', {@ [['i'], ['w', {!['x', 'y']}, 'z'], ['j']]}, 'b']\n//\n// Then, for all the negative extglobs, we append whatever comes after in\n// each parent as their tail\n//\n// ['a', {@ [['i'], ['w', {!['x', 'y'], 'z', 'b'}, 'z'], ['j']]}, 'b']\n//\n// Lastly, we turn each of these pieces into a regexp, and join\n//\n//                                 v----- .* because there's more following,\n//                                 v    v  otherwise, .+ because it must be\n//                                 v    v  *something* there.\n// ['^a', {@ ['i', 'w(?:(!?(?:x|y).*zb$).*)z', 'j' ]}, 'b$']\n//   copy what follows into here--^^^^^\n// ['^a', '(?:i|w(?:(?!(?:x|y).*zb$).*)z|j)', 'b$']\n// ['^a(?:i|w(?:(?!(?:x|y).*zb$).*)z|j)b$']\n\nexport type ExtglobType = '!' | '?' | '+' | '*' | '@'\nconst types = new Set<ExtglobType>(['!', '?', '+', '*', '@'])\nconst isExtglobType = (c: string): c is ExtglobType =>\n  types.has(c as ExtglobType)\n\n// Patterns that get prepended to bind to the start of either the\n// entire string, or just a single path portion, to prevent dots\n// and/or traversal patterns, when needed.\n// Exts don't need the ^ or / bit, because the root binds that already.\nconst startNoTraversal = '(?!(?:^|/)\\\\.\\\\.?(?:$|/))'\nconst startNoDot = '(?!\\\\.)'\n\n// characters that indicate a start of pattern needs the \"no dots\" bit,\n// because a dot *might* be matched. ( is not in the list, because in\n// the case of a child extglob, it will handle the prevention itself.\nconst addPatternStart = new Set(['[', '.'])\n// cases where traversal is A-OK, no dot prevention needed\nconst justDots = new Set(['..', '.'])\nconst reSpecials = new Set('().*{}+?[]^$\\\\!')\nconst regExpEscape = (s: string) =>\n  s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n\n// any single thing other than /\nconst qmark = '[^/]'\n\n// * => any number of characters\nconst star = qmark + '*?'\n// use + when we need to ensure that *something* matches, because the * is\n// the only thing in the path portion.\nconst starNoEmpty = qmark + '+?'\n\n// remove the \\ chars that we added if we end up doing a nonmagic compare\n// const deslash = (s: string) => s.replace(/\\\\(.)/g, '$1')\n\nexport class AST {\n  type: ExtglobType | null\n  readonly #root: AST\n\n  #hasMagic?: boolean\n  #uflag: boolean = false\n  #parts: (string | AST)[] = []\n  readonly #parent?: AST\n  readonly #parentIndex: number\n  #negs: AST[]\n  #filledNegs: boolean = false\n  #options: MinimatchOptions\n  #toString?: string\n  // set to true if it's an extglob with no children\n  // (which really means one child of '')\n  #emptyExt: boolean = false\n\n  constructor(\n    type: ExtglobType | null,\n    parent?: AST,\n    options: MinimatchOptions = {}\n  ) {\n    this.type = type\n    // extglobs are inherently magical\n    if (type) this.#hasMagic = true\n    this.#parent = parent\n    this.#root = this.#parent ? this.#parent.#root : this\n    this.#options = this.#root === this ? options : this.#root.#options\n    this.#negs = this.#root === this ? [] : this.#root.#negs\n    if (type === '!' && !this.#root.#filledNegs) this.#negs.push(this)\n    this.#parentIndex = this.#parent ? this.#parent.#parts.length : 0\n  }\n\n  get hasMagic(): boolean | undefined {\n    /* c8 ignore start */\n    if (this.#hasMagic !== undefined) return this.#hasMagic\n    /* c8 ignore stop */\n    for (const p of this.#parts) {\n      if (typeof p === 'string') continue\n      if (p.type || p.hasMagic) return (this.#hasMagic = true)\n    }\n    // note: will be undefined until we generate the regexp src and find out\n    return this.#hasMagic\n  }\n\n  // reconstructs the pattern\n  toString(): string {\n    if (this.#toString !== undefined) return this.#toString\n    if (!this.type) {\n      return (this.#toString = this.#parts.map(p => String(p)).join(''))\n    } else {\n      return (this.#toString =\n        this.type + '(' + this.#parts.map(p => String(p)).join('|') + ')')\n    }\n  }\n\n  #fillNegs() {\n    /* c8 ignore start */\n    if (this !== this.#root) throw new Error('should only call on root')\n    if (this.#filledNegs) return this\n    /* c8 ignore stop */\n\n    // call toString() once to fill this out\n    this.toString()\n    this.#filledNegs = true\n    let n: AST | undefined\n    while ((n = this.#negs.pop())) {\n      if (n.type !== '!') continue\n      // walk up the tree, appending everthing that comes AFTER parentIndex\n      let p: AST | undefined = n\n      let pp = p.#parent\n      while (pp) {\n        for (\n          let i = p.#parentIndex + 1;\n          !pp.type && i < pp.#parts.length;\n          i++\n        ) {\n          for (const part of n.#parts) {\n            /* c8 ignore start */\n            if (typeof part === 'string') {\n              throw new Error('string part in extglob AST??')\n            }\n            /* c8 ignore stop */\n            part.copyIn(pp.#parts[i])\n          }\n        }\n        p = pp\n        pp = p.#parent\n      }\n    }\n    return this\n  }\n\n  push(...parts: (string | AST)[]) {\n    for (const p of parts) {\n      if (p === '') continue\n      /* c8 ignore start */\n      if (typeof p !== 'string' && !(p instanceof AST && p.#parent === this)) {\n        throw new Error('invalid part: ' + p)\n      }\n      /* c8 ignore stop */\n      this.#parts.push(p)\n    }\n  }\n\n  toJSON() {\n    const ret: any[] =\n      this.type === null\n        ? this.#parts.slice().map(p => (typeof p === 'string' ? p : p.toJSON()))\n        : [this.type, ...this.#parts.map(p => (p as AST).toJSON())]\n    if (this.isStart() && !this.type) ret.unshift([])\n    if (\n      this.isEnd() &&\n      (this === this.#root ||\n        (this.#root.#filledNegs && this.#parent?.type === '!'))\n    ) {\n      ret.push({})\n    }\n    return ret\n  }\n\n  isStart(): boolean {\n    if (this.#root === this) return true\n    // if (this.type) return !!this.#parent?.isStart()\n    if (!this.#parent?.isStart()) return false\n    if (this.#parentIndex === 0) return true\n    // if everything AHEAD of this is a negation, then it's still the \"start\"\n    const p = this.#parent\n    for (let i = 0; i < this.#parentIndex; i++) {\n      const pp = p.#parts[i]\n      if (!(pp instanceof AST && pp.type === '!')) {\n        return false\n      }\n    }\n    return true\n  }\n\n  isEnd(): boolean {\n    if (this.#root === this) return true\n    if (this.#parent?.type === '!') return true\n    if (!this.#parent?.isEnd()) return false\n    if (!this.type) return this.#parent?.isEnd()\n    // if not root, it'll always have a parent\n    /* c8 ignore start */\n    const pl = this.#parent ? this.#parent.#parts.length : 0\n    /* c8 ignore stop */\n    return this.#parentIndex === pl - 1\n  }\n\n  copyIn(part: AST | string) {\n    if (typeof part === 'string') this.push(part)\n    else this.push(part.clone(this))\n  }\n\n  clone(parent: AST) {\n    const c = new AST(this.type, parent)\n    for (const p of this.#parts) {\n      c.copyIn(p)\n    }\n    return c\n  }\n\n  static #parseAST(\n    str: string,\n    ast: AST,\n    pos: number,\n    opt: MinimatchOptions\n  ): number {\n    let escaping = false\n    let inBrace = false\n    let braceStart = -1\n    let braceNeg = false\n    if (ast.type === null) {\n      // outside of a extglob, append until we find a start\n      let i = pos\n      let acc = ''\n      while (i < str.length) {\n        const c = str.charAt(i++)\n        // still accumulate escapes at this point, but we do ignore\n        // starts that are escaped\n        if (escaping || c === '\\\\') {\n          escaping = !escaping\n          acc += c\n          continue\n        }\n\n        if (inBrace) {\n          if (i === braceStart + 1) {\n            if (c === '^' || c === '!') {\n              braceNeg = true\n            }\n          } else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n            inBrace = false\n          }\n          acc += c\n          continue\n        } else if (c === '[') {\n          inBrace = true\n          braceStart = i\n          braceNeg = false\n          acc += c\n          continue\n        }\n\n        if (!opt.noext && isExtglobType(c) && str.charAt(i) === '(') {\n          ast.push(acc)\n          acc = ''\n          const ext = new AST(c, ast)\n          i = AST.#parseAST(str, ext, i, opt)\n          ast.push(ext)\n          continue\n        }\n        acc += c\n      }\n      ast.push(acc)\n      return i\n    }\n\n    // some kind of extglob, pos is at the (\n    // find the next | or )\n    let i = pos + 1\n    let part = new AST(null, ast)\n    const parts: AST[] = []\n    let acc = ''\n    while (i < str.length) {\n      const c = str.charAt(i++)\n      // still accumulate escapes at this point, but we do ignore\n      // starts that are escaped\n      if (escaping || c === '\\\\') {\n        escaping = !escaping\n        acc += c\n        continue\n      }\n\n      if (inBrace) {\n        if (i === braceStart + 1) {\n          if (c === '^' || c === '!') {\n            braceNeg = true\n          }\n        } else if (c === ']' && !(i === braceStart + 2 && braceNeg)) {\n          inBrace = false\n        }\n        acc += c\n        continue\n      } else if (c === '[') {\n        inBrace = true\n        braceStart = i\n        braceNeg = false\n        acc += c\n        continue\n      }\n\n      if (isExtglobType(c) && str.charAt(i) === '(') {\n        part.push(acc)\n        acc = ''\n        const ext = new AST(c, part)\n        part.push(ext)\n        i = AST.#parseAST(str, ext, i, opt)\n        continue\n      }\n      if (c === '|') {\n        part.push(acc)\n        acc = ''\n        parts.push(part)\n        part = new AST(null, ast)\n        continue\n      }\n      if (c === ')') {\n        if (acc === '' && ast.#parts.length === 0) {\n          ast.#emptyExt = true\n        }\n        part.push(acc)\n        acc = ''\n        ast.push(...parts, part)\n        return i\n      }\n      acc += c\n    }\n\n    // unfinished extglob\n    // if we got here, it was a malformed extglob! not an extglob, but\n    // maybe something else in there.\n    ast.type = null\n    ast.#hasMagic = undefined\n    ast.#parts = [str.substring(pos - 1)]\n    return i\n  }\n\n  static fromGlob(pattern: string, options: MinimatchOptions = {}) {\n    const ast = new AST(null, undefined, options)\n    AST.#parseAST(pattern, ast, 0, options)\n    return ast\n  }\n\n  // returns the regular expression if there's magic, or the unescaped\n  // string if not.\n  toMMPattern(): MMRegExp | string {\n    // should only be called on root\n    /* c8 ignore start */\n    if (this !== this.#root) return this.#root.toMMPattern()\n    /* c8 ignore stop */\n    const glob = this.toString()\n    const [re, body, hasMagic, uflag] = this.toRegExpSource()\n    // if we're in nocase mode, and not nocaseMagicOnly, then we do\n    // still need a regular expression if we have to case-insensitively\n    // match capital/lowercase characters.\n    const anyMagic =\n      hasMagic ||\n      this.#hasMagic ||\n      (this.#options.nocase &&\n        !this.#options.nocaseMagicOnly &&\n        glob.toUpperCase() !== glob.toLowerCase())\n    if (!anyMagic) {\n      return body\n    }\n\n    const flags = (this.#options.nocase ? 'i' : '') + (uflag ? 'u' : '')\n    return Object.assign(new RegExp(`^${re}$`, flags), {\n      _src: re,\n      _glob: glob,\n    })\n  }\n\n  // returns the string match, the regexp source, whether there's magic\n  // in the regexp (so a regular expression is required) and whether or\n  // not the uflag is needed for the regular expression (for posix classes)\n  // TODO: instead of injecting the start/end at this point, just return\n  // the BODY of the regexp, along with the start/end portions suitable\n  // for binding the start/end in either a joined full-path makeRe context\n  // (where we bind to (^|/), or a standalone matchPart context (where\n  // we bind to ^, and not /).  Otherwise slashes get duped!\n  //\n  // In part-matching mode, the start is:\n  // - if not isStart: nothing\n  // - if traversal possible, but not allowed: ^(?!\\.\\.?$)\n  // - if dots allowed or not possible: ^\n  // - if dots possible and not allowed: ^(?!\\.)\n  // end is:\n  // - if not isEnd(): nothing\n  // - else: $\n  //\n  // In full-path matching mode, we put the slash at the START of the\n  // pattern, so start is:\n  // - if first pattern: same as part-matching mode\n  // - if not isStart(): nothing\n  // - if traversal possible, but not allowed: /(?!\\.\\.?(?:$|/))\n  // - if dots allowed or not possible: /\n  // - if dots possible and not allowed: /(?!\\.)\n  // end is:\n  // - if last pattern, same as part-matching mode\n  // - else nothing\n  //\n  // Always put the (?:$|/) on negated tails, though, because that has to be\n  // there to bind the end of the negated pattern portion, and it's easier to\n  // just stick it in now rather than try to inject it later in the middle of\n  // the pattern.\n  //\n  // We can just always return the same end, and leave it up to the caller\n  // to know whether it's going to be used joined or in parts.\n  // And, if the start is adjusted slightly, can do the same there:\n  // - if not isStart: nothing\n  // - if traversal possible, but not allowed: (?:/|^)(?!\\.\\.?$)\n  // - if dots allowed or not possible: (?:/|^)\n  // - if dots possible and not allowed: (?:/|^)(?!\\.)\n  //\n  // But it's better to have a simpler binding without a conditional, for\n  // performance, so probably better to return both start options.\n  //\n  // Then the caller just ignores the end if it's not the first pattern,\n  // and the start always gets applied.\n  //\n  // But that's always going to be $ if it's the ending pattern, or nothing,\n  // so the caller can just attach $ at the end of the pattern when building.\n  //\n  // So the todo is:\n  // - better detect what kind of start is needed\n  // - return both flavors of starting pattern\n  // - attach $ at the end of the pattern when creating the actual RegExp\n  //\n  // Ah, but wait, no, that all only applies to the root when the first pattern\n  // is not an extglob. If the first pattern IS an extglob, then we need all\n  // that dot prevention biz to live in the extglob portions, because eg\n  // +(*|.x*) can match .xy but not .yx.\n  //\n  // So, return the two flavors if it's #root and the first child is not an\n  // AST, otherwise leave it to the child AST to handle it, and there,\n  // use the (?:^|/) style of start binding.\n  //\n  // Even simplified further:\n  // - Since the start for a join is eg /(?!\\.) and the start for a part\n  // is ^(?!\\.), we can just prepend (?!\\.) to the pattern (either root\n  // or start or whatever) and prepend ^ or / at the Regexp construction.\n  toRegExpSource(\n    allowDot?: boolean\n  ): [re: string, body: string, hasMagic: boolean, uflag: boolean] {\n    const dot = allowDot ?? !!this.#options.dot\n    if (this.#root === this) this.#fillNegs()\n    if (!this.type) {\n      const noEmpty = this.isStart() && this.isEnd()\n      const src = this.#parts\n        .map(p => {\n          const [re, _, hasMagic, uflag] =\n            typeof p === 'string'\n              ? AST.#parseGlob(p, this.#hasMagic, noEmpty)\n              : p.toRegExpSource(allowDot)\n          this.#hasMagic = this.#hasMagic || hasMagic\n          this.#uflag = this.#uflag || uflag\n          return re\n        })\n        .join('')\n\n      let start = ''\n      if (this.isStart()) {\n        if (typeof this.#parts[0] === 'string') {\n          // this is the string that will match the start of the pattern,\n          // so we need to protect against dots and such.\n\n          // '.' and '..' cannot match unless the pattern is that exactly,\n          // even if it starts with . or dot:true is set.\n          const dotTravAllowed =\n            this.#parts.length === 1 && justDots.has(this.#parts[0])\n          if (!dotTravAllowed) {\n            const aps = addPatternStart\n            // check if we have a possibility of matching . or ..,\n            // and prevent that.\n            const needNoTrav =\n              // dots are allowed, and the pattern starts with [ or .\n              (dot && aps.has(src.charAt(0))) ||\n              // the pattern starts with \\., and then [ or .\n              (src.startsWith('\\\\.') && aps.has(src.charAt(2))) ||\n              // the pattern starts with \\.\\., and then [ or .\n              (src.startsWith('\\\\.\\\\.') && aps.has(src.charAt(4)))\n            // no need to prevent dots if it can't match a dot, or if a\n            // sub-pattern will be preventing it anyway.\n            const needNoDot = !dot && !allowDot && aps.has(src.charAt(0))\n\n            start = needNoTrav ? startNoTraversal : needNoDot ? startNoDot : ''\n          }\n        }\n      }\n\n      // append the \"end of path portion\" pattern to negation tails\n      let end = ''\n      if (\n        this.isEnd() &&\n        this.#root.#filledNegs &&\n        this.#parent?.type === '!'\n      ) {\n        end = '(?:$|\\\\/)'\n      }\n      const final = start + src + end\n      return [\n        final,\n        unescape(src),\n        (this.#hasMagic = !!this.#hasMagic),\n        this.#uflag,\n      ]\n    }\n\n    // We need to calculate the body *twice* if it's a repeat pattern\n    // at the start, once in nodot mode, then again in dot mode, so a\n    // pattern like *(?) can match 'x.y'\n\n    const repeated = this.type === '*' || this.type === '+'\n    // some kind of extglob\n    const start = this.type === '!' ? '(?:(?!(?:' : '(?:'\n    let body = this.#partsToRegExp(dot)\n\n    if (this.isStart() && this.isEnd() && !body && this.type !== '!') {\n      // invalid extglob, has to at least be *something* present, if it's\n      // the entire path portion.\n      const s = this.toString()\n      this.#parts = [s]\n      this.type = null\n      this.#hasMagic = undefined\n      return [s, unescape(this.toString()), false, false]\n    }\n\n    // XXX abstract out this map method\n    let bodyDotAllowed =\n      !repeated || allowDot || dot || !startNoDot\n        ? ''\n        : this.#partsToRegExp(true)\n    if (bodyDotAllowed === body) {\n      bodyDotAllowed = ''\n    }\n    if (bodyDotAllowed) {\n      body = `(?:${body})(?:${bodyDotAllowed})*?`\n    }\n\n    // an empty !() is exactly equivalent to a starNoEmpty\n    let final = ''\n    if (this.type === '!' && this.#emptyExt) {\n      final = (this.isStart() && !dot ? startNoDot : '') + starNoEmpty\n    } else {\n      const close =\n        this.type === '!'\n          ? // !() must match something,but !(x) can match ''\n            '))' +\n            (this.isStart() && !dot && !allowDot ? startNoDot : '') +\n            star +\n            ')'\n          : this.type === '@'\n          ? ')'\n          : this.type === '?'\n          ? ')?'\n          : this.type === '+' && bodyDotAllowed\n          ? ')'\n          : this.type === '*' && bodyDotAllowed\n          ? `)?`\n          : `)${this.type}`\n      final = start + body + close\n    }\n    return [\n      final,\n      unescape(body),\n      (this.#hasMagic = !!this.#hasMagic),\n      this.#uflag,\n    ]\n  }\n\n  #partsToRegExp(dot: boolean) {\n    return this.#parts\n      .map(p => {\n        // extglob ASTs should only contain parent ASTs\n        /* c8 ignore start */\n        if (typeof p === 'string') {\n          throw new Error('string type in extglob ast??')\n        }\n        /* c8 ignore stop */\n        // can ignore hasMagic, because extglobs are already always magic\n        const [re, _, _hasMagic, uflag] = p.toRegExpSource(dot)\n        this.#uflag = this.#uflag || uflag\n        return re\n      })\n      .filter(p => !(this.isStart() && this.isEnd()) || !!p)\n      .join('|')\n  }\n\n  static #parseGlob(\n    glob: string,\n    hasMagic: boolean | undefined,\n    noEmpty: boolean = false\n  ): [re: string, body: string, hasMagic: boolean, uflag: boolean] {\n    let escaping = false\n    let re = ''\n    let uflag = false\n    for (let i = 0; i < glob.length; i++) {\n      const c = glob.charAt(i)\n      if (escaping) {\n        escaping = false\n        re += (reSpecials.has(c) ? '\\\\' : '') + c\n        continue\n      }\n      if (c === '\\\\') {\n        if (i === glob.length - 1) {\n          re += '\\\\\\\\'\n        } else {\n          escaping = true\n        }\n        continue\n      }\n      if (c === '[') {\n        const [src, needUflag, consumed, magic] = parseClass(glob, i)\n        if (consumed) {\n          re += src\n          uflag = uflag || needUflag\n          i += consumed - 1\n          hasMagic = hasMagic || magic\n          continue\n        }\n      }\n      if (c === '*') {\n        if (noEmpty && glob === '*') re += starNoEmpty\n        else re += star\n        hasMagic = true\n        continue\n      }\n      if (c === '?') {\n        re += qmark\n        hasMagic = true\n        continue\n      }\n      re += regExpEscape(c)\n    }\n    return [re, unescape(glob), !!hasMagic, uflag]\n  }\n}\n", "import { MinimatchOptions } from './index.js'\n/**\n * Escape all magic characters in a glob pattern.\n *\n * If the {@link windowsPathsNoEscape | GlobOptions.windowsPathsNoEscape}\n * option is used, then characters are escaped by wrapping in `[]`, because\n * a magic character wrapped in a character class can only be satisfied by\n * that exact character.  In this mode, `\\` is _not_ escaped, because it is\n * not interpreted as a magic character, but instead as a path separator.\n */\nexport const escape = (\n  s: string,\n  {\n    windowsPathsNoEscape = false,\n  }: Pick<MinimatchOptions, 'windowsPathsNoEscape'> = {}\n) => {\n  // don't need to escape +@! because we escape the parens\n  // that make those magic, and escaping ! as [!] isn't valid,\n  // because [!]] is a valid glob class meaning not ']'.\n  return windowsPathsNoEscape\n    ? s.replace(/[?*()[\\]]/g, '[$&]')\n    : s.replace(/[?*()[\\]\\\\]/g, '\\\\$&')\n}\n", "import { SchemaValidateError } from '@blocksuite/global/error';\nimport { assertExists } from '@blocksuite/global/utils';\nimport { minimatch } from 'minimatch';\n\nimport type { BlockSchemaType } from '../base.js';\nimport type { Workspace } from './workspace.js';\n\nconst SCHEMA_NOT_FOUND_MESSAGE =\n  'Schema not found. The block flavour may not be registered.';\n\nexport class Schema {\n  workspace: Workspace;\n\n  flavourSchemaMap = new Map<string, BlockSchemaType>();\n\n  constructor(workspace: Workspace) {\n    this.workspace = workspace;\n  }\n\n  toJSON() {\n    return Object.fromEntries(\n      Array.from(this.flavourSchemaMap.values()).map(\n        (schema): [string, Record<string, unknown>] => [\n          schema.model.flavour,\n          {\n            role: schema.model.role,\n            parent: schema.model.parent,\n            children: schema.model.children,\n          },\n        ]\n      )\n    );\n  }\n\n  validate = (\n    flavour: string,\n    parentFlavour?: string,\n    childFlavours?: string[]\n  ): void => {\n    const schema = this.flavourSchemaMap.get(flavour);\n    assertExists(\n      schema,\n      new SchemaValidateError(flavour, SCHEMA_NOT_FOUND_MESSAGE)\n    );\n\n    const validateChildren = () => {\n      childFlavours?.forEach(childFlavour => {\n        const childSchema = this.flavourSchemaMap.get(childFlavour);\n        assertExists(\n          childSchema,\n          new SchemaValidateError(childFlavour, SCHEMA_NOT_FOUND_MESSAGE)\n        );\n        this.validateSchema(childSchema, schema);\n      });\n    };\n\n    if (schema.model.role === 'root') {\n      if (parentFlavour) {\n        throw new SchemaValidateError(\n          schema.model.flavour,\n          'Root block cannot have parent.'\n        );\n      }\n\n      validateChildren();\n      return;\n    }\n\n    if (!parentFlavour) {\n      throw new SchemaValidateError(\n        schema.model.flavour,\n        'Hub/Content must have parent.'\n      );\n    }\n\n    const parentSchema = this.flavourSchemaMap.get(parentFlavour);\n    assertExists(\n      parentSchema,\n      new SchemaValidateError(parentFlavour, SCHEMA_NOT_FOUND_MESSAGE)\n    );\n\n    this.validateSchema(schema, parentSchema);\n    validateChildren();\n  };\n\n  validateSchema(child: BlockSchemaType, parent: BlockSchemaType) {\n    this._validateRole(child, parent);\n\n    const relationCheckSuccess = this._validateParent(child, parent);\n\n    if (!relationCheckSuccess) {\n      throw new SchemaValidateError(\n        child.model.flavour,\n        `Block cannot have parent: ${parent.model.flavour}.`\n      );\n    }\n  }\n\n  private _validateRole(child: BlockSchemaType, parent: BlockSchemaType) {\n    const childRole = child.model.role;\n    const parentRole = parent.model.role;\n    const childFlavour = child.model.flavour;\n    const parentFlavour = parent.model.flavour;\n\n    if (childRole === 'root') {\n      throw new SchemaValidateError(\n        childFlavour,\n        `Root block cannot have parent: ${parentFlavour}.`\n      );\n    }\n\n    if (childRole === 'hub' && parentRole === 'content') {\n      throw new SchemaValidateError(\n        childFlavour,\n        `Hub block cannot be child of content block: ${parentFlavour}.`\n      );\n    }\n\n    if (childRole === 'content' && parentRole === 'root') {\n      throw new SchemaValidateError(\n        childFlavour,\n        `Content block can only be child of hub block or itself. But get: ${parentFlavour}.`\n      );\n    }\n  }\n\n  private _matchFlavour(childFlavour: string, parentFlavour: string) {\n    return (\n      minimatch(childFlavour, parentFlavour) ||\n      minimatch(parentFlavour, childFlavour)\n    );\n  }\n\n  private _validateParent(\n    child: BlockSchemaType,\n    parent: BlockSchemaType\n  ): boolean {\n    const _childFlavour = child.model.flavour;\n    const _parentFlavour = parent.model.flavour;\n\n    const childValidFlavours = child.model.parent || ['*'];\n    const parentValidFlavours = parent.model.children || ['*'];\n\n    return parentValidFlavours.some(parentValidFlavour => {\n      return childValidFlavours.some(childValidFlavour => {\n        if (parentValidFlavour === '*' && childValidFlavour === '*') {\n          return true;\n        }\n\n        if (parentValidFlavour === '*') {\n          return this._matchFlavour(childValidFlavour, _parentFlavour);\n        }\n\n        if (childValidFlavour === '*') {\n          return this._matchFlavour(_childFlavour, parentValidFlavour);\n        }\n\n        return (\n          this._matchFlavour(_childFlavour, parentValidFlavour) &&\n          this._matchFlavour(childValidFlavour, _parentFlavour)\n        );\n      });\n    });\n  }\n}\n", "import { assertExists, Slot } from '@blocksuite/global/utils';\nimport * as Y from 'yjs';\n\nimport type { AwarenessStore } from '../awareness.js';\nimport type { BlockSchemaType } from '../base.js';\nimport { BlockSchema } from '../base.js';\nimport { createMemoryStorage } from '../persistence/blob/memory-storage.js';\nimport type { BlobManager, BlobStorage } from '../persistence/blob/types.js';\nimport { sha } from '../persistence/blob/utils.js';\nimport {\n  type InlineSuggestionProvider,\n  Store,\n  type StoreOptions,\n} from '../store.js';\nimport { Text } from '../text-adapter.js';\nimport { serializeYDoc } from '../utils/jsx.js';\nimport { BacklinkIndexer } from './indexer/backlink.js';\nimport { BlockIndexer } from './indexer/base.js';\nimport { type QueryContent, SearchIndexer } from './indexer/search.js';\nimport { type PageMeta, WorkspaceMeta } from './meta.js';\nimport { Page } from './page.js';\nimport { Schema } from './schema.js';\n\nexport type WorkspaceOptions = {\n  experimentalInlineSuggestionProvider?: InlineSuggestionProvider;\n} & StoreOptions;\n\nexport class Workspace {\n  static Y = Y;\n\n  private _store: Store;\n\n  private readonly _schema: Schema;\n  private readonly _storages: BlobStorage[] = [];\n  private readonly _blobStorage: BlobManager;\n\n  meta: WorkspaceMeta;\n\n  slots = {\n    pagesUpdated: new Slot(),\n    pageAdded: new Slot<string>(),\n    pageRemoved: new Slot<string>(),\n    // call this when a blob is updated, deleted or created\n    //  workspace will update re-fetch the blob and update the page\n    blobUpdate: new Slot<void>(),\n  };\n\n  indexer: {\n    search: SearchIndexer;\n    backlink: BacklinkIndexer;\n  };\n\n  readonly inlineSuggestionProvider?: InlineSuggestionProvider;\n\n  constructor({\n    experimentalInlineSuggestionProvider,\n    ...storeOptions\n  }: WorkspaceOptions) {\n    this.inlineSuggestionProvider = experimentalInlineSuggestionProvider;\n    this._schema = new Schema(this);\n\n    this._store = new Store(storeOptions);\n\n    this._storages = (storeOptions.blobStorages ?? [createMemoryStorage]).map(\n      fn => fn(storeOptions.id)\n    );\n\n    this._blobStorage = {\n      get: async id => {\n        let found = false;\n        let count = 0;\n        return new Promise(res => {\n          this._storages.forEach(storage =>\n            storage.crud\n              .get(id)\n              .then(result => {\n                if (result && !found) {\n                  found = true;\n                  res(result);\n                }\n                if (++count === this._storages.length && !found) {\n                  res(null);\n                }\n              })\n              .catch(e => {\n                console.error(e);\n                if (++count === this._storages.length && !found) {\n                  res(null);\n                }\n              })\n          );\n        });\n      },\n      set: async value => {\n        const key = await sha(await value.arrayBuffer());\n        await Promise.all(this._storages.map(s => s.crud.set(key, value)));\n        return key;\n      },\n      delete: async key => {\n        await Promise.all(this._storages.map(s => s.crud.delete(key)));\n      },\n      list: async () => {\n        const keys = new Set<string>();\n        await Promise.all(\n          this._storages.map(async s => {\n            const list = await s.crud.list();\n            list.forEach(key => keys.add(key));\n          })\n        );\n        return Array.from(keys);\n      },\n    };\n\n    this.meta = new WorkspaceMeta('space:meta', this.doc, this.awarenessStore);\n    this._bindPageMetaEvents();\n\n    const blockIndexer = new BlockIndexer(this.doc, { slots: this.slots });\n    const backlinkIndexer = new BacklinkIndexer(blockIndexer);\n    this.indexer = {\n      search: new SearchIndexer(this.doc),\n      backlink: backlinkIndexer,\n    };\n\n    // TODO use BlockIndexer\n    this.slots.pageAdded.on(id => {\n      // For potentially batch-added blocks, it's best to build index asynchronously\n      queueMicrotask(() => this.indexer.search.onPageCreated(id));\n    });\n  }\n\n  get id() {\n    return this._store.id;\n  }\n\n  get isEmpty() {\n    if (this.doc.store.clients.size === 0) return true;\n\n    let flag = false;\n    if (this.doc.store.clients.size === 1) {\n      const items = [...this.doc.store.clients.values()][0];\n      if (items.length <= 1) {\n        flag = true;\n      }\n    }\n    return flag;\n  }\n\n  get awarenessStore(): AwarenessStore {\n    return this._store.awarenessStore;\n  }\n\n  get providers() {\n    return this._store.providers;\n  }\n\n  get blobs() {\n    return this._blobStorage;\n  }\n\n  private get _pages() {\n    // the meta space is not included\n    return this._store.spaces as Map<`space:${string}`, Page>;\n  }\n\n  public getPageNameList() {\n    return [...this._pages.keys()];\n  }\n\n  get doc() {\n    return this._store.doc;\n  }\n\n  get idGenerator() {\n    return this._store.idGenerator;\n  }\n\n  get schema() {\n    return this._schema;\n  }\n\n  register(blockSchema: BlockSchemaType[]) {\n    blockSchema.forEach(schema => {\n      BlockSchema.parse(schema);\n      this.schema.flavourSchemaMap.set(schema.model.flavour, schema);\n    });\n    return this;\n  }\n\n  private _hasPage(pageId: string) {\n    return this._pages.has(`space:${pageId}`);\n  }\n\n  getPage(pageId: string): Page | null {\n    const prefixedPageId = pageId.startsWith('space:')\n      ? (pageId as `space:${string}`)\n      : (`space:${pageId}` as const);\n\n    return this._pages.get(prefixedPageId) ?? null;\n  }\n\n  private _bindPageMetaEvents() {\n    this.meta.pageMetaAdded.on(pageId => {\n      const page = new Page({\n        id: pageId,\n        workspace: this,\n        doc: this.doc,\n        awarenessStore: this.awarenessStore,\n        idGenerator: this._store.idGenerator,\n      });\n      this._store.addSpace(page);\n      page.trySyncFromExistingDoc();\n    });\n\n    this.meta.pageMetasUpdated.on(() => this.slots.pagesUpdated.emit());\n\n    this.meta.pageMetaRemoved.on(id => {\n      const page = this.getPage(id) as Page;\n      this._store.removeSpace(page);\n      this.slots.pageRemoved.emit(id);\n    });\n  }\n\n  /**\n   * By default, only an empty page will be created.\n   * If the `init` parameter is passed, a `surface`, `frame`, and `paragraph` block\n   * will be created in the page simultaneously.\n   */\n  createPage(\n    options: { id?: string; init?: true | { title: string } } | string = {}\n  ) {\n    // Migration guide\n    if (typeof options === 'string') {\n      options = { id: options };\n      console.warn(\n        '`createPage(pageId)` is deprecated, use `createPage()` directly or `createPage({ id: pageId })` instead'\n      );\n      console.warn(\n        'More details see https://github.com/toeverything/blocksuite/pull/2272'\n      );\n    }\n    // End of migration guide. Remove this in the next major version\n\n    const { id: pageId = this.idGenerator(), init } = options;\n    if (this._hasPage(pageId)) {\n      throw new Error('page already exists');\n    }\n\n    this.meta.addPageMeta({\n      id: pageId,\n      title: '',\n      createDate: +new Date(),\n      subpageIds: [],\n    });\n    const page = this.getPage(pageId) as Page;\n\n    let pageBlockId = pageId;\n    if (init) {\n      pageBlockId = page.addBlock(\n        'affine:page',\n        typeof init === 'boolean'\n          ? undefined\n          : {\n              title: new page.Text(init.title),\n            }\n      );\n      page.addBlock('affine:surface', {}, pageBlockId);\n      const frameId = page.addBlock('affine:frame', {}, pageBlockId);\n      page.addBlock('affine:paragraph', {}, frameId);\n    }\n    return page;\n  }\n\n  /** Update page meta state. Note that this intentionally does not mutate page state. */\n  setPageMeta(\n    pageId: string,\n    // You should not update subpageIds directly.\n    props: Partial<PageMeta>\n  ) {\n    this.meta.setPageMeta(pageId, props);\n  }\n\n  /**\n   * @deprecated\n   */\n  shiftPage(pageId: string, newIndex: number) {\n    this.meta.shiftPageMeta(pageId, newIndex);\n  }\n\n  removePage(pageId: string) {\n    const pageMeta = this.meta.getPageMeta(pageId);\n    assertExists(pageMeta);\n\n    if (pageMeta.subpageIds.length) {\n      // remove subpages first\n      pageMeta.subpageIds.forEach((subpageId: string) => {\n        if (subpageId === pageId) {\n          console.error(\n            'Unexpected subpage found when remove page! A page cannot be its own subpage',\n            pageMeta\n          );\n          return;\n        }\n        this.removePage(subpageId);\n      });\n    }\n\n    const page = this.getPage(pageId);\n    if (!page) return;\n\n    page.dispose();\n    this.indexer.backlink.removeSubpageNode(this, pageId);\n    this.meta.removePageMeta(pageId);\n    this._store.removeSpace(page);\n  }\n\n  search(query: QueryContent) {\n    return this.indexer.search.search(query);\n  }\n\n  /**\n   * @internal Only for testing\n   */\n  exportYDoc() {\n    const binary = Y.encodeStateAsUpdate(this.doc);\n    const file = new Blob([binary], { type: 'application/octet-stream' });\n    const fileUrl = URL.createObjectURL(file);\n\n    const link = document.createElement('a');\n    link.href = fileUrl;\n    link.download = 'workspace.ydoc';\n    link.click();\n\n    URL.revokeObjectURL(fileUrl);\n  }\n\n  /** @internal Only for testing */\n  async importYDoc() {\n    return new Promise<void>((resolve, reject) => {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = '.ydoc';\n      input.multiple = false;\n      input.onchange = async () => {\n        const file = input.files?.item(0);\n        if (!file) {\n          return reject();\n        }\n        const buffer = await file.arrayBuffer();\n        Y.applyUpdate(this.doc, new Uint8Array(buffer));\n        resolve();\n      };\n      input.onerror = reject;\n      input.click();\n    });\n  }\n\n  /**\n   * @internal\n   * Import an object expression of a page.\n   * Specify the page you want to update by passing the `pageId` parameter and it will\n   * create a new page if it does not exist.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async importPageSnapshot(json: any, pageId: string) {\n    const unprefix = (str: string) =>\n      str.replace('sys:', '').replace('prop:', '').replace('space:', '');\n    const visited = new Set();\n\n    let page = this.getPage(pageId);\n    if (!page) {\n      page = this.createPage({ id: pageId });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const sanitize = async (props: any) => {\n      const result: Record<string, unknown> = {};\n\n      //TODO: https://github.com/toeverything/blocksuite/issues/2939\n      if (props['sys:flavour'] === 'affine:surface' && props['elements']) {\n        for (const [, element] of Object.entries(\n          props['elements']\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ) as any[]) {\n          if (element['type'] === 'text') {\n            const yText = new Y.Text();\n            yText.applyDelta(element['text']);\n            element['text'] = yText;\n          }\n        }\n      }\n\n      // setup embed source\n      if (props['sys:flavour'] === 'affine:embed') {\n        let resp;\n        try {\n          resp = await fetch(props['prop:sourceId'], {\n            cache: 'no-cache',\n            mode: 'cors',\n            headers: {\n              Origin: window.location.origin,\n            },\n          });\n        } catch (error) {\n          throw new Error(`Failed to fetch embed source. error: ${error}`);\n        }\n        const imgBlob = await resp.blob();\n        if (!imgBlob.type.startsWith('image/')) {\n          throw new Error('Embed source is not an image');\n        }\n\n        assertExists(page);\n        const storage = page.blobs;\n        assertExists(storage);\n        const id = await storage.set(imgBlob);\n        props['prop:sourceId'] = id;\n      }\n\n      for (const key of Object.keys(props)) {\n        if (key === 'sys:children' || key === 'sys:flavour') {\n          continue;\n        }\n\n        result[unprefix(key)] = props[key];\n\n        // delta array to Y.Text\n        if (key === 'prop:text' || key === 'prop:title') {\n          const yText = new Y.Text();\n          yText.applyDelta(props[key]);\n          result[unprefix(key)] = new Text(yText);\n        }\n      }\n      return result;\n    };\n\n    const addBlockByProps = async (\n      page: Page,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      props: any,\n      parent: string | null\n    ) => {\n      if (visited.has(props['sys:id'])) return;\n      const sanitizedProps = await sanitize(props);\n      page.addBlock(props['sys:flavour'], sanitizedProps, parent);\n      for (const id of props['sys:children']) {\n        addBlockByProps(page, json[id], props['sys:id']);\n        visited.add(id);\n      }\n    };\n\n    for (const block of Object.values(json)) {\n      assertExists(json);\n      await addBlockByProps(page, block, null);\n    }\n  }\n\n  /** @internal Only for testing */\n  exportSnapshot() {\n    return serializeYDoc(this.doc);\n  }\n\n  /** @internal Only for testing */\n  exportJSX(blockId?: string, pageId = this.meta.pageMetas.at(0)?.id) {\n    assertExists(pageId);\n    return this._store.exportJSX(pageId, blockId);\n  }\n}\n", "import { BaseBlockModel } from '../base.js';\n\nfunction isBaseBlockModel(a: unknown): a is BaseBlockModel {\n  return a instanceof BaseBlockModel;\n}\n\n/**\n * Ported from https://github.com/vuejs/core/blob/main/packages/runtime-core/src/customFormatter.ts\n *\n * See [Custom Object Formatters in Chrome DevTools](https://docs.google.com/document/d/1FTascZXT9cxfetuPRT2eXPQKXui4nWFivUnS_335T3U)\n */\nfunction initCustomFormatter() {\n  if (\n    !(process.env.NODE_ENV === 'development') ||\n    typeof window === 'undefined'\n  ) {\n    return;\n  }\n\n  const bannerStyle = {\n    style:\n      'color: #eee; background: #3F6FDB; margin-right: 5px; padding: 2px; border-radius: 4px',\n  };\n  const typeStyle = {\n    style:\n      'color: #eee; background: #DB6D56; margin-right: 5px; padding: 2px; border-radius: 4px',\n  };\n\n  // custom formatter for Chrome\n  // https://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html\n  const formatter = {\n    header(obj: unknown, config = { expand: false }) {\n      if (!isBaseBlockModel(obj) || config.expand) {\n        return null;\n      }\n\n      return [\n        'div',\n        {},\n        ['span', bannerStyle, 'BaseBlockModel'],\n        ['span', typeStyle, obj.flavour],\n        obj.text?.toString(),\n      ];\n    },\n    hasBody(obj: unknown) {\n      return true;\n    },\n    body(obj: unknown) {\n      return ['object', { object: obj, config: { expand: true } }];\n    },\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if ((window as any).devtoolsFormatters) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).devtoolsFormatters.push(formatter);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).devtoolsFormatters = [formatter];\n  }\n}\n\ninitCustomFormatter();\n", "/// <reference types=\"@blocksuite/global\" />\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path=\"../shim.d.ts\" />\nexport * from './awareness.js';\nexport * from './base.js';\nexport { createIndexeddbStorage } from './persistence/blob/indexeddb-storage.js';\nexport { createMemoryStorage } from './persistence/blob/memory-storage.js';\nexport { createSimpleServerStorage } from './persistence/blob/mock-server-storage.js';\nexport type {\n  BlobManager,\n  BlobStorage,\n  BlobStorageCRUD,\n} from './persistence/blob/types.js';\nexport * from './persistence/doc/index.js';\nexport * from './space.js';\nexport * from './store.js';\nexport * from './text-adapter.js';\nexport type { IdGenerator } from './utils/id-generator.js';\nexport type { Y };\nexport {\n  createAutoIncrementIdGenerator,\n  createAutoIncrementIdGeneratorByClientId,\n  nanoid,\n  uuidv4,\n} from './utils/id-generator.js';\nexport * as Utils from './utils/utils.js';\nexport * from './workspace/index.js';\nexport * from '@blocksuite/global/utils';\n\nimport './utils/formatter.js';\n\nimport type * as Y from 'yjs';\n\nconst env =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof window !== 'undefined'\n    ? window\n    : // @ts-ignore\n    typeof global !== 'undefined'\n    ? // @ts-ignore\n      global\n    : {};\nconst importIdentifier = '__ $BLOCKSUITE_STORE$ __';\n\n// @ts-ignore\nif (env[importIdentifier] === true) {\n  // https://github.com/yjs/yjs/issues/438\n  console.error(\n    '@blocksuite/store was already imported. This breaks constructor checks and will lead to issues!'\n  );\n}\n// @ts-ignore\nenv[importIdentifier] = true;\n", "function findTextNode(node: Node): Node | null {\n  if (node.nodeType === Node.TEXT_NODE) {\n    return node;\n  }\n  // Try to find the text node in the child nodes\n  for (let i = 0; i < node.childNodes.length; i++) {\n    const textNode = findTextNode(node.childNodes[i]);\n    if (textNode) {\n      return textNode;\n    }\n  }\n  return null;\n}\n\n/**\n * Find the next text node from the given node.\n *\n * Note: this function will skip the given node itself. And the boundary node will be included.\n */\nfunction findNextTextNode(\n  node: Node,\n  checkWalkBoundary = (node: Node) => node === document.body\n): Node | null {\n  while (node.parentNode) {\n    const parentNode = node.parentNode;\n    if (!parentNode) {\n      console.warn('Failed to find text node from node! no parent node', node);\n      return null;\n    }\n    const nodeIdx = Array.from(parentNode.childNodes).indexOf(\n      node as ChildNode\n    );\n    if (nodeIdx === -1) {\n      console.warn('Failed to find text node from node! no node index', node);\n      return null;\n    }\n    for (let i = nodeIdx + 1; i < parentNode.childNodes.length; i++) {\n      const textNode = findTextNode(parentNode.childNodes[i]);\n      if (textNode) {\n        return textNode;\n      }\n    }\n\n    if (checkWalkBoundary(parentNode)) {\n      return null;\n    }\n    node = parentNode;\n  }\n  return null;\n}\n\n/**\n * Try to shift the range to the next caret point.\n * If the range is already at the end of the block, return null.\n *\n * NOTE: In extreme situations, this function need to traverse the DOM tree.\n * It may cause performance issues, so use it carefully.\n *\n * You can see the definition of the range in the spec for more details.\n * https://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/ranges.html\n */\nfunction shiftRange(range: Range): Range | null {\n  if (!range.collapsed) {\n    throw new Error('Failed to shift range! expected a collapsed range');\n  }\n  const startContainer = range.startContainer;\n\n  // If the startNode is a Node of type Text, Comment, or CDataSection,\n  // then startOffset is the number of characters from the start of startNode.\n  // For other Node types, startOffset is the number of child nodes between the start of the startNode.\n  // https://developer.mozilla.org/en-US/docs/Web/API/Range/setStart\n  const isTextLikeNode =\n    startContainer.nodeType === Node.TEXT_NODE ||\n    startContainer.nodeType === Node.COMMENT_NODE ||\n    startContainer.nodeType === Node.CDATA_SECTION_NODE;\n  if (!isTextLikeNode) {\n    // Although we can shift the range if the node is a not text node.\n    // But in most normal situations, the node should be a text node.\n    // To simplify the processing, we just skip the case.\n    // If we really need to support this case, we can add it later.\n    //\n    // If in the empty line, the startContainer is a `<p><br></p>` node,\n    // it's expected but hard to distinguish, so we remove the warning temporarily.\n    // console.warn(\n    //   'Failed to shiftRange! Unexpected startContainer nodeType',\n    //   startContainer\n    // );\n    return null;\n  }\n  const textContent = startContainer.textContent;\n  if (typeof textContent !== 'string') {\n    // If the node is a `document` or a `doctype`, textContent returns `null`.\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n    throw new Error('Failed to shift range! unexpected startContainer');\n  }\n\n  // const maxOffset = isTextLikeNode\n  //   ? textContent.length\n  //   : startContainer.childNodes.length;\n  const maxOffset = textContent.length;\n\n  if (maxOffset > range.startOffset) {\n    // Just shift to the next character simply\n    const nextRange = range.cloneRange();\n    nextRange.setStart(range.startContainer, range.startOffset + 1);\n    nextRange.setEnd(range.startContainer, range.startOffset + 1);\n    return nextRange;\n  }\n\n  // If the range is already at the end of the node,\n  // we need traverse the DOM tree to find the next text node.\n  // And this may be inefficient.\n  const nextTextNode = findNextTextNode(\n    startContainer,\n    (node: Node) =>\n      // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/contentEditable\n      node instanceof HTMLElement && node.contentEditable === 'true'\n  );\n  if (!nextTextNode) {\n    return null;\n  }\n\n  const nextRange = range.cloneRange();\n  nextRange.setStart(nextTextNode, 0);\n  nextRange.setEnd(nextTextNode, 0);\n  return nextRange;\n}\n\n/**\n * It will return the next range if the cursor is at the edge of the block, otherwise return false.\n *\n * We should determine if the cursor is at the edge of the block, since a cursor at edge may have two cursor points\n * but only one bounding rect.\n * If a cursor is at the edge of a block, its previous cursor rect will not equal to the next one.\n *\n * See the following example:\n * ```markdown\n * long text| <- `range.getBoundingClientRect()` will return rect at here\n * |line wrap <- caret at the start of the second line\n * ```\n *\n * See https://stackoverflow.com/questions/59767515/incorrect-positioning-of-getboundingclientrect-after-newline-character\n */\nexport function isAtLineEdge(range: Range) {\n  if (!range.collapsed) {\n    return false;\n  }\n  const nextRange = shiftRange(range);\n  if (!nextRange) {\n    return false;\n  }\n  const nextRangeRect = nextRange.getBoundingClientRect();\n  const noLineEdge = range.getBoundingClientRect().top === nextRangeRect.top;\n  if (noLineEdge) {\n    return false;\n  }\n  return nextRange;\n}\n\nexport function checkFirstLine(range: Range, container: Element) {\n  if (!range.collapsed) {\n    throw new Error(\n      'Failed to determine if the caret is at the first line! expected a collapsed range but got' +\n        range\n    );\n  }\n  if (!container.contains(range.commonAncestorContainer)) {\n    throw new Error(\n      'Failed to determine if the caret is at the first line! expected the range to be inside the container but got' +\n        range +\n        ' and ' +\n        container\n    );\n  }\n  const containerRect = container.getBoundingClientRect();\n  const rangeRect = range.getBoundingClientRect();\n  if (rangeRect.left === 0 && rangeRect.top === 0) {\n    // Workaround select to empty line will get empty range\n    // See https://w3c.github.io/csswg-drafts/cssom-view/#dom-range-getboundingclientrect\n    // At empty line, it is the first line and also is the last line\n    return true;\n  }\n  const lineHeight = rangeRect.height;\n  // If the caret at the start of second line, as known as line edge,\n  // the range bounding rect may be incorrect, we need to check the scenario.\n  const isFirstLine =\n    containerRect.top > rangeRect.top - lineHeight / 2 && !isAtLineEdge(range);\n  return isFirstLine;\n}\n\nexport function checkLastLine(range: Range, container: HTMLElement) {\n  if (!range.collapsed) {\n    throw new Error(\n      'Failed to determine if the caret is at the last line! expected a collapsed range but got' +\n        range\n    );\n  }\n  if (!container.contains(range.commonAncestorContainer)) {\n    throw new Error(\n      'Failed to determine if the caret is at the first line! expected the range to be inside the container but got' +\n        range +\n        ' and ' +\n        container\n    );\n  }\n  const containerRect = container.getBoundingClientRect();\n  const rangeRect = range.getBoundingClientRect();\n  if (rangeRect.left === 0 && rangeRect.bottom === 0) {\n    // Workaround select to empty line will get empty range\n    // See https://w3c.github.io/csswg-drafts/cssom-view/#dom-range-getboundingclientrect\n    // At empty line, it is the first line and also is the last line\n    return true;\n  }\n  const lineHeight = rangeRect.height;\n  const isLastLineWithoutEdge =\n    rangeRect.bottom + lineHeight / 2 > containerRect.bottom;\n  if (isLastLineWithoutEdge) {\n    // If the caret is at the first line of the block,\n    // default behavior will move the caret to the start of the line,\n    // which is not expected. so we need to prevent default behavior.\n    return true;\n  }\n  const atLineEdgeRange = isAtLineEdge(range);\n  if (!atLineEdgeRange) {\n    return false;\n  }\n  // If the caret is at the line edge, the range bounding rect is wrong,\n  // we need to check the next range again.\n  const nextRangeRect = atLineEdgeRange.getBoundingClientRect();\n  const nextLineHeight = nextRangeRect.height;\n  return nextRangeRect.bottom + nextLineHeight / 2 > containerRect.bottom;\n}\n", "import { Slot } from '@blocksuite/global/utils';\nexport class ActiveEditorManager {\n  activeSlot = new Slot<Element | undefined>();\n  activeElement?: Element;\n  isActive(ele: Element) {\n    if (!this.activeElement) {\n      return false;\n    }\n    return this.activeElement.contains(ele);\n  }\n\n  setActive(ele: Element) {\n    if (ele !== this.activeElement) {\n      this.activeElement = ele;\n      this.activeSlot.emit(ele);\n    }\n  }\n  clearActive = () => {\n    if (this.activeElement != undefined) {\n      this.activeElement = undefined;\n      this.activeSlot.emit(undefined);\n    }\n  };\n  setIfNoActive(ele: Element) {\n    if (!this.activeElement) {\n      this.setActive(ele);\n    }\n  }\n\n  getActiveEditor() {\n    return this.activeElement;\n  }\n}\nexport const activeEditorManager = new ActiveEditorManager();\n", "import type { BlockElement, UIEventDispatcher } from '@blocksuite/lit';\nimport type { ConnectorMode, ShapeType } from '@blocksuite/phasor';\nimport {\n  type BaseBlockModel,\n  DisposableGroup,\n  type Page,\n  type Slot,\n} from '@blocksuite/store';\n\nimport type { Cell, Column } from '../../database-block/table/types.js';\nimport type { FrameBlockModel } from '../../frame-block/index.js';\nimport type { PageBlockModel } from '../../models.js';\nimport type {\n  BlockServiceInstanceByKey,\n  ServiceFlavour,\n} from '../../services.js';\nimport type { Clipboard } from '../clipboard/index.js';\nimport type { RefNodeSlots } from '../rich-text/reference-node.js';\nimport type { AffineTextAttributes } from '../rich-text/virgo/types.js';\nimport type { CssVariableName } from '../theme/css-variables.js';\nimport type { BlockComponentElement } from './query.js';\nimport type { Point } from './rect.js';\nexport type SelectionPosition = 'start' | 'end' | Point;\n\nexport interface IPoint {\n  x: number;\n  y: number;\n}\nexport interface BlockTransformContext {\n  childText?: string;\n  begin?: number;\n  end?: number;\n}\n\nexport interface EditingState {\n  element: BlockComponentElement;\n  model: BaseBlockModel;\n  rect: DOMRect;\n}\n\nexport type DatabaseTableViewRowStateType = 'select' | 'clear' | 'click';\nexport type DatabaseTableViewRowSelect = {\n  type: 'select';\n  databaseId: string;\n  rowIds: string[];\n};\ntype DatabaseTableViewRowClick = {\n  type: 'click';\n  databaseId: string;\n  rowIds: string[];\n};\ntype DatabaseTableViewRowDelete = {\n  type: 'delete';\n  databaseId: string;\n  rowIds: string[];\n};\ntype DatabaseTableViewRowClear = {\n  type: 'clear';\n};\nexport type DatabaseTableViewRowState =\n  | DatabaseTableViewRowSelect\n  | DatabaseTableViewRowClick\n  | DatabaseTableViewRowDelete\n  | DatabaseTableViewRowClear;\n\nexport type CellCoord = {\n  rowIndex: number;\n  cellIndex: number;\n};\nexport type DatabaseTableViewCellSelect = {\n  type: 'select';\n  databaseId: string;\n  // Currently only supports single cell selection.\n  coords: [CellCoord];\n};\ntype DatabaseTableViewCellEdit = {\n  type: 'edit';\n  databaseId: string;\n  coords: [CellCoord];\n};\ntype DatabaseTableViewCellClear = {\n  type: 'clear';\n};\nexport type DatabaseTableViewCellState =\n  | DatabaseTableViewCellSelect\n  | DatabaseTableViewCellEdit\n  | DatabaseTableViewCellClear;\n\n/** Common context interface definition for block models. */\n\n/**\n * Functions that a block host provides\n */\nexport interface BlockHostContext {\n  getService: <Key extends ServiceFlavour>(\n    flavour: Key\n  ) => BlockServiceInstanceByKey<Key>;\n}\n\nexport type CommonSlots = RefNodeSlots;\n\nexport interface BlockHost extends BlockHostContext {\n  page: Page;\n  flavour: string;\n  clipboard: Clipboard;\n  readonly slots: CommonSlots;\n}\n\ntype EditorMode = 'page' | 'edgeless';\ntype EditorSlots = { pageModeSwitched: Slot<EditorMode> };\n\nexport type AbstractEditor = {\n  page: Page;\n  mode: EditorMode;\n  readonly slots: CommonSlots & EditorSlots;\n} & HTMLElement;\n\n/**\n * type of `window.getSelection().type`\n *\n * The attribute must return \"None\" if this is empty, \"Caret\" if this's range is collapsed, and \"Range\" otherwise.\n *\n * More details see https://w3c.github.io/selection-api/#dom-selection-type\n */\nexport type DomSelectionType = 'Caret' | 'Range' | 'None';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type ExtendedModel = BaseBlockModel & Record<string, any>;\n\n// blocks that would only appear under the edgeless container root\nexport type TopLevelBlockModel = FrameBlockModel;\n\nexport type DefaultMouseMode = {\n  type: 'default';\n};\n\nexport type ShapeMouseMode = {\n  type: 'shape';\n  shape: ShapeType | 'roundedRect';\n  fillColor: CssVariableName;\n  strokeColor: CssVariableName;\n};\n\nexport enum BrushSize {\n  Thin = 4,\n  Thick = 10,\n}\n\nexport type TextMouseMode = {\n  type: 'text';\n};\n\nexport type BrushMouseMode = {\n  type: 'brush';\n  color: CssVariableName;\n  lineWidth: BrushSize;\n};\n\nexport type PanMouseMode = {\n  type: 'pan';\n  panning: boolean;\n};\n\nexport type NoteMouseMode = {\n  type: 'note';\n  background: CssVariableName;\n};\n\nexport type ConnectorMouseMode = {\n  type: 'connector';\n  mode: ConnectorMode;\n  color: CssVariableName;\n};\n\nexport type MouseMode =\n  | DefaultMouseMode\n  | TextMouseMode\n  | ShapeMouseMode\n  | BrushMouseMode\n  | PanMouseMode\n  | NoteMouseMode\n  | ConnectorMouseMode;\n\nexport type SerializedBlock = {\n  flavour: string;\n  type?: string;\n  text?: {\n    insert?: string;\n    delete?: number;\n    retain?: number;\n    attributes?: AffineTextAttributes;\n  }[];\n  rawText?: {\n    insert: string;\n    delete?: number;\n    retain?: number;\n  }[];\n  checked?: boolean;\n  children: SerializedBlock[];\n  sourceId?: string;\n  caption?: string;\n  width?: number;\n  height?: number;\n  language?: string;\n  databaseProps?: {\n    id: string;\n    title: string;\n    titleColumnName: string;\n    titleColumnWidth: number;\n    rowIds: string[];\n    cells: Record<string, Record<string, Cell>>;\n    columns: Column[];\n  };\n  // frame block\n  xywh?: string;\n  // bookmark block\n  title?: string;\n  description?: string;\n  icon?: string;\n  image?: string;\n  url?: string;\n  crawled?: boolean;\n  background?: string;\n};\n\nexport type EmbedBlockDoubleClickData = {\n  blockId: string;\n};\n\ndeclare global {\n  interface WindowEventMap {\n    'affine.embed-block-db-click': CustomEvent<EmbedBlockDoubleClickData>;\n    'affine.switch-mouse-mode': CustomEvent<MouseMode>;\n    'affine:switch-edgeless-display-mode': CustomEvent<boolean>;\n  }\n}\n\ntype WindowEventDetail<T extends keyof WindowEventMap> =\n  WindowEventMap[T] extends {\n    detail: unknown;\n  }\n    ? WindowEventMap[T]['detail']\n    : unknown;\n\ntype HTMLElementEventDetail<T extends keyof HTMLElementEventMap> =\n  HTMLElementEventMap[T] extends {\n    detail: unknown;\n  }\n    ? HTMLElementEventMap[T]['detail']\n    : unknown;\n\nexport type Detail<T extends keyof WindowEventMap | keyof HTMLElementEventMap> =\n  T extends keyof WindowEventMap\n    ? WindowEventDetail<T>\n    : T extends keyof HTMLElementEventMap\n    ? HTMLElementEventDetail<T>\n    : never;\n\nexport abstract class AbstractSelectionManager<\n  T extends BlockElement<PageBlockModel>\n> {\n  public readonly container: T;\n  protected readonly _dispatcher: UIEventDispatcher;\n  protected readonly _disposables = new DisposableGroup();\n\n  constructor(container: T, dispatcher: UIEventDispatcher) {\n    this.container = container;\n    this._dispatcher = dispatcher;\n  }\n\n  protected get page() {\n    return this.container.page;\n  }\n\n  abstract clear(): void;\n\n  abstract dispose(): void;\n}\n", "import { matchFlavours } from '@blocksuite/global/utils';\nimport type { BaseBlockModel } from '@blocksuite/store';\n\nimport type { Detail } from './types.js';\n\n/**\n * Whether the block supports rendering its children.\n */\nexport function supportsChildren(model: BaseBlockModel): boolean {\n  if (\n    matchFlavours(model, [\n      // 'affine:database',\n      'affine:embed',\n      'affine:divider',\n      'affine:code',\n    ])\n  ) {\n    return false;\n  }\n  if (\n    matchFlavours(model, ['affine:paragraph']) &&\n    ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'quote'].includes(model.type ?? '')\n  ) {\n    return false;\n  }\n  return true;\n}\n\nexport function isEmpty(model: BaseBlockModel): boolean {\n  if (model.children.length !== 0) {\n    const found = model.children.find(c => !isEmpty(c));\n    return !found;\n  }\n  return (\n    !model.text?.length && !model.sourceId && model.flavour !== 'affine:code'\n  );\n}\n\nexport function almostEqual(a: number, b: number, epsilon = 0.0001) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport function createEvent<\n  T extends keyof WindowEventMap | keyof HTMLElementEventMap\n>(type: T, detail: Detail<T>) {\n  return new CustomEvent<Detail<T>>(type, { detail });\n}\n\nexport function noop() {\n  return;\n}\n\n/**\n * @example\n * ```ts\n * const log = (message: string) => console.log(`[${new Date().toISOString()}] ${message}`);\n *\n * const throttledLog = throttle(log, 1000);\n *\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * ```\n */\nexport function throttle<\n  Args extends unknown[],\n  T extends (...args: Args) => void\n>(\n  fn: (...args: Args) => void,\n  limit: number,\n  options?: { leading?: boolean; trailing?: boolean }\n): T;\nexport function throttle<\n  Args extends unknown[],\n  T extends (this: unknown, ...args: Args) => void\n>(fn: T, limit: number, { leading = true, trailing = true } = {}): T {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  let lastArgs: Args | null = null;\n\n  const setTimer = () => {\n    if (lastArgs && trailing) {\n      fn(...lastArgs);\n      lastArgs = null;\n      timer = setTimeout(setTimer, limit);\n    } else {\n      timer = null;\n    }\n  };\n\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (timer) {\n      // in throttle\n      lastArgs = args;\n      return;\n    }\n    // Execute the function on the leading edge\n    if (leading) {\n      fn.apply(this, args);\n    }\n    timer = setTimeout(setTimer, limit);\n  } as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const debounce = <T extends (...args: any[]) => void>(\n  fn: T,\n  limit: number,\n  { leading = true, trailing = true } = {}\n): T => {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  let lastArgs: Parameters<T> | null = null;\n\n  const setTimer = () => {\n    if (lastArgs && trailing) {\n      fn(...lastArgs);\n      lastArgs = null;\n      timer = setTimeout(setTimer, limit);\n    } else {\n      timer = null;\n    }\n  };\n\n  return function (...args: Parameters<T>) {\n    if (timer) {\n      lastArgs = args;\n      clearTimeout(timer);\n    }\n    if (leading && !timer) {\n      fn(...args);\n    }\n    timer = setTimeout(setTimer, limit);\n  } as T;\n};\n\n/**\n * This function takes a value value, a minimum value min, and a maximum value max,\n * and returns the value of value clamped to the range [min, max].\n *\n * This means that if value is less than min, the function will return min;\n * if value is greater than max, the function will return max;\n * otherwise, the function will return value.\n *\n * @example\n * ```ts\n * const x = clamp(10, 0, 5); // x will be 5\n * const y = clamp(3, 0, 5); // y will be 3\n * const z = clamp(-1, 0, 5); // z will be 0\n * ```\n */\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n};\n\n/**\n *\n * @example\n * ```ts\n * const items = [\n *  {name: 'a', classroom: 'c1'},\n *  {name: 'b', classroom: 'c2'},\n *  {name: 'a', classroom: 't0'}\n * ]\n * const counted = countBy(items1, i => i.name);\n * // counted: { a: 2, b: 1}\n * ```\n */\nexport function countBy<T>(\n  items: T[],\n  key: (item: T) => string | number\n): Record<string, number> {\n  const count: Record<string, number> = {};\n  items.forEach(item => {\n    const k = key(item);\n    if (!count[k]) {\n      count[k] = 0;\n    }\n    count[k] += 1;\n  });\n  return count;\n}\n\n/**\n * @example\n * ```ts\n * const items = [{n: 1}, {n: 2}]\n * const max = maxBy(items, i => i.n);\n * // max: {n: 2}\n * ```\n */\nexport function maxBy<T>(items: T[], value: (item: T) => number): T | null {\n  if (!items.length) {\n    return null;\n  }\n  let maxItem = items[0];\n  let max = value(maxItem);\n\n  for (let i = 1; i < items.length; i++) {\n    const item = items[i];\n    const v = value(item);\n    if (v > max) {\n      max = v;\n      maxItem = item;\n    }\n  }\n\n  return maxItem;\n}\n\nexport function isControlledKeyboardEvent(e: KeyboardEvent) {\n  return e.ctrlKey || e.metaKey || e.altKey;\n}\n\nexport function isPrintableKeyEvent(event: KeyboardEvent): boolean {\n  return event.key.length === 1 && !isControlledKeyboardEvent(event);\n}\n\n/**\n * Checks if there are at least `n` elements in the array that match the given condition.\n *\n * @param arr - The input array of elements.\n * @param matchFn - A function that takes an element of the array and returns a boolean value\n *                  indicating if the element matches the desired condition.\n * @param n - The minimum number of matching elements required.\n * @returns A boolean value indicating if there are at least `n` matching elements in the array.\n *\n * @example\n * const arr = [1, 2, 3, 4, 5];\n * const isEven = (num: number): boolean => num % 2 === 0;\n * console.log(atLeastNMatches(arr, isEven, 2)); // Output: true\n */\nexport function atLeastNMatches<T>(\n  arr: T[],\n  matchFn: (element: T) => boolean,\n  n: number\n): boolean {\n  let count = 0;\n\n  for (let i = 0; i < arr.length; i++) {\n    if (matchFn(arr[i])) {\n      count++;\n\n      if (count >= n) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Groups an array of elements based on a provided key function.\n *\n * @example\n * interface Student {\n *   name: string;\n *   age: number;\n * }\n * const students: Student[] = [\n *   { name: 'Alice', age: 25 },\n *   { name: 'Bob', age: 23 },\n *   { name: 'Cathy', age: 25 },\n * ];\n * const groupedByAge = groupBy(students, (student) => student.age.toString());\n * console.log(groupedByAge);\n * // Output: {\n *  '23': [ { name: 'Bob', age: 23 } ],\n *  '25': [ { name: 'Alice', age: 25 }, { name: 'Cathy', age: 25 } ]\n * }\n */\nexport function groupBy<T>(\n  arr: T[],\n  key: string | ((item: T) => string)\n): Record<string, T[]> {\n  const result = {} as Record<string, T[]>;\n\n  for (const item of arr) {\n    const groupKey =\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (typeof key === 'function' ? key(item) : (item as any)[key]) as string;\n\n    if (!result[groupKey]) {\n      result[groupKey] = [];\n    }\n\n    result[groupKey].push(item);\n  }\n\n  return result;\n}\n\nfunction escapeRegExp(input: string) {\n  // escape regex characters in the input string to prevent regex format errors\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n/**\n * Checks if the name is a fuzzy match of the query.\n *\n * @example\n * ```ts\n * const name = 'John Smith';\n * const query = 'js';\n * const isMatch = isFuzzyMatch(name, query);\n * // isMatch: true\n * ```\n */\nexport function isFuzzyMatch(name: string, query: string) {\n  const pureName = name\n    .trim()\n    .toLowerCase()\n    .split('')\n    .filter(char => char !== ' ')\n    .join('');\n\n  const regex = new RegExp(\n    query\n      .split('')\n      .filter(char => char !== ' ')\n      .map(item => `${escapeRegExp(item)}.*`)\n      .join(''),\n    'i'\n  );\n  return regex.test(pureName);\n}\n\nexport function toHex(color: string) {\n  let r, g, b;\n\n  if (color.startsWith('#')) {\n    color = color.substr(1);\n    if (color.length === 3) {\n      color = color.replace(/./g, '$&$&');\n    }\n    [r, g, b] = color.match(/.{2}/g)?.map(hex => parseInt(hex, 16)) ?? [];\n  } else if (color.startsWith('rgba')) {\n    [r, g, b] = color.match(/\\d+/g)?.map(Number) ?? [];\n  } else if (color.startsWith('rgb')) {\n    [r, g, b] = color.match(/\\d+/g)?.map(Number) ?? [];\n  } else {\n    throw new Error('Invalid color format');\n  }\n\n  if (r === undefined || g === undefined || b === undefined) {\n    throw new Error('Invalid color format');\n  }\n\n  const hex = ((r << 16) | (g << 8) | b).toString(16);\n  return '#' + '0'.repeat(6 - hex.length) + hex;\n}\n\nexport function capitalize(s: string) {\n  if (!s.length) {\n    return s;\n  }\n  return s[0].toUpperCase() + s.slice(1);\n}\n\nexport function uncapitalize(s: string) {\n  if (!s.length) {\n    return s;\n  }\n  return s[0].toLowerCase() + s.slice(1);\n}\n", "import type { IPoint } from '../index.js';\nimport { clamp } from './std.js';\n\nexport class Point {\n  public x: number;\n  public y: number;\n\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static from(point: IPoint | number[] | number, y?: number) {\n    if (Array.isArray(point)) {\n      return new Point(point[0], point[1]);\n    }\n    if (typeof point === 'number') {\n      return new Point(point, y ?? point);\n    }\n    return new Point(point.x, point.y);\n  }\n\n  set(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  equals({ x, y }: Point) {\n    return this.x === x && this.y === y;\n  }\n\n  add(point: IPoint): Point {\n    return new Point(this.x + point.x, this.y + point.y);\n  }\n\n  scale(factor: number): Point {\n    return new Point(this.x * factor, this.y * factor);\n  }\n\n  subtract(point: IPoint): Point {\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n\n  /**\n   * Returns a copy of the point.\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  cross(point: IPoint): number {\n    return this.x * point.y - this.y * point.x;\n  }\n\n  lerp(point: IPoint, t: number): Point {\n    return new Point(\n      this.x + (point.x - this.x) * t,\n      this.y + (point.y - this.y) * t\n    );\n  }\n\n  toArray() {\n    return [this.x, this.y];\n  }\n\n  /**\n   * Compares and returns the minimum of two points.\n   */\n  static min(a: Point, b: Point) {\n    return new Point(Math.min(a.x, b.x), Math.min(a.y, b.y));\n  }\n\n  /**\n   * Compares and returns the maximum of two points.\n   */\n  static max(a: Point, b: Point) {\n    return new Point(Math.max(a.x, b.x), Math.max(a.y, b.y));\n  }\n\n  /**\n   * Restrict a value to a certain interval.\n   */\n  static clamp(p: Point, min: Point, max: Point) {\n    return new Point(clamp(p.x, min.x, max.x), clamp(p.y, min.y, max.y));\n  }\n}\n\nexport class Rect {\n  // `[left, top]`\n  public min: Point;\n  // `[right, bottom]`\n  public max: Point;\n\n  constructor(left: number, top: number, right: number, bottom: number) {\n    const [minX, maxX] = left <= right ? [left, right] : [right, left];\n    const [minY, maxY] = top <= bottom ? [top, bottom] : [bottom, top];\n    this.min = new Point(minX, minY);\n    this.max = new Point(maxX, maxY);\n  }\n\n  get width() {\n    return this.max.x - this.min.x;\n  }\n\n  set width(w: number) {\n    this.max.x = this.min.x + w;\n  }\n\n  get height() {\n    return this.max.y - this.min.y;\n  }\n\n  set height(h: number) {\n    this.max.y = this.min.y + h;\n  }\n\n  get left() {\n    return this.min.x;\n  }\n\n  set left(x: number) {\n    this.min.x = x;\n  }\n\n  get top() {\n    return this.min.y;\n  }\n\n  set top(y: number) {\n    this.min.y = y;\n  }\n\n  get right() {\n    return this.max.x;\n  }\n\n  set right(x: number) {\n    this.max.x = x;\n  }\n\n  get bottom() {\n    return this.max.y;\n  }\n\n  set bottom(y: number) {\n    this.max.y = y;\n  }\n\n  center() {\n    return new Point(\n      (this.left + this.right) / 2,\n      (this.top + this.bottom) / 2\n    );\n  }\n\n  extend_with(point: Point) {\n    this.min = Point.min(this.min, point);\n    this.max = Point.max(this.max, point);\n  }\n\n  extend_with_x(x: number) {\n    this.min.x = Math.min(this.min.x, x);\n    this.max.x = Math.max(this.max.x, x);\n  }\n\n  extend_with_y(y: number) {\n    this.min.y = Math.min(this.min.y, y);\n    this.max.y = Math.max(this.max.y, y);\n  }\n\n  equals({ min, max }: Rect) {\n    return this.min.equals(min) && this.max.equals(max);\n  }\n\n  contains({ min, max }: Rect) {\n    return this.isPointIn(min) && this.isPointIn(max);\n  }\n\n  intersects({ left, top, right, bottom }: Rect) {\n    return (\n      this.left <= right &&\n      left <= this.right &&\n      this.top <= bottom &&\n      top <= this.bottom\n    );\n  }\n\n  isPointIn({ x, y }: Point) {\n    return (\n      this.left <= x && x <= this.right && this.top <= y && y <= this.bottom\n    );\n  }\n\n  isPointDown({ x, y }: Point) {\n    return this.bottom < y && this.left <= x && this.right >= x;\n  }\n\n  isPointUp({ x, y }: Point) {\n    return y < this.top && this.left <= x && this.right >= x;\n  }\n\n  isPointLeft({ x, y }: Point) {\n    return x < this.left && this.top <= y && this.bottom >= y;\n  }\n\n  isPointRight({ x, y }: Point) {\n    return x > this.right && this.top <= y && this.bottom >= y;\n  }\n\n  intersect(other: Rect) {\n    return Rect.fromPoints(\n      Point.max(this.min, other.min),\n      Point.min(this.max, other.max)\n    );\n  }\n\n  clamp(p: Point) {\n    return Point.clamp(p, this.min, this.max);\n  }\n\n  clone() {\n    const { left, top, right, bottom } = this;\n    return new Rect(left, top, right, bottom);\n  }\n\n  toDOMRect() {\n    const { left, top, width, height } = this;\n    return new DOMRect(left, top, width, height);\n  }\n\n  static fromLTRB(left: number, top: number, right: number, bottom: number) {\n    return new Rect(left, top, right, bottom);\n  }\n\n  static fromLWTH(left: number, width: number, top: number, height: number) {\n    return new Rect(left, top, left + width, top + height);\n  }\n\n  static fromXY(x: number, y: number) {\n    return Rect.fromPoint(new Point(x, y));\n  }\n\n  static fromPoint(point: Point) {\n    return Rect.fromPoints(point.clone(), point);\n  }\n\n  static fromPoints(start: Point, end: Point) {\n    const width = Math.abs(end.x - start.x);\n    const height = Math.abs(end.y - start.y);\n    const left = Math.min(end.x, start.x);\n    const top = Math.min(end.y, start.y);\n    return Rect.fromLWTH(left, width, top, height);\n  }\n\n  static fromDOMRect({ left, top, right, bottom }: DOMRect) {\n    return Rect.fromLTRB(left, top, right, bottom);\n  }\n\n  static fromDOM(dom: Element) {\n    return Rect.fromDOMRect(dom.getBoundingClientRect());\n  }\n}\n", "import { BLOCK_ID_ATTR, SCROLL_THRESHOLD } from '@blocksuite/global/config';\nimport {\n  assertExists,\n  caretRangeFromPoint,\n  matchFlavours,\n  nonTextBlock,\n} from '@blocksuite/global/utils';\nimport type { PointerEventState } from '@blocksuite/lit';\nimport type { BaseBlockModel, Page } from '@blocksuite/store';\nimport { getTextNodesFromElement, type VirgoLine } from '@blocksuite/virgo';\n\nimport type { FrameBlockComponent } from '../../frame-block/index.js';\nimport type { DefaultPageBlockComponent } from '../../page-block/default/default-page-block.js';\nimport { asyncFocusRichText } from './common-operations.js';\nimport {\n  type BlockComponentElement,\n  getBlockElementByModel,\n  getDefaultPage,\n  getElementFromEventTarget,\n  getModelByElement,\n  getModelsByRange,\n  getNextBlock,\n  getPageBlock,\n  getPreviousBlock,\n} from './query.js';\nimport { Rect } from './rect.js';\nimport type { IPoint, SelectionPosition } from './types.js';\n\n// /[\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}]/u\nconst notStrictCharacterReg = /[^\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}\\p{Join_C}]/u;\nconst notStrictCharacterAndSpaceReg =\n  /[^\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}\\p{Join_C}\\s]/u;\n\nfunction setStartRange(editableContainer: Element) {\n  const newRange = document.createRange();\n  let firstNode = editableContainer.firstChild;\n  while (firstNode?.firstChild) {\n    firstNode = firstNode.firstChild;\n  }\n  if (firstNode) {\n    newRange.setStart(firstNode, 0);\n    newRange.setEnd(firstNode, 0);\n  }\n  return newRange;\n}\n\nfunction setEndRange(editableContainer: Element) {\n  const newRange = document.createRange();\n  let lastNode = editableContainer.lastChild;\n  while (lastNode?.lastChild) {\n    lastNode = lastNode.lastChild;\n  }\n  if (lastNode) {\n    newRange.setStart(lastNode, lastNode.textContent?.length || 0);\n    newRange.setEnd(lastNode, lastNode.textContent?.length || 0);\n  }\n  return newRange;\n}\n\nasync function setNewTop(y: number, editableContainer: Element, zoom = 1) {\n  const scrollContainer = editableContainer.closest('.affine-default-viewport');\n  const { top, bottom } = Rect.fromDOM(editableContainer);\n  const { clientHeight } = document.documentElement;\n  const lineHeight =\n    (Number(\n      window.getComputedStyle(editableContainer).lineHeight.replace(/\\D+$/, '')\n    ) || 16) * zoom;\n\n  const compare = bottom < y;\n  switch (compare) {\n    case true: {\n      let finalBottom = bottom;\n      if (bottom < SCROLL_THRESHOLD && scrollContainer) {\n        scrollContainer.scrollTop =\n          scrollContainer.scrollTop - SCROLL_THRESHOLD + bottom;\n        // set scroll may have an animation, wait for over\n        requestAnimationFrame(() => {\n          finalBottom = editableContainer.getBoundingClientRect().bottom;\n        });\n      }\n      return finalBottom - lineHeight / 2;\n    }\n    case false: {\n      let finalTop = top;\n      if (scrollContainer && top > clientHeight - SCROLL_THRESHOLD) {\n        scrollContainer.scrollTop =\n          scrollContainer.scrollTop + (top + SCROLL_THRESHOLD - clientHeight);\n        // set scroll may has a animation, wait for over\n        requestAnimationFrame(() => {\n          finalTop = editableContainer.getBoundingClientRect().top;\n        });\n      }\n      return finalTop + lineHeight / 2;\n    }\n  }\n}\n\n/**\n * As the title is a text area, this function does not yet have support for `SelectionPosition`.\n */\nexport function focusTitle(page: Page, index = Infinity, len = 0) {\n  // TODO support SelectionPosition\n  const pageComponent = getDefaultPage(page);\n  if (!pageComponent) {\n    throw new Error(\"Can't find page component!\");\n  }\n  if (!pageComponent.titleVEditor) {\n    throw new Error(\"Can't find title vEditor!\");\n  }\n  if (index > pageComponent.titleVEditor.yText.length) {\n    index = pageComponent.titleVEditor.yText.length;\n  }\n  pageComponent.titleVEditor.setVRange({ index, length: len });\n}\n\nexport async function focusRichText(\n  editableContainer: Element,\n  position: SelectionPosition = 'end',\n  zoom = 1\n) {\n  // TODO optimize how get scroll container\n  const { left, right } = Rect.fromDOM(editableContainer);\n  editableContainer\n    .querySelector<VirgoLine>('v-line')\n    ?.scrollIntoView({ block: 'nearest' });\n  let range: Range | null = null;\n  switch (position) {\n    case 'start':\n      range = setStartRange(editableContainer);\n      break;\n    case 'end':\n      range = setEndRange(editableContainer);\n      break;\n    default: {\n      const { x, y } = position;\n      let newLeft = x;\n      const newTop = await setNewTop(y, editableContainer, zoom);\n      if (x <= left) {\n        newLeft = left + 1;\n      }\n      if (x >= right) {\n        newLeft = right - 1;\n      }\n      range = caretRangeFromPoint(newLeft, newTop);\n      break;\n    }\n  }\n  resetNativeSelection(range);\n}\n\nexport function focusBlockByModel(\n  model: BaseBlockModel,\n  position: SelectionPosition = 'end',\n  zoom = 1\n) {\n  if (matchFlavours(model, ['affine:frame', 'affine:page'])) {\n    throw new Error(\"Can't focus frame or page!\");\n  }\n\n  const pageBlock = getPageBlock(model) as DefaultPageBlockComponent;\n  assertExists(pageBlock);\n  const isPageMode = pageBlock.tagName === 'AFFINE-DEFAULT-PAGE';\n\n  // If focus on a follow block, we should select the block\n  if (\n    isPageMode &&\n    matchFlavours(model, [\n      'affine:embed',\n      'affine:divider',\n      'affine:code',\n      'affine:database',\n      'affine:bookmark',\n    ])\n  ) {\n    pageBlock.selection.state.clearSelection();\n    const rect = getBlockElementByModel(model)?.getBoundingClientRect();\n    rect && pageBlock.slots.selectedRectsUpdated.emit([rect]);\n    const element = getBlockElementByModel(model);\n    assertExists(element);\n    pageBlock.selection.state.selectedBlocks.push(element);\n    if (matchFlavours(model, ['affine:database'])) {\n      const elements = model.children\n        .map(child => getBlockElementByModel(child))\n        .filter(\n          (element): element is BlockComponentElement => element !== null\n        );\n      pageBlock.selection.state.selectedBlocks.push(...elements);\n    }\n    pageBlock.selection.state.type = 'block';\n    resetNativeSelection(null);\n    (document.activeElement as HTMLTextAreaElement).blur();\n    return;\n  }\n  const element = getBlockElementByModel(model);\n  const editableContainer = element?.querySelector('[contenteditable]');\n  if (editableContainer) {\n    if (isPageMode) {\n      pageBlock.selection.state.clearSelection();\n      pageBlock.selection.setFocusedBlock(element as Element);\n    }\n    focusRichText(editableContainer, position, zoom);\n  }\n}\n\nexport function focusPreviousBlock(\n  model: BaseBlockModel,\n  position: SelectionPosition = 'start',\n  zoom = 1\n) {\n  const pageBlock = getPageBlock(model) as DefaultPageBlockComponent;\n  assertExists(pageBlock);\n\n  let nextPosition = position;\n  if (pageBlock.tagName === 'AFFINE-DEFAULT-PAGE') {\n    if (nextPosition) {\n      pageBlock.lastSelectionPosition = nextPosition;\n    } else if (pageBlock.lastSelectionPosition) {\n      nextPosition = pageBlock.lastSelectionPosition;\n    }\n  }\n\n  const preNodeModel = getPreviousBlock(model);\n  if (preNodeModel && nextPosition) {\n    focusBlockByModel(preNodeModel, nextPosition, zoom);\n  }\n}\n\nexport function focusNextBlock(\n  model: BaseBlockModel,\n  position: SelectionPosition = 'start',\n  zoom = 1\n) {\n  const pageBlock = getPageBlock(model) as DefaultPageBlockComponent;\n  assertExists(pageBlock);\n\n  let nextPosition = position;\n  if (pageBlock.tagName === 'AFFINE-DEFAULT-PAGE') {\n    if (nextPosition) {\n      pageBlock.lastSelectionPosition = nextPosition;\n    } else if (pageBlock.lastSelectionPosition) {\n      nextPosition = pageBlock.lastSelectionPosition;\n    }\n  }\n\n  const nextNodeModel = getNextBlock(model);\n  if (nextNodeModel) {\n    focusBlockByModel(nextNodeModel, nextPosition, zoom);\n  }\n}\n\nexport function resetNativeSelection(range: Range | null) {\n  const selection = window.getSelection();\n  assertExists(selection);\n  selection.removeAllRanges();\n  range && selection.addRange(range);\n}\n\nexport function clearSelection(page: Page) {\n  if (!page.root) return;\n  getPageBlock(page.root)?.selection.clear();\n}\n\n/**\n * Return true if has native selection in the document.\n *\n * @example\n * ```ts\n * const isNativeSelection = hasNativeSelection();\n * if (isNativeSelection) {\n *   // do something\n * }\n * ```\n */\nexport function hasNativeSelection() {\n  const selection = window.getSelection();\n  if (!selection) return false;\n\n  // The `selection.rangeCount` attribute must return 0\n  // if this is empty or either focus or anchor is not in the document tree,\n  // and must return 1 otherwise.\n  return !!selection.rangeCount;\n}\n\nexport function isCollapsedNativeSelection() {\n  const selection = window.getSelection();\n  if (!selection) return false;\n  return selection.isCollapsed;\n}\n\nexport function isRangeNativeSelection() {\n  const selection = window.getSelection();\n  if (!selection) return false;\n  return !selection.isCollapsed;\n}\n\n/**\n * Determine if the range contains multiple block.\n *\n * Please check the difference between {@link isMultiLineRange} before use this function\n */\nexport function isMultiBlockRange(range = getCurrentNativeRange()) {\n  return getModelsByRange(range).length > 1;\n}\n\n/**\n * Determine if the range contains multiple lines.\n *\n * Note that this function is very similar to {@link isMultiBlockRange},\n * but they are slightly different.\n *\n * Consider the following scenarios:\n * One block contains multiple lines,\n * if you select multiple lines of text under this block,\n * this function will return true,\n * but {@link isMultiBlockRange} will return false.\n */\nexport function isMultiLineRange(range = getCurrentNativeRange()) {\n  // Get the selection height\n  const { height } = range.getBoundingClientRect();\n\n  const oneLineRange = document.createRange();\n  oneLineRange.setStart(range.startContainer, range.startOffset);\n  // Get the base line height\n  const { height: oneLineHeight } = oneLineRange.getBoundingClientRect();\n  return height > oneLineHeight;\n}\n\nexport function getCurrentNativeRange(selection = window.getSelection()) {\n  // When called on an <iframe> that is not displayed (e.g., where display: none is set) Firefox will return null\n  // See https://developer.mozilla.org/en-US/docs/Web/API/Window/getSelection for more details\n  if (!selection) {\n    throw new Error('Failed to get current range, selection is null');\n  }\n  // Before the user has clicked a freshly loaded page, the rangeCount is 0.\n  // The rangeCount will usually be 1.\n  // But scripting can be used to make the selection contain more than one range.\n  // See https://developer.mozilla.org/en-US/docs/Web/API/Selection/rangeCount for more details.\n  if (selection.rangeCount === 0) {\n    throw new Error('Failed to get current range, rangeCount is 0');\n  }\n  if (selection.rangeCount > 1) {\n    console.warn('getCurrentRange may be wrong, rangeCount > 1');\n  }\n  return selection.getRangeAt(0);\n}\n\nfunction handleInFrameDragMove(\n  startContainer: Node,\n  startOffset: number,\n  endContainer: Node,\n  endOffset: number,\n  currentRange: Range,\n  isBackward: boolean\n) {\n  if (isBackward) {\n    currentRange.setEnd(endContainer, endOffset);\n  } else {\n    currentRange.setStart(startContainer, startOffset);\n  }\n  resetNativeSelection(currentRange);\n}\n\nexport function handleNativeRangeDragMove(\n  startRange: Range | null,\n  e: PointerEventState\n) {\n  const isEdgelessMode = !!document.querySelector('affine-edgeless-page');\n  const { clientX: x, clientY: y, target } = e.raw;\n\n  // Range from current mouse position\n  let currentRange = caretRangeFromPoint(x, y);\n  if (!currentRange) return;\n\n  assertExists(startRange);\n  const { startContainer, startOffset, endContainer, endOffset } = startRange;\n  const _startContainer = (\n    startContainer.nodeType === Node.TEXT_NODE\n      ? startContainer.parentElement\n      : startContainer\n  ) as HTMLElement;\n  const startFrame = _startContainer.closest('affine-frame');\n  if (!startFrame) return;\n\n  let currentFrame: FrameBlockComponent | null | undefined = null;\n  let shouldUpdateCurrentRange = false;\n\n  if (isEdgelessMode) {\n    currentFrame = startFrame;\n    shouldUpdateCurrentRange = true;\n  } else {\n    const el = document.elementFromPoint(x, y);\n    if (el?.classList.contains('virgo-editor')) {\n      return;\n    }\n    currentFrame = el?.closest('affine-frame');\n    const currentEditor = el?.closest('.virgo-editor');\n    // if we are not pointing at an editor, we should update the current range\n    // if we are not even pointing at a frame, we should find one and update the current range\n    shouldUpdateCurrentRange = !currentFrame || !currentEditor;\n    currentFrame ??= getClosestFrame(y);\n  }\n  if (!currentFrame) return;\n\n  if (shouldUpdateCurrentRange) {\n    let closestEditor: Element | null = null;\n    // In some cases, the target element may be HTMLDocument.\n    if (target && 'closest' in target) {\n      closestEditor = (target as HTMLElement).closest('.virgo-editor');\n    }\n    if (!closestEditor) {\n      closestEditor = getClosestEditor(y, currentFrame);\n    }\n    if (!closestEditor) return;\n\n    const newPoint = normalizePointIntoContainer({ x, y }, closestEditor);\n    currentRange = caretRangeFromPoint(newPoint.x, newPoint.y);\n    if (!currentRange) return;\n    if (currentRange.endContainer.nodeType !== Node.TEXT_NODE) return;\n    if (!currentFrame.contains(currentRange.endContainer)) return;\n  }\n\n  // Forward: ↓ →, Backward: ← ↑\n  const isBackward = currentRange.comparePoint(endContainer, endOffset) === 1;\n  handleInFrameDragMove(\n    startContainer,\n    startOffset,\n    endContainer,\n    endOffset,\n    currentRange,\n    isBackward\n  );\n}\n\n/**\n * This function is used to normalize the point into the reasonable range of the container.\n *\n * It will set the point to the top-left or bottom-right corner\n * when the point is out of the horizontal range of container.\n */\nfunction normalizePointIntoContainer(point: IPoint, container: Element) {\n  const { top, left, right, bottom } = container.getBoundingClientRect();\n  const newPoint = { ...point };\n  const { x, y } = point;\n\n  // need this offset to avoid the point is out of the container\n  if (y < top) {\n    newPoint.y = top + 4;\n    newPoint.x = left + 4;\n  } else if (y > bottom) {\n    newPoint.y = bottom - 4;\n    newPoint.x = right - 4;\n  } else {\n    if (x < left) {\n      newPoint.x = left;\n    } else if (x > right) {\n      newPoint.x = right;\n    }\n  }\n\n  return newPoint;\n}\n\nexport function isBlankArea(e: PointerEventState) {\n  const { cursor } = window.getComputedStyle(e.raw.target as Element);\n  return cursor !== 'text';\n}\n\n// Retarget selection back to the nearest block\n// when user clicks on the edge of page (page mode) or frame (edgeless mode).\n// See https://github.com/toeverything/blocksuite/pull/878\nfunction retargetClick(\n  page: Page,\n  e: PointerEventState,\n  container?: HTMLElement\n) {\n  const targetElement = getElementFromEventTarget(e.raw.target);\n  const block = targetElement?.closest(`[${BLOCK_ID_ATTR}]`) as {\n    model?: BaseBlockModel;\n    pageModel?: BaseBlockModel;\n  } | null;\n  const parentModel = block?.model || block?.pageModel;\n  if (!parentModel) return;\n\n  const shouldRetarget = matchFlavours(parentModel, [\n    'affine:frame',\n    'affine:page',\n  ]);\n  if (!shouldRetarget) return;\n\n  const { clientX, clientY } = e.raw;\n\n  const horizontalElement = getClosestEditor(clientY, container);\n  if (horizontalElement?.closest('affine-database')) return;\n  if (!horizontalElement) return;\n\n  const model = getModelByElement(horizontalElement);\n  const rect = horizontalElement.getBoundingClientRect();\n  if (matchFlavours(model, nonTextBlock) && clientY > rect.bottom) {\n    const parent = page.getParent(model);\n    assertExists(parent);\n    const id = page.addBlock('affine:paragraph', {}, parent.id);\n    asyncFocusRichText(page, id);\n    return;\n  }\n\n  if (clientX < rect.left) {\n    const range = setStartRange(horizontalElement);\n    resetNativeSelection(range);\n  } else {\n    const range = setEndRange(horizontalElement);\n    resetNativeSelection(range);\n  }\n}\n\nexport function handleNativeRangeClick(\n  page: Page,\n  e: PointerEventState,\n  container?: HTMLElement\n) {\n  // if not left click\n  if (e.button) return;\n\n  handleNativeRangeAtPoint(e.raw.clientX, e.raw.clientY);\n\n  retargetClick(page, e, container);\n}\n\nexport function handleNativeRangeAtPoint(x: number, y: number) {\n  const range = caretRangeFromPoint(x, y);\n  const startContainer = range?.startContainer;\n  // click on rich text\n  if (startContainer instanceof Node) {\n    resetNativeSelection(range);\n  }\n}\n\nexport function handleNativeRangeDblClick() {\n  const selection = window.getSelection();\n  if (selection && selection.isCollapsed && selection.anchorNode) {\n    const editableContainer =\n      selection.anchorNode.parentElement?.closest('[contenteditable]');\n    if (editableContainer) {\n      return expandRangeByCharacter(selection, editableContainer);\n    }\n    return null;\n  }\n  return null;\n}\n\nfunction expandRangeByCharacter(selection: Selection, editableContainer: Node) {\n  const leafNodes = leftFirstSearchLeafNodes(editableContainer);\n  if (!leafNodes.length) {\n    return null;\n  }\n  const [newRange, currentChar, currentNodeIndex] = getNewRangeForDblClick(\n    leafNodes,\n    selection\n  );\n  // try select range by segmenter\n  const extendRange = trySelectBySegmenter(\n    selection,\n    newRange,\n    currentChar,\n    leafNodes,\n    currentNodeIndex\n  );\n\n  // don't mutate selection if it's not changed\n  if (extendRange) {\n    resetNativeSelection(extendRange);\n  }\n\n  return extendRange;\n}\n\nfunction getNewStartAndEndForDblClick(\n  currentNodeIndex: number,\n  leafNodes: Text[],\n  selection: Selection,\n  checkReg: RegExp\n) {\n  let newStartNode = leafNodes[0];\n  let newStartOffset = 0;\n  let newEndNode = leafNodes[leafNodes.length - 1];\n  let newEndOffset = newEndNode.textContent?.length || 0;\n  // get startNode and startOffset\n  for (let i = currentNodeIndex; i >= 0; i--) {\n    const node = leafNodes[i];\n    if (node instanceof Text) {\n      const text = node.textContent?.slice(\n        0,\n        i === currentNodeIndex ? selection.anchorOffset : undefined\n      );\n      if (text) {\n        const reverseText = Array.from(text).reverse().join('');\n        const index = reverseText.search(checkReg);\n        if (index !== -1) {\n          newStartNode = node;\n          newStartOffset = reverseText.length - index;\n          break;\n        }\n      }\n    }\n  }\n  // get endNode and endOffset\n  for (let j = currentNodeIndex; j < leafNodes.length; j++) {\n    const node = leafNodes[j];\n    if (node instanceof Text) {\n      const text = node.textContent?.slice(\n        j === currentNodeIndex ? selection.anchorOffset : undefined\n      );\n      if (text) {\n        const index = text.search(checkReg);\n        if (index !== -1) {\n          newEndNode = node;\n          newEndOffset =\n            j === currentNodeIndex ? selection.anchorOffset + index : index;\n          break;\n        }\n      }\n    }\n  }\n  return [newStartNode, newStartOffset, newEndNode, newEndOffset] as const;\n}\n\nfunction getNewRangeForDblClick(leafNodes: Text[], selection: Selection) {\n  let startNode = leafNodes[0];\n  let startOffset = 0;\n  let endNode = leafNodes[leafNodes.length - 1];\n  let endOffset = endNode.textContent?.length || 0;\n  // if anchorNode is Element, it always has only one child\n  const currentTextNode =\n    selection.anchorNode instanceof Element\n      ? selection.anchorNode.firstChild\n      : selection.anchorNode;\n  const currentChar =\n    currentTextNode?.textContent?.[selection.anchorOffset] || '';\n  const currentNodeIndex = leafNodes.findIndex(\n    node => node === currentTextNode\n  );\n  // if current char is not character or blank, select this char\n  if (\n    currentChar &&\n    notStrictCharacterAndSpaceReg.test(currentChar) &&\n    currentTextNode\n  ) {\n    startNode = currentTextNode as Text;\n    endNode = currentTextNode as Text;\n    startOffset = selection.anchorOffset;\n    endOffset = selection.anchorOffset + 1;\n  } else {\n    // expand selection to blank\n    let checkReg = notStrictCharacterReg;\n    // space only spend one char\n    if (/\\s/.test(currentChar)) {\n      checkReg = /\\S/;\n    }\n    // English character only expand English\n    if (/\\w/.test(currentChar)) {\n      checkReg = /\\W/;\n    }\n    const [newStartNode, newStartOffset, newEndNode, newEndOffset] =\n      getNewStartAndEndForDblClick(\n        currentNodeIndex,\n        leafNodes,\n        selection,\n        checkReg\n      );\n    startNode = newStartNode;\n    startOffset = newStartOffset;\n    endNode = newEndNode;\n    endOffset = newEndOffset;\n  }\n  const newRange = document.createRange();\n  newRange.setStart(startNode, startOffset);\n  newRange.setEnd(endNode, endOffset);\n  return [newRange, currentChar, currentNodeIndex] as const;\n}\n\nfunction trySelectBySegmenter(\n  selection: Selection,\n  newRange: Range,\n  currentChar: string,\n  leafNodes: Array<Node>,\n  currentNodeIndex: number\n) {\n  if (\n    Intl.Segmenter &&\n    !notStrictCharacterAndSpaceReg.test(currentChar) &&\n    !/\\w/.test(currentChar)\n  ) {\n    const [currentCharIndex, wordText] = getCurrentCharIndex(\n      newRange,\n      leafNodes,\n      selection,\n      currentChar\n    );\n    if (currentCharIndex === -1 || currentNodeIndex === -1) return null;\n\n    // length for expand left\n    let leftLength = currentCharIndex;\n    // length for expand right\n    let rightLength = wordText.length - currentCharIndex;\n    // get and set new start node and offset\n    for (let i = currentNodeIndex; i >= 0; i--) {\n      const leafNode = leafNodes[i];\n      const allTextLength =\n        i === currentNodeIndex\n          ? selection.anchorOffset\n          : leafNode.textContent?.length || 0;\n      if (leftLength <= allTextLength) {\n        newRange.setStart(leafNode, allTextLength - leftLength);\n        break;\n      } else {\n        leftLength = leftLength - allTextLength;\n      }\n    }\n    // get and set new end node and offset\n    for (let i = currentNodeIndex; i < leafNodes.length; i++) {\n      const leafNode = leafNodes[i];\n      const textLength = leafNode.textContent?.length || 0;\n      const allTextLength =\n        i === currentNodeIndex\n          ? textLength - selection.anchorOffset\n          : textLength;\n      if (rightLength <= allTextLength) {\n        newRange.setEnd(leafNode, textLength - allTextLength + rightLength);\n        break;\n      } else {\n        rightLength = rightLength - allTextLength;\n      }\n    }\n  }\n  return newRange;\n}\n\nfunction getCurrentCharIndex(\n  newRange: Range,\n  leafNodes: Array<Node>,\n  selection: Selection,\n  currentChar: string\n) {\n  const rangeString = newRange.toString();\n  // check all languages words\n  const segmenter = new Intl.Segmenter([], { granularity: 'word' });\n  const wordsIterator = segmenter.segment(rangeString)[Symbol.iterator]();\n  const words = Array.from(wordsIterator);\n\n  if (words.length === 0) {\n    return [-1, ''] as const;\n  }\n\n  let absoluteOffset = 0;\n  let started = false;\n  // get absolute offset of current cursor\n  for (let i = 0; i < leafNodes.length; i++) {\n    const leafNode = leafNodes[i];\n    if (started || leafNode === newRange.startContainer) {\n      started = true;\n      if (leafNode !== selection.anchorNode) {\n        absoluteOffset = absoluteOffset + (leafNode.textContent?.length || 0);\n      } else {\n        absoluteOffset =\n          absoluteOffset + selection.anchorOffset - newRange.startOffset;\n        break;\n      }\n    }\n  }\n  let wordText = words[words.length - 1].segment;\n  // get word text of current cursor\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n    if (absoluteOffset === word.index) {\n      wordText = word.segment;\n      break;\n    }\n    if (absoluteOffset < word.index) {\n      wordText = words[i - 1].segment;\n      break;\n    }\n  }\n  const currentCharIndex = wordText.indexOf(currentChar);\n  return [currentCharIndex, wordText] as const;\n}\n\n/**\n * left first search all leaf text nodes\n * @example\n *  <div><p>he<em>ll</em>o</p><p>world</p></div>\n *  => [he, ll, o, world]\n **/\nexport function leftFirstSearchLeafNodes(node: Node, leafNodes: Node[] = []) {\n  if (node.nodeType === Node.TEXT_NODE) {\n    leafNodes.push(node);\n  } else {\n    const children = node.childNodes;\n    for (let i = 0; i < children.length; i++) {\n      leftFirstSearchLeafNodes(children[i], leafNodes);\n    }\n  }\n  return leafNodes as Text[];\n}\n\nexport function getLastTextNode(node: Node) {\n  return leftFirstSearchLeafNodes(node).pop();\n}\n\nexport function getFirstTextNode(node: Node) {\n  return leftFirstSearchLeafNodes(node)[0];\n}\n\nexport function getSplicedTitle(title: HTMLTextAreaElement) {\n  const text = [...title.value];\n  assertExists(title.selectionStart);\n  assertExists(title.selectionEnd);\n  text.splice(title.selectionStart, title.selectionEnd - title.selectionStart);\n  return text.join('');\n}\n\nexport function isEmbed(e: PointerEventState) {\n  if ((e.raw.target as HTMLElement).classList.contains('resize')) {\n    return true;\n  }\n  return false;\n}\n\nexport function isDatabase(e: PointerEventState) {\n  const target = e.raw.target;\n  if (!(target instanceof HTMLElement)) {\n    // When user click on the list indicator,\n    // the target is not an `HTMLElement`, instead `SVGElement`.\n    return false;\n  }\n  if (\n    // target.className.startsWith('affine-database') ||\n    // // prevent select column from triggering block selection\n    // target.tagName.startsWith('AFFINE-DATABASE')\n    target.closest('affine-database-table')\n  ) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Get the closest element in the horizontal position\n */\nexport function getHorizontalClosestElement<\n  K extends keyof HTMLElementTagNameMap\n>(\n  clientY: number,\n  selectors: K,\n  container?: Element\n): HTMLElementTagNameMap[K] | null;\nexport function getHorizontalClosestElement<\n  K extends keyof SVGElementTagNameMap\n>(\n  clientY: number,\n  selectors: K,\n  container?: Element\n): SVGElementTagNameMap[K] | null;\nexport function getHorizontalClosestElement<E extends Element = Element>(\n  clientY: number,\n  selectors: string,\n  container?: Element\n): E | null;\nexport function getHorizontalClosestElement(\n  clientY: number,\n  selector: string,\n  container: Element = document.body\n) {\n  // sort for binary search (In fact, it is generally orderly, just in case)\n  const elements = Array.from(container.querySelectorAll(selector)).sort(\n    (a, b) =>\n      // getBoundingClientRect here actually run so fast because of the browser cache\n      a.getBoundingClientRect().top > b.getBoundingClientRect().top ? 1 : -1\n  );\n  // short circuit\n  const len = elements.length;\n  if (len === 0) return null;\n  if (len === 1) return elements[0];\n\n  if (clientY < elements[0].getBoundingClientRect().top) return elements[0];\n  if (clientY > elements[len - 1].getBoundingClientRect().bottom)\n    return elements[len - 1];\n\n  // binary search\n  let left = 0;\n  let right = len - 1;\n  while (left <= right) {\n    const mid = Math.floor((left + right) / 2);\n    const minElement = elements[mid];\n    if (\n      clientY <= minElement.getBoundingClientRect().bottom &&\n      (mid === 0 || clientY > elements[mid - 1].getBoundingClientRect().bottom)\n    ) {\n      return elements[mid];\n    }\n    if (minElement.getBoundingClientRect().top > clientY) {\n      right = mid - 1;\n    } else {\n      left = mid + 1;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Get the closest editor element in the horizontal position\n */\nexport function getClosestEditor(clientY: number, container = document.body) {\n  return getHorizontalClosestElement(clientY, '.virgo-editor', container);\n}\n\n/**\n * Get the closest frame element in the horizontal position\n */\nexport function getClosestFrame(clientY: number) {\n  return getHorizontalClosestElement(clientY, 'affine-frame');\n}\n\n/**\n * Handle native range with triple click.\n */\nexport function handleNativeRangeTripleClick(e: PointerEventState) {\n  const {\n    raw: { clientX, clientY },\n  } = e;\n  const editor = document\n    .elementFromPoint(clientX, clientY)\n    ?.closest('.virgo-editor');\n\n  if (!editor) return null;\n\n  const textNodes = getTextNodesFromElement(editor);\n  const first = textNodes[0];\n  const last = textNodes[textNodes.length - 1];\n  const range = new Range();\n  range.setStart(first, 0);\n  range.setEnd(last, Number(last.textContent?.length));\n  resetNativeSelection(range);\n  return range;\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\nimport {Constructor, ClassDescriptor} from './base.js';\n\n/**\n * Allow for custom element classes with private constructors\n */\ntype CustomElementClass = Omit<typeof HTMLElement, 'new'>;\n\nconst legacyCustomElement = (tagName: string, clazz: CustomElementClass) => {\n  customElements.define(tagName, clazz as CustomElementConstructor);\n  // Cast as any because TS doesn't recognize the return type as being a\n  // subtype of the decorated class when clazz is typed as\n  // `Constructor<HTMLElement>` for some reason.\n  // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n  // applied to elements however.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return clazz as any;\n};\n\nconst standardCustomElement = (\n  tagName: string,\n  descriptor: ClassDescriptor\n) => {\n  const {kind, elements} = descriptor;\n  return {\n    kind,\n    elements,\n    // This callback is called once the class is otherwise fully defined\n    finisher(clazz: Constructor<HTMLElement>) {\n      customElements.define(tagName, clazz);\n    },\n  };\n};\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * ```js\n * @customElement('my-element')\n * class MyElement extends LitElement {\n *   render() {\n *     return html``;\n *   }\n * }\n * ```\n * @category Decorator\n * @param tagName The tag name of the custom element to define.\n */\nexport const customElement =\n  (tagName: string) =>\n  (classOrDescriptor: CustomElementClass | ClassDescriptor) =>\n    typeof classOrDescriptor === 'function'\n      ? legacyCustomElement(tagName, classOrDescriptor)\n      : standardCustomElement(tagName, classOrDescriptor as ClassDescriptor);\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\nimport {PropertyDeclaration, ReactiveElement} from '../reactive-element.js';\nimport {ClassElement} from './base.js';\n\nconst standardProperty = (\n  options: PropertyDeclaration,\n  element: ClassElement\n) => {\n  // When decorating an accessor, pass it through and add property metadata.\n  // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n  // stomp over the user's accessor.\n  if (\n    element.kind === 'method' &&\n    element.descriptor &&\n    !('value' in element.descriptor)\n  ) {\n    return {\n      ...element,\n      finisher(clazz: typeof ReactiveElement) {\n        clazz.createProperty(element.key, options);\n      },\n    };\n  } else {\n    // createProperty() takes care of defining the property, but we still\n    // must return some kind of descriptor, so return a descriptor for an\n    // unused prototype field. The finisher calls createProperty().\n    return {\n      kind: 'field',\n      key: Symbol(),\n      placement: 'own',\n      descriptor: {},\n      // store the original key so subsequent decorators have access to it.\n      originalKey: element.key,\n      // When @babel/plugin-proposal-decorators implements initializers,\n      // do this instead of the initializer below. See:\n      // https://github.com/babel/babel/issues/9260 extras: [\n      //   {\n      //     kind: 'initializer',\n      //     placement: 'own',\n      //     initializer: descriptor.initializer,\n      //   }\n      // ],\n      initializer(this: {[key: string]: unknown}) {\n        if (typeof element.initializer === 'function') {\n          this[element.key as string] = element.initializer.call(this);\n        }\n      },\n      finisher(clazz: typeof ReactiveElement) {\n        clazz.createProperty(element.key, options);\n      },\n    };\n  }\n};\n\nconst legacyProperty = (\n  options: PropertyDeclaration,\n  proto: Object,\n  name: PropertyKey\n) => {\n  (proto.constructor as typeof ReactiveElement).createProperty(name, options);\n};\n\n/**\n * A property decorator which creates a reactive property that reflects a\n * corresponding attribute value. When a decorated property is set\n * the element will update and render. A {@linkcode PropertyDeclaration} may\n * optionally be supplied to configure property features.\n *\n * This decorator should only be used for public fields. As public fields,\n * properties should be considered as primarily settable by element users,\n * either via attribute or the property itself.\n *\n * Generally, properties that are changed by the element should be private or\n * protected fields and should use the {@linkcode state} decorator.\n *\n * However, sometimes element code does need to set a public property. This\n * should typically only be done in response to user interaction, and an event\n * should be fired informing the user; for example, a checkbox sets its\n * `checked` property when clicked and fires a `changed` event. Mutating public\n * properties should typically not be done for non-primitive (object or array)\n * properties. In other cases when an element needs to manage state, a private\n * property decorated via the {@linkcode state} decorator should be used. When\n * needed, state properties can be initialized via public properties to\n * facilitate complex interactions.\n *\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return (protoOrDescriptor: Object | ClassElement, name?: PropertyKey): any =>\n    name !== undefined\n      ? legacyProperty(options!, protoOrDescriptor as Object, name)\n      : standardProperty(options!, protoOrDescriptor as ClassElement);\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {property} from './property.js';\n\nexport interface InternalPropertyDeclaration<Type = unknown> {\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n}\n\n/**\n * Declares a private or protected reactive property that still triggers\n * updates to the element when it changes. It does not reflect from the\n * corresponding attribute.\n *\n * Properties declared this way must not be used from HTML or HTML templating\n * systems, they're solely for properties internal to the element. These\n * properties may be renamed by optimization tools like closure compiler.\n * @category Decorator\n */\nexport function state(options?: InternalPropertyDeclaration) {\n  return property({\n    ...options,\n    state: true,\n  });\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {ReactiveElement} from '../reactive-element.js';\n\n/**\n * Generates a public interface type that removes private and protected fields.\n * This allows accepting otherwise compatible versions of the type (e.g. from\n * multiple copies of the same package in `node_modules`).\n */\nexport type Interface<T> = {\n  [K in keyof T]: T[K];\n};\n\nexport type Constructor<T> = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  new (...args: any[]): T;\n};\n\n// From the TC39 Decorators proposal\nexport interface ClassDescriptor {\n  kind: 'class';\n  elements: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => void | Constructor<T>;\n}\n\n// From the TC39 Decorators proposal\nexport interface ClassElement {\n  kind: 'field' | 'method';\n  key: PropertyKey;\n  placement: 'static' | 'prototype' | 'own';\n  initializer?: Function;\n  extras?: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => void | Constructor<T>;\n  descriptor?: PropertyDescriptor;\n}\n\nexport const legacyPrototypeMethod = (\n  descriptor: PropertyDescriptor,\n  proto: Object,\n  name: PropertyKey\n) => {\n  Object.defineProperty(proto, name, descriptor);\n};\n\nexport const standardPrototypeMethod = (\n  descriptor: PropertyDescriptor,\n  element: ClassElement\n) => ({\n  kind: 'method',\n  placement: 'prototype',\n  key: element.key,\n  descriptor,\n});\n\n/**\n * Helper for decorating a property that is compatible with both TypeScript\n * and Babel decorators. The optional `finisher` can be used to perform work on\n * the class. The optional `descriptor` should return a PropertyDescriptor\n * to install for the given property.\n *\n * @param finisher {function} Optional finisher method; receives the element\n * constructor and property key as arguments and has no return value.\n * @param descriptor {function} Optional descriptor method; receives the\n * property key as an argument and returns a property descriptor to define for\n * the given property.\n * @returns {ClassElement|void}\n */\nexport const decorateProperty =\n  ({\n    finisher,\n    descriptor,\n  }: {\n    finisher?:\n      | ((ctor: typeof ReactiveElement, property: PropertyKey) => void)\n      | null;\n    descriptor?: (property: PropertyKey) => PropertyDescriptor;\n  }) =>\n  (\n    protoOrDescriptor: Interface<ReactiveElement> | ClassElement,\n    name?: PropertyKey\n    // Note TypeScript requires the return type to be `void|any`\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): void | any => {\n    // TypeScript / Babel legacy mode\n    if (name !== undefined) {\n      const ctor = (protoOrDescriptor as ReactiveElement)\n        .constructor as typeof ReactiveElement;\n      if (descriptor !== undefined) {\n        Object.defineProperty(protoOrDescriptor, name, descriptor(name));\n      }\n      finisher?.(ctor, name!);\n      // Babel standard mode\n    } else {\n      // Note, the @property decorator saves `key` as `originalKey`\n      // so try to use it here.\n      const key =\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (protoOrDescriptor as any).originalKey ??\n        (protoOrDescriptor as ClassElement).key;\n      const info: ClassElement =\n        descriptor != undefined\n          ? {\n              kind: 'method',\n              placement: 'prototype',\n              key,\n              descriptor: descriptor((protoOrDescriptor as ClassElement).key),\n            }\n          : {...(protoOrDescriptor as ClassElement), key};\n      if (finisher != undefined) {\n        info.finisher = function <ReactiveElement>(\n          ctor: Constructor<ReactiveElement>\n        ) {\n          finisher(ctor as unknown as typeof ReactiveElement, key);\n        };\n      }\n      return info;\n    }\n  };\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {ReactiveElement} from '../reactive-element.js';\nimport {decorateProperty} from './base.js';\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n * @param cache An optional boolean which when true performs the DOM query only\n *     once and caches the result.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * ```ts\n * class MyElement {\n *   @query('#first')\n *   first: HTMLDivElement;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function query(selector: string, cache?: boolean) {\n  return decorateProperty({\n    descriptor: (name: PropertyKey) => {\n      const descriptor = {\n        get(this: ReactiveElement) {\n          return this.renderRoot?.querySelector(selector) ?? null;\n        },\n        enumerable: true,\n        configurable: true,\n      };\n      if (cache) {\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        descriptor.get = function (this: ReactiveElement) {\n          if (\n            (this as unknown as {[key: string]: Element | null})[\n              key as string\n            ] === undefined\n          ) {\n            (this as unknown as {[key: string]: Element | null})[\n              key as string\n            ] = this.renderRoot?.querySelector(selector) ?? null;\n          }\n          return (this as unknown as {[key: string]: Element | null})[\n            key as string\n          ];\n        };\n      }\n      return descriptor;\n    },\n  });\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {ReactiveElement} from '../reactive-element.js';\nimport {decorateProperty} from './base.js';\n\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n *\n * ```ts\n * class MyElement {\n *   @queryAll('div')\n *   divs: NodeListOf<HTMLDivElement>;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function queryAll(selector: string) {\n  return decorateProperty({\n    descriptor: (_name: PropertyKey) => ({\n      get(this: ReactiveElement) {\n        return this.renderRoot?.querySelectorAll(selector) ?? [];\n      },\n      enumerable: true,\n      configurable: true,\n    }),\n  });\n}\n", "/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {decorateProperty} from './base.js';\n\nimport type {ReactiveElement} from '../reactive-element.js';\nimport type {QueryAssignedNodesOptions} from './query-assigned-nodes.js';\n\nconst NODE_MODE = false;\nconst global = NODE_MODE ? globalThis : window;\n\n/**\n * A tiny module scoped polyfill for HTMLSlotElement.assignedElements.\n */\nconst slotAssignedElements =\n  global.HTMLSlotElement?.prototype.assignedElements != null\n    ? (slot: HTMLSlotElement, opts?: AssignedNodesOptions) =>\n        slot.assignedElements(opts)\n    : (slot: HTMLSlotElement, opts?: AssignedNodesOptions) =>\n        slot\n          .assignedNodes(opts)\n          .filter(\n            (node): node is Element => node.nodeType === Node.ELEMENT_NODE\n          );\n\n/**\n * Options for the {@linkcode queryAssignedElements} decorator. Extends the\n * options that can be passed into\n * [HTMLSlotElement.assignedElements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/assignedElements).\n */\nexport interface QueryAssignedElementsOptions\n  extends QueryAssignedNodesOptions {\n  /**\n   * CSS selector used to filter the elements returned. For example, a selector\n   * of `\".item\"` will only include elements with the `item` class.\n   */\n  selector?: string;\n}\n\n/**\n * A property decorator that converts a class property into a getter that\n * returns the `assignedElements` of the given `slot`. Provides a declarative\n * way to use\n * [`HTMLSlotElement.assignedElements`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/assignedElements).\n *\n * Can be passed an optional {@linkcode QueryAssignedElementsOptions} object.\n *\n * Example usage:\n * ```ts\n * class MyElement {\n *   @queryAssignedElements({ slot: 'list' })\n *   listItems!: Array<HTMLElement>;\n *   @queryAssignedElements()\n *   unnamedSlotEls!: Array<HTMLElement>;\n *\n *   render() {\n *     return html`\n *       <slot name=\"list\"></slot>\n *       <slot></slot>\n *     `;\n *   }\n * }\n * ```\n *\n * Note, the type of this property should be annotated as `Array<HTMLElement>`.\n *\n * @category Decorator\n */\nexport function queryAssignedElements(options?: QueryAssignedElementsOptions) {\n  const {slot, selector} = options ?? {};\n  return decorateProperty({\n    descriptor: (_name: PropertyKey) => ({\n      get(this: ReactiveElement) {\n        const slotSelector = `slot${slot ? `[name=${slot}]` : ':not([name])'}`;\n        const slotEl =\n          this.renderRoot?.querySelector<HTMLSlotElement>(slotSelector);\n        const elements =\n          slotEl != null ? slotAssignedElements(slotEl, options) : [];\n        if (selector) {\n          return elements.filter((node) => node.matches(selector));\n        }\n        return elements;\n      },\n      enumerable: true,\n      configurable: true,\n    }),\n  });\n}\n", "export const ZERO_WIDTH_SPACE = '\\u200B';\n// see https://en.wikipedia.org/wiki/Zero-width_non-joiner\nexport const ZERO_WIDTH_NON_JOINER = '\\u200C';\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {Disconnectable, Part} from './lit-html.js';\n\nexport {\n  AttributePart,\n  BooleanAttributePart,\n  ChildPart,\n  ElementPart,\n  EventPart,\n  Part,\n  PropertyPart,\n} from './lit-html.js';\n\nexport interface DirectiveClass {\n  new (part: PartInfo): Directive;\n}\n\n/**\n * This utility type extracts the signature of a directive class's render()\n * method so we can use it for the type of the generated directive function.\n */\nexport type DirectiveParameters<C extends Directive> = Parameters<C['render']>;\n\n/**\n * A generated directive function doesn't evaluate the directive, but just\n * returns a DirectiveResult object that captures the arguments.\n */\nexport interface DirectiveResult<C extends DirectiveClass = DirectiveClass> {\n  /**\n   * This property needs to remain unminified.\n   * @internal */\n  ['_$litDirective$']: C;\n  /** @internal */\n  values: DirectiveParameters<InstanceType<C>>;\n}\n\nexport const PartType = {\n  ATTRIBUTE: 1,\n  CHILD: 2,\n  PROPERTY: 3,\n  BOOLEAN_ATTRIBUTE: 4,\n  EVENT: 5,\n  ELEMENT: 6,\n} as const;\n\nexport type PartType = (typeof PartType)[keyof typeof PartType];\n\nexport interface ChildPartInfo {\n  readonly type: typeof PartType.CHILD;\n}\n\nexport interface AttributePartInfo {\n  readonly type:\n    | typeof PartType.ATTRIBUTE\n    | typeof PartType.PROPERTY\n    | typeof PartType.BOOLEAN_ATTRIBUTE\n    | typeof PartType.EVENT;\n  readonly strings?: ReadonlyArray<string>;\n  readonly name: string;\n  readonly tagName: string;\n}\n\nexport interface ElementPartInfo {\n  readonly type: typeof PartType.ELEMENT;\n}\n\n/**\n * Information about the part a directive is bound to.\n *\n * This is useful for checking that a directive is attached to a valid part,\n * such as with directive that can only be used on attribute bindings.\n */\nexport type PartInfo = ChildPartInfo | AttributePartInfo | ElementPartInfo;\n\n/**\n * Creates a user-facing directive function from a Directive class. This\n * function has the same parameters as the directive's render() method.\n */\nexport const directive =\n  <C extends DirectiveClass>(c: C) =>\n  (...values: DirectiveParameters<InstanceType<C>>): DirectiveResult<C> => ({\n    // This property needs to remain unminified.\n    ['_$litDirective$']: c,\n    values,\n  });\n\n/**\n * Base class for creating custom directives. Users should extend this class,\n * implement `render` and/or `update`, and then pass their subclass to\n * `directive`.\n */\nexport abstract class Directive implements Disconnectable {\n  //@internal\n  __part!: Part;\n  //@internal\n  __attributeIndex: number | undefined;\n  //@internal\n  __directive?: Directive;\n\n  //@internal\n  _$parent!: Disconnectable;\n\n  // These will only exist on the AsyncDirective subclass\n  //@internal\n  _$disconnectableChildren?: Set<Disconnectable>;\n  // This property needs to remain unminified.\n  //@internal\n  ['_$notifyDirectiveConnectionChanged']?(isConnected: boolean): void;\n\n  constructor(_partInfo: PartInfo) {}\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  /** @internal */\n  _$initialize(\n    part: Part,\n    parent: Disconnectable,\n    attributeIndex: number | undefined\n  ) {\n    this.__part = part;\n    this._$parent = parent;\n    this.__attributeIndex = attributeIndex;\n  }\n  /** @internal */\n  _$resolve(part: Part, props: Array<unknown>): unknown {\n    return this.update(part, props);\n  }\n\n  abstract render(...props: Array<unknown>): unknown;\n\n  update(_part: Part, props: Array<unknown>): unknown {\n    return this.render(...props);\n  }\n}\n", "/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {AttributePart, noChange} from '../lit-html.js';\nimport {\n  directive,\n  Directive,\n  DirectiveParameters,\n  PartInfo,\n  PartType,\n} from '../directive.js';\n\n/**\n * A key-value set of CSS properties and values.\n *\n * The key should be either a valid CSS property name string, like\n * `'background-color'`, or a valid JavaScript camel case property name\n * for CSSStyleDeclaration like `backgroundColor`.\n */\nexport interface StyleInfo {\n  [name: string]: string | number | undefined | null;\n}\n\nconst important = 'important';\n// The leading space is important\nconst importantFlag = ' !' + important;\n// How many characters to remove from a value, as a negative number\nconst flagTrim = 0 - importantFlag.length;\n\nclass StyleMapDirective extends Directive {\n  _previousStyleProperties?: Set<string>;\n\n  constructor(partInfo: PartInfo) {\n    super(partInfo);\n    if (\n      partInfo.type !== PartType.ATTRIBUTE ||\n      partInfo.name !== 'style' ||\n      (partInfo.strings?.length as number) > 2\n    ) {\n      throw new Error(\n        'The `styleMap` directive must be used in the `style` attribute ' +\n          'and must be the only part in the attribute.'\n      );\n    }\n  }\n\n  render(styleInfo: Readonly<StyleInfo>) {\n    return Object.keys(styleInfo).reduce((style, prop) => {\n      const value = styleInfo[prop];\n      if (value == null) {\n        return style;\n      }\n      // Convert property names from camel-case to dash-case, i.e.:\n      //  `backgroundColor` -> `background-color`\n      // Vendor-prefixed names need an extra `-` appended to front:\n      //  `webkitAppearance` -> `-webkit-appearance`\n      // Exception is any property name containing a dash, including\n      // custom properties; we assume these are already dash-cased i.e.:\n      //  `--my-button-color` --> `--my-button-color`\n      prop = prop.includes('-')\n        ? prop\n        : prop\n            .replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, '-$&')\n            .toLowerCase();\n      return style + `${prop}:${value};`;\n    }, '');\n  }\n\n  override update(part: AttributePart, [styleInfo]: DirectiveParameters<this>) {\n    const {style} = part.element as HTMLElement;\n\n    if (this._previousStyleProperties === undefined) {\n      this._previousStyleProperties = new Set();\n      for (const name in styleInfo) {\n        this._previousStyleProperties.add(name);\n      }\n      return this.render(styleInfo);\n    }\n\n    // Remove old properties that no longer exist in styleInfo\n    // We use forEach() instead of for-of so that re don't require down-level\n    // iteration.\n    this._previousStyleProperties!.forEach((name) => {\n      // If the name isn't in styleInfo or it's null/undefined\n      if (styleInfo[name] == null) {\n        this._previousStyleProperties!.delete(name);\n        if (name.includes('-')) {\n          style.removeProperty(name);\n        } else {\n          // Note reset using empty string (vs null) as IE11 does not always\n          // reset via null (https://developer.mozilla.org/en-US/docs/Web/API/ElementCSSInlineStyle/style#setting_styles)\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = '';\n        }\n      }\n    });\n\n    // Add or update properties\n    for (const name in styleInfo) {\n      const value = styleInfo[name];\n      if (value != null) {\n        this._previousStyleProperties.add(name);\n        const isImportant =\n          typeof value === 'string' && value.endsWith(importantFlag);\n        if (name.includes('-') || isImportant) {\n          style.setProperty(\n            name,\n            isImportant\n              ? (value as string).slice(0, flagTrim)\n              : (value as string),\n            isImportant ? important : ''\n          );\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = value;\n        }\n      }\n    }\n    return noChange;\n  }\n}\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the\n * {@link StyleInfo styleInfo} object and adds the properties to the inline\n * style of the element.\n *\n * Property names with dashes (`-`) are assumed to be valid CSS\n * property names and set on the element's style object using `setProperty()`.\n * Names without dashes are assumed to be camelCased JavaScript property names\n * and set on the element's style object using property assignment, allowing the\n * style object to translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo\n * @see {@link https://lit.dev/docs/templates/directives/#stylemap styleMap code samples on Lit.dev}\n */\nexport const styleMap = directive(StyleMapDirective);\n\n/**\n * The type of the class that powers this directive. Necessary for naming the\n * directive's return type.\n */\nexport type {StyleMapDirective};\n", "import { html } from 'lit';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport type { AttributeRenderer } from '../types.js';\nimport type { BaseTextAttributes } from './base-attributes.js';\n\nfunction virgoTextStyles(\n  props: BaseTextAttributes\n): ReturnType<typeof styleMap> {\n  let textDecorations = '';\n  if (props.underline) {\n    textDecorations += 'underline';\n  }\n  if (props.strike) {\n    textDecorations += ' line-through';\n  }\n\n  let inlineCodeStyle = {};\n  if (props.code) {\n    inlineCodeStyle = {\n      'font-family':\n        '\"SFMono-Regular\", Menlo, Consolas, \"PT Mono\", \"Liberation Mono\", Courier, monospace',\n      'line-height': 'normal',\n      background: 'rgba(135,131,120,0.15)',\n      color: '#EB5757',\n      'border-radius': '3px',\n      'font-size': '85%',\n      padding: '0.2em 0.4em',\n    };\n  }\n\n  return styleMap({\n    'word-wrap': 'break-word',\n    'white-space': 'break-spaces',\n    'font-weight': props.bold ? 'bold' : 'normal',\n    'font-style': props.italic ? 'italic' : 'normal',\n    'text-decoration': textDecorations.length > 0 ? textDecorations : 'none',\n    ...inlineCodeStyle,\n  });\n}\n\nexport const getDefaultAttributeRenderer =\n  <T extends BaseTextAttributes>(): AttributeRenderer<T> =>\n  delta => {\n    const style = delta.attributes\n      ? virgoTextStyles(delta.attributes)\n      : styleMap({});\n    return html`<span style=${style}\n      ><v-text .str=${delta.insert}></v-text\n    ></span>`;\n  };\n", "import { html, LitElement, type TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\nimport type { DeltaInsert } from '../types.js';\nimport { getDefaultAttributeRenderer } from '../utils/attribute-renderer.js';\nimport type { BaseTextAttributes } from '../utils/base-attributes.js';\n\n@customElement('v-element')\nexport class VirgoElement<\n  T extends BaseTextAttributes = BaseTextAttributes\n> extends LitElement {\n  @property({ type: Object })\n  delta: DeltaInsert<T> = {\n    insert: ZERO_WIDTH_SPACE,\n  };\n\n  @property({ type: Function, attribute: false })\n  attributeRenderer: (delta: DeltaInsert<T>) => TemplateResult<1> =\n    getDefaultAttributeRenderer<T>();\n\n  override render() {\n    // we need to avoid \\n appearing before and after the span element, which will\n    // cause the unexpected space\n    return html`<span data-virgo-element=\"true\"\n      >${this.attributeRenderer(this.delta)}</span\n    >`;\n  }\n\n  override createRenderRoot() {\n    return this;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'v-element': VirgoElement;\n  }\n}\n", "import { html, LitElement, type TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\n\n@customElement('v-line')\nexport class VirgoLine extends LitElement {\n  @property({ attribute: false })\n  elements: TemplateResult<1>[] = [];\n\n  get vElements() {\n    return Array.from(this.querySelectorAll('v-element'));\n  }\n\n  get textLength() {\n    return this.vElements.reduce((acc, el) => acc + el.delta.insert.length, 0);\n  }\n\n  override get textContent() {\n    return this.vElements.reduce((acc, el) => acc + el.delta.insert, '');\n  }\n\n  override async getUpdateComplete() {\n    const result = await super.getUpdateComplete();\n    await Promise.all(this.vElements.map(el => el.updateComplete));\n    return result;\n  }\n\n  protected override firstUpdated(): void {\n    this.style.display = 'block';\n  }\n\n  override render() {\n    if (this.elements.length === 0) {\n      return html`<div><v-text .str=${ZERO_WIDTH_SPACE}></v-text></div>`;\n    }\n\n    return html`<div>${this.elements}</div>`;\n  }\n\n  override createRenderRoot() {\n    return this;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'v-line': VirgoLine;\n  }\n}\n", "import { html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport type { DirectiveResult } from 'lit/directive.js';\nimport { styleMap, type StyleMapDirective } from 'lit/directives/style-map.js';\n\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\n\n@customElement('v-text')\nexport class VText extends LitElement {\n  @property()\n  str: string = ZERO_WIDTH_SPACE;\n\n  @property()\n  styles: DirectiveResult<typeof StyleMapDirective> = styleMap({\n    'word-wrap': 'break-word',\n    'white-space': 'break-spaces',\n  });\n\n  override render() {\n    // we need to avoid \\n appearing before and after the span element, which will\n    // cause the sync problem about the cursor position\n    return html`<span style=${this.styles} data-virgo-text=\"true\"\n      >${this.str}</span\n    >`;\n  }\n\n  override createRenderRoot() {\n    return this;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'v-text': VText;\n  }\n}\n", "import { z } from 'zod';\n\nexport const baseTextAttributes = z.object({\n  bold: z.literal(true).optional().catch(undefined),\n  italic: z.literal(true).optional().catch(undefined),\n  underline: z.literal(true).optional().catch(undefined),\n  strike: z.literal(true).optional().catch(undefined),\n  code: z.literal(true).optional().catch(undefined),\n  link: z.string().optional().catch(undefined),\n});\n// .partial();\n\nexport type BaseTextAttributes = z.infer<typeof baseTextAttributes>;\n", "import type { DeltaInsert } from '../types.js';\nimport type { BaseTextAttributes } from './base-attributes.js';\n\nexport function transformDelta<TextAttributes extends BaseTextAttributes>(\n  delta: DeltaInsert<TextAttributes>\n): (DeltaInsert<TextAttributes> | '\\n')[] {\n  const result: (DeltaInsert<TextAttributes> | '\\n')[] = [];\n\n  let tmpString = delta.insert;\n  while (tmpString.length > 0) {\n    const index = tmpString.indexOf('\\n');\n    if (index === -1) {\n      result.push({\n        insert: tmpString,\n        attributes: delta.attributes,\n      });\n      break;\n    }\n\n    if (tmpString.slice(0, index).length > 0) {\n      result.push({\n        insert: tmpString.slice(0, index),\n        attributes: delta.attributes,\n      });\n    }\n\n    result.push('\\n');\n    tmpString = tmpString.slice(index + 1);\n  }\n\n  return result;\n}\n\n/**\n * convert a delta insert array to chunks, each chunk is a line\n */\nexport function deltaInsertsToChunks<TextAttributes extends BaseTextAttributes>(\n  delta: DeltaInsert<TextAttributes>[]\n): DeltaInsert<TextAttributes>[][] {\n  if (delta.length === 0) {\n    return [[]];\n  }\n\n  const transformedDelta = delta.flatMap(transformDelta);\n\n  function* chunksGenerator(arr: (DeltaInsert<TextAttributes> | '\\n')[]) {\n    let start = 0;\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i] === '\\n') {\n        const chunk = arr.slice(start, i);\n        start = i + 1;\n        yield chunk as DeltaInsert<TextAttributes>[];\n      } else if (i === arr.length - 1) {\n        yield arr.slice(start) as DeltaInsert<TextAttributes>[];\n      }\n    }\n\n    if (arr.at(-1) === '\\n') {\n      yield [];\n    }\n  }\n\n  return [...chunksGenerator(transformedDelta)];\n}\n", "import { VirgoLine } from '../components/index.js';\n\nexport function isVText(text: unknown): text is Text {\n  return (\n    text instanceof Text &&\n    (text.parentElement?.dataset.virgoText === 'true' ?? false)\n  );\n}\n\nexport function isVElement(element: unknown): element is HTMLElement {\n  return (\n    element instanceof HTMLElement && element.dataset.virgoElement === 'true'\n  );\n}\n\nexport function isVLine(element: unknown): element is HTMLElement {\n  return (\n    element instanceof HTMLElement &&\n    (element instanceof VirgoLine || element.parentElement instanceof VirgoLine)\n  );\n}\n\nexport function isVRoot(element: unknown): element is HTMLElement {\n  return element instanceof HTMLElement && element.dataset.virgoRoot === 'true';\n}\n", "import { ZERO_WIDTH_SPACE } from '../consts.js';\n\nexport function calculateTextLength(text: Text): number {\n  if (text.wholeText === ZERO_WIDTH_SPACE) {\n    return 0;\n  } else {\n    return text.wholeText.length;\n  }\n}\n\nexport function getTextNodesFromElement(element: Element): Text[] {\n  const textSpanElements = Array.from(\n    element.querySelectorAll('[data-virgo-text=\"true\"]')\n  );\n  const textNodes = textSpanElements.map(textSpanElement => {\n    const textNode = Array.from(textSpanElement.childNodes).find(\n      (node): node is Text => node instanceof Text\n    );\n\n    if (!textNode) {\n      throw new Error('text node not found');\n    }\n\n    return textNode;\n  });\n\n  return textNodes;\n}\n", "import type { VirgoElement, VirgoLine } from '../components/index.js';\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\nimport type { DomPoint, TextPoint } from '../types.js';\nimport { isVElement, isVLine, isVRoot, isVText } from './guard.js';\nimport { calculateTextLength, getTextNodesFromElement } from './text.js';\n\nexport function nativePointToTextPoint(\n  node: unknown,\n  offset: number\n): TextPoint | null {\n  if (isVText(node)) {\n    return [node, offset];\n  }\n\n  if (isVElement(node)) {\n    const texts = getTextNodesFromElement(node);\n    let textOffset = offset;\n    for (const text of texts) {\n      if (offset <= text.length) {\n        return [text, textOffset];\n      }\n      textOffset -= text.length;\n    }\n    return null;\n  }\n\n  if (isVLine(node) || isVRoot(node)) {\n    return getTextPointFromElementByOffset(node, offset, true);\n  }\n\n  if (!(node instanceof Node)) {\n    return null;\n  }\n\n  const vNodes = getVNodesFromNode(node);\n\n  if (vNodes) {\n    return getTextPointFromVNodes(vNodes, node, offset);\n  }\n\n  return null;\n}\n\nexport function textPointToDomPoint(\n  text: Text,\n  offset: number,\n  rootElement: HTMLElement\n): DomPoint | null {\n  if (rootElement.dataset.virgoRoot !== 'true') {\n    throw new Error(\n      'textRangeToDomPoint should be called with editor root element'\n    );\n  }\n\n  if (!rootElement.contains(text)) {\n    return null;\n  }\n\n  const texts = getTextNodesFromElement(rootElement);\n  const goalIndex = texts.indexOf(text);\n  let index = 0;\n  for (const text of texts.slice(0, goalIndex)) {\n    index += calculateTextLength(text);\n  }\n\n  if (text.wholeText !== ZERO_WIDTH_SPACE) {\n    index += offset;\n  }\n\n  const textParentElement = text.parentElement;\n  if (!textParentElement) {\n    throw new Error('text element parent not found');\n  }\n\n  const lineElement = textParentElement.closest('v-line');\n\n  if (!lineElement) {\n    throw new Error('line element not found');\n  }\n\n  const lineIndex = Array.from(rootElement.querySelectorAll('v-line')).indexOf(\n    lineElement\n  );\n\n  return { text, index: index + lineIndex };\n}\n\nfunction getVNodesFromNode(node: Node): VirgoElement[] | VirgoLine[] | null {\n  const vLine = node.parentElement?.closest('v-line');\n\n  if (vLine) {\n    return Array.from(vLine.querySelectorAll('v-element'));\n  }\n\n  const container =\n    node instanceof Element\n      ? node.closest('[data-virgo-root=\"true\"]')\n      : node.parentElement?.closest('[data-virgo-root=\"true\"]');\n\n  if (container) {\n    return Array.from(container.querySelectorAll('v-line'));\n  }\n\n  return null;\n}\n\nfunction getTextPointFromVNodes(\n  vNodes: VirgoLine[] | VirgoElement[],\n  node: Node,\n  offset: number\n): TextPoint | null {\n  const first = vNodes[0];\n  for (let i = 0; i < vNodes.length; i++) {\n    const vLine = vNodes[i];\n\n    if (i === 0 && AFollowedByB(node, vLine)) {\n      return getTextPointFromElementByOffset(first, offset, true);\n    }\n\n    if (AInsideB(node, vLine)) {\n      return getTextPointFromElementByOffset(first, offset, false);\n    }\n\n    if (i === vNodes.length - 1 && APrecededByB(node, vLine)) {\n      return getTextPointFromElement(vLine);\n    }\n\n    if (\n      i < vNodes.length - 1 &&\n      APrecededByB(node, vLine) &&\n      AFollowedByB(node, vNodes[i + 1])\n    ) {\n      return getTextPointFromElement(vLine);\n    }\n  }\n\n  return null;\n}\n\nfunction getTextPointFromElement(element: Element): TextPoint | null {\n  const texts = getTextNodesFromElement(element);\n  if (texts.length === 0) return null;\n  const text = texts[texts.length - 1];\n  return [text, calculateTextLength(text)];\n}\n\nfunction getTextPointFromElementByOffset(\n  element: Element,\n  offset: number,\n  fromStart: boolean\n): TextPoint | null {\n  const texts = getTextNodesFromElement(element);\n  if (texts.length === 0) return null;\n  const text = fromStart ? texts[0] : texts[texts.length - 1];\n  return [text, offset === 0 ? offset : text.length];\n}\n\nfunction AInsideB(a: Node, b: Node): boolean {\n  return (\n    b.compareDocumentPosition(a) === Node.DOCUMENT_POSITION_CONTAINED_BY ||\n    b.compareDocumentPosition(a) ===\n      (Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING)\n  );\n}\n\nfunction AFollowedByB(a: Node, b: Node): boolean {\n  return a.compareDocumentPosition(b) === Node.DOCUMENT_POSITION_FOLLOWING;\n}\n\nfunction APrecededByB(a: Node, b: Node): boolean {\n  return a.compareDocumentPosition(b) === Node.DOCUMENT_POSITION_PRECEDING;\n}\n", "import type { VEditor } from '../virgo.js';\nimport type { BaseTextAttributes } from './base-attributes.js';\n\nexport function findDocumentOrShadowRoot<\n  TextAttributes extends BaseTextAttributes\n>(editor: VEditor<TextAttributes>): Document {\n  const el = editor.rootElement;\n\n  if (!el) {\n    throw new Error('editor root element not found');\n  }\n\n  const root = el.getRootNode();\n\n  if (\n    (root instanceof Document || root instanceof ShadowRoot) &&\n    'getSelection' in root\n  ) {\n    return root;\n  }\n\n  return el.ownerDocument;\n}\n", "export function isSelectionBackwards(selection: Selection): boolean {\n  let backwards = false;\n  if (!selection.isCollapsed && selection.anchorNode && selection.focusNode) {\n    const range = document.createRange();\n    range.setStart(selection.anchorNode, selection.anchorOffset);\n    range.setEnd(selection.focusNode, selection.focusOffset);\n    backwards = range.collapsed;\n    range.detach();\n  }\n  return backwards;\n}\n", "import type * as Y from 'yjs';\n\nimport type { VRange } from '../types.js';\nimport {\n  nativePointToTextPoint,\n  textPointToDomPoint,\n} from './point-conversion.js';\nimport { isSelectionBackwards } from './selection.js';\nimport { calculateTextLength, getTextNodesFromElement } from './text.js';\n\ntype VRangeRunnerContext = {\n  rootElement: HTMLElement;\n  selection: Selection;\n  yText: Y.Text;\n  anchorNode: Node | null;\n  anchorOffset: number;\n  anchorText: Text;\n  anchorTextOffset: number;\n  focusNode: Node | null;\n  focusOffset: number;\n  focusText: Text;\n  focusTextOffset: number;\n};\n\ntype Predict = (context: VRangeRunnerContext) => boolean;\ntype Handler = (context: VRangeRunnerContext) => VRange | null;\n\nconst rangeHasAnchorAndFocus: Predict = ({\n  rootElement,\n  anchorText,\n  focusText,\n}) => {\n  return rootElement.contains(anchorText) && rootElement.contains(focusText);\n};\n\nconst rangeHasAnchorAndFocusHandler: Handler = ({\n  rootElement,\n  anchorText,\n  focusText,\n  anchorTextOffset,\n  focusTextOffset,\n}) => {\n  const anchorDomPoint = textPointToDomPoint(\n    anchorText,\n    anchorTextOffset,\n    rootElement\n  );\n  const focusDomPoint = textPointToDomPoint(\n    focusText,\n    focusTextOffset,\n    rootElement\n  );\n\n  if (!anchorDomPoint || !focusDomPoint) {\n    return null;\n  }\n\n  return {\n    index: Math.min(anchorDomPoint.index, focusDomPoint.index),\n    length: Math.abs(anchorDomPoint.index - focusDomPoint.index),\n  };\n};\n\nconst rangeOnlyHasFocus: Predict = ({ rootElement, anchorText, focusText }) => {\n  return !rootElement.contains(anchorText) && rootElement.contains(focusText);\n};\n\nconst rangeOnlyHasFocusHandler: Handler = ({\n  selection,\n  yText,\n  rootElement,\n  anchorText,\n  focusText,\n  anchorTextOffset,\n  focusTextOffset,\n}) => {\n  if (isSelectionBackwards(selection)) {\n    const anchorDomPoint = textPointToDomPoint(\n      anchorText,\n      anchorTextOffset,\n      rootElement\n    );\n\n    if (!anchorDomPoint) {\n      return null;\n    }\n\n    return {\n      index: anchorDomPoint.index,\n      length: yText.length - anchorDomPoint.index,\n    };\n  } else {\n    const focusDomPoint = textPointToDomPoint(\n      focusText,\n      focusTextOffset,\n      rootElement\n    );\n\n    if (!focusDomPoint) {\n      return null;\n    }\n\n    return {\n      index: 0,\n      length: focusDomPoint.index,\n    };\n  }\n};\n\nconst rangeOnlyHasAnchor: Predict = ({\n  rootElement,\n  anchorText,\n  focusText,\n}) => {\n  return rootElement.contains(anchorText) && !rootElement.contains(focusText);\n};\n\nconst rangeOnlyHasAnchorHandler: Handler = ({\n  selection,\n  yText,\n  rootElement,\n  anchorText,\n  focusText,\n  anchorTextOffset,\n  focusTextOffset,\n}) => {\n  if (isSelectionBackwards(selection)) {\n    const focusDomPoint = textPointToDomPoint(\n      focusText,\n      focusTextOffset,\n      rootElement\n    );\n\n    if (!focusDomPoint) {\n      return null;\n    }\n\n    return {\n      index: 0,\n      length: focusDomPoint.index,\n    };\n  } else {\n    const anchorDomPoint = textPointToDomPoint(\n      anchorText,\n      anchorTextOffset,\n      rootElement\n    );\n\n    if (!anchorDomPoint) {\n      return null;\n    }\n\n    return {\n      index: anchorDomPoint.index,\n      length: yText.length - anchorDomPoint.index,\n    };\n  }\n};\n\nconst rangeHasNoAnchorAndFocus: Predict = ({\n  rootElement,\n  anchorText,\n  focusText,\n}) => {\n  return !rootElement.contains(anchorText) && !rootElement.contains(focusText);\n};\n\nconst rangeHasNoAnchorAndFocusHandler: Handler = ({ yText }) => {\n  return {\n    index: 0,\n    length: yText.length,\n  };\n};\n\nconst buildContext = (\n  selection: Selection,\n  rootElement: HTMLElement,\n  yText: Y.Text\n): VRangeRunnerContext | null => {\n  const { anchorNode, anchorOffset, focusNode, focusOffset } = selection;\n\n  const anchorTextPoint = nativePointToTextPoint(anchorNode, anchorOffset);\n  const focusTextPoint = nativePointToTextPoint(focusNode, focusOffset);\n\n  if (!anchorTextPoint || !focusTextPoint) {\n    return null;\n  }\n\n  const [anchorText, anchorTextOffset] = anchorTextPoint;\n  const [focusText, focusTextOffset] = focusTextPoint;\n\n  return {\n    rootElement,\n    selection,\n    yText,\n    anchorNode,\n    anchorOffset,\n    focusNode,\n    focusOffset,\n    anchorText,\n    anchorTextOffset,\n    focusText,\n    focusTextOffset,\n  };\n};\n\n/**\n * calculate the vRange from dom selection for **this Editor**\n * there are three cases when the vRange of this Editor is not null:\n * (In the following, \"|\" mean anchor and focus, each line is a separate Editor)\n * 1. anchor and focus are in this Editor\n *    aaaaaa\n *    b|bbbb|b\n *    cccccc\n *    the vRange of second Editor is {index: 1, length: 4}, the others are null\n * 2. anchor and focus one in this Editor, one in another Editor\n *    aaa|aaa    aaaaaa\n *    bbbbb|b or bbbbb|b\n *    cccccc     cc|cccc\n *    2.1\n *        the vRange of first Editor is {index: 3, length: 3}, the second is {index: 0, length: 5},\n *        the third is null\n *    2.2\n *        the vRange of first Editor is null, the second is {index: 5, length: 1},\n *        the third is {index: 0, length: 2}\n * 3. anchor and focus are in another Editor\n *    aa|aaaa\n *    bbbbbb\n *    cccc|cc\n *    the vRange of first Editor is {index: 2, length: 4},\n *    the second is {index: 0, length: 6}, the third is {index: 0, length: 4}\n */\nexport function domRangeToVirgoRange(\n  selection: Selection,\n  rootElement: HTMLElement,\n  yText: Y.Text\n): VRange | null {\n  const context = buildContext(selection, rootElement, yText);\n\n  if (!context) return null;\n\n  // case 1\n  if (rangeHasAnchorAndFocus(context)) {\n    return rangeHasAnchorAndFocusHandler(context);\n  }\n\n  // case 2.1\n  if (rangeOnlyHasFocus(context)) {\n    return rangeOnlyHasFocusHandler(context);\n  }\n\n  // case 2.2\n  if (rangeOnlyHasAnchor(context)) {\n    return rangeOnlyHasAnchorHandler(context);\n  }\n\n  // case 3\n  if (rangeHasNoAnchorAndFocus(context)) {\n    return rangeHasNoAnchorAndFocusHandler(context);\n  }\n\n  return null;\n}\n\n/**\n * calculate the dom selection from vRange for **this Editor**\n */\nexport function virgoRangeToDomRange(\n  rootElement: HTMLElement,\n  vRange: VRange\n): Range | null {\n  const lineElements = Array.from(rootElement.querySelectorAll('v-line'));\n\n  // calculate anchorNode and focusNode\n  let anchorText: Text | null = null;\n  let focusText: Text | null = null;\n  let anchorOffset = 0;\n  let focusOffset = 0;\n  let index = 0;\n\n  for (let i = 0; i < lineElements.length; i++) {\n    if (anchorText && focusText) {\n      break;\n    }\n\n    const texts = getTextNodesFromElement(lineElements[i]);\n    for (const text of texts) {\n      const textLength = calculateTextLength(text);\n\n      if (!anchorText && index + textLength >= vRange.index) {\n        anchorText = text;\n        anchorOffset = vRange.index - index;\n      }\n      if (!focusText && index + textLength >= vRange.index + vRange.length) {\n        focusText = text;\n        focusOffset = vRange.index + vRange.length - index;\n      }\n\n      if (anchorText && focusText) {\n        break;\n      }\n\n      index += textLength;\n    }\n\n    // the one because of the line break\n    index += 1;\n  }\n\n  if (!anchorText || !focusText) {\n    return null;\n  }\n\n  const range = document.createRange();\n  range.setStart(anchorText, anchorOffset);\n  range.setEnd(focusText, focusOffset);\n\n  return range;\n}\n", "import { html, type TemplateResult } from 'lit';\n\nimport type { AttributeRenderer, DeltaInsert } from '../types.js';\nimport type { BaseTextAttributes } from './base-attributes.js';\n\nexport function renderElement<TextAttributes extends BaseTextAttributes>(\n  delta: DeltaInsert<TextAttributes>,\n  parseAttributes: (\n    textAttributes?: TextAttributes\n  ) => TextAttributes | undefined,\n  attributeRenderer: AttributeRenderer<TextAttributes>\n): TemplateResult<1> {\n  return html`<v-element\n    .delta=${{\n      insert: delta.insert,\n      attributes: parseAttributes(delta.attributes),\n    }}\n    .attributeRenderer=${attributeRenderer}\n  ></v-element>`;\n}\n", "import type { VRange } from '../types.js';\nimport type { VEditor } from '../virgo.js';\nimport type { BaseTextAttributes } from './base-attributes.js';\n\nfunction handleInsertText<TextAttributes extends BaseTextAttributes>(\n  vRange: VRange,\n  data: string | null,\n  editor: VEditor,\n  attributes: TextAttributes\n) {\n  if (vRange.index >= 0 && data) {\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index + data.length,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.insertText(vRange, data, attributes);\n  }\n}\n\nfunction handleInsertParagraph(vRange: VRange, editor: VEditor) {\n  if (vRange.index >= 0) {\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index + 1,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.insertLineBreak(vRange);\n  }\n}\n\nfunction handleDelete(vRange: VRange, editor: VEditor) {\n  if (vRange.index >= 0) {\n    if (vRange.length > 0) {\n      editor.slots.vRangeUpdated.emit([\n        {\n          index: vRange.index,\n          length: 0,\n        },\n        'input',\n      ]);\n      editor.deleteText(vRange);\n      return;\n    }\n\n    if (vRange.index > 0) {\n      const originalString = editor.yText.toString().slice(0, vRange.index);\n      const segments = [...new Intl.Segmenter().segment(originalString)];\n      const deletedLength = segments[segments.length - 1].segment.length;\n      editor.slots.vRangeUpdated.emit([\n        {\n          index: vRange.index - deletedLength,\n          length: 0,\n        },\n        'input',\n      ]);\n      editor.deleteText({\n        index: vRange.index - deletedLength,\n        length: deletedLength,\n      });\n    }\n  }\n}\n\nfunction handleWordDelete(editor: VEditor, vRange: VRange) {\n  const matches = /\\S+\\s*$/.exec(\n    editor.yText.toString().slice(0, vRange.index)\n  );\n  if (matches) {\n    const deleteLength = matches[0].length;\n\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index - deleteLength,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.deleteText({\n      index: vRange.index - deleteLength,\n      length: deleteLength,\n    });\n  }\n}\n\nfunction handleLineDelete(editor: VEditor, vRange: VRange) {\n  if (vRange.length > 0) {\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.deleteText(vRange);\n    return;\n  }\n\n  if (vRange.index > 0) {\n    const str = editor.yText.toString();\n    const deleteLength =\n      vRange.index - Math.max(0, str.slice(0, vRange.index).lastIndexOf('\\n'));\n\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index - deleteLength,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.deleteText({\n      index: vRange.index - deleteLength,\n      length: deleteLength,\n    });\n  }\n}\n\nfunction handleForwardDelete(editor: VEditor, vRange: VRange) {\n  if (vRange.index < editor.yText.length) {\n    const originalString = editor.yText.toString();\n    const segments = [...new Intl.Segmenter().segment(originalString)];\n    const slicedString = originalString.slice(0, vRange.index);\n    const slicedSegments = [...new Intl.Segmenter().segment(slicedString)];\n    const deletedLength = segments[slicedSegments.length].segment.length;\n    editor.slots.vRangeUpdated.emit([\n      {\n        index: vRange.index,\n        length: 0,\n      },\n      'input',\n    ]);\n    editor.deleteText({\n      index: vRange.index,\n      length: deletedLength,\n    });\n  }\n}\n\nexport function transformInput<TextAttributes extends BaseTextAttributes>(\n  inputType: string,\n  data: string | null,\n  attributes: TextAttributes,\n  vRange: VRange,\n  editor: VEditor\n) {\n  // You can find explanation of inputType here:\n  // [Input Events Level 2](https://w3c.github.io/input-events/#interface-InputEvent-Attributes)\n  switch (inputType) {\n    case 'insertText': {\n      handleInsertText(vRange, data, editor, attributes);\n      return;\n    }\n\n    case 'insertParagraph': {\n      handleInsertParagraph(vRange, editor);\n      return;\n    }\n\n    // Chrome and Safari on Mac: Backspace or Ctrl + H\n    case 'deleteContentBackward':\n    case 'deleteByCut': {\n      handleDelete(vRange, editor);\n      return;\n    }\n\n    // On Mac: Option + Backspace\n    // On iOS: Hold the backspace for a while and the whole words will start to disappear\n    case 'deleteWordBackward': {\n      handleWordDelete(editor, vRange);\n      return;\n    }\n\n    // deleteHardLineBackward: Safari on Mac: Cmd + Backspace\n    // deleteSoftLineBackward: Chrome on Mac: Cmd + Backspace\n    case 'deleteHardLineBackward':\n    case 'deleteSoftLineBackward': {\n      handleLineDelete(editor, vRange);\n      return;\n    }\n\n    // Chrome on Mac: Fn + Backspace or Ctrl + D\n    // Safari on Mac: Ctrl + K or Ctrl + D\n    case 'deleteContentForward': {\n      handleForwardDelete(editor, vRange);\n      return;\n    }\n  }\n}\n", "import type { z, ZodTypeDef } from 'zod';\n\nimport type { AttributeRenderer } from '../types.js';\nimport type { VRange } from '../types.js';\nimport type { BaseTextAttributes } from '../utils/index.js';\nimport {\n  baseTextAttributes,\n  getDefaultAttributeRenderer,\n} from '../utils/index.js';\nimport type { VEditor } from '../virgo.js';\n\nexport class VirgoAttributeService<TextAttributes extends BaseTextAttributes> {\n  private readonly _editor: VEditor<TextAttributes>;\n\n  private _marks: TextAttributes | null = null;\n\n  private _attributeRenderer: AttributeRenderer<TextAttributes> =\n    getDefaultAttributeRenderer<TextAttributes>();\n\n  private _attributeSchema: z.ZodSchema<TextAttributes, ZodTypeDef, unknown> =\n    baseTextAttributes as z.ZodSchema<TextAttributes, ZodTypeDef, unknown>;\n\n  constructor(editor: VEditor<TextAttributes>) {\n    this._editor = editor;\n  }\n\n  get marks() {\n    return this._marks;\n  }\n\n  get attributeRenderer() {\n    return this._attributeRenderer;\n  }\n\n  setMarks = (marks: TextAttributes): void => {\n    this._marks = marks;\n  };\n\n  resetMarks = (): void => {\n    this._marks = null;\n  };\n\n  setAttributeSchema = (\n    schema: z.ZodSchema<TextAttributes, ZodTypeDef, unknown>\n  ) => {\n    this._attributeSchema = schema;\n  };\n\n  setAttributeRenderer = (renderer: AttributeRenderer<TextAttributes>) => {\n    this._attributeRenderer = renderer;\n  };\n\n  getFormat = (vRange: VRange, loose = false): TextAttributes => {\n    const deltas = this._editor.deltaService\n      .getDeltasByVRange(vRange)\n      .filter(\n        ([delta, position]) =>\n          position.index + position.length > vRange.index &&\n          position.index <= vRange.index + vRange.length\n      );\n    const maybeAttributesList = deltas.map(([delta]) => delta.attributes);\n    if (loose) {\n      return maybeAttributesList.reduce(\n        (acc, cur) => ({ ...acc, ...cur }),\n        {}\n      ) as TextAttributes;\n    }\n    if (\n      !maybeAttributesList.length ||\n      // some text does not have any attribute\n      maybeAttributesList.some(attributes => !attributes)\n    ) {\n      return {} as TextAttributes;\n    }\n    const attributesList = maybeAttributesList as TextAttributes[];\n    return attributesList.reduce((acc, cur) => {\n      const newFormat = {} as TextAttributes;\n      for (const key in acc) {\n        const typedKey = key as keyof TextAttributes;\n        // If the given range contains multiple different formats\n        // such as links with different values,\n        // we will treat it as having no format\n        if (acc[typedKey] === cur[typedKey]) {\n          // This cast is secure because we have checked that the value of the key is the same.\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          newFormat[typedKey] = acc[typedKey] as any;\n        }\n      }\n      return newFormat;\n    });\n  };\n\n  normalizeAttributes = (textAttributes?: TextAttributes) => {\n    if (!textAttributes) {\n      return undefined;\n    }\n    const attributeResult = this._attributeSchema.safeParse(textAttributes);\n    if (!attributeResult.success) {\n      console.error(attributeResult.error);\n      return undefined;\n    }\n    return Object.fromEntries(\n      // filter out undefined values\n      Object.entries(attributeResult.data).filter(([k, v]) => v)\n    ) as TextAttributes;\n  };\n}\n", "/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {_$LH, Part, DirectiveParent, TemplateResult} from './lit-html.js';\nimport {\n  DirectiveResult,\n  DirectiveClass,\n  PartInfo,\n  AttributePartInfo,\n} from './directive.js';\ntype Primitive = null | undefined | boolean | number | string | symbol | bigint;\n\nconst {_ChildPart: ChildPart} = _$LH;\n\ntype ChildPart = InstanceType<typeof ChildPart>;\n\nconst ENABLE_SHADYDOM_NOPATCH = true;\n\nconst wrap =\n  ENABLE_SHADYDOM_NOPATCH &&\n  window.ShadyDOM?.inUse &&\n  window.ShadyDOM?.noPatch === true\n    ? window.ShadyDOM!.wrap\n    : (node: Node) => node;\n\n/**\n * Tests if a value is a primitive value.\n *\n * See https://tc39.github.io/ecma262/#sec-typeof-operator\n */\nexport const isPrimitive = (value: unknown): value is Primitive =>\n  value === null || (typeof value != 'object' && typeof value != 'function');\n\nexport const TemplateResultType = {\n  HTML: 1,\n  SVG: 2,\n} as const;\n\nexport type TemplateResultType =\n  (typeof TemplateResultType)[keyof typeof TemplateResultType];\n\n/**\n * Tests if a value is a TemplateResult.\n */\nexport const isTemplateResult = (\n  value: unknown,\n  type?: TemplateResultType\n): value is TemplateResult =>\n  type === undefined\n    ? // This property needs to remain unminified.\n      (value as TemplateResult)?.['_$litType$'] !== undefined\n    : (value as TemplateResult)?.['_$litType$'] === type;\n\n/**\n * Tests if a value is a DirectiveResult.\n */\nexport const isDirectiveResult = (value: unknown): value is DirectiveResult =>\n  // This property needs to remain unminified.\n  (value as DirectiveResult)?.['_$litDirective$'] !== undefined;\n\n/**\n * Retrieves the Directive class for a DirectiveResult\n */\nexport const getDirectiveClass = (value: unknown): DirectiveClass | undefined =>\n  // This property needs to remain unminified.\n  (value as DirectiveResult)?.['_$litDirective$'];\n\n/**\n * Tests whether a part has only a single-expression with no strings to\n * interpolate between.\n *\n * Only AttributePart and PropertyPart can have multiple expressions.\n * Multi-expression parts have a `strings` property and single-expression\n * parts do not.\n */\nexport const isSingleExpression = (part: PartInfo) =>\n  (part as AttributePartInfo).strings === undefined;\n\nconst createMarker = () => document.createComment('');\n\n/**\n * Inserts a ChildPart into the given container ChildPart's DOM, either at the\n * end of the container ChildPart, or before the optional `refPart`.\n *\n * This does not add the part to the containerPart's committed value. That must\n * be done by callers.\n *\n * @param containerPart Part within which to add the new ChildPart\n * @param refPart Part before which to add the new ChildPart; when omitted the\n *     part added to the end of the `containerPart`\n * @param part Part to insert, or undefined to create a new part\n */\nexport const insertPart = (\n  containerPart: ChildPart,\n  refPart?: ChildPart,\n  part?: ChildPart\n): ChildPart => {\n  const container = wrap(containerPart._$startNode).parentNode!;\n\n  const refNode =\n    refPart === undefined ? containerPart._$endNode : refPart._$startNode;\n\n  if (part === undefined) {\n    const startNode = wrap(container).insertBefore(createMarker(), refNode);\n    const endNode = wrap(container).insertBefore(createMarker(), refNode);\n    part = new ChildPart(\n      startNode,\n      endNode,\n      containerPart,\n      containerPart.options\n    );\n  } else {\n    const endNode = wrap(part._$endNode!).nextSibling;\n    const oldParent = part._$parent;\n    const parentChanged = oldParent !== containerPart;\n    if (parentChanged) {\n      part._$reparentDisconnectables?.(containerPart);\n      // Note that although `_$reparentDisconnectables` updates the part's\n      // `_$parent` reference after unlinking from its current parent, that\n      // method only exists if Disconnectables are present, so we need to\n      // unconditionally set it here\n      part._$parent = containerPart;\n      // Since the _$isConnected getter is somewhat costly, only\n      // read it once we know the subtree has directives that need\n      // to be notified\n      let newConnectionState;\n      if (\n        part._$notifyConnectionChanged !== undefined &&\n        (newConnectionState = containerPart._$isConnected) !==\n          oldParent!._$isConnected\n      ) {\n        part._$notifyConnectionChanged(newConnectionState);\n      }\n    }\n    if (endNode !== refNode || parentChanged) {\n      let start: Node | null = part._$startNode;\n      while (start !== endNode) {\n        const n: Node | null = wrap(start!).nextSibling;\n        wrap(container).insertBefore(start!, refNode);\n        start = n;\n      }\n    }\n  }\n\n  return part;\n};\n\n/**\n * Sets the value of a Part.\n *\n * Note that this should only be used to set/update the value of user-created\n * parts (i.e. those created using `insertPart`); it should not be used\n * by directives to set the value of the directive's container part. Directives\n * should return a value from `update`/`render` to update their part state.\n *\n * For directives that require setting their part value asynchronously, they\n * should extend `AsyncDirective` and call `this.setValue()`.\n *\n * @param part Part to set\n * @param value Value to set\n * @param index For `AttributePart`s, the index to set\n * @param directiveParent Used internally; should not be set by user\n */\nexport const setChildPartValue = <T extends ChildPart>(\n  part: T,\n  value: unknown,\n  directiveParent: DirectiveParent = part\n): T => {\n  part._$setValue(value, directiveParent);\n  return part;\n};\n\n// A sentinel value that can never appear as a part value except when set by\n// live(). Used to force a dirty-check to fail and cause a re-render.\nconst RESET_VALUE = {};\n\n/**\n * Sets the committed value of a ChildPart directly without triggering the\n * commit stage of the part.\n *\n * This is useful in cases where a directive needs to update the part such\n * that the next update detects a value change or not. When value is omitted,\n * the next update will be guaranteed to be detected as a change.\n *\n * @param part\n * @param value\n */\nexport const setCommittedValue = (part: Part, value: unknown = RESET_VALUE) =>\n  (part._$committedValue = value);\n\n/**\n * Returns the committed value of a ChildPart.\n *\n * The committed value is used for change detection and efficient updates of\n * the part. It can differ from the value set by the template or directive in\n * cases where the template value is transformed before being committed.\n *\n * - `TemplateResult`s are committed as a `TemplateInstance`\n * - Iterables are committed as `Array<ChildPart>`\n * - All other types are committed as the template value or value returned or\n *   set by a directive.\n *\n * @param part\n */\nexport const getCommittedValue = (part: ChildPart) => part._$committedValue;\n\n/**\n * Removes a ChildPart from the DOM, including any of its content.\n *\n * @param part The Part to remove\n */\nexport const removePart = (part: ChildPart) => {\n  part._$notifyConnectionChanged?.(false, true);\n  let start: ChildNode | null = part._$startNode;\n  const end: ChildNode | null = wrap(part._$endNode!).nextSibling;\n  while (start !== end) {\n    const n: ChildNode | null = wrap(start!).nextSibling;\n    (wrap(start!) as ChildNode).remove();\n    start = n;\n  }\n};\n\nexport const clearPart = (part: ChildPart) => {\n  part._$clear();\n};\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {ChildPart, noChange} from '../lit-html.js';\nimport {directive, Directive, PartInfo, PartType} from '../directive.js';\nimport {\n  insertPart,\n  getCommittedValue,\n  removePart,\n  setCommittedValue,\n  setChildPartValue,\n} from '../directive-helpers.js';\n\nexport type KeyFn<T> = (item: T, index: number) => unknown;\nexport type ItemTemplate<T> = (item: T, index: number) => unknown;\n\n// Helper for generating a map of array item to its index over a subset\n// of an array (used to lazily generate `newKeyToIndexMap` and\n// `oldKeyToIndexMap`)\nconst generateMap = (list: unknown[], start: number, end: number) => {\n  const map = new Map<unknown, number>();\n  for (let i = start; i <= end; i++) {\n    map.set(list[i], i);\n  }\n  return map;\n};\n\nclass RepeatDirective extends Directive {\n  private _itemKeys?: unknown[];\n\n  constructor(partInfo: PartInfo) {\n    super(partInfo);\n    if (partInfo.type !== PartType.CHILD) {\n      throw new Error('repeat() can only be used in text expressions');\n    }\n  }\n\n  private _getValuesAndKeys<T>(\n    items: Iterable<T>,\n    keyFnOrTemplate: KeyFn<T> | ItemTemplate<T>,\n    template?: ItemTemplate<T>\n  ) {\n    let keyFn: KeyFn<T> | undefined;\n    if (template === undefined) {\n      template = keyFnOrTemplate;\n    } else if (keyFnOrTemplate !== undefined) {\n      keyFn = keyFnOrTemplate as KeyFn<T>;\n    }\n    const keys = [];\n    const values = [];\n    let index = 0;\n    for (const item of items) {\n      keys[index] = keyFn ? keyFn(item, index) : index;\n      values[index] = template!(item, index);\n      index++;\n    }\n    return {\n      values,\n      keys,\n    };\n  }\n\n  render<T>(items: Iterable<T>, template: ItemTemplate<T>): Array<unknown>;\n  render<T>(\n    items: Iterable<T>,\n    keyFn: KeyFn<T> | ItemTemplate<T>,\n    template: ItemTemplate<T>\n  ): Array<unknown>;\n  render<T>(\n    items: Iterable<T>,\n    keyFnOrTemplate: KeyFn<T> | ItemTemplate<T>,\n    template?: ItemTemplate<T>\n  ) {\n    return this._getValuesAndKeys(items, keyFnOrTemplate, template).values;\n  }\n\n  override update<T>(\n    containerPart: ChildPart,\n    [items, keyFnOrTemplate, template]: [\n      Iterable<T>,\n      KeyFn<T> | ItemTemplate<T>,\n      ItemTemplate<T>\n    ]\n  ) {\n    // Old part & key lists are retrieved from the last update (which may\n    // be primed by hydration)\n    const oldParts = getCommittedValue(\n      containerPart\n    ) as Array<ChildPart | null>;\n    const {values: newValues, keys: newKeys} = this._getValuesAndKeys(\n      items,\n      keyFnOrTemplate,\n      template\n    );\n\n    // We check that oldParts, the committed value, is an Array as an\n    // indicator that the previous value came from a repeat() call. If\n    // oldParts is not an Array then this is the first render and we return\n    // an array for lit-html's array handling to render, and remember the\n    // keys.\n    if (!Array.isArray(oldParts)) {\n      this._itemKeys = newKeys;\n      return newValues;\n    }\n\n    // In SSR hydration it's possible for oldParts to be an array but for us\n    // to not have item keys because the update() hasn't run yet. We set the\n    // keys to an empty array. This will cause all oldKey/newKey comparisons\n    // to fail and execution to fall to the last nested brach below which\n    // reuses the oldPart.\n    const oldKeys = (this._itemKeys ??= []);\n\n    // New part list will be built up as we go (either reused from\n    // old parts or created for new keys in this update). This is\n    // saved in the above cache at the end of the update.\n    const newParts: ChildPart[] = [];\n\n    // Maps from key to index for current and previous update; these\n    // are generated lazily only when needed as a performance\n    // optimization, since they are only required for multiple\n    // non-contiguous changes in the list, which are less common.\n    let newKeyToIndexMap!: Map<unknown, number>;\n    let oldKeyToIndexMap!: Map<unknown, number>;\n\n    // Head and tail pointers to old parts and new values\n    let oldHead = 0;\n    let oldTail = oldParts.length - 1;\n    let newHead = 0;\n    let newTail = newValues.length - 1;\n\n    // Overview of O(n) reconciliation algorithm (general approach\n    // based on ideas found in ivi, vue, snabbdom, etc.):\n    //\n    // * We start with the list of old parts and new values (and\n    //   arrays of their respective keys), head/tail pointers into\n    //   each, and we build up the new list of parts by updating\n    //   (and when needed, moving) old parts or creating new ones.\n    //   The initial scenario might look like this (for brevity of\n    //   the diagrams, the numbers in the array reflect keys\n    //   associated with the old parts or new values, although keys\n    //   and parts/values are actually stored in parallel arrays\n    //   indexed using the same head/tail pointers):\n    //\n    //      oldHead v                 v oldTail\n    //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n    //   newParts: [ ,  ,  ,  ,  ,  ,  ]\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6] <- reflects the user's new\n    //                                      item order\n    //      newHead ^                 ^ newTail\n    //\n    // * Iterate old & new lists from both sides, updating,\n    //   swapping, or removing parts at the head/tail locations\n    //   until neither head nor tail can move.\n    //\n    // * Example below: keys at head pointers match, so update old\n    //   part 0 in-place (no need to move it) and record part 0 in\n    //   the `newParts` list. The last thing we do is advance the\n    //   `oldHead` and `newHead` pointers (will be reflected in the\n    //   next diagram).\n    //\n    //      oldHead v                 v oldTail\n    //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n    //   newParts: [0,  ,  ,  ,  ,  ,  ] <- heads matched: update 0\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n    //                                      & newHead\n    //      newHead ^                 ^ newTail\n    //\n    // * Example below: head pointers don't match, but tail\n    //   pointers do, so update part 6 in place (no need to move\n    //   it), and record part 6 in the `newParts` list. Last,\n    //   advance the `oldTail` and `oldHead` pointers.\n    //\n    //         oldHead v              v oldTail\n    //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n    //   newParts: [0,  ,  ,  ,  ,  , 6] <- tails matched: update 6\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldTail\n    //                                      & newTail\n    //         newHead ^              ^ newTail\n    //\n    // * If neither head nor tail match; next check if one of the\n    //   old head/tail items was removed. We first need to generate\n    //   the reverse map of new keys to index (`newKeyToIndexMap`),\n    //   which is done once lazily as a performance optimization,\n    //   since we only hit this case if multiple non-contiguous\n    //   changes were made. Note that for contiguous removal\n    //   anywhere in the list, the head and tails would advance\n    //   from either end and pass each other before we get to this\n    //   case and removals would be handled in the final while loop\n    //   without needing to generate the map.\n    //\n    // * Example below: The key at `oldTail` was removed (no longer\n    //   in the `newKeyToIndexMap`), so remove that part from the\n    //   DOM and advance just the `oldTail` pointer.\n    //\n    //         oldHead v           v oldTail\n    //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n    //   newParts: [0,  ,  ,  ,  ,  , 6] <- 5 not in new map: remove\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    5 and advance oldTail\n    //         newHead ^           ^ newTail\n    //\n    // * Once head and tail cannot move, any mismatches are due to\n    //   either new or moved items; if a new key is in the previous\n    //   \"old key to old index\" map, move the old part to the new\n    //   location, otherwise create and insert a new part. Note\n    //   that when moving an old part we null its position in the\n    //   oldParts array if it lies between the head and tail so we\n    //   know to skip it when the pointers get there.\n    //\n    // * Example below: neither head nor tail match, and neither\n    //   were removed; so find the `newHead` key in the\n    //   `oldKeyToIndexMap`, and move that old part's DOM into the\n    //   next head position (before `oldParts[oldHead]`). Last,\n    //   null the part in the `oldPart` array since it was\n    //   somewhere in the remaining oldParts still to be scanned\n    //   (between the head and tail pointers) so that we know to\n    //   skip that old part on future iterations.\n    //\n    //         oldHead v        v oldTail\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n    //   newParts: [0, 2,  ,  ,  ,  , 6] <- stuck: update & move 2\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    into place and advance\n    //                                      newHead\n    //         newHead ^           ^ newTail\n    //\n    // * Note that for moves/insertions like the one above, a part\n    //   inserted at the head pointer is inserted before the\n    //   current `oldParts[oldHead]`, and a part inserted at the\n    //   tail pointer is inserted before `newParts[newTail+1]`. The\n    //   seeming asymmetry lies in the fact that new parts are\n    //   moved into place outside in, so to the right of the head\n    //   pointer are old parts, and to the right of the tail\n    //   pointer are new parts.\n    //\n    // * We always restart back from the top of the algorithm,\n    //   allowing matching and simple updates in place to\n    //   continue...\n    //\n    // * Example below: the head pointers once again match, so\n    //   simply update part 1 and record it in the `newParts`\n    //   array.  Last, advance both head pointers.\n    //\n    //         oldHead v        v oldTail\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n    //   newParts: [0, 2, 1,  ,  ,  , 6] <- heads matched: update 1\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n    //                                      & newHead\n    //            newHead ^        ^ newTail\n    //\n    // * As mentioned above, items that were moved as a result of\n    //   being stuck (the final else clause in the code below) are\n    //   marked with null, so we always advance old pointers over\n    //   these so we're comparing the next actual old value on\n    //   either end.\n    //\n    // * Example below: `oldHead` is null (already placed in\n    //   newParts), so advance `oldHead`.\n    //\n    //            oldHead v     v oldTail\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6] <- old head already used:\n    //   newParts: [0, 2, 1,  ,  ,  , 6]    advance oldHead\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n    //               newHead ^     ^ newTail\n    //\n    // * Note it's not critical to mark old parts as null when they\n    //   are moved from head to tail or tail to head, since they\n    //   will be outside the pointer range and never visited again.\n    //\n    // * Example below: Here the old tail key matches the new head\n    //   key, so the part at the `oldTail` position and move its\n    //   DOM to the new head position (before `oldParts[oldHead]`).\n    //   Last, advance `oldTail` and `newHead` pointers.\n    //\n    //               oldHead v  v oldTail\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n    //   newParts: [0, 2, 1, 4,  ,  , 6] <- old tail matches new\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]   head: update & move 4,\n    //                                     advance oldTail & newHead\n    //               newHead ^     ^ newTail\n    //\n    // * Example below: Old and new head keys match, so update the\n    //   old head part in place, and advance the `oldHead` and\n    //   `newHead` pointers.\n    //\n    //               oldHead v oldTail\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n    //   newParts: [0, 2, 1, 4, 3,   ,6] <- heads match: update 3\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance oldHead &\n    //                                      newHead\n    //                  newHead ^  ^ newTail\n    //\n    // * Once the new or old pointers move past each other then all\n    //   we have left is additions (if old list exhausted) or\n    //   removals (if new list exhausted). Those are handled in the\n    //   final while loops at the end.\n    //\n    // * Example below: `oldHead` exceeded `oldTail`, so we're done\n    //   with the main loop.  Create the remaining part and insert\n    //   it at the new head position, and the update is complete.\n    //\n    //                   (oldHead > oldTail)\n    //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n    //   newParts: [0, 2, 1, 4, 3, 7 ,6] <- create and insert 7\n    //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n    //                     newHead ^ newTail\n    //\n    // * Note that the order of the if/else clauses is not\n    //   important to the algorithm, as long as the null checks\n    //   come first (to ensure we're always working on valid old\n    //   parts) and that the final else clause comes last (since\n    //   that's where the expensive moves occur). The order of\n    //   remaining clauses is is just a simple guess at which cases\n    //   will be most common.\n    //\n    // * Note, we could calculate the longest\n    //   increasing subsequence (LIS) of old items in new position,\n    //   and only move those not in the LIS set. However that costs\n    //   O(nlogn) time and adds a bit more code, and only helps\n    //   make rare types of mutations require fewer moves. The\n    //   above handles removes, adds, reversal, swaps, and single\n    //   moves of contiguous items in linear time, in the minimum\n    //   number of moves. As the number of multiple moves where LIS\n    //   might help approaches a random shuffle, the LIS\n    //   optimization becomes less helpful, so it seems not worth\n    //   the code at this point. Could reconsider if a compelling\n    //   case arises.\n\n    while (oldHead <= oldTail && newHead <= newTail) {\n      if (oldParts[oldHead] === null) {\n        // `null` means old part at head has already been used\n        // below; skip\n        oldHead++;\n      } else if (oldParts[oldTail] === null) {\n        // `null` means old part at tail has already been used\n        // below; skip\n        oldTail--;\n      } else if (oldKeys[oldHead] === newKeys[newHead]) {\n        // Old head matches new head; update in place\n        newParts[newHead] = setChildPartValue(\n          oldParts[oldHead]!,\n          newValues[newHead]\n        );\n        oldHead++;\n        newHead++;\n      } else if (oldKeys[oldTail] === newKeys[newTail]) {\n        // Old tail matches new tail; update in place\n        newParts[newTail] = setChildPartValue(\n          oldParts[oldTail]!,\n          newValues[newTail]\n        );\n        oldTail--;\n        newTail--;\n      } else if (oldKeys[oldHead] === newKeys[newTail]) {\n        // Old head matches new tail; update and move to new tail\n        newParts[newTail] = setChildPartValue(\n          oldParts[oldHead]!,\n          newValues[newTail]\n        );\n        insertPart(containerPart, newParts[newTail + 1], oldParts[oldHead]!);\n        oldHead++;\n        newTail--;\n      } else if (oldKeys[oldTail] === newKeys[newHead]) {\n        // Old tail matches new head; update and move to new head\n        newParts[newHead] = setChildPartValue(\n          oldParts[oldTail]!,\n          newValues[newHead]\n        );\n        insertPart(containerPart, oldParts[oldHead]!, oldParts[oldTail]!);\n        oldTail--;\n        newHead++;\n      } else {\n        if (newKeyToIndexMap === undefined) {\n          // Lazily generate key-to-index maps, used for removals &\n          // moves below\n          newKeyToIndexMap = generateMap(newKeys, newHead, newTail);\n          oldKeyToIndexMap = generateMap(oldKeys, oldHead, oldTail);\n        }\n        if (!newKeyToIndexMap.has(oldKeys[oldHead])) {\n          // Old head is no longer in new list; remove\n          removePart(oldParts[oldHead]!);\n          oldHead++;\n        } else if (!newKeyToIndexMap.has(oldKeys[oldTail])) {\n          // Old tail is no longer in new list; remove\n          removePart(oldParts[oldTail]!);\n          oldTail--;\n        } else {\n          // Any mismatches at this point are due to additions or\n          // moves; see if we have an old part we can reuse and move\n          // into place\n          const oldIndex = oldKeyToIndexMap.get(newKeys[newHead]);\n          const oldPart = oldIndex !== undefined ? oldParts[oldIndex] : null;\n          if (oldPart === null) {\n            // No old part for this value; create a new one and\n            // insert it\n            const newPart = insertPart(containerPart, oldParts[oldHead]!);\n            setChildPartValue(newPart, newValues[newHead]);\n            newParts[newHead] = newPart;\n          } else {\n            // Reuse old part\n            newParts[newHead] = setChildPartValue(oldPart, newValues[newHead]);\n            insertPart(containerPart, oldParts[oldHead]!, oldPart);\n            // This marks the old part as having been used, so that\n            // it will be skipped in the first two checks above\n            oldParts[oldIndex as number] = null;\n          }\n          newHead++;\n        }\n      }\n    }\n    // Add parts for any remaining new values\n    while (newHead <= newTail) {\n      // For all remaining additions, we insert before last new\n      // tail, since old pointers are no longer valid\n      const newPart = insertPart(containerPart, newParts[newTail + 1]);\n      setChildPartValue(newPart, newValues[newHead]);\n      newParts[newHead++] = newPart;\n    }\n    // Remove any remaining unused old parts\n    while (oldHead <= oldTail) {\n      const oldPart = oldParts[oldHead++];\n      if (oldPart !== null) {\n        removePart(oldPart);\n      }\n    }\n\n    // Save order of new parts for next round\n    this._itemKeys = newKeys;\n    // Directly set part value, bypassing it's dirty-checking\n    setCommittedValue(containerPart, newParts);\n    return noChange;\n  }\n}\n\nexport interface RepeatDirectiveFn {\n  <T>(\n    items: Iterable<T>,\n    keyFnOrTemplate: KeyFn<T> | ItemTemplate<T>,\n    template?: ItemTemplate<T>\n  ): unknown;\n  <T>(items: Iterable<T>, template: ItemTemplate<T>): unknown;\n  <T>(\n    items: Iterable<T>,\n    keyFn: KeyFn<T> | ItemTemplate<T>,\n    template: ItemTemplate<T>\n  ): unknown;\n}\n\n/**\n * A directive that repeats a series of values (usually `TemplateResults`)\n * generated from an iterable, and updates those items efficiently when the\n * iterable changes based on user-provided `keys` associated with each item.\n *\n * Note that if a `keyFn` is provided, strict key-to-DOM mapping is maintained,\n * meaning previous DOM for a given key is moved into the new position if\n * needed, and DOM will never be reused with values for different keys (new DOM\n * will always be created for new keys). This is generally the most efficient\n * way to use `repeat` since it performs minimum unnecessary work for insertions\n * and removals.\n *\n * The `keyFn` takes two parameters, the item and its index, and returns a unique key value.\n *\n * ```js\n * html`\n *   <ol>\n *     ${repeat(this.items, (item) => item.id, (item, index) => {\n *       return html`<li>${index}: ${item.name}</li>`;\n *     })}\n *   </ol>\n * `\n * ```\n *\n * **Important**: If providing a `keyFn`, keys *must* be unique for all items in a\n * given call to `repeat`. The behavior when two or more items have the same key\n * is undefined.\n *\n * If no `keyFn` is provided, this directive will perform similar to mapping\n * items to values, and DOM will be reused against potentially different items.\n */\nexport const repeat = directive(RepeatDirective) as RepeatDirectiveFn;\n\n/**\n * The type of the class that powers this directive. Necessary for naming the\n * directive's return type.\n */\nexport type {RepeatDirective};\n", "import type { TemplateResult } from 'lit';\nimport { html, render } from 'lit';\nimport { repeat } from 'lit/directives/repeat.js';\n\nimport type { DeltaInsert } from '../types.js';\nimport type { DeltaEntry, VRange } from '../types.js';\nimport type { BaseTextAttributes } from '../utils/index.js';\nimport { deltaInsertsToChunks, renderElement } from '../utils/index.js';\nimport type { VEditor } from '../virgo.js';\n\nexport class VirgoDeltaService<TextAttributes extends BaseTextAttributes> {\n  private readonly _editor: VEditor<TextAttributes>;\n\n  constructor(editor: VEditor<TextAttributes>) {\n    this._editor = editor;\n  }\n\n  get deltas() {\n    return this._editor.yText.toDelta() as DeltaInsert<TextAttributes>[];\n  }\n\n  mapDeltasInVRange = <Result>(\n    vRange: VRange,\n    callback: (delta: DeltaInsert<TextAttributes>, index: number) => Result\n  ) => {\n    const deltas = this.deltas;\n    const result: Result[] = [];\n\n    deltas.reduce((index, delta) => {\n      const length = delta.insert.length;\n      const from = vRange.index - length;\n      const to = vRange.index + vRange.length;\n\n      const deltaInRange =\n        index >= from &&\n        (index < to || (vRange.length === 0 && index === vRange.index));\n\n      if (deltaInRange) {\n        const value = callback(delta, index);\n        result.push(value);\n      }\n\n      return index + length;\n    }, 0);\n\n    return result;\n  };\n\n  /**\n   * Here are examples of how this function computes and gets the delta.\n   *\n   * We have such a text:\n   * ```\n   * [\n   *   {\n   *      insert: 'aaa',\n   *      attributes: { bold: true },\n   *   },\n   *   {\n   *      insert: 'bbb',\n   *      attributes: { italic: true },\n   *   },\n   * ]\n   * ```\n   *\n   * `getDeltaByRangeIndex(0)` returns `{ insert: 'aaa', attributes: { bold: true } }`.\n   *\n   * `getDeltaByRangeIndex(1)` returns `{ insert: 'aaa', attributes: { bold: true } }`.\n   *\n   * `getDeltaByRangeIndex(3)` returns `{ insert: 'aaa', attributes: { bold: true } }`.\n   *\n   * `getDeltaByRangeIndex(4)` returns `{ insert: 'bbb', attributes: { italic: true } }`.\n   */\n  getDeltaByRangeIndex = (rangeIndex: number) => {\n    const deltas = this.deltas;\n\n    let index = 0;\n    for (const delta of deltas) {\n      if (index + delta.insert.length >= rangeIndex) {\n        return delta;\n      }\n      index += delta.insert.length;\n    }\n\n    return null;\n  };\n\n  /**\n   * Here are examples of how this function computes and gets the deltas.\n   *\n   * We have such a text:\n   * ```\n   * [\n   *   {\n   *      insert: 'aaa',\n   *      attributes: { bold: true },\n   *   },\n   *   {\n   *      insert: 'bbb',\n   *      attributes: { italic: true },\n   *   },\n   *   {\n   *      insert: 'ccc',\n   *      attributes: { underline: true },\n   *   },\n   * ]\n   * ```\n   *\n   * `getDeltasByVRange({ index: 0, length: 0 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }]]\n   * ```\n   *\n   * `getDeltasByVRange({ index: 0, length: 1 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }]]\n   * ```\n   *\n   * `getDeltasByVRange({ index: 0, length: 4 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }],\n   *  [{ insert: 'bbb', attributes: { italic: true }, }, { index: 3, length: 3, }]]\n   * ```\n   *\n   * `getDeltasByVRange({ index: 3, length: 1 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }],\n   *  [{ insert: 'bbb', attributes: { italic: true }, }, { index: 3, length: 3, }]]\n   * ```\n   *\n   * `getDeltasByVRange({ index: 3, length: 3 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }],\n   *  [{ insert: 'bbb', attributes: { italic: true }, }, { index: 3, length: 3, }]]\n   * ```\n   *\n   *  `getDeltasByVRange({ index: 3, length: 4 })` returns\n   * ```\n   * [{ insert: 'aaa', attributes: { bold: true }, }, { index: 0, length: 3, }],\n   *  [{ insert: 'bbb', attributes: { italic: true }, }, { index: 3, length: 3, }],\n   *  [{ insert: 'ccc', attributes: { underline: true }, }, { index: 6, length: 3, }]]\n   * ```\n   */\n  getDeltasByVRange = (vRange: VRange): DeltaEntry<TextAttributes>[] => {\n    return this.mapDeltasInVRange(\n      vRange,\n      (delta, index): DeltaEntry<TextAttributes> => [\n        delta,\n        { index, length: delta.insert.length },\n      ]\n    );\n  };\n\n  // render current deltas to VLines\n  render = async () => {\n    const rootElement = this._editor.rootElement;\n\n    const deltas = this.deltas;\n    const chunks = deltaInsertsToChunks(deltas);\n\n    // every chunk is a line\n    const lines = chunks.map(chunk => {\n      const elementTs: TemplateResult<1>[] = [];\n      if (chunk.length > 0) {\n        chunk.forEach(delta => {\n          const element = renderElement(\n            delta,\n            this._editor.attributeService.normalizeAttributes,\n            this._editor.attributeService.attributeRenderer\n          );\n\n          elementTs.push(element);\n        });\n      }\n\n      return html`<v-line .elements=${elementTs}></v-line>`;\n    });\n\n    try {\n      render(\n        repeat(\n          lines.map((line, i) => ({ line, index: i })),\n          entry => entry.index,\n          entry => entry.line\n        ),\n        rootElement\n      );\n    } catch (error) {\n      // Lit may be crashed by IME input and we need to rerender whole editor for it\n      render(html`<div></div>`, rootElement);\n      this._editor.requestUpdate();\n    }\n\n    const vLines = Array.from(rootElement.querySelectorAll('v-line'));\n    await Promise.all(vLines.map(line => line.updateComplete));\n\n    // We need to synchronize the selection immediately after rendering is completed,\n    // otherwise there is a possibility of an error in the cursor position\n    this._editor.rangeService.syncVRange();\n\n    this._editor.slots.updated.emit();\n  };\n}\n", "import { assertExists } from '@blocksuite/global/utils';\n\nimport { ZERO_WIDTH_SPACE } from '../consts.js';\nimport type { NativePoint, VRange } from '../types.js';\nimport {\n  type BaseTextAttributes,\n  findDocumentOrShadowRoot,\n} from '../utils/index.js';\nimport { transformInput } from '../utils/transform-input.js';\nimport type { VEditor } from '../virgo.js';\n\nexport interface VHandlerContext<\n  T extends BaseTextAttributes,\n  E extends Event = Event\n> {\n  event: E;\n  data: string | null;\n  vRange: VRange;\n  skipDefault: boolean;\n  attributes: T | null;\n}\n\nexport class VirgoEventService<TextAttributes extends BaseTextAttributes> {\n  private readonly _editor: VEditor<TextAttributes>;\n\n  private _mountAbortController: AbortController | null = null;\n  private _handlerAbortController: AbortController | null = null;\n\n  private _isComposing = false;\n\n  private _handlers: {\n    keydown?: (event: KeyboardEvent) => void;\n    paste?: (event: ClipboardEvent) => void;\n    // corresponding to native input event and used to take over default behavior in virgo\n    virgoInput?: (\n      ctx: VHandlerContext<TextAttributes, InputEvent>\n    ) => VHandlerContext<TextAttributes, InputEvent>;\n    // corresponding to native compositionend event and used to take over default behavior in virgo\n    virgoCompositionEnd?: (\n      ctx: VHandlerContext<TextAttributes, CompositionEvent>\n    ) => VHandlerContext<TextAttributes, CompositionEvent>;\n  } = {};\n\n  private _previousAnchor: NativePoint | null = null;\n  private _previousFocus: NativePoint | null = null;\n\n  constructor(editor: VEditor<TextAttributes>) {\n    this._editor = editor;\n  }\n\n  defaultHandlers: VirgoEventService<TextAttributes>['_handlers'] = {\n    paste: (event: ClipboardEvent) => {\n      const data = event.clipboardData?.getData('text/plain');\n      if (data) {\n        const vRange = this._editor.getVRange();\n        const text = data.replace(/(\\r\\n|\\r|\\n)/g, '\\n');\n        if (vRange) {\n          this._editor.insertText(vRange, text);\n          this._editor.setVRange({\n            index: vRange.index + text.length,\n            length: 0,\n          });\n        }\n      }\n    },\n  };\n\n  mount = () => {\n    const rootElement = this._editor.rootElement;\n    this._mountAbortController = new AbortController();\n\n    document.addEventListener('selectionchange', this._onSelectionChange);\n\n    const signal = this._mountAbortController.signal;\n\n    rootElement.addEventListener('beforeinput', this._onBeforeInput, {\n      signal,\n    });\n    rootElement\n      .querySelectorAll('[data-virgo-text=\"true\"]')\n      .forEach(textNode => {\n        textNode.addEventListener('dragstart', event => {\n          event.preventDefault();\n        });\n      });\n\n    rootElement.addEventListener('compositionstart', this._onCompositionStart, {\n      signal,\n    });\n    rootElement.addEventListener('compositionend', this._onCompositionEnd, {\n      signal,\n    });\n    rootElement.addEventListener('scroll', this._onScroll);\n\n    this.bindHandlers();\n  };\n\n  unmount = () => {\n    document.removeEventListener('selectionchange', this._onSelectionChange);\n    if (this._mountAbortController) {\n      this._mountAbortController.abort();\n      this._mountAbortController = null;\n    }\n\n    if (this._handlerAbortController) {\n      this._handlerAbortController.abort();\n      this._handlerAbortController = null;\n    }\n\n    this._handlers = this.defaultHandlers;\n  };\n\n  bindHandlers = (\n    handlers: VirgoEventService<TextAttributes>['_handlers'] = this\n      .defaultHandlers\n  ) => {\n    this._handlers = handlers;\n\n    if (this._handlerAbortController) {\n      this._handlerAbortController.abort();\n    }\n\n    this._handlerAbortController = new AbortController();\n\n    if (this._handlers.paste) {\n      this._editor.rootElement.addEventListener('paste', this._handlers.paste, {\n        signal: this._handlerAbortController.signal,\n      });\n    }\n\n    if (this._handlers.keydown) {\n      this._editor.rootElement.addEventListener(\n        'keydown',\n        this._handlers.keydown,\n        {\n          signal: this._handlerAbortController.signal,\n        }\n      );\n    }\n  };\n\n  private _onSelectionChange = () => {\n    const rootElement = this._editor.rootElement;\n    if (this._isComposing) {\n      return;\n    }\n\n    const selectionRoot = findDocumentOrShadowRoot(this._editor);\n    const selection = selectionRoot.getSelection();\n    if (!selection) return;\n    if (selection.rangeCount === 0) return;\n\n    const range = selection.getRangeAt(0);\n    if (\n      range.startContainer === range.endContainer &&\n      range.startContainer.textContent === ZERO_WIDTH_SPACE &&\n      range.startOffset === 1\n    ) {\n      range.setStart(range.startContainer, 0);\n      range.setEnd(range.endContainer, 0);\n      selection.removeAllRanges();\n      selection.addRange(range);\n      return;\n    }\n\n    if (!range) return;\n    if (!range.intersectsNode(rootElement)) {\n      if (\n        range.endContainer.contains(rootElement) &&\n        Array.from(range.endContainer.childNodes).filter(\n          node => node instanceof HTMLElement\n        ).length === 1 &&\n        range.startContainer.contains(rootElement) &&\n        Array.from(range.startContainer.childNodes).filter(\n          node => node instanceof HTMLElement\n        ).length === 1\n      ) {\n        this._editor.focusEnd();\n      } else {\n        return;\n      }\n    }\n\n    this._previousAnchor = [range.startContainer, range.startOffset];\n    this._previousFocus = [range.endContainer, range.endOffset];\n\n    const vRange = this._editor.toVRange(selection);\n    if (vRange) {\n      this._editor.slots.vRangeUpdated.emit([vRange, 'native']);\n    }\n\n    // avoid infinite syncVRange\n    if (\n      ((range.startContainer.nodeType !== Node.TEXT_NODE ||\n        range.endContainer.nodeType !== Node.TEXT_NODE) &&\n        range.startContainer !== this._previousAnchor[0] &&\n        range.endContainer !== this._previousFocus[0] &&\n        range.startOffset !== this._previousAnchor[1] &&\n        range.endOffset !== this._previousFocus[1]) ||\n      range.startContainer.nodeType === Node.COMMENT_NODE ||\n      range.endContainer.nodeType === Node.COMMENT_NODE\n    ) {\n      this._editor.syncVRange();\n    }\n  };\n\n  private _onCompositionStart = () => {\n    this._isComposing = true;\n  };\n\n  private _onCompositionEnd = (event: CompositionEvent) => {\n    this._isComposing = false;\n\n    if (this._editor.isReadonly) return;\n\n    const vRange = this._editor.getVRange();\n    if (!vRange) return;\n\n    let ctx: VHandlerContext<TextAttributes, CompositionEvent> = {\n      event,\n      data: event.data,\n      vRange,\n      skipDefault: false,\n      attributes: null,\n    };\n    if (this._handlers.virgoCompositionEnd) {\n      ctx = this._handlers.virgoCompositionEnd(ctx);\n    }\n    if (ctx.skipDefault) return;\n\n    const { data, vRange: newVRange } = ctx;\n    if (newVRange.index >= 0) {\n      const selection = window.getSelection();\n      if (selection && selection.rangeCount !== 0) {\n        const range = selection.getRangeAt(0);\n        const container = range.startContainer;\n\n        // https://github.com/w3c/input-events/issues/137\n        // IME will directly modify the DOM and is difficult to hijack and cancel.\n        // We need to delete this part of the content and restore the selection.\n        if (container instanceof Text) {\n          if (container.parentElement?.dataset.virgoText !== 'true') {\n            container.remove();\n          } else {\n            const [text] = this._editor.getTextPoint(newVRange.index);\n            const vText = text.parentElement?.closest('v-text');\n            if (vText) {\n              if (vText.str !== text.textContent) {\n                text.textContent = vText.str;\n              }\n            } else {\n              const forgedVText = text.parentElement?.closest(\n                '[data-virgo-text=\"true\"]'\n              );\n              if (forgedVText instanceof HTMLElement) {\n                if (forgedVText.dataset.virgoTextValue) {\n                  if (forgedVText.dataset.virgoTextValue !== text.textContent) {\n                    text.textContent = forgedVText.dataset.virgoTextValue;\n                  }\n                } else {\n                  throw new Error(\n                    'We detect a forged v-text node but it has no data-virgo-text-value attribute.'\n                  );\n                }\n              }\n            }\n          }\n\n          const newRange = this._editor.toDomRange(newVRange);\n          if (newRange) {\n            assertExists(newRange);\n            selection.removeAllRanges();\n            selection.addRange(newRange);\n          }\n        }\n      }\n\n      if (data && data.length > 0) {\n        this._editor.insertText(\n          newVRange,\n          data,\n          ctx.attributes ?? ({} as TextAttributes)\n        );\n\n        this._editor.slots.vRangeUpdated.emit([\n          {\n            index: newVRange.index + data.length,\n            length: 0,\n          },\n          'input',\n        ]);\n      }\n    }\n  };\n  private _firstRecomputeInFrame = true;\n  private _onBeforeInput = (event: InputEvent) => {\n    event.preventDefault();\n\n    if (this._editor.isReadonly || this._isComposing) return;\n    if (this._firstRecomputeInFrame) {\n      this._firstRecomputeInFrame = false;\n      this._onSelectionChange();\n      requestAnimationFrame(() => {\n        this._firstRecomputeInFrame = true;\n      });\n    }\n    const vRange = this._editor.getVRange();\n    if (!vRange) return;\n\n    let ctx: VHandlerContext<TextAttributes, InputEvent> = {\n      event,\n      data: event.data,\n      vRange,\n      skipDefault: false,\n      attributes: null,\n    };\n    if (this._handlers.virgoInput) {\n      ctx = this._handlers.virgoInput(ctx);\n    }\n\n    if (ctx.skipDefault) return;\n\n    const { event: newEvent, data, vRange: newVRange } = ctx;\n\n    transformInput<TextAttributes>(\n      newEvent.inputType,\n      data,\n      ctx.attributes ?? ({} as TextAttributes),\n      newVRange,\n      this._editor as VEditor\n    );\n  };\n\n  private _onScroll = (event: Event) => {\n    this._editor.slots.scrollUpdated.emit(this._editor.rootElement.scrollLeft);\n  };\n}\n", "import { VirgoLine } from '../components/index.js';\nimport type { VRange } from '../types.js';\nimport type { VRangeUpdatedProp } from '../types.js';\nimport {\n  type BaseTextAttributes,\n  domRangeToVirgoRange,\n  findDocumentOrShadowRoot,\n  virgoRangeToDomRange,\n} from '../utils/index.js';\nimport type { VEditor } from '../virgo.js';\n\nexport class VirgoRangeService<TextAttributes extends BaseTextAttributes> {\n  private readonly _editor: VEditor<TextAttributes>;\n\n  private _vRange: VRange | null = null;\n  private _lastScrollLeft = 0;\n\n  constructor(editor: VEditor<TextAttributes>) {\n    this._editor = editor;\n  }\n\n  onVRangeUpdated = ([newVRange, origin]: VRangeUpdatedProp) => {\n    this._vRange = newVRange;\n    document.dispatchEvent(new CustomEvent('virgo-vrange-updated'));\n\n    if (origin !== 'other') {\n      return;\n    }\n\n    const fn = () => {\n      // There may be multiple range update events in one frame,\n      // so we need to obtain the latest vRange.\n      // see https://github.com/toeverything/blocksuite/issues/2982\n      if (this._vRange) {\n        // when using input method _vRange will return to the starting point,\n        // so we need to re-sync\n        this._applyVRange(this._vRange);\n      }\n    };\n\n    // updates in lit are performed asynchronously\n    requestAnimationFrame(fn);\n  };\n\n  getVRange = (): VRange | null => {\n    return this._vRange;\n  };\n\n  /**\n   * the vRange is synced to the native selection asynchronically\n   */\n  setVRange = (vRange: VRange): void => {\n    this._editor.slots.vRangeUpdated.emit([vRange, 'other']);\n  };\n\n  /**\n   * sync the dom selection from vRange for **this Editor**\n   */\n  syncVRange = (): void => {\n    if (this._vRange) {\n      this._applyVRange(this._vRange);\n    }\n  };\n\n  /**\n   * calculate the dom selection from vRange for **this Editor**\n   */\n  toDomRange = (vRange: VRange): Range | null => {\n    const rootElement = this._editor.rootElement;\n    return virgoRangeToDomRange(rootElement, vRange);\n  };\n\n  /**\n   * calculate the vRange from dom selection for **this Editor**\n   * there are three cases when the vRange of this Editor is not null:\n   * (In the following, \"|\" mean anchor and focus, each line is a separate Editor)\n   * 1. anchor and focus are in this Editor\n   *    aaaaaa\n   *    b|bbbb|b\n   *    cccccc\n   *    the vRange of second Editor is {index: 1, length: 4}, the others are null\n   * 2. anchor and focus one in this Editor, one in another Editor\n   *    aaa|aaa    aaaaaa\n   *    bbbbb|b or bbbbb|b\n   *    cccccc     cc|cccc\n   *    2.1\n   *        the vRange of first Editor is {index: 3, length: 3}, the second is {index: 0, length: 5},\n   *        the third is null\n   *    2.2\n   *        the vRange of first Editor is null, the second is {index: 5, length: 1},\n   *        the third is {index: 0, length: 2}\n   * 3. anchor and focus are in another Editor\n   *    aa|aaaa\n   *    bbbbbb\n   *    cccc|cc\n   *    the vRange of first Editor is {index: 2, length: 4},\n   *    the second is {index: 0, length: 6}, the third is {index: 0, length: 4}\n   */\n  toVRange = (selection: Selection): VRange | null => {\n    const { rootElement, yText } = this._editor;\n\n    return domRangeToVirgoRange(selection, rootElement, yText);\n  };\n\n  mergeRanges = (range1: VRange, range2: VRange): VRange => {\n    return {\n      index: Math.max(range1.index, range2.index),\n      length:\n        Math.min(range1.index + range1.length, range2.index + range2.length) -\n        Math.max(range1.index, range2.index),\n    };\n  };\n\n  onScrollUpdated = (scrollLeft: number) => {\n    this._lastScrollLeft = scrollLeft;\n  };\n\n  private _applyVRange = (vRange: VRange): void => {\n    if (!this._editor.isActive) {\n      return;\n    }\n    const selectionRoot = findDocumentOrShadowRoot(this._editor);\n    const selection = selectionRoot.getSelection();\n    if (!selection) {\n      return;\n    }\n    const newRange = this.toDomRange(vRange);\n\n    if (!newRange) {\n      return;\n    }\n\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n\n    this._scrollLineIntoViewIfNeeded(newRange);\n    this._scrollCursorIntoViewIfNeeded(newRange);\n\n    this._editor.slots.rangeUpdated.emit(newRange);\n  };\n\n  private _scrollLineIntoViewIfNeeded = (range: Range) => {\n    if (this._editor.shouldLineScrollIntoView) {\n      let lineElement: HTMLElement | null = range.endContainer.parentElement;\n      while (!(lineElement instanceof VirgoLine)) {\n        lineElement = lineElement?.parentElement ?? null;\n      }\n      lineElement?.scrollIntoView({\n        block: 'nearest',\n      });\n    }\n  };\n\n  private _scrollCursorIntoViewIfNeeded = (range: Range) => {\n    if (this._editor.shouldCursorScrollIntoView) {\n      const root = this._editor.rootElement;\n\n      const rootRect = root.getBoundingClientRect();\n      const rangeRect = range.getBoundingClientRect();\n\n      let moveX = 0;\n      if (rangeRect.left > rootRect.left) {\n        moveX = Math.max(this._lastScrollLeft, rangeRect.left - rootRect.right);\n      }\n\n      root.scrollLeft = moveX;\n      this._lastScrollLeft = moveX;\n    }\n  };\n}\n", "import type { NullablePartial } from '@blocksuite/global/types';\nimport { assertExists, Slot } from '@blocksuite/global/utils';\nimport type * as Y from 'yjs';\n\nimport type { VirgoLine } from './components/index.js';\nimport {\n  VirgoAttributeService,\n  VirgoDeltaService,\n  VirgoEventService,\n  VirgoRangeService,\n} from './services/index.js';\nimport type {\n  DeltaInsert,\n  TextPoint,\n  VRange,\n  VRangeUpdatedProp,\n} from './types.js';\nimport {\n  type BaseTextAttributes,\n  findDocumentOrShadowRoot,\n  nativePointToTextPoint,\n  textPointToDomPoint,\n} from './utils/index.js';\nimport { calculateTextLength, getTextNodesFromElement } from './utils/text.js';\n\ntype VirgoElement<T extends BaseTextAttributes = BaseTextAttributes> =\n  HTMLElement & {\n    virgoEditor: VEditor<T>;\n  };\n\nexport class VEditor<\n  TextAttributes extends BaseTextAttributes = BaseTextAttributes\n> {\n  static nativePointToTextPoint = nativePointToTextPoint;\n  static textPointToDomPoint = textPointToDomPoint;\n  static getTextNodesFromElement = getTextNodesFromElement;\n\n  private readonly _yText: Y.Text;\n  private readonly _isActive: () => boolean;\n  private _rootElement: VirgoElement<TextAttributes> | null = null;\n  private _isReadonly = false;\n\n  private _eventService: VirgoEventService<TextAttributes> =\n    new VirgoEventService<TextAttributes>(this);\n\n  private _rangeService: VirgoRangeService<TextAttributes> =\n    new VirgoRangeService<TextAttributes>(this);\n\n  private _attributeService: VirgoAttributeService<TextAttributes> =\n    new VirgoAttributeService<TextAttributes>(this);\n\n  private _deltaService: VirgoDeltaService<TextAttributes> =\n    new VirgoDeltaService<TextAttributes>(this);\n\n  shouldLineScrollIntoView = true;\n  shouldCursorScrollIntoView = true;\n\n  slots: {\n    mounted: Slot;\n    unmounted: Slot;\n    updated: Slot;\n    vRangeUpdated: Slot<VRangeUpdatedProp>;\n    rangeUpdated: Slot<Range>;\n    scrollUpdated: Slot<number>;\n  };\n  get yText() {\n    return this._yText;\n  }\n\n  get rootElement() {\n    assertExists(this._rootElement);\n    return this._rootElement;\n  }\n\n  get eventService() {\n    return this._eventService;\n  }\n\n  get rangeService() {\n    return this._rangeService;\n  }\n\n  get attributeService() {\n    return this._attributeService;\n  }\n\n  get deltaService() {\n    return this._deltaService;\n  }\n\n  // Expose attribute service API\n  get marks() {\n    return this._attributeService.marks;\n  }\n\n  setAttributeSchema = this._attributeService.setAttributeSchema;\n  setAttributeRenderer = this._attributeService.setAttributeRenderer;\n  setMarks = this._attributeService.setMarks;\n  resetMarks = this._attributeService.resetMarks;\n  getFormat = this._attributeService.getFormat;\n\n  // Expose event service API\n  bindHandlers = this._eventService.bindHandlers;\n\n  // Expose range service API\n  toDomRange = this.rangeService.toDomRange;\n  toVRange = this.rangeService.toVRange;\n  getVRange = this.rangeService.getVRange;\n  setVRange = this.rangeService.setVRange;\n  syncVRange = this.rangeService.syncVRange;\n\n  // Expose delta service API\n  getDeltasByVRange = this.deltaService.getDeltasByVRange;\n  getDeltaByRangeIndex = this.deltaService.getDeltaByRangeIndex;\n  mapDeltasInVRange = this.deltaService.mapDeltasInVRange;\n  constructor(\n    yText: VEditor['yText'],\n    ops?: {\n      active?: () => boolean;\n    }\n  ) {\n    if (!yText.doc) {\n      throw new Error('yText must be attached to a Y.Doc');\n    }\n\n    if (yText.toString().includes('\\r')) {\n      throw new Error(\n        'yText must not contain \\r because it will break the range synchronization'\n      );\n    }\n\n    this._yText = yText;\n    this._isActive = ops?.active ?? (() => true);\n    this.slots = {\n      mounted: new Slot(),\n      unmounted: new Slot(),\n      updated: new Slot(),\n      vRangeUpdated: new Slot<VRangeUpdatedProp>(),\n      rangeUpdated: new Slot<Range>(),\n      scrollUpdated: new Slot<number>(),\n    };\n\n    this.slots.vRangeUpdated.on(this.rangeService.onVRangeUpdated);\n    this.slots.scrollUpdated.on(this.rangeService.onScrollUpdated);\n  }\n\n  mount(rootElement: HTMLElement) {\n    const virgoElement = rootElement as VirgoElement<TextAttributes>;\n    virgoElement.virgoEditor = this;\n    this._rootElement = virgoElement;\n    this._rootElement.replaceChildren();\n    this._rootElement.contentEditable = 'true';\n    this._rootElement.dataset.virgoRoot = 'true';\n    this.yText.observe(this._onYTextChange);\n\n    this._deltaService.render();\n\n    this._eventService.mount();\n\n    this.slots.mounted.emit();\n  }\n\n  unmount() {\n    this._eventService.unmount();\n    this.yText.unobserve(this._onYTextChange);\n\n    this._rootElement?.replaceChildren();\n    this._rootElement = null;\n\n    this.slots.unmounted.emit();\n  }\n\n  requestUpdate(): void {\n    Promise.resolve().then(() => {\n      assertExists(this._rootElement);\n\n      this._deltaService.render();\n    });\n  }\n\n  getNativeSelection(): Selection | null {\n    const selectionRoot = findDocumentOrShadowRoot(this);\n    const selection = selectionRoot.getSelection();\n    if (!selection) return null;\n    if (selection.rangeCount === 0) return null;\n\n    return selection;\n  }\n\n  getTextPoint(rangeIndex: VRange['index']): TextPoint {\n    assertExists(this._rootElement);\n    const vLines = Array.from(this._rootElement.querySelectorAll('v-line'));\n\n    let index = 0;\n    for (const vLine of vLines) {\n      const texts = VEditor.getTextNodesFromElement(vLine);\n\n      for (const text of texts) {\n        if (!text.textContent) {\n          throw new Error('text element should have textContent');\n        }\n        if (index + text.textContent.length >= rangeIndex) {\n          return [text, rangeIndex - index];\n        }\n        index += calculateTextLength(text);\n      }\n\n      index += 1;\n    }\n\n    throw new Error('failed to find leaf');\n  }\n\n  // the number is related to the VirgoLine's textLength\n  getLine(rangeIndex: VRange['index']): readonly [VirgoLine, number] {\n    assertExists(this._rootElement);\n    const lineElements = Array.from(\n      this._rootElement.querySelectorAll('v-line')\n    );\n\n    let index = 0;\n    for (const lineElement of lineElements) {\n      if (rangeIndex >= index && rangeIndex <= index + lineElement.textLength) {\n        return [lineElement, rangeIndex - index] as const;\n      }\n      if (\n        rangeIndex === index + lineElement.textLength &&\n        rangeIndex === this.yText.length\n      ) {\n        return [lineElement, rangeIndex - index] as const;\n      }\n      index += lineElement.textLength + 1;\n    }\n\n    throw new Error('failed to find line');\n  }\n\n  setReadonly(isReadonly: boolean): void {\n    this.rootElement.contentEditable = isReadonly ? 'false' : 'true';\n    this._isReadonly = isReadonly;\n  }\n\n  get isReadonly() {\n    return this._isReadonly;\n  }\n\n  get isActive() {\n    return this._isActive();\n  }\n\n  /**\n   * the vRange is synced to the native selection asynchronically\n   */\n  focusEnd(): void {\n    this.rangeService.setVRange({\n      index: this.yText.length,\n      length: 0,\n    });\n  }\n\n  deleteText(vRange: VRange): void {\n    this._transact(() => {\n      this.yText.delete(vRange.index, vRange.length);\n    });\n  }\n\n  insertText(\n    vRange: VRange,\n    text: string,\n    attributes: TextAttributes = {} as TextAttributes\n  ): void {\n    if (this._attributeService.marks) {\n      attributes = { ...attributes, ...this._attributeService.marks };\n    }\n    const normalizedAttributes =\n      this._attributeService.normalizeAttributes(attributes);\n\n    if (!text || !text.length) {\n      throw new Error('text must not be empty');\n    }\n\n    this._transact(() => {\n      this.yText.delete(vRange.index, vRange.length);\n      this.yText.insert(vRange.index, text, normalizedAttributes);\n    });\n  }\n\n  insertLineBreak(vRange: VRange): void {\n    this._transact(() => {\n      this.yText.delete(vRange.index, vRange.length);\n      this.yText.insert(vRange.index, '\\n');\n    });\n  }\n\n  formatText(\n    vRange: VRange,\n    attributes: NullablePartial<TextAttributes>,\n    options: {\n      match?: (delta: DeltaInsert, deltaVRange: VRange) => boolean;\n      mode?: 'replace' | 'merge';\n    } = {}\n  ): void {\n    const { match = () => true, mode = 'merge' } = options;\n    const deltas = this._deltaService.getDeltasByVRange(vRange);\n\n    deltas\n      .filter(([delta, deltaVRange]) => match(delta, deltaVRange))\n      .forEach(([delta, deltaVRange]) => {\n        const targetVRange = this._rangeService.mergeRanges(\n          vRange,\n          deltaVRange\n        );\n\n        if (mode === 'replace') {\n          this.resetText(targetVRange);\n        }\n\n        this._transact(() => {\n          this.yText.format(\n            targetVRange.index,\n            targetVRange.length,\n            attributes\n          );\n        });\n      });\n  }\n\n  resetText(vRange: VRange): void {\n    const coverDeltas: DeltaInsert[] = [];\n    for (let i = vRange.index; i <= vRange.index + vRange.length; i++) {\n      const delta = this.getDeltaByRangeIndex(i);\n      if (delta) {\n        coverDeltas.push(delta);\n      }\n    }\n\n    const unset = Object.fromEntries(\n      coverDeltas.flatMap(delta =>\n        delta.attributes\n          ? Object.keys(delta.attributes).map(key => [key, null])\n          : []\n      )\n    );\n\n    this._transact(() => {\n      this.yText.format(vRange.index, vRange.length, {\n        ...unset,\n      });\n    });\n  }\n\n  setText(\n    text: string,\n    attributes: TextAttributes = {} as TextAttributes\n  ): void {\n    this._transact(() => {\n      this.yText.delete(0, this.yText.length);\n      this.yText.insert(0, text, attributes);\n    });\n  }\n\n  private _onYTextChange = () => {\n    if (this.yText.toString().includes('\\r')) {\n      throw new Error(\n        'yText must not contain \\r because it will break the range synchronization'\n      );\n    }\n\n    Promise.resolve().then(() => {\n      assertExists(this._rootElement);\n\n      this.deltaService.render();\n    });\n  };\n\n  private _transact(fn: () => void): void {\n    const doc = this.yText.doc;\n    if (!doc) {\n      throw new Error('yText is not attached to a doc');\n    }\n\n    doc.transact(fn, doc.clientID);\n  }\n}\n", "import {\n  BLOCK_CHILDREN_CONTAINER_PADDING_LEFT as PADDING_LEFT,\n  BLOCK_ID_ATTR as ATTR,\n} from '@blocksuite/global/config';\nimport { assertExists, matchFlavours } from '@blocksuite/global/utils';\nimport type { BaseBlockModel, Page } from '@blocksuite/store';\n\nimport { activeEditorManager } from '../../__internal__/utils/active-editor-manager.js';\nimport { type AbstractEditor } from '../../__internal__/utils/types.js';\nimport type { Loader } from '../../components/loader.js';\nimport type { DefaultPageBlockComponent } from '../../page-block/default/default-page-block.js';\nimport type { EdgelessPageBlockComponent } from '../../page-block/edgeless/edgeless-page-block.js';\nimport type { RichText } from '../rich-text/rich-text.js';\nimport { type Point, Rect } from './rect.js';\nimport { getCurrentNativeRange } from './selection.js';\nimport { clamp } from './std.js';\n\nconst ATTR_SELECTOR = `[${ATTR}]`;\n\n// margin-top: calc(var(--affine-paragraph-space) + 24px);\n// h1.margin-top = 8px + 24px = 32px;\nconst MAX_SPACE = 32;\nconst STEPS = MAX_SPACE / 2 / 2;\n\ntype ElementTagName = keyof HTMLElementTagNameMap;\n\nexport type BlockComponentElement =\n  HTMLElementTagNameMap[keyof HTMLElementTagNameMap] extends infer U\n    ? U extends { model: infer M }\n      ? M extends BaseBlockModel\n        ? U\n        : never\n      : never\n    : never;\n\ninterface ContainerBlock {\n  model?: BaseBlockModel;\n}\n\n/**\n * @deprecated Use `page.getParent` instead\n */\nexport function getParentBlockById<T extends ElementTagName>(\n  id: string,\n  ele: Element = document.body\n) {\n  const currentBlock = getBlockElementById(id, ele);\n  return (\n    (currentBlock?.parentElement?.closest<T>(\n      ATTR_SELECTOR as T\n    ) as BlockComponentElement) || null\n  );\n}\n\n/**\n *\n * @example\n * ```md\n * page\n * - frame\n *  - paragraph <- when invoked here, the traverse order will be following\n *    - child <- 1\n *  - sibling <- 2\n * - frame <- 3 (will be skipped)\n *   - paragraph <- 4\n * ```\n *\n * NOTE: this method will skip the `affine:frame` block\n */\nexport function getNextBlock(\n  model: BaseBlockModel,\n  map: Record<string, true> = {}\n): BaseBlockModel | null {\n  if (model.id in map) {\n    throw new Error(\"Can't get next block! There's a loop in the block tree!\");\n  }\n  map[model.id] = true;\n\n  const page = model.page;\n  if (model.children.length) {\n    return model.children[0];\n  }\n  let currentBlock: typeof model | null = model;\n  while (currentBlock) {\n    const nextSibling = page.getNextSibling(currentBlock);\n    if (nextSibling) {\n      // Assert nextSibling is not possible to be `affine:page`\n      if (matchFlavours(nextSibling, ['affine:frame'])) {\n        return getNextBlock(nextSibling);\n      }\n      return nextSibling;\n    }\n    currentBlock = page.getParent(currentBlock);\n  }\n  return null;\n}\n\n/**\n *\n * @example\n * ```md\n * page\n * - frame\n *   - paragraph <- 5\n * - frame <- 4 (will be skipped)\n *  - paragraph <- 3\n *    - child <- 2\n *      - child <- 1\n *  - paragraph <- when invoked here, the traverse order will be above\n * ```\n *\n * NOTE: this method will skip the `affine:frame` and `affine:page` block\n */\nexport function getPreviousBlock(\n  model: BaseBlockModel,\n  map: Record<string, true> = {}\n): BaseBlockModel | null {\n  if (model.id in map) {\n    throw new Error(\n      \"Can't get previous block! There's a loop in the block tree!\"\n    );\n  }\n  map[model.id] = true;\n\n  const page = model.page;\n  const parentBlock = page.getParent(model);\n  if (!parentBlock) {\n    return null;\n  }\n  const previousBlock = page.getPreviousSibling(model);\n  if (!previousBlock) {\n    if (\n      matchFlavours(parentBlock, [\n        'affine:frame',\n        'affine:page',\n        'affine:database',\n      ])\n    ) {\n      return getPreviousBlock(parentBlock);\n    }\n    return parentBlock;\n  }\n  if (previousBlock.children.length) {\n    let lastChild = previousBlock.children[previousBlock.children.length - 1];\n    while (lastChild.children.length) {\n      lastChild = lastChild.children[lastChild.children.length - 1];\n    }\n    // Assume children is not possible to be `affine:frame` or `affine:page`\n    return lastChild;\n  }\n  return previousBlock;\n}\n\n/**\n * Returns `DefaultPageBlockComponent` | `EdgelessPageBlockComponent` if it exists\n * otherwise return `null`.\n */\nexport function getPageBlock(\n  model: BaseBlockModel\n): DefaultPageBlockComponent | EdgelessPageBlockComponent | null {\n  assertExists(model.page.root);\n  return document.querySelector(`[${ATTR}=\"${model.page.root.id}\"]`);\n}\n\n/**\n * If it's not in the page mode, it will return `null` directly.\n */\nexport function getDefaultPage(page: Page) {\n  const editor = getEditorContainer(page);\n  if (editor.mode !== 'page') return null;\n  const pageComponent = editor.querySelector('affine-default-page');\n  return pageComponent;\n}\n\n/**\n * If it's not in the edgeless mode, it will return `null` directly.\n */\nexport function getEdgelessPage(page: Page) {\n  const editor = getEditorContainer(page);\n  if (editor.mode !== 'edgeless') return null;\n  const pageComponent = editor.querySelector('affine-edgeless-page');\n  return pageComponent;\n}\n\n/**\n * This function exposes higher levels of abstraction.\n *\n * PLEASE USE IT WITH CAUTION!\n */\nexport function getEditorContainer(page: Page): AbstractEditor {\n  assertExists(\n    page.root,\n    'Failed to check page mode! Page root is not exists!'\n  );\n  const pageBlock = getBlockElementById(page.root.id);\n  // EditorContainer\n  const editorContainer = pageBlock?.closest('editor-container');\n  assertExists(editorContainer);\n  return editorContainer as AbstractEditor;\n}\n\nexport function getEditorContainerByElement(ele: Element) {\n  // EditorContainer\n  const editorContainer = ele.closest('editor-container');\n  assertExists(editorContainer);\n  return editorContainer;\n}\n\nexport function isPageMode(page: Page) {\n  const editor = getEditorContainer(page);\n  if (!('mode' in editor)) {\n    throw new Error('Failed to check page mode! Editor mode is not exists!');\n  }\n  return editor.mode === 'page';\n}\n\n/**\n * Get editor viewport element.\n *\n * @example\n * ```ts\n * const viewportElement = getViewportElement(this.model.page);\n * if (!viewportElement) return;\n * this._disposables.addFromEvent(viewportElement, 'scroll', () => {\n *   updatePosition();\n * });\n * ```\n */\nexport function getViewportElement(page: Page) {\n  const isPage = isPageMode(page);\n  if (!isPage) return null;\n  assertExists(page.root);\n  const defaultPageBlock = document.querySelector(\n    `[${ATTR}=\"${page.root.id}\"]`\n  );\n\n  if (\n    !defaultPageBlock ||\n    defaultPageBlock.closest('affine-default-page') !== defaultPageBlock\n  ) {\n    throw new Error('Failed to get viewport element!');\n  }\n  return (defaultPageBlock as DefaultPageBlockComponent).viewportElement;\n}\n\nexport function getBlockElementByModel(\n  model: BaseBlockModel\n): BlockComponentElement | null {\n  assertExists(model.page.root);\n  const editor = activeEditorManager.getActiveEditor();\n  const page = (editor ?? document).querySelector<\n    DefaultPageBlockComponent | EdgelessPageBlockComponent\n  >(`[${ATTR}=\"${model.page.root.id}\"]`);\n  if (!page) return null;\n\n  if (model.id === model.page.root.id) {\n    return page;\n  }\n\n  return page.querySelector<BlockComponentElement>(`[${ATTR}=\"${model.id}\"]`);\n}\n\nexport function asyncGetBlockElementByModel(\n  model: BaseBlockModel\n): Promise<BlockComponentElement | null> {\n  assertExists(model.page.root);\n  const editor = activeEditorManager.getActiveEditor();\n  const page = (editor ?? document).querySelector<\n    DefaultPageBlockComponent | EdgelessPageBlockComponent\n  >(`[${ATTR}=\"${model.page.root.id}\"]`);\n  if (!page) return Promise.resolve(null);\n\n  if (model.id === model.page.root.id) {\n    return Promise.resolve(page);\n  }\n\n  let resolved = false;\n  return new Promise<BlockComponentElement>((resolve, reject) => {\n    const onSuccess = (element: BlockComponentElement) => {\n      resolved = true;\n      observer.disconnect();\n      resolve(element);\n    };\n\n    const onFail = () => {\n      observer.disconnect();\n      reject(\n        new Error(\n          `Cannot find block element by model: ${model.flavour} id: ${model.id}`\n        )\n      );\n    };\n\n    const observer = new MutationObserver(() => {\n      const blockElement = page.querySelector<BlockComponentElement>(\n        `[${ATTR}=\"${model.id}\"]`\n      );\n      if (blockElement) {\n        onSuccess(blockElement);\n      }\n    });\n\n    observer.observe(page, {\n      childList: true,\n      subtree: true,\n    });\n\n    requestAnimationFrame(() => {\n      if (!resolved) {\n        const blockElement = getBlockElementByModel(model);\n        if (blockElement) {\n          onSuccess(blockElement);\n        } else {\n          onFail();\n        }\n      }\n    });\n  });\n}\n\nexport function getStartModelBySelection(range = getCurrentNativeRange()) {\n  const startContainer =\n    range.startContainer instanceof Text\n      ? (range.startContainer.parentElement as HTMLElement)\n      : (range.startContainer as HTMLElement);\n\n  const startComponent = startContainer.closest(\n    `[${ATTR}]`\n  ) as ContainerBlock | null;\n  if (!startComponent) {\n    return null;\n  }\n  const startModel = startComponent.model as BaseBlockModel;\n  if (matchFlavours(startModel, ['affine:frame', 'affine:page'])) {\n    return null;\n  }\n  return startModel;\n}\n\n/**\n * @deprecated In most cases, you not need RichText, you can use {@link getVirgoByModel} instead.\n */\nexport function getRichTextByModel(model: BaseBlockModel) {\n  const blockElement = getBlockElementByModel(model);\n  const richText = blockElement?.querySelector<RichText>('rich-text');\n  if (!richText) return null;\n  return richText;\n}\n\nexport async function asyncGetRichTextByModel(model: BaseBlockModel) {\n  const blockElement = await asyncGetBlockElementByModel(model);\n  const richText = blockElement?.querySelector<RichText>('rich-text');\n  if (!richText) return null;\n  return richText;\n}\n\nexport function getVirgoByModel(model: BaseBlockModel) {\n  if (matchFlavours(model, ['affine:database'])) {\n    // Not support database model since it's may be have multiple Virgo instances.\n    // Support to enter the editing state through the Enter key in the database.\n    return null;\n  }\n  const richText = getRichTextByModel(model);\n  if (!richText) return null;\n  return richText.vEditor;\n}\n\nexport async function asyncGetVirgoByModel(model: BaseBlockModel) {\n  if (matchFlavours(model, ['affine:database'])) {\n    // Not support database model since it's may be have multiple Virgo instances.\n    throw new Error('Cannot get virgo by database model!');\n  }\n  const richText = await asyncGetRichTextByModel(model);\n  if (!richText) return null;\n  return richText.vEditor;\n}\n\n// TODO fix find embed model\nexport function getModelsByRange(range: Range): BaseBlockModel[] {\n  // filter comment\n  if (\n    range.startContainer.nodeType === Node.COMMENT_NODE ||\n    range.endContainer.nodeType === Node.COMMENT_NODE ||\n    range.commonAncestorContainer.nodeType === Node.COMMENT_NODE\n  ) {\n    return [];\n  }\n\n  let commonAncestor = range.commonAncestorContainer as HTMLElement;\n  if (commonAncestor.nodeType === Node.TEXT_NODE) {\n    const model = getStartModelBySelection(range);\n    if (!model) return [];\n    return [model];\n  }\n\n  if (\n    commonAncestor.attributes &&\n    !commonAncestor.attributes.getNamedItem(ATTR)\n  ) {\n    const parentElement = commonAncestor.closest(ATTR_SELECTOR)\n      ?.parentElement as HTMLElement;\n    if (parentElement != null) {\n      commonAncestor = parentElement;\n    }\n  }\n\n  const intersectedModels: BaseBlockModel[] = [];\n  const blockElements = commonAncestor.querySelectorAll(ATTR_SELECTOR);\n\n  if (!blockElements.length) return [];\n\n  if (blockElements.length === 1) {\n    const model = getStartModelBySelection(range);\n    if (!model) return [];\n    return [model];\n  }\n\n  Array.from(blockElements)\n    .filter(element => 'model' in element)\n    .forEach(element => {\n      const block = element as ContainerBlock;\n      if (!block.model) return;\n\n      const mainElement = matchFlavours(block.model, ['affine:page'])\n        ? element?.querySelector('.affine-default-page-block-title-container')\n        : element?.querySelector('rich-text') || element?.querySelector('img');\n      if (\n        mainElement &&\n        range.intersectsNode(mainElement) &&\n        !matchFlavours(block.model, ['affine:frame', 'affine:page'])\n      ) {\n        intersectedModels.push(block.model);\n      }\n    });\n  return intersectedModels;\n}\n\nexport function getModelByElement(element: Element): BaseBlockModel {\n  const closestBlock = element.closest(ATTR_SELECTOR);\n  assertExists(closestBlock, 'Cannot find block element by element');\n  return getModelByBlockElement(closestBlock);\n}\n\nfunction mergeRect(a: DOMRect, b: DOMRect) {\n  return new DOMRect(\n    Math.min(a.left, b.left),\n    Math.min(a.top, b.top),\n    Math.max(a.right, b.right) - Math.min(a.left, b.left),\n    Math.max(a.bottom, b.bottom) - Math.min(a.top, b.top)\n  );\n}\n\nexport function getDOMRectByLine(\n  rectList: DOMRectList,\n  lineType: 'first' | 'last'\n) {\n  const list = Array.from(rectList);\n\n  if (lineType === 'first') {\n    let flag = 0;\n    for (let i = 0; i < list.length; i++) {\n      if (list[i].left < 0 && list[i].right < 0 && list[i].height === 1) break;\n      flag = i;\n    }\n    const subList = list.slice(0, flag + 1);\n    return subList.reduce(mergeRect);\n  } else {\n    let flag = list.length - 1;\n    for (let i = list.length - 1; i >= 0; i--) {\n      if (list[i].height === 0) break;\n      flag = i;\n    }\n    const subList = list.slice(flag);\n    return subList.reduce(mergeRect);\n  }\n}\n\nexport function isInsideRichText(element: unknown): element is RichText {\n  // Fool-proofing\n  if (element instanceof Event) {\n    throw new Error('Did you mean \"event.target\"?');\n  }\n\n  if (!element || !(element instanceof Element)) {\n    return false;\n  }\n  const richText = element.closest('rich-text');\n  return !!richText;\n}\n\nexport function isInsidePageTitle(element: unknown): boolean {\n  const editor = activeEditorManager.getActiveEditor();\n  const titleElement = (editor ?? document).querySelector(\n    '[data-block-is-title=\"true\"]'\n  );\n  if (!titleElement) return false;\n\n  return titleElement.contains(element as Node);\n}\n\nexport function isInsideEdgelessTextEditor(element: unknown): boolean {\n  const editor = activeEditorManager.getActiveEditor();\n  const textElement = (editor ?? document).querySelector('surface-text-editor');\n  if (!textElement) return false;\n\n  return textElement.contains(element as Node);\n}\n\nexport function isToggleIcon(element: unknown): element is SVGPathElement {\n  return (\n    element instanceof SVGPathElement &&\n    element.getAttribute('data-is-toggle-icon') === 'true'\n  );\n}\n\nexport function isDatabaseInput(element: unknown): boolean {\n  return (\n    element instanceof HTMLElement &&\n    element.getAttribute('data-virgo-root') === 'true' &&\n    !!element.closest('affine-database')\n  );\n}\n\nexport function isRawInput(element: unknown): boolean {\n  return (\n    element instanceof HTMLInputElement && !!element.closest('affine-database')\n  );\n}\n\nexport function isInsideDatabaseTitle(element: unknown): boolean {\n  const titleElement = document.querySelector(\n    '[data-block-is-database-title=\"true\"]'\n  );\n  if (!titleElement) return false;\n\n  return titleElement.contains(element as Node);\n}\n\nexport function isCaptionElement(node: unknown): node is HTMLInputElement {\n  if (!(node instanceof Element)) {\n    return false;\n  }\n  return node.classList.contains('affine-embed-wrapper-caption');\n}\n\nexport function getElementFromEventTarget(\n  target: EventTarget | null\n): Element | null {\n  if (!target) return null;\n  if (target instanceof Element) return target;\n  if (target instanceof Node) target.parentElement;\n  return null;\n}\n\n/**\n * Returns `16` if node is contained in the parent.\n * Otherwise return `0`.\n */\nexport function contains(parent: Element, node: Element) {\n  return (\n    parent.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY\n  );\n}\n\n/**\n * Returns `true` if node is contained in the elements.\n */\nexport function isContainedIn(elements: Element[], node: Element) {\n  return elements.some(parent => contains(parent, node));\n}\n\n/**\n * Returns `true` if element has `data-block-id` attribute.\n */\nexport function hasBlockId(element: Element) {\n  return element.hasAttribute(ATTR);\n}\n\n/**\n * Returns `true` if element is default page.\n */\nexport function isDefaultPage({ tagName }: Element) {\n  return tagName === 'AFFINE-DEFAULT-PAGE';\n}\n\n/**\n * Returns `true` if element is edgeless page.\n */\nexport function isEdgelessPage({ tagName }: Element) {\n  return tagName === 'AFFINE-EDGELESS-PAGE';\n}\n\n/**\n * Returns `true` if element is default/edgeless page or frame.\n */\nexport function isPageOrFrameOrSurface(element: Element) {\n  return (\n    isDefaultPage(element) ||\n    isEdgelessPage(element) ||\n    isFrame(element) ||\n    isSurface(element)\n  );\n}\n\n/**\n * Returns `true` if element is not page or frame.\n */\nexport function isBlock(element: Element) {\n  return !isPageOrFrameOrSurface(element);\n}\n\n/**\n * Returns `true` if element is image.\n */\nexport function isImage({ tagName, firstElementChild }: Element) {\n  return (\n    tagName === 'AFFINE-EMBED' && firstElementChild?.tagName === 'AFFINE-IMAGE'\n  );\n}\n\n/**\n * Returns `true` if element is frame.\n */\nfunction isFrame({ tagName }: Element) {\n  return tagName === 'AFFINE-FRAME';\n}\n\n/**\n * Returns `true` if element is surface.\n */\nfunction isSurface({ tagName }: Element) {\n  return tagName === 'AFFINE-SURFACE';\n}\n\n/**\n * Returns `true` if element is embed.\n */\nfunction isEmbed({ tagName }: Element) {\n  return tagName === 'AFFINE-EMBED';\n}\n\n/**\n * Returns `true` if element is database.\n */\nfunction isDatabase({ tagName }: Element) {\n  return tagName === 'AFFINE-DATABASE-TABLE' || tagName === 'AFFINE-DATABASE';\n}\n\n/**\n * Returns `true` if element is edgeless block child.\n */\nexport function isEdgelessBlockChild({ classList }: Element) {\n  return classList.contains('affine-edgeless-block-child');\n}\n\n/**\n * Returns the closest block element by a point in the rect.\n *\n * ```\n * ############### block\n * ||############# block\n * ||||########### block\n * ||||    ...\n * ||||  y - 2 * n\n * ||||    ...\n * ||||----------- cursor\n * ||||    ...\n * ||||  y + 2 * n\n * ||||    ...\n * ||||########### block\n * ||############# block\n * ############### block\n * ```\n */\nexport function getClosestBlockElementByPoint(\n  point: Point,\n  state: {\n    rect?: Rect;\n    container?: Element;\n    snapToEdge?: { x: boolean; y: boolean };\n  } | null = null,\n  scale = 1\n): Element | null {\n  const { y } = point;\n\n  let container;\n  let element = null;\n  let bounds = null;\n  let childBounds = null;\n  let diff = 0;\n  let n = 1;\n\n  if (state) {\n    const { snapToEdge = { x: true, y: false } } = state;\n    container = state.container;\n    const rect = state.rect || container?.getBoundingClientRect();\n    if (rect) {\n      if (snapToEdge.x) {\n        point.x = Math.min(\n          Math.max(point.x, rect.left) + PADDING_LEFT * scale - 1,\n          rect.right - PADDING_LEFT * scale - 1\n        );\n      }\n      if (snapToEdge.y) {\n        // TODO handle scale\n        if (scale !== 1) {\n          console.warn('scale is not supported yet');\n        }\n        point.y = clamp(point.y, rect.top + 1, rect.bottom - 1);\n      }\n    }\n  }\n\n  // find block element\n  element = findBlockElement(\n    document.elementsFromPoint(point.x, point.y),\n    container\n  );\n\n  // Horizontal direction: for nested structures\n  if (element) {\n    // Database\n    if (isDatabase(element)) {\n      bounds = element.getBoundingClientRect();\n      const rows = getDatabaseBlockRowsElement(element);\n      assertExists(rows);\n      childBounds = rows.getBoundingClientRect();\n\n      if (childBounds.height) {\n        if (point.y < childBounds.top || point.y > childBounds.bottom) {\n          return element;\n        }\n        childBounds = null;\n      } else {\n        return element;\n      }\n    } else {\n      // Indented paragraphs or list\n      bounds = getRectByBlockElement(element);\n      childBounds = element\n        .querySelector('.affine-block-children-container')\n        ?.firstElementChild?.getBoundingClientRect();\n\n      if (childBounds && childBounds.height) {\n        if (bounds.x < point.x && point.x <= childBounds.x) {\n          return element;\n        }\n        childBounds = null;\n      } else {\n        return element;\n      }\n    }\n\n    bounds = null;\n    element = null;\n  }\n\n  // Vertical direction\n  do {\n    point.y = y - n * 2;\n\n    if (n < 0) n--;\n    n *= -1;\n\n    // find block element\n    element = findBlockElement(\n      document.elementsFromPoint(point.x, point.y),\n      container\n    );\n\n    if (element) {\n      bounds = getRectByBlockElement(element);\n      diff = bounds.bottom - point.y;\n      if (diff >= 0 && diff <= STEPS * 2) {\n        return element;\n      }\n      diff = point.y - bounds.top;\n      if (diff >= 0 && diff <= STEPS * 2) {\n        return element;\n      }\n      bounds = null;\n      element = null;\n    }\n  } while (n <= STEPS);\n\n  return element;\n}\n\n/**\n * Returns the closest block element by element that does not contain the page element and frame element.\n */\nexport function getClosestBlockElementByElement(element: Element | null) {\n  if (!element) return null;\n  if (hasBlockId(element) && isBlock(element)) {\n    return element;\n  }\n  element = element.closest(ATTR_SELECTOR);\n  if (element && isBlock(element)) {\n    return element;\n  }\n  return null;\n}\n\n/**\n * Returns the model of the block element.\n */\nexport function getModelByBlockElement(element: Element) {\n  const containerBlock = element as ContainerBlock;\n  // In extreme cases, the block may be loading, and the model is not yet available.\n  // For example\n  // // `<loader-element data-block-id=\"586080495:15\" data-service-loading=\"true\"></loader-element>`\n  if ('hostModel' in containerBlock) {\n    const loader = containerBlock as Loader;\n    assertExists(loader.hostModel);\n    return loader.hostModel;\n  }\n  assertExists(containerBlock.model);\n  return containerBlock.model;\n}\n\n/**\n * Returns all block elements in an element.\n */\nexport function getBlockElementsByElement(\n  element: BlockComponentElement | Document | Element = document\n) {\n  return Array.from(element.querySelectorAll(ATTR_SELECTOR)).filter(isBlock);\n}\n\n/**\n * Returns the block element by id with the parent.\n */\nexport function getBlockElementById(\n  id: string,\n  parent:\n    | BlockComponentElement\n    | Document\n    | Element = activeEditorManager.getActiveEditor() ?? document\n) {\n  return parent.querySelector(`[${ATTR}=\"${id}\"]`);\n}\n\n/**\n * Returns the closest frame block element by id with the parent.\n */\nexport function getClosestFrameBlockElementById(\n  id: string,\n  parent: BlockComponentElement | Document | Element = document\n) {\n  const element = getBlockElementById(id, parent);\n  if (!element) return null;\n  if (isFrame(element)) return element;\n  return element.closest('affine-frame');\n}\n\n/**\n * Returns rect of the block element.\n *\n * Compatible with Safari!\n * https://github.com/toeverything/blocksuite/issues/902\n * https://github.com/toeverything/blocksuite/pull/1121\n */\nexport function getRectByBlockElement(\n  element: Element | BlockComponentElement\n) {\n  if (isDatabase(element)) return element.getBoundingClientRect();\n  return (element.firstElementChild ?? element).getBoundingClientRect();\n}\n\n/**\n * Returns selected state rect of the block element.\n */\nexport function getSelectedStateRectByBlockElement(\n  element: Element | BlockComponentElement\n) {\n  if (isImage(element)) {\n    const wrapper = element.querySelector('.affine-image-wrapper');\n    const resizable = element.querySelector('.resizable-img');\n    assertExists(wrapper);\n    assertExists(resizable);\n    const w = Rect.fromDOM(wrapper);\n    const r = Rect.fromDOM(resizable);\n    const d = w.intersect(r);\n    return d.toDOMRect();\n  }\n  return getRectByBlockElement(element);\n}\n\n/**\n * Returns block elements excluding their subtrees.\n * Only keep block elements of same level.\n */\nexport function getBlockElementsExcludeSubtrees(\n  elements: Element[] | BlockComponentElement[]\n) {\n  if (elements.length <= 1) return elements;\n  let parent = elements[0];\n  return elements.filter((node, index) => {\n    if (index === 0) return true;\n    if (contains(parent, node)) {\n      return false;\n    } else {\n      parent = node;\n      return true;\n    }\n  });\n}\n\n/**\n * Returns block elements including their subtrees.\n */\nexport function getBlockElementsIncludeSubtrees(elements: Element[]) {\n  return elements.reduce<Element[]>((elements, element) => {\n    if (isDatabase(element)) {\n      elements.push(element);\n    } else {\n      elements.push(element, ...getBlockElementsByElement(element));\n    }\n    return elements;\n  }, []);\n}\n\n/**\n * Find block element from an `Element[]`.\n * In Chrome/Safari, `document.elementsFromPoint` does not include `affine-image`.\n */\nfunction findBlockElement(elements: Element[], parent?: Element) {\n  const len = elements.length;\n  let element = null;\n  let i = 0;\n  while (i < len) {\n    element = elements[i];\n    i++;\n    // if parent does not contain element, it's ignored\n    if (parent && !contains(parent, element)) continue;\n    if (hasBlockId(element) && isBlock(element)) return element;\n    if (isEmbed(element)) {\n      if (i < len && hasBlockId(elements[i]) && isBlock(elements[i])) {\n        return elements[i];\n      }\n      return getClosestBlockElementByElement(element);\n    }\n  }\n  return null;\n}\n\n/**\n * query current mode whether is light or dark\n */\nexport function queryCurrentMode(): 'light' | 'dark' {\n  const mode = getComputedStyle(document.documentElement).getPropertyValue(\n    '--affine-theme-mode'\n  );\n\n  if (mode.trim() === 'dark') {\n    return 'dark';\n  } else {\n    return 'light';\n  }\n}\n\n/**\n * Get hovering frame with given a point in edgeless mode.\n */\nexport function getHoveringFrame(point: Point) {\n  return (\n    document.elementsFromPoint(point.x, point.y).find(isEdgelessBlockChild) ||\n    null\n  );\n}\n\n/**\n * Returns `true` if the database is empty.\n */\nexport function isEmptyDatabase(model: BaseBlockModel) {\n  return matchFlavours(model, ['affine:database']) && model.isEmpty();\n}\n\n/**\n * Gets the table of the database.\n */\nexport function getDatabaseBlockTableElement(element: Element) {\n  return element.querySelector('.affine-database-block-table');\n}\n\n/**\n * Gets the column header of the database.\n */\nexport function getDatabaseBlockColumnHeaderElement(element: Element) {\n  return element.querySelector('.affine-database-column-header');\n}\n\n/**\n * Gets the rows of the database.\n */\nexport function getDatabaseBlockRowsElement(element: Element) {\n  return element.querySelector('.affine-database-block-rows');\n}\n\n/**\n * Returns a flag for the drop target.\n */\nexport enum DropFlags {\n  Normal,\n  Database,\n  EmptyDatabase,\n}\n\n/**\n * Gets the drop rect by block and point.\n */\nexport function getDropRectByPoint(\n  point: Point,\n  model: BaseBlockModel,\n  element: Element\n): {\n  rect: DOMRect;\n  flag: DropFlags;\n} {\n  const result = {\n    rect: getRectByBlockElement(element),\n    flag: DropFlags.Normal,\n  };\n\n  const isDatabase = matchFlavours(model, ['affine:database'] as const);\n\n  if (isDatabase) {\n    const table = getDatabaseBlockTableElement(element);\n    assertExists(table);\n    let bounds = table.getBoundingClientRect();\n    if (model.isEmpty()) {\n      result.flag = DropFlags.EmptyDatabase;\n\n      if (point.y < bounds.top) return result;\n\n      const header = getDatabaseBlockColumnHeaderElement(element);\n      assertExists(header);\n      bounds = header.getBoundingClientRect();\n      result.rect = new DOMRect(\n        result.rect.left,\n        bounds.bottom,\n        result.rect.width,\n        1\n      );\n    } else {\n      result.flag = DropFlags.Database;\n      const rows = getDatabaseBlockRowsElement(element);\n      assertExists(rows);\n      const rowsBounds = rows.getBoundingClientRect();\n\n      if (point.y < rowsBounds.top || point.y > rowsBounds.bottom)\n        return result;\n\n      const elements = document.elementsFromPoint(point.x, point.y);\n      const len = elements.length;\n      let e;\n      let i = 0;\n      for (; i < len; i++) {\n        e = elements[i];\n\n        if (e.classList.contains('affine-database-block-row-cell-content')) {\n          result.rect = getCellRect(e, bounds);\n          return result;\n        }\n\n        if (e.classList.contains('affine-database-block-row')) {\n          e = e.querySelector(ATTR_SELECTOR);\n          assertExists(e);\n          result.rect = getCellRect(e, bounds);\n          return result;\n        }\n      }\n    }\n  } else {\n    const parent = element.parentElement;\n    if (parent?.classList.contains('affine-database-block-row-cell-content')) {\n      result.flag = DropFlags.Database;\n      result.rect = getCellRect(parent);\n      return result;\n    }\n  }\n\n  return result;\n}\n\nfunction getCellRect(element: Element, bounds?: DOMRect) {\n  if (!bounds) {\n    const table = element.closest('.affine-database-block-table');\n    assertExists(table);\n    bounds = table.getBoundingClientRect();\n  }\n  // affine-database-block-row-cell\n  const col = element.parentElement;\n  assertExists(col);\n  // affine-database-block-row\n  const row = col.parentElement;\n  assertExists(row);\n  const colRect = col.getBoundingClientRect();\n  const rowRect = row.getBoundingClientRect();\n  return new DOMRect(\n    bounds.left,\n    rowRect.top,\n    colRect.right - bounds.left,\n    colRect.height\n  );\n}\n\n/**\n * Returns `true` if the target is `Element`.\n */\nexport function isElement(target: EventTarget | null) {\n  return target && target instanceof Element;\n}\n\n/**\n * Returns `true` if the target is `affine-selected-blocks`.\n */\nexport function isSelectedBlocks(target: Element) {\n  return target.tagName === 'AFFINE-SELECTED-BLOCKS';\n}\n\n/**\n * Returns `true` if the target is `affine-drag-handle`.\n */\nexport function isDragHandle(target: Element) {\n  return target.tagName === 'AFFINE-DRAG-HANDLE';\n}\n\n/**\n * Returns `true` if block elements have database block element.\n */\nexport function hasDatabase(elements: Element[]) {\n  return elements.some(isDatabase);\n}\n", "import { assertExists, matchFlavours } from '@blocksuite/global/utils';\nimport type { Page } from '@blocksuite/store';\nimport type { BaseBlockModel } from '@blocksuite/store';\nimport type { VEditor, VRange } from '@blocksuite/virgo';\n\nimport type {\n  BookmarkBlockComponent,\n  BookmarkBlockModel,\n} from '../../bookmark-block/index.js';\nimport type { ListType } from '../../list-block/index.js';\nimport {\n  asyncGetRichTextByModel,\n  getBlockElementByModel,\n  getVirgoByModel,\n} from './query.js';\nimport type { ExtendedModel } from './types.js';\n\nexport async function asyncSetVRange(model: BaseBlockModel, vRange: VRange) {\n  const richText = await asyncGetRichTextByModel(model);\n  richText?.vEditor?.setVRange(vRange);\n\n  return new Promise<void>(resolve => {\n    richText?.vEditor?.slots.rangeUpdated.once(() => {\n      resolve();\n    });\n  });\n}\n\nexport function asyncFocusRichText(\n  page: Page,\n  id: string,\n  vRange: VRange = { index: 0, length: 0 }\n) {\n  const model = page.getBlockById(id);\n  assertExists(model);\n  if (matchFlavours(model, ['affine:divider'])) return;\n  return asyncSetVRange(model, vRange);\n}\n\nexport function isCollapsedAtBlockStart(vEditor: VEditor) {\n  const vRange = vEditor.getVRange();\n  return vRange?.index === 0 && vRange?.length === 0;\n}\n\nexport function isInSamePath(\n  page: Page,\n  children: BaseBlockModel,\n  father: BaseBlockModel\n): boolean {\n  if (children === father) {\n    return true;\n  }\n  let parent: BaseBlockModel | null;\n  for (;;) {\n    parent = page.getParent(children);\n    if (parent === null) {\n      return false;\n    } else if (parent.id === father.id) {\n      return true;\n    }\n    children = parent;\n  }\n}\n\nexport function convertToList(\n  page: Page,\n  model: ExtendedModel,\n  listType: ListType,\n  prefix: string,\n  otherProperties?: Record<string, unknown>\n): boolean {\n  if (matchFlavours(model, ['affine:list']) && model['type'] === listType) {\n    return false;\n  }\n  if (matchFlavours(model, ['affine:paragraph'])) {\n    const parent = page.getParent(model);\n    if (!parent) return false;\n\n    const index = parent.children.indexOf(model);\n    model.text?.insert(' ', prefix.length);\n    page.captureSync();\n\n    model.text?.delete(0, prefix.length + 1);\n    const blockProps = {\n      type: listType,\n      text: model.text?.clone(),\n      children: model.children,\n      ...otherProperties,\n    };\n    page.deleteBlock(model);\n\n    const id = page.addBlock('affine:list', blockProps, parent, index);\n    asyncFocusRichText(page, id);\n  } else if (\n    matchFlavours(model, ['affine:list']) &&\n    model['type'] !== listType\n  ) {\n    model.text?.insert(' ', prefix.length);\n    page.captureSync();\n\n    model.text?.delete(0, prefix.length + 1);\n    page.updateBlock(model, { type: listType });\n    asyncFocusRichText(page, model.id);\n  }\n  return true;\n}\n\nexport function convertToParagraph(\n  page: Page,\n  model: ExtendedModel,\n  type: 'text' | 'quote' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6',\n  prefix: string\n): boolean {\n  if (matchFlavours(model, ['affine:paragraph']) && model['type'] === type) {\n    return false;\n  }\n  if (!matchFlavours(model, ['affine:paragraph'])) {\n    const parent = page.getParent(model);\n    if (!parent) return false;\n\n    const index = parent.children.indexOf(model);\n    model.text?.insert(' ', prefix.length);\n    page.captureSync();\n\n    model.text?.delete(0, prefix.length + 1);\n    const blockProps = {\n      type: type,\n      text: model.text?.clone(),\n      children: model.children,\n    };\n    page.deleteBlock(model);\n\n    const id = page.addBlock('affine:paragraph', blockProps, parent, index);\n    asyncFocusRichText(page, id);\n  } else if (\n    matchFlavours(model, ['affine:paragraph']) &&\n    model['type'] !== type\n  ) {\n    model.text?.insert(' ', prefix.length);\n    page.captureSync();\n\n    model.text?.delete(0, prefix.length + 1);\n    const vEditor = getVirgoByModel(model);\n    if (vEditor) {\n      vEditor.setVRange({\n        index: 0,\n        length: 0,\n      });\n    }\n    page.updateBlock(model, { type: type });\n  }\n  return true;\n}\n\nexport function convertToDivider(\n  page: Page,\n  model: ExtendedModel,\n  prefix: string\n): boolean {\n  if (matchFlavours(model, ['affine:divider']) || model.type === 'quote') {\n    return false;\n  }\n  if (!matchFlavours(model, ['affine:divider'])) {\n    const parent = page.getParent(model);\n    if (!parent) return false;\n\n    const index = parent.children.indexOf(model);\n    model.text?.insert(' ', prefix.length);\n    page.captureSync();\n\n    model.text?.delete(0, prefix.length + 1);\n    const blockProps = {\n      children: model.children,\n    };\n    // space.deleteBlock(model);\n    page.addBlock('affine:divider', blockProps, parent, index);\n\n    const nextBlock = parent.children[index + 1];\n    if (nextBlock) {\n      asyncFocusRichText(page, nextBlock.id);\n    } else {\n      const nextId = page.addBlock('affine:paragraph', {}, parent);\n      asyncFocusRichText(page, nextId);\n    }\n  }\n  return true;\n}\n\nexport function createBookmarkBlock(\n  parentModel: BaseBlockModel,\n  index?: number\n) {\n  const { page } = parentModel;\n  const id = page.addBlock(\n    'affine:bookmark',\n    { url: '' },\n    parentModel.id,\n    index\n  );\n  requestAnimationFrame(() => {\n    const model = page.getBlockById(id);\n    const element = getBlockElementByModel(\n      model as BookmarkBlockModel\n    ) as BookmarkBlockComponent;\n    element.slots.openInitialModal.emit();\n  });\n  return id;\n}\n", "// operations used in rich-text level\n\nimport { ALLOW_DEFAULT, PREVENT_DEFAULT } from '@blocksuite/global/config';\nimport type { BlockModelProps } from '@blocksuite/global/types';\nimport { assertExists, matchFlavours } from '@blocksuite/global/utils';\nimport type { BaseBlockModel, Page } from '@blocksuite/store';\nimport { Text, Utils } from '@blocksuite/store';\n\nimport type { PageBlockModel } from '../../models.js';\nimport { checkFirstLine, checkLastLine } from '../utils/check-line.js';\nimport {\n  asyncFocusRichText,\n  asyncSetVRange,\n} from '../utils/common-operations.js';\nimport {\n  getModelByElement,\n  getNextBlock,\n  getPreviousBlock,\n  getVirgoByModel,\n} from '../utils/query.js';\nimport {\n  focusBlockByModel,\n  focusTitle,\n  getCurrentNativeRange,\n} from '../utils/selection.js';\nimport { supportsChildren } from '../utils/std.js';\nimport type { ExtendedModel } from '../utils/types.js';\n\nexport function handleBlockEndEnter(page: Page, model: ExtendedModel) {\n  const parent = page.getParent(model);\n  const nextSibling = page.getNextSibling(model);\n  if (!parent) {\n    return;\n  }\n\n  const getProps = ():\n    | ['affine:list', Partial<BlockModelProps['affine:list']>]\n    | ['affine:paragraph', Partial<BlockModelProps['affine:paragraph']>] => {\n    const shouldInheritFlavour = matchFlavours(model, ['affine:list']);\n    if (shouldInheritFlavour) {\n      return [model.flavour, { type: model.type }];\n    }\n    return ['affine:paragraph', { type: 'text' }];\n  };\n  const [flavour, blockProps] = getProps();\n\n  if (Utils.isInsideBlockByFlavour(page, model, 'affine:database')) {\n    page.captureSync();\n    const index = parent.children.findIndex(child => child.id === model.id);\n    let newParent: BaseBlockModel = parent;\n    let newBlockIndex = index + 1;\n    const childrenLength = parent.children.length;\n\n    if (index === childrenLength - 1 && model.text?.yText.length === 0) {\n      if (childrenLength !== 1) {\n        page.deleteBlock(model);\n      }\n\n      const nextModel = page.getNextSibling(newParent);\n      if (nextModel && matchFlavours(nextModel, ['affine:paragraph'])) {\n        asyncFocusRichText(page, nextModel.id, {\n          index: nextModel.text.yText.length,\n          length: 0,\n        });\n        return;\n      }\n\n      const prevParent = page.getParent(parent);\n      if (!prevParent) return;\n      const prevIndex = prevParent.children.findIndex(\n        child => child.id === parent.id\n      );\n      newParent = prevParent;\n      newBlockIndex = prevIndex + 1;\n    }\n\n    const id = page.addBlock(flavour, blockProps, newParent, newBlockIndex);\n    asyncFocusRichText(page, id);\n    return;\n  }\n  const index = parent.children.indexOf(model);\n  if (index === -1) {\n    return;\n  }\n  // make adding text block by enter a standalone operation\n  page.captureSync();\n\n  const id = !model.children.length\n    ? page.addBlock(flavour, blockProps, parent, index + 1)\n    : // If the block has children, insert a new block as the first child\n      page.addBlock(flavour, blockProps, model, 0);\n\n  // 4. If the target block is a numbered list, update the prefix of next siblings\n  if (matchFlavours(model, ['affine:list']) && model.type === 'numbered') {\n    let next = nextSibling;\n    while (\n      next &&\n      matchFlavours(next, ['affine:list']) &&\n      model.type === 'numbered'\n    ) {\n      page.updateBlock(next, {});\n      next = page.getNextSibling(next);\n    }\n  }\n\n  asyncFocusRichText(page, id);\n}\n\nexport function handleSoftEnter(\n  page: Page,\n  model: ExtendedModel,\n  index: number,\n  length: number\n) {\n  if (!model.text) {\n    console.error('Failed to handle soft enter! No text found!', model);\n    return;\n  }\n  page.captureSync();\n  model.text.replace(index, length, '\\n');\n}\n\nexport function handleBlockSplit(\n  page: Page,\n  model: ExtendedModel,\n  splitIndex: number,\n  splitLength: number\n) {\n  if (!(model.text instanceof Text)) return;\n\n  // On press enter, it may convert symbols from yjs ContentString\n  // to yjs ContentFormat. Once it happens, the converted symbol will\n  // be deleted and not counted as model.text.yText.length.\n  // Example: \"`a`[enter]\" -> yText[<ContentFormat: Code>, \"a\", <ContentFormat: Code>]\n  // In this case, we should not split the block.\n  if (model.text.yText.length < splitIndex + splitLength) return;\n\n  const parent = page.getParent(model);\n  if (!parent) return;\n\n  page.captureSync();\n  const right = model.text.split(splitIndex, splitLength);\n\n  let newParent = parent;\n  let newBlockIndex = newParent.children.indexOf(model) + 1;\n  if (matchFlavours(model, ['affine:list']) && model.children.length > 0) {\n    newParent = model;\n    newBlockIndex = 0;\n  }\n  const children = [...model.children];\n  page.updateBlock(model, { children: [] });\n  const id = page.addBlock(\n    model.flavour,\n    {\n      text: right,\n      type: model.type,\n      children,\n    },\n    newParent,\n    newBlockIndex\n  );\n  return asyncFocusRichText(page, id);\n}\n\n/**\n * Move down\n * @example\n * ```\n * [ ]\n *  └─ [ ]\n * [x]     <- tab\n *  └─ [ ]\n *\n * ↓\n *\n * [ ]\n *  ├─ [ ]\n *  ├─ [x] <-\n *  └─ [ ]\n * ```\n */\nexport function handleIndent(page: Page, model: ExtendedModel, offset = 0) {\n  const previousSibling = page.getPreviousSibling(model);\n  const nextSibling = page.getNextSibling(model);\n  if (!previousSibling || !supportsChildren(previousSibling)) {\n    // Bottom, can not indent, do nothing\n    return;\n  }\n\n  const parent = page.getParent(model);\n  if (!parent) return;\n  page.captureSync();\n\n  // 1. backup target block children and remove them from target block\n  const children = model.children;\n  page.updateBlock(model, {\n    children: [],\n  });\n\n  // 2. remove target block from parent block\n  page.updateBlock(parent, {\n    children: parent.children.filter(child => child.id !== model.id),\n  });\n\n  // 3. append target block and children to previous sibling block\n  page.updateBlock(previousSibling, {\n    children: [...previousSibling.children, model, ...children],\n  });\n\n  // 4. If the target block is a numbered list, update the prefix of next siblings\n  if (matchFlavours(model, ['affine:list']) && model.type === 'numbered') {\n    let next = nextSibling;\n    while (\n      next &&\n      matchFlavours(next, ['affine:list']) &&\n      model.type === 'numbered'\n    ) {\n      page.updateBlock(next, {});\n      next = page.getNextSibling(next);\n    }\n  }\n\n  assertExists(model);\n  asyncSetVRange(model, { index: offset, length: 0 });\n}\n\nexport function handleMultiBlockIndent(page: Page, models: BaseBlockModel[]) {\n  if (!models.length) return;\n  const previousSibling = page.getPreviousSibling(models[0]);\n  const nextSibling = page.getNextSibling(models.at(-1) as BaseBlockModel);\n\n  if (!previousSibling || !supportsChildren(previousSibling)) {\n    // Bottom, can not indent, do nothing\n    return;\n  }\n  if (\n    !models.every((model, idx, array) => {\n      const previousModel = array.at(idx - 1);\n      if (!previousModel) {\n        return false;\n      }\n      const p1 = page.getParent(model);\n      const p2 = page.getParent(previousModel);\n      return p1 && p2 && p1.id === p2.id;\n    })\n  ) {\n    return;\n  }\n  page.captureSync();\n  const parent = page.getParent(models[0]);\n  assertExists(parent);\n  models.forEach(model => {\n    // 1. backup target block children and remove them from target block\n    const children = model.children;\n    page.updateBlock(model, {\n      children: [],\n    });\n\n    // 2. remove target block from parent block\n    page.updateBlock(parent, {\n      children: parent.children.filter(child => child.id !== model.id),\n    });\n\n    // 3. append target block and children to previous sibling block\n    page.updateBlock(previousSibling, {\n      children: [...previousSibling.children, model, ...children],\n    });\n\n    // 4. If the target block is a numbered list, update the prefix of next siblings\n    if (matchFlavours(model, ['affine:list']) && model.type === 'numbered') {\n      let next = nextSibling;\n      while (\n        next &&\n        matchFlavours(next, ['affine:list']) &&\n        model.type === 'numbered'\n      ) {\n        page.updateBlock(next, {});\n        next = page.getNextSibling(next);\n      }\n    }\n\n    assertExists(model);\n    asyncSetVRange(model, { index: 0, length: 0 });\n  });\n}\n\n/**\n * Move up\n * @example\n * ```\n * [ ]\n *  ├─ [ ]\n *  ├─ [x] <- shift + tab\n *  └─ [ ]\n *\n * ↓\n *\n * [ ]\n *  └─ [ ]\n * [x]     <-\n *  └─ [ ]\n * ```\n * Refer to https://github.com/toeverything/AFFiNE/blob/b59b010decb9c5decd9e3090f1a417696ce86f54/libs/components/editor-blocks/src/utils/indent.ts#L23-L122\n */\nexport function handleUnindent(\n  page: Page,\n  model: ExtendedModel,\n  offset = 0,\n  capture = true\n) {\n  const parent = page.getParent(model);\n  if (!parent || matchFlavours(parent, ['affine:frame'])) {\n    // Topmost, do nothing\n    return;\n  }\n\n  const grandParent = page.getParent(parent);\n  if (!grandParent) return;\n  // TODO: need better solution\n  if (capture) {\n    page.captureSync();\n  }\n\n  // 1. save child blocks of the parent block\n  const previousSiblings = page.getPreviousSiblings(model);\n  const nextSiblings = page.getNextSiblings(model);\n\n  // 2. remove all child blocks after the target block from the parent block\n  page.updateBlock(parent, {\n    children: previousSiblings,\n  });\n\n  // 3. insert target block to the grand block\n  const index = grandParent.children.indexOf(parent);\n  page.updateBlock(grandParent, {\n    children: [\n      ...grandParent.children.slice(0, index + 1),\n      model,\n      ...grandParent.children.slice(index + 1),\n    ],\n  });\n\n  // 4. append child blocks after the target block to the target block\n  page.updateBlock(model, {\n    children: [...model.children, ...nextSiblings],\n  });\n\n  // 5. If the target block is a numbered list, update the prefix of next siblings\n  const nextSibling = page.getNextSibling(model);\n  if (matchFlavours(model, ['affine:list']) && model.type === 'numbered') {\n    let next = nextSibling;\n    while (\n      next &&\n      matchFlavours(next, ['affine:list']) &&\n      model.type === 'numbered'\n    ) {\n      page.updateBlock(next, {});\n      next = page.getNextSibling(next);\n    }\n  }\n\n  assertExists(model);\n  asyncSetVRange(model, { index: offset, length: 0 });\n}\n\n// When deleting at line start of a code block,\n// select the code block itself\nfunction handleCodeBlockBackspace(page: Page, model: ExtendedModel) {\n  if (!matchFlavours(model, ['affine:code'])) return false;\n\n  focusBlockByModel(model);\n  return true;\n}\n\nfunction handleDatabaseBlockBackspace(page: Page, model: ExtendedModel) {\n  if (!Utils.isInsideBlockByFlavour(page, model, 'affine:database'))\n    return false;\n\n  return true;\n}\n\n// When deleting at line start of a list block,\n// switch it to normal paragraph block.\nfunction handleListBlockBackspace(page: Page, model: ExtendedModel) {\n  if (!matchFlavours(model, ['affine:list'])) return false;\n\n  const parent = page.getParent(model);\n  if (!parent) return false;\n\n  const index = parent.children.indexOf(model);\n  const blockProps = {\n    type: 'text' as const,\n    text: model.text?.clone(),\n    children: model.children,\n  };\n  page.captureSync();\n  page.deleteBlock(model);\n  const id = page.addBlock('affine:paragraph', blockProps, parent, index);\n  asyncFocusRichText(page, id);\n  return true;\n}\n\nfunction handleParagraphDeleteActions(page: Page, model: ExtendedModel) {\n  function handleParagraphOrListSibling(\n    page: Page,\n    model: ExtendedModel,\n    previousSibling: ExtendedModel | null,\n    parent: ExtendedModel\n  ) {\n    if (\n      !previousSibling ||\n      !matchFlavours(previousSibling, ['affine:paragraph', 'affine:list'])\n    )\n      return false;\n\n    page.captureSync();\n    const preTextLength = previousSibling.text?.length || 0;\n    model.text?.length && previousSibling.text?.join(model.text as Text);\n    page.deleteBlock(model, {\n      bringChildrenTo: parent,\n    });\n    const vEditor = getVirgoByModel(previousSibling);\n    vEditor?.setVRange({\n      index: preTextLength,\n      length: 0,\n    });\n    return true;\n  }\n\n  function handleEmbedDividerCodeSibling(\n    page: Page,\n    model: ExtendedModel,\n    previousSibling: ExtendedModel | null\n  ) {\n    if (\n      !previousSibling ||\n      !matchFlavours(previousSibling, [\n        'affine:embed',\n        'affine:divider',\n        'affine:code',\n      ] as const)\n    )\n      return false;\n\n    focusBlockByModel(previousSibling);\n    if (!model.text?.length) {\n      page.captureSync();\n      page.deleteBlock(model);\n    }\n    return true;\n  }\n\n  function handleNoPreviousSibling(\n    page: Page,\n    model: ExtendedModel,\n    previousSibling: ExtendedModel | null\n  ) {\n    if (previousSibling) return false;\n\n    const text = model.text;\n    const titleElement = document.querySelector(\n      '.affine-default-page-block-title'\n    ) as HTMLTextAreaElement;\n    const pageModel = getModelByElement(titleElement) as PageBlockModel;\n    const title = pageModel.title;\n\n    page.captureSync();\n    let textLength = 0;\n    if (text) {\n      textLength = text.length;\n      title.join(text);\n    }\n    page.deleteBlock(model);\n    focusTitle(page, title.length - textLength);\n    return true;\n  }\n\n  const parent = page.getParent(model);\n  if (!parent) return false;\n  const previousSibling = getPreviousBlock(model);\n\n  if (matchFlavours(parent, ['affine:database'])) {\n    if (previousSibling) {\n      page.deleteBlock(model);\n      focusBlockByModel(previousSibling);\n      return true;\n    } else {\n      return handleNoPreviousSibling(page, model, previousSibling);\n    }\n  } else if (matchFlavours(parent, ['affine:frame'])) {\n    return (\n      handleParagraphOrListSibling(page, model, previousSibling, parent) ||\n      handleEmbedDividerCodeSibling(page, model, previousSibling) ||\n      handleNoPreviousSibling(page, model, previousSibling)\n    );\n  }\n\n  return false;\n}\n\nfunction handleParagraphBlockBackspace(page: Page, model: ExtendedModel) {\n  if (!matchFlavours(model, ['affine:paragraph'])) return false;\n\n  // When deleting at line start of a paragraph block,\n  // firstly switch it to normal text, then delete this empty block.\n  if (model.type !== 'text') {\n    // Try to switch to normal text\n    page.captureSync();\n    page.updateBlock(model, { type: 'text' });\n    return true;\n  }\n\n  const isHandled = handleParagraphDeleteActions(page, model);\n  if (isHandled) return true;\n\n  // Before\n  // - line1\n  //   - | <- cursor here, press backspace\n  //   - line3\n  //\n  // After\n  // - line1\n  // - | <- cursor here\n  //   - line3\n  handleUnindent(page, model);\n  return true;\n}\n\nfunction handleUnknownBlockBackspace(model: ExtendedModel) {\n  throw new Error(\n    'Failed to handle backspace! Unknown block flavours! flavour:' +\n      model.flavour\n  );\n}\n\nexport function handleLineStartBackspace(page: Page, model: ExtendedModel) {\n  if (\n    handleCodeBlockBackspace(page, model) ||\n    handleListBlockBackspace(page, model) ||\n    handleParagraphBlockBackspace(page, model)\n  ) {\n    handleDatabaseBlockBackspace(page, model);\n    return;\n  }\n\n  handleUnknownBlockBackspace(model);\n}\n\nexport function handleKeyUp(event: KeyboardEvent, editableContainer: Element) {\n  const range = getCurrentNativeRange();\n  if (!range.collapsed) {\n    // If the range is not collapsed,\n    // we assume that the caret is at the start of the range.\n    range.collapse(true);\n  }\n  const isFirstLine = checkFirstLine(range, editableContainer);\n  if (isFirstLine) {\n    // If the caret is at the first line of the block,\n    // default behavior will move the caret to the start of the line,\n    // which is not expected. so we need to prevent default behavior.\n    return PREVENT_DEFAULT;\n  }\n  // Avoid triggering hotkey bindings\n  event.stopPropagation();\n  return ALLOW_DEFAULT;\n}\n\nexport function handleKeyDown(\n  block: BaseBlockModel,\n  event: KeyboardEvent,\n  editableContainer: HTMLElement\n) {\n  const range = getCurrentNativeRange();\n  if (!range.collapsed) {\n    // If the range is not collapsed,\n    // we assume that the caret is at the end of the range.\n    range.collapse();\n  }\n  const isLastLine = checkLastLine(range, editableContainer);\n  if (isLastLine) {\n    // When the cursor is at the last line of the block,\n    // default ArrowDown behavior will move the cursor to the end of the line\n    // If the block is the last block of the page,\n    // we want the cursor to move to next block instead of the end of the line,\n    // thus we should prevent the default behavior.\n    // If the block is the last block of the page,\n    // let the cursor move to the end of line as default.\n    return getNextBlock(block) ? PREVENT_DEFAULT : ALLOW_DEFAULT;\n  }\n  // Avoid triggering hotkey bindings\n  event.stopPropagation();\n  return ALLOW_DEFAULT;\n}\n"],
  "mappings": "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",
  "names": ["exports", "module", "merge", "exports", "module", "t", "d", "n", "r", "c", "a", "e", "o", "s", "l", "f", "u", "K", "b", "z", "P", "x", "D", "I", "M", "C", "E", "p", "S", "G", "T", "Y", "v", "L", "V", "N", "W", "O", "F", "U", "J", "Q", "i", "h", "m", "g", "_", "exports", "module", "exports", "module", "create", "style", "wrap", "define", "keys", "color", "custom", "exports", "len", "i", "len2", "exports", "d", "c", "exports", "Buffer", "length", "from", "b", "copy", "a", "x", "max", "i", "write", "ext", "byteLength", "last", "min", "E", "c", "a", "b", "c", "d", "z", "exports", "module", "a", "b", "exports", "module", "expand", "N", "x", "c", "z", "_a", "global", "v", "NODE_MODE", "global", "_a", "_b", "v", "c", "DEV_MODE", "NODE_MODE", "global", "debugLogEvent", "issueWarning", "_a", "_b", "_c", "trustedTypes", "d", "html", "match", "tag", "strings", "_options", "_d", "from", "element", "v", "emptyStringForBooleanAttribute", "polyfillSupport", "DEV_MODE", "issueWarning", "_a", "_b", "polyfillSupport", "finalized", "_c", "DEV_MODE", "issueWarning", "svg", "d", "filter", "state", "v", "map", "range", "isPrimitive", "a", "a", "isPrimitive", "b", "x", "resolve", "a", "b", "isNaN", "c", "id", "uuidv4", "nanoid", "_a", "id", "uuidv4", "_b", "state", "response", "request", "util", "keys", "objectUtil", "t", "map", "params", "path", "x", "errorUtil", "errorMap", "_a", "args", "ctx", "min", "max", "result", "_b", "_c", "_d", "issues", "types", "a", "b", "elements", "element", "processed", "ZodFirstPartyTypeKind", "v", "map", "create", "from", "isArray", "create", "_f", "args", "from", "match", "v", "length", "a", "b", "length", "args", "a", "b", "a", "b", "length", "isNaN", "parseInt", "create", "create", "length", "a", "length", "length", "d", "append", "isArray", "keys", "v", "v", "v", "create", "create", "create", "create", "args", "color", "create", "args", "style", "create", "createModuleLogger", "filter", "id", "a", "b", "length", "from", "i", "state", "create", "resolve", "doc", "t", "any", "c", "filter", "clientid", "snapshot", "struct", "hasContent", "isArray", "keys", "path", "marker", "v", "map", "text", "query", "element", "item", "Text", "doc", "length", "_a", "Text", "doc", "state", "createModuleLogger", "id", "doc", "import_merge", "id", "doc", "map", "text", "value", "v", "x", "_a", "_b", "color", "all", "tag", "args", "value", "map", "Generator", "id", "nanoid", "uuidv4", "_a", "_b", "Text", "isPrimitive", "isSurface", "element", "ErrorCode", "_a", "doc", "a", "id", "uuidv4", "yBlock", "element", "isWeb", "id", "doc", "Text", "parent", "_b", "_a", "parentModel", "model", "index", "__decorate", "import_buffer", "text", "_a", "doc", "_a", "FlexSearch", "text", "doc", "query", "keys", "_a", "id", "id", "doc", "_a", "c", "u", "unescape", "c", "_a", "_b", "_c", "start", "final", "unescape", "i", "acc", "ext", "_hasMagic", "escape", "ext", "qmark", "star", "a", "b", "expand", "regExpEscape", "args", "escape", "unescape", "id", "keys", "query", "resolve", "reject", "_a", "element", "Text", "page", "a", "_a", "importIdentifier", "node", "nextRange", "BrushSize", "isEmpty", "_a", "c", "a", "b", "args", "min", "max", "v", "query", "x", "t", "a", "b", "min", "max", "element", "_a", "_b", "_a", "_b", "_a", "NODE_MODE", "global", "_a", "c", "_a", "VirgoElement", "__decorate", "VirgoLine", "__decorate", "VText", "__decorate", "text", "_a", "element", "text", "element", "text", "_a", "_b", "element", "a", "b", "text", "v", "ChildPart", "ENABLE_SHADYDOM_NOPATCH", "wrap", "_a", "_b", "createMarker", "wrap", "ChildPart", "_a", "map", "keys", "_a", "repeat", "length", "from", "element", "repeat", "_a", "text", "_b", "_c", "_a", "text", "match", "doc", "_a", "_b", "x", "isPageMode", "element", "id", "_c", "text", "a", "b", "last", "map", "resolve", "reject", "element", "_a", "element", "element", "element", "isEmbed", "isDatabase", "state", "_a", "_b", "id", "d", "elements", "element", "DropFlags", "isDatabase", "_a", "resolve", "id", "prefix", "_b", "_c", "_d", "_e", "element", "_a", "index", "id", "length", "Text", "page", "model", "previousSibling", "parent", "_b", "_c", "text"]
}
